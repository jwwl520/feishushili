!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).__lark_sec_sdk={})}(this,(function(t){"use strict";var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e={exports:{}};var r,i={exports:{}};function o(){return r||(r=1,function(t,e){var r;t.exports=(r=r||function(t,e){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==n&&n.crypto&&(r=n.crypto),!r)try{r=e("crypto")}catch(t){}var i=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function t(){}return function(n){var e;return t.prototype=n,e=new t,t.prototype=null,e}}(),a={},s=a.lib={},c=s.Base={extend:function(t){var n=o(this);return t&&n.mixIn(t),n.hasOwnProperty("init")&&this.init!==n.init||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},u=s.WordArray=c.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||l).stringify(this)},concat:function(t){var n=this.words,e=t.words,r=this.sigBytes,i=t.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var a=e[o>>>2]>>>24-o%4*8&255;n[r+o>>>2]|=a<<24-(r+o)%4*8}else for(var s=0;s<i;s+=4)n[r+s>>>2]=e[s>>>2];return this.sigBytes+=i,this},clamp:function(){var n=this.words,e=this.sigBytes;n[e>>>2]&=4294967295<<32-e%4*8,n.length=t.ceil(e/4)},clone:function(){var t=c.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var n=[],e=0;e<t;e+=4)n.push(i());return new u.init(n,t)}}),f=a.enc={},l=f.Hex={stringify:function(t){for(var n=t.words,e=t.sigBytes,r=[],i=0;i<e;i++){var o=n[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(t){for(var n=t.length,e=[],r=0;r<n;r+=2)e[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new u.init(e,n/2)}},d=f.Latin1={stringify:function(t){for(var n=t.words,e=t.sigBytes,r=[],i=0;i<e;i++){var o=n[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var n=t.length,e=[],r=0;r<n;r++)e[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new u.init(e,n)}},h=f.Utf8={stringify:function(t){try{return decodeURIComponent(escape(d.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return d.parse(unescape(encodeURIComponent(t)))}},p=s.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=h.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(n){var e,r=this._data,i=r.words,o=r.sigBytes,a=this.blockSize,s=o/(4*a),c=(s=n?t.ceil(s):t.max((0|s)-this._minBufferSize,0))*a,f=t.min(4*c,o);if(c){for(var l=0;l<c;l+=a)this._doProcessBlock(i,l);e=i.splice(0,c),r.sigBytes-=f}return new u.init(e,f)},clone:function(){var t=c.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});s.Hasher=p.extend({cfg:c.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(n,e){return new t.init(e).finalize(n)}},_createHmacHelper:function(t){return function(n,e){return new y.HMAC.init(t,e).finalize(n)}}});var y=a.algo={};return a}(Math),r)}(i)),i.exports}var a,s={exports:{}};function c(){return a||(a=1,function(t,n){var e;t.exports=(e=o(),function(t){var n=e,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.algo,s=[],c=[];!function(){function n(n){for(var e=t.sqrt(n),r=2;r<=e;r++)if(!(n%r))return!1;return!0}function e(t){return 4294967296*(t-(0|t))|0}for(var r=2,i=0;i<64;)n(r)&&(i<8&&(s[i]=e(t.pow(r,.5))),c[i]=e(t.pow(r,1/3)),i++),r++}();var u=[],f=a.SHA256=o.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(t,n){for(var e=this._hash.words,r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],f=e[5],l=e[6],d=e[7],h=0;h<64;h++){if(h<16)u[h]=0|t[n+h];else{var p=u[h-15],y=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,v=u[h-2],w=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;u[h]=y+u[h-7]+w+u[h-16]}var g=r&i^r&o^i&o,_=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),m=d+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&f^~s&l)+c[h]+u[h];d=l,l=f,f=s,s=a+m|0,a=o,o=i,i=r,r=m+(_+g)|0}e[0]=e[0]+r|0,e[1]=e[1]+i|0,e[2]=e[2]+o|0,e[3]=e[3]+a|0,e[4]=e[4]+s|0,e[5]=e[5]+f|0,e[6]=e[6]+l|0,e[7]=e[7]+d|0},_doFinalize:function(){var n=this._data,e=n.words,r=8*this._nDataBytes,i=8*n.sigBytes;return e[i>>>5]|=128<<24-i%32,e[14+(i+64>>>9<<4)]=t.floor(r/4294967296),e[15+(i+64>>>9<<4)]=r,n.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});n.SHA256=o._createHelper(f),n.HmacSHA256=o._createHmacHelper(f)}(Math),e.SHA256)}(s)),s.exports}var u,f={exports:{}};!function(t,n){var e;t.exports=(e=o(),c(),u||(u=1,function(t,n){var e,r,i;t.exports=(r=(e=o()).lib.Base,i=e.enc.Utf8,void(e.algo.HMAC=r.extend({init:function(t,n){t=this._hasher=new t.init,"string"==typeof n&&(n=i.parse(n));var e=t.blockSize,r=4*e;n.sigBytes>r&&(n=t.finalize(n)),n.clamp();for(var o=this._oKey=n.clone(),a=this._iKey=n.clone(),s=o.words,c=a.words,u=0;u<e;u++)s[u]^=1549556828,c[u]^=909522486;o.sigBytes=a.sigBytes=r,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var n=this._hasher,e=n.finalize(t);return n.reset(),n.finalize(this._oKey.clone().concat(e))}})))}(f)),e.HmacSHA256)}(e);var l=e.exports,d={exports:{}};!function(t,n){var e;t.exports=(e=o(),function(){if("function"==typeof ArrayBuffer){var t=e.lib.WordArray,n=t.init,r=t.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var e=t.byteLength,r=[],i=0;i<e;i++)r[i>>>2]|=t[i]<<24-i%4*8;n.call(this,r,e)}else n.apply(this,arguments)};r.prototype=t}}(),e.lib.WordArray)}(d);var h=d.exports;
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */function p(t,n,e,r){return new(e||(e=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var n;t.done?i(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,s)}c((r=r.apply(t,n||[])).next())}))}function y(t,n){var e,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=n.call(t,a)}catch(t){o=[6,t],r=0}finally{e=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var v=Object.prototype.toString;var w={mousedown:m,mouseup:m,mousemove:m,keydown:_,keyup:_,touchstart:m,touchend:m,touchmove:m},g={mouse:!1,keyboard:!1};function _(t){t.isTrusted&&(g.keyboard=!0)}function m(t){t.isTrusted&&(g.mouse=!0)}for(var b in w)document.addEventListener(b,w[b]);setTimeout((function(){for(var t in w)document.removeEventListener(t,w[t])}),6e5);var x=["__webdriver_evaluate","__selenium_evaluate","__webdriver_script_function","__webdriver_script_func","__webdriver_script_fn","__fxdriver_evaluate","__driver_unwrapped","__webdriver_unwrapped","__driver_evaluate","__selenium_unwrapped","__fxdriver_unwrapped"],A=["_phantom","__nightmare","_selenium","callPhantom","callSelenium","_Selenium_IDE_Recorder"];var B=[function(){return!!window&&(!!console.firebug||(window.outerWidth-window.innerWidth>100||window.outerHeight-window.innerHeight>100))},function(){return document.createElement("canvas").toDataURL.toString().replace(/\s*/g,"").indexOf("nativecode")<0||navigator.toString.toString().replace(/\s*/g,"").indexOf("nativecode")<0||"[object PluginArray]"!==navigator.plugins.toString()},function(){var t,n="[object Window]"===v.call(window)&&"[object Navigator]"===v.call(navigator)&&-1!==v.call(document).indexOf("Document")&&"object"==typeof location;try{t="[object process]"===v.call(global.process)}catch(n){t=!1}return!(n&&!t)},function(){return"file:"===location.href||"localhost"===location.hostname||/[0-9]{1,3}(?:\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(?:[a-f0-9]{1,4}){7}/.test(location.hostname)},function(){var t,n;for(var e in A){if(window[A[e]])return!0}for(var r in x){var i=x[r];if(window.document[i])return!0}for(var o in window.document)if(o.match(/\$[a-z]dc_/)&&window.document[o].cache_)return!0;return-1!==(null===(n=null===(t=window.external)||void 0===t?void 0:t.toString())||void 0===n?void 0:n.indexOf("Sequentum"))||(!!window.document.documentElement.getAttribute("selenium")||(!!window.document.documentElement.getAttribute("webdriver")||!!window.document.documentElement.getAttribute("driver")))},function(){return!g.keyboard},function(){return!g.mouse}];function S(t,n){var e="string"==typeof t?t:h.create(t);return l(e,n).toString()}function U(t,n,e){void 0===e&&(e=Math.floor(Date.now()/1e3).toString());var r="auth-v1/".concat(e),i=S(r,t),o=S(n,i);return"".concat(r,"/").concat(o)}function k(t,n,e){var r="auth-v2/".concat(e),i=S(r,t),o=S(n,i);return"".concat(r,"/").concat(o)}var H="x-secsdk-service-auth";function T(){return p(this,void 0,void 0,(function(){var t,n,e,r,i,o,a,s,c,u,f;return y(this,(function(l){switch(l.label){case 0:if(t=C,n=L(),!t||"string"!=typeof n)return[2];l.label=1;case 1:return l.trys.push([1,4,,5]),e=B.reduce((function(t,n,e){return t|Number(n())<<e}),0),r=U(n,"_signature=".concat(e.toString())),[4,fetch("".concat(t,"?_signature=").concat(e),{method:"GET",headers:(f={},f[H]=r,f)})];case 2:return(i=l.sent()).ok&&(o=i.headers.get(H))?[4,i.text()]:[2];case 3:return a=l.sent(),s=function(t){try{return JSON.parse(t)}catch(t){return{}}}(a),(c=s.sec_token)?(u=o.split("/")[1],U(n,a,u)!==o?[2]:[2,c]):[2];case 4:return l.sent(),[2,void 0];case 5:return[2]}}))}))}var z=3,E=1e4;function O(){return p(this,void 0,void 0,(function(){var t,n,e=this;return y(this,(function(r){return t=z,n=function(){return p(e,void 0,void 0,(function(){var e;return y(this,(function(r){switch(r.label){case 0:return t--,[4,T()];case 1:return void 0===(e=r.sent())&&t>=0?[2,new Promise((function(t){return setTimeout((function(){return t(n())}),E)}))]:[2,e]}}))}))},[2,n()]}))}))}var j,C,I=null;function P(){return p(this,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return[4,O()];case 1:return(t=n.sent())&&(I=t),[2]}}))}))}function R(){return I}function L(){return j}function D(t){return void 0===t&&(t=null),p(this,void 0,void 0,(function(){var n;return y(this,(function(e){switch(e.label){case 0:return null===t?[2,new Uint8Array]:"string"==typeof t||t instanceof String||t instanceof URLSearchParams?[2,(new TextEncoder).encode(t.toString())]:function(t){return t instanceof ArrayBuffer||"function"==typeof SharedArrayBuffer&&t instanceof SharedArrayBuffer}(t)?[2,new Uint8Array(t)]:t instanceof Blob?(n=Uint8Array.bind,[4,(r=t,"function"==typeof r.arrayBuffer?r.arrayBuffer():new Response(r).arrayBuffer())]):[3,2];case 1:return[2,new(n.apply(Uint8Array,[void 0,e.sent()]))];case 2:return[2,new Uint8Array(t.buffer)]}var r}))}))}setInterval(P,6e5),t.setEnv=function(t,n){C=t,j=n,P()},t.signRequest=function(t){return p(this,void 0,void 0,(function(){var n,e,r,i,o,a,s,c;return y(this,(function(u){switch(u.label){case 0:return n=t.body,e=t.query,r=void 0===e?"":e,n instanceof Document||n instanceof FormData?[2,null]:(i=R(),o=L(),i&&"string"==typeof o?[4,D(n)]:[2,null]);case 1:return a=u.sent(),s=(new TextEncoder).encode(r),(c=new Uint8Array(new ArrayBuffer(a.byteLength+s.byteLength))).set(a),c.set(s,a.length),[2,k(o,c,i)]}}))}))},Object.defineProperty(t,"__esModule",{value:!0})}));
