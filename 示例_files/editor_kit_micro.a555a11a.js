(self.webpackChunkbear_fe=self.webpackChunkbear_fe||[]).push([["vsh_4414"],{vsh_95065:function(t,e,n){"use strict";n.d(e,{u:function(){return d}});var i=n("vsh_80018"),r=n("vsh_40285"),o=n("vsh_37075"),s=n("vsh_83927"),a=(n("vsh_44960"),n("vsh_80055"));function l(t){return["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","th","tr","ul","video"].includes(t.nodeName.toLowerCase())}function u(t){return t.nodeType===Node.TEXT_NODE&&"\n"===t.textContent}function c(t){return t.hasChildNodes()||t.textContent||"img"===t.nodeName.toLowerCase()}var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="BlockElementDeserializer",e}return(0,i.c)(e,t),e.prototype.deserialize=function(t){var e=t.node,n=t.deltaSet,i=t.zoneId;t=n.get(i)instanceof r.I;if(e instanceof Element&&t){var s=new o.D;return n.forEach((function(t,n){var o;t instanceof r.I&&n===i?"BR"!==(n=e.tagName)||(0,a.f)(t,"\n")?l(e)?"DIV"===n&&!e.hasChildNodes()&&e.nextSibling&&l(e.nextSibling)&&e.nextSibling.hasChildNodes()?s.concat(t):(o=new r.I(t),function(t){for(var e=t.previousSibling;e;){if(l(e)||u(e))return!1;if(c(e))return!0;e=e.previousSibling}return!1}(e)&&e.hasChildNodes()&&(o=new r.I({zoneId:i}).insertEnter().concat(t)),(0,a.f)(t,"\n")||o.insertEnter(),s=s.concat(o)):s=s.concat(t):((o=t.create(t)).insertEnter(),s=s.concat(o)):s=s.concat(t)})),s}return n},e}(s.S)},vsh_35838:function(t,e,n){"use strict";n.d(e,{r:function(){return h}});var i=n("vsh_80018"),r=n("vsh_15808"),o=n("vsh_40285"),s=n("vsh_37075"),a=n("vsh_83927"),l=n("vsh_70597"),u=[/[\b]/g,new RegExp(String.fromCharCode(8203),"g")];function c(t){var e=t;return u.forEach((function(t){return e=e.replace(t,"")})),e}function d(t){return t.replace(/\r/g," ").replace(/\xa0/g," ").replace(/\t/g," ".repeat(8))}var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="TextNodeDeserializer",e}return(0,i.c)(e,t),e.prototype.deserialize=function(t){var e=t.node,n=t.deltaSet,i=t.zoneId,a=t.text,u=t.types;if(u.includes("text/html")){if((0,l.y1)(e)){var h=null!==(t=e.nodeValue)&&void 0!==t?t:"",f="",p=0,v=!1;if(0===h.trim().length&&"body"===(null===(t=e.parentElement)||void 0===t?void 0:t.tagName.toLowerCase()))return n.concat(new o.I({zoneId:i}));for(var g=e.parentNode;g;){if(g instanceof HTMLElement){var y=g.tagName,m=g.style;if("pre"===y.toLowerCase()){v=!0;break}if(m.whiteSpace){v=m.whiteSpace.startsWith("pre");break}}g=g.parentNode}e=new s.D;for(var _,b,E=new o.I({zoneId:i});0<h.length;)v?(_=h.includes("\n"),p=(b=h.split("\n",1)[0]).length+1,f=h.substring(p),E.insert(d(c(h=b))),h=f,_&&E.insertEnter()):(f="",h=(h=h.replace(/\r\n/g," ").replace(/[\r\n]/g," ")).replace(/\s{2,}/g,(function(t){return t.replace(/[^\u00a0]+/g," ")})),E.insert(d(c(h))),h=f);return e.concat(E)}}else if(u.includes("text/plain")&&a)return(new s.D).concat((new o.I).insert(d((0,r.$)(c(a)))));return n},e}(a.S)},vsh_47786:function(t,e,n){"use strict";n.d(e,{c5:function(){return o},Q2:function(){return u},HY:function(){return a},mX:function(){return c},Z6:function(){return s},K6:function(){return r},iC:function(){return i},fF:function(){return l}});var i="application/x-editor-kit-fragment",r="application/x-editor-kit-business-key",o={underline:"u",bold:"b",blockquote:"blockquote",italic:"i",strikethrough:"s"},s="ignore-collect",a="COPY_WITHOUT_PERMISSION",l="data-multiple-line-wrap",u="AT_USER_BLOCK",c="data-line"},vsh_78638:function(t,e,n){"use strict";var i,r;n.d(e,{T:function(){return i}}),(r=i=i||{}).LEAF="leaf",r.LINE="line",r.ROOT="root"},vsh_92563:function(t,e,n){"use strict";n.d(e,{Xh:function(){return A},vu:function(){return a},WZ:function(){return s}});var i=window.User&&window.User.userAgent||navigator.userAgent||"";function r(t){return(t=i.match(t))&&1<t.length&&t[1]||""}function o(){if(function(){var t=navigator.userAgent;return 0<t.indexOf("iPhone")||0<t.indexOf("iPad")||0<t.indexOf("iPhone")}()){var t=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/);return t?{major:+t[1],minor:+t[2]}:null}return null}function s(){var t=o();return!!t&&t.major<12}function a(){var t=navigator.userAgent.match(/Chrome\/([\d.]+)/i);return t&&t[1]?t[1]:null}var l,u,c,d=r(/(ipod|iphone|ipad)/i).toLowerCase(),h=/windows phone/i.test(i),f=/nexus\s*[0-6]\s*/i.test(i),p=/like android/i.test(i),v=!h&&/windows/i.test(i),g=/chrome|crios|crmo/i.test(i),y=/firefox|iceweasel|fxios/i.test(i),m=/safari|applewebkit/i.test(i)&&!g&&!y,_=(c=/edg([ea]|ios)\/(\d+(\.\d+)?)/i,(c=i.match(c))&&1<c.length&&c[2]||""),b=!_&&h||/msie|trident/i.test(i),E=/silk/i.test(i),S=!d&&!E&&/macintosh/i.test(i),w=!h&&d,C=/Firefox/i.test(i),I=/iPad/i.test(i)||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints,T=h&&_||/edg([ea]|ios)/i.test(i),x=/Edge/i.test(i),k=/tablet/i.test(i)&&!/tablet pc/i.test(i),M=!p&&-1<i.indexOf("Android")||-1<i.indexOf("Adr"),R=!k&&/[^-]mobi/i.test(i)||"iphone"===d||"ipod"===d||M||f,P=/feishu/i.test(i)||/lark/i.test(i),O=!!i.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),L=/Docs/i.test(i),D=S||O,A={modernIE:!1,isAndroid:M,lark:P,isIOS:O,android:M,windows:v,firefox:y,safari:m,msie:b,isMac:S,ios:w,isFF:C,isIPad:I,msedge:T,chrome:g,isEdge:x,oldIE:!1,mobile:R,isBytedanceApp:P||L,isIOSBelow12:s(),getIOSVersion:o,isMacOSX:D,isChromeBefore86:function(){var t=a();return t&&parseInt(t)<=86}(),isTouchDevice:navigator.maxTouchPoints||"ontouchstart"in document.documentElement};b&&(l="",h&&!_?l=r(/iemobile\/(\d+(\.\d+)?)/i):/msie|trident/i.test(i)&&(l=r(/(?:msie |rv:)(\d+(\.\d+)?)/i)),u=parseInt(l,10),A.oldIE=u<11,A.modernIE=11<=u)},vsh_95066:function(t,e,n){"use strict";n.d(e,{r0:function(){return E},Pk:function(){return _},ip:function(){return S},q7:function(){return d},WV:function(){return b},eu:function(){return p},lE:function(){return a},VD:function(){return i},MB:function(){return l},PI:function(){return u},e0:function(){return f},nV:function(){return c},cH:function(){return h},sq:function(){return m},VI:function(){return o},T6:function(){return s},Ks:function(){return g},P9:function(){return v},Ed:function(){return y}});var i,r,o="data-zero-space",s="​",a="data-inline-wrapper",l="data-leaf",u="data-node",c="data-string",d="data-enter",h="editor-kit",f="data-ssr",p="data-fake-text",v="data-zone-id",g="data-zone-container",y=s,m="data-void",_="data-rect-container";(r=i=i||{})[r.BackSpace=8]="BackSpace",r[r.Tab=9]="Tab",r[r.Clear=12]="Clear",r[r.Enter=13]="Enter",r[r.Shift=16]="Shift",r[r.Ctrl=17]="Ctrl",r[r.Alt=18]="Alt",r[r.CapsLock=20]="CapsLock",r[r.Esc=27]="Esc",r[r.Space=32]="Space",r[r.PageUp=33]="PageUp",r[r.PageDown=34]="PageDown",r[r.End=35]="End",r[r.Home=36]="Home",r[r.Left=37]="Left",r[r.Up=38]="Up",r[r.Right=39]="Right",r[r.Down=40]="Down",r[r.Insert=45]="Insert",r[r.Delete=46]="Delete",r[r.Digit0=48]="Digit0",r[r.Digit9=57]="Digit9",r[r.A=65]="A",r[r.B=66]="B",r[r.C=67]="C",r[r.D=68]="D",r[r.E=69]="E",r[r.F=70]="F",r[r.G=71]="G",r[r.H=72]="H",r[r.I=73]="I",r[r.J=74]="J",r[r.K=75]="K",r[r.L=76]="L",r[r.M=77]="M",r[r.N=78]="N",r[r.O=79]="O",r[r.P=80]="P",r[r.Q=81]="Q",r[r.R=82]="R",r[r.S=83]="S",r[r.T=84]="T",r[r.U=85]="U",r[r.V=86]="V",r[r.W=87]="W",r[r.X=88]="X",r[r.Y=89]="Y",r[r.Z=90]="Z",r[r.Meta=91]="Meta",r[r.RightMeta=92]="RightMeta",r[r.BracketRightKeyDown=93]="BracketRightKeyDown",r[r.Caret=94]="Caret",r[r.Numpad0=96]="Numpad0",r[r.Numpad9=105]="Numpad9",r[r.NumpadDot=110]="NumpadDot",r[r.F11=122]="F11",r[r.Semicolon=186]="Semicolon",r[r.Plus=187]="Plus",r[r.Minus=189]="Minus",r[r.Dot=190]="Dot",r[r.Grave=192]="Grave",r[r.Bracket=219]="Bracket",r[r.Quot=222]="Quot",r[r.Asterisk=106]="Asterisk",r[r.Slash=111]="Slash",r[r["/"]=191]="/",r[r["\\"]=220]="\\",r[r.Ime=229]="Ime";var b,E="ace-line",S="dirtyDomWithoutChangeset";!function(t){t[t.FATAL=0]="FATAL",t[t.ERROR=1]="ERROR"}(b=b||{})},vsh_44960:function(){var t=Node.prototype.removeChild;function e(e){return e.parentNode!==this&&this instanceof HTMLElement&&this.closest(".editor-kit-container")?e:t.call(this,e)}Element.prototype.removeChild=e,Node.prototype.removeChild=e},vsh_87296:function(t,e,n){"use strict";n.d(e,{cc:function(){return p},Kw:function(){return i},jn:function(){return h},Or:function(){return f}});var i,r,o=n("vsh_80018"),s=n("vsh_98650"),a=n("vsh_45832"),l=n("vsh_98125"),u=n.n(l),c=n("vsh_83079"),d=n("vsh_98681");(r=i=i||{}).IMG="img",r.TEXT="span",r.VIEW="div";var h=function(){function t(){}return t.prototype.componentDidMount=function(){},t}();function f(t){var e;function n(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=e.apply(this,(0,o.d)([],(0,o._)(t),!1))||this;return i.option={},i._events={},i._selected=!1,i._ref=u().createRef(),i._prevSel=null,i._handleEditorSelectionChange=function(){if(i.option.selectEventEnabled){var t,e,n,r=i.editor.selection.getSelection(),o=!i._prevSel&&r.isCollapsed()||(null===(t=i._prevSel)||void 0===t?void 0:t.isCollapsed())&&r.isCollapsed();if(i._prevSel=r,!o){try{e=(0,d.Ve)(i._ref.current,i.editor)}catch(t){}e&&(t=r.start,o=r.end,r=e.start,e=e.end,(o=t.zoneId===r.zoneId&&t<=r&&e<=o)&&!i._selected?(n=i._events.select,i._selected=!0,null!=n&&n.call(n)):!o&&i._selected&&(n=i._events.deselect,i._selected=!1,null!=n&&n.call(n)))}}},i.editor=t[0].provides.editor,i}return e=t,(0,o.c)(n,e),n.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this),this.updateEventCb(),this._bindEditorEvents()},n.prototype.componentDidUpdate=function(t){this.updateEventCb()},n.prototype.componentWillUnmount=function(){this.editor.off(a.r.SELECTION_CHANGE_AND_DOM_UPDATE,this._handleEditorSelectionChange)},n.prototype.updateEventCb=function(){var t=this;this._events=Object.keys(this.props).filter((function(t){return t.startsWith("on")})).reduce((function(e,n){return e[(0,d.Le)(n)]=t.props[n],e}),{})},n.prototype._bindEditorEvents=function(){var t=this;this.option.selectEventEnabled&&d.ZG.find((function(e){return t._events[e]}))&&this.editor.on(a.r.SELECTION_CHANGE_AND_DOM_UPDATE,this._handleEditorSelectionChange)},n.prototype._triggerEventCallback=function(t,e){var n=this._events[t.type],i=(0,d.Br)(t);n&&(d.Dg.includes((0,d.J$)(e))&&(t=(0,d.Ve)(t.currentTarget,this.editor),i.evtTargetSelection=t),n.call(n,i))},n.prototype._handleSynthesisEvents=function(t){this._triggerEventCallback(t,t.nativeEvent)},(0,o.a)([s.W],n.prototype,"_bindEditorEvents",null),(0,o.a)([s.W],n.prototype,"_triggerEventCallback",null),(0,o.a)([s.W],n.prototype,"_handleSynthesisEvents",null),n}var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.editor=e.context,e.option={},e._events={},e._selected=!1,e._ref=u().createRef(),e._prevSel=null,e}(0,o.c)(e,t);var n=e.prototype;return n.componentDidMount=function(){this.updateEventCb(),this.editor=this.context,this._bindEditorEvents()},n.componentDidUpdate=function(t){this.updateEventCb()},n.componentWillUnmount=function(){this.editor.off(a.r.SELECTION_CHANGE_AND_DOM_UPDATE,this._handleEditorSelectionChange)},n.updateEventCb=function(){var t=this;this._events=Object.keys(this.props).filter((function(t){return t.startsWith("on")})).reduce((function(e,n){return e[(0,d.Le)(n)]=t.props[n],e}),{})},n._bindEditorEvents=function(){var t=this;this.option.selectEventEnabled&&d.ZG.find((function(e){return t._events[e]}))&&this.editor.on(a.r.SELECTION_CHANGE_AND_DOM_UPDATE,this._handleEditorSelectionChange)},n._handleEditorSelectionChange=function(){if(this.option.selectEventEnabled){var t,e,n,i,r=null;try{r=(0,d.Ve)(this._ref.current,this.editor)}catch(t){}r&&(n=!(e=this.editor.selection.getSelection(r.start.zoneId))||!this._prevSel&&e.isCollapsed()||(null===(t=this._prevSel)||void 0===t?void 0:t.isCollapsed())&&e.isCollapsed(),this._prevSel=e,n||(t=e.start,n=e.end,e=r.start,r=r.end,(n=t.zoneId===e.zoneId&&t<=e&&r<=n)&&!this._selected?(i=this._events.select,this._selected=!0,null!=i&&i.call(i)):!n&&this._selected&&(i=this._events.deselect,this._selected=!1,null!=i&&i.call(i))))}},n._triggerEventCallback=function(t,e){var n=this._events[t.type],i=(0,d.Br)(t);n&&(d.Dg.includes((0,d.J$)(e))&&(t=(0,d.Ve)(t.currentTarget,this.editor),i.evtTargetSelection=t),n.call(n,i))},n._handleSynthesisEvents=function(t){this._triggerEventCallback(t,t.nativeEvent)},n.render=function(){var t=this,e=this.tagName,n=Object.keys(this.props).reduce((function(e,n){return n.startsWith("on")?e[n]=d.eb.includes((0,d.Le)(n))?void 0:t._handleSynthesisEvents:e[n]=t.props[n],e}),{});return u().createElement(e,(0,o.b)({ref:this._ref},n),this.props.children)},e.contextType=c.rU,(0,o.a)([s.W],e.prototype,"_bindEditorEvents",null),(0,o.a)([s.W],e.prototype,"_handleEditorSelectionChange",null),(0,o.a)([s.W],e.prototype,"_triggerEventCallback",null),(0,o.a)([s.W],e.prototype,"_handleSynthesisEvents",null),e}(u().PureComponent)},vsh_98681:function(t,e,n){"use strict";n.d(e,{eb:function(){return Ut},Dg:function(){return Vt},Br:function(){return Kt},Ve:function(){return Bt},J$:function(){return Wt},Le:function(){return Nt},ZG:function(){return Zt}});var i=n("vsh_80018"),r=n("vsh_56815"),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.eventTypes=new Map,e.extractEvents=function(t){return"change"===t.type?new r.O(t,t.target):null},e}return(0,i.c)(e,t),e}((function(){})),s=new o,a=n("vsh_36543");var l="abort",u="animationend",c="animationiteration",d="animationstart",h="blur",f="canplay",p="canplaythrough",v="click",g="compositionend",y="compositionstart",m="compositionupdate",_="contextmenu",b="copy",E="dblclick",S="auxclick",w="drag",C="dragend",I="dragenter",T="dragexit",x="dragleave",k="dragover",M="dragstart",R="drop",P="durationchange",O="emptied",L="encrypted",D="ended",A="error",z="focus",N="gotpointercapture",W="keydown",B="keypress",K="keyup",Z="loadstart",j="loadeddata",U="loadedmetadata",V="lostpointercapture",F="mousedown",H="mousemove",X="mouseout",Y="mouseover",G="mouseup",q="paste",Q="pause",J="play",$="playing",tt="pointercancel",et="pointerdown",nt="pointermove",it="pointerout",rt="pointerover",ot="pointerup",st="progress",at="ratechange",lt="scroll",ut="seeked",ct="seeking",dt="stalled",ht="suspend",ft="timeupdate",pt="touchcancel",vt="touchend",gt="touchmove",yt="touchstart",mt="transitionend",_t="volumechange",bt="waiting",Et="wheel",St=new function(){var t=this;this.eventTypes=new Map,this.extractEvents=function(e){return t.eventTypes.get(e.type)?new a.U(e,e.target):null},[X,Y].forEach((function(e){return t.eventTypes.set(e,!0)}))},wt=n("vsh_55460"),Ct=n("vsh_16717"),It=n("vsh_45933"),Tt=n("vsh_64626"),xt=n("vsh_85338"),kt=n("vsh_77016"),Mt=n("vsh_77954"),Rt=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.deltaX=0,i.deltaY=0,i.deltaZ=0,i.deltaMode=0,(0,kt.uc)(i,Mt.TT,e,n),i}return(0,i.c)(e,t),e}(a.U),Pt=function(t){function e(e,n){var i=t.call(this,e,n)||this;return(0,kt.uc)(i,Mt.a6,e,n),i}return(0,i.c)(e,t),e}(r.O),Ot=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.propertyName="",i.elapsedTime=0,i.pseudoElement="",(0,kt.uc)(i,Mt.lI,e,n),i}return(0,i.c)(e,t),e}(r.O),Lt=[h,"cancel",v,"close",_,b,"cut",S,E,C,M,R,z,"input","invalid",W,B,K,F,G,q,Q,J,tt,et,ot,at,"reset",ut,"submit",pt,vt,yt,_t,y,m,g],Dt=[w,I,T,x,k,H,X,Y,nt,it,rt,lt,"toggle",gt,Et],At=[l,u,c,d,f,p,P,O,L,D,A,N,"load",j,U,Z,V,$,st,ct,dt,ht,ft,mt,bt],zt=[new function(){var t=this;this.eventTypes=new Map,this.extractEvents=function(e){var n;if(!t.eventTypes.get(e.type))return null;switch(e.type){case B:case W:case K:n=Tt.$;break;case h:case z:n=xt.Y;break;case v:case S:case E:case F:case H:case G:case X:case Y:case _:n=a.U;break;case w:case C:case I:case T:case x:case k:case M:case R:console.error("view组件暂不支持拖拽事件, 事件类型:",e.type),n=r.O;break;case pt:case vt:case gt:case yt:console.error("view组件暂不支持touch事件, 事件类型:",e.type),n=r.O;break;case u:case c:case d:n=Pt;break;case mt:n=Ot;break;case lt:n=wt.R;break;case Et:n=Rt;break;case b:case"cut":case q:n=Ct.y;break;case N:case V:case tt:case et:case nt:case it:case rt:case ot:console.error("view组件暂不支持pointer事件, 事件类型:",e.type),n=r.O;break;case y:case g:case m:n=It.h;break;default:n=r.O}return new n(e,e.target)},Lt.concat(Dt).concat(At).forEach((function(e){return t.eventTypes.set(e,!0)}))},St,s];function Nt(t){return t.slice(2).toLowerCase()}function Wt(t){var e=/^\[object (\S+)\]/i;t=t.toString().toLocaleLowerCase();return e.test(t)?e.exec(t)[1]:(console.error("can not get event classification"),"")}function Bt(t,e){return t?e.selection.getElementRange(t):null}function Kt(t){var e=function(t){for(var e=null,n=0;n<zt.length;n++){var i=zt[n].extractEvents(t);if(i){e=i;break}}return e||(console.warn("正在使用未被支持的合成事件"),e=new r.O(t,t.target)),e}(t.nativeEvent),n=e.preventDefault,i=e.stopPropagation;return e.preventDefault=function(){n.call(e),t.preventDefault()},e.stopPropagation=function(){i.call(e),t.stopPropagation()},e.currentTarget=t.currentTarget,e.target=t.target,e}var Zt=["select","deselect"],jt=(0,i.d)((0,i.d)([],(0,i._)(Zt),!1),(0,i._)(["enterviewport","leaveviewport"]),!1),Ut=[].concat(jt),Vt=["focusevent","mouseevent","touchevent","pointerevent"]},vsh_85351:function(t,e,n){"use strict";n.d(e,{Cn:function(){return r},PF:function(){return i}});var i={click:"_handleClickEvent",copy:"_handleCopy",cut:"_handleCut",paste:"_handlePaste",drop:"_handleDrag",dragenter:"_handleDrag",dragover:"_handleDrag",dragleave:"_handleDrag",focus:"_handleFocusEvent",blur:"_handleFocusEvent"},r=["compositionstart","compositionupdate","compositionend","copy","cut","paste","keydown","keypress","keyup","beforeinput","input","drop","dragenter","dragover","dragleave","resize","compositionstart","compositionupdate","compositionend","focus","blur"]},vsh_36856:function(t,e,n){"use strict";function i(){return!0}function r(){return!1}function o(t){return"function"==typeof t&&"number"!==t.nodeType}n.d(e,{mf:function(){return o},ar:function(){return r},cI:function(){return i}})},vsh_17760:function(t,e,n){"use strict";n.d(e,{D:function(){return o}});var i=n("vsh_80018"),r=n("vsh_77016"),o=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.stopEvent=function(){},i.preventEvent=function(){},(0,r.uc)(i,{},e,n),i}return(0,i.c)(e,t),e}(n("vsh_56815").O)},vsh_16717:function(t,e,n){"use strict";n.d(e,{y:function(){return s}});var i=n("vsh_80018"),r=n("vsh_77016"),o=n("vsh_77954"),s=function(t){function e(e,n){var i=t.call(this,e,n)||this;return(0,r.uc)(i,o.QA,e,n),i}return(0,i.c)(e,t),e}(n("vsh_17760").D)},vsh_45933:function(t,e,n){"use strict";n.d(e,{h:function(){return s}});var i=n("vsh_80018"),r=n("vsh_77016"),o=n("vsh_77954"),s=function(t){function e(e,n){var i=t.call(this,e,n)||this;return(0,r.uc)(i,o.g8,e,n),i}return(0,i.c)(e,t),e}(n("vsh_56815").O)},vsh_56815:function(t,e,n){"use strict";n.d(e,{O:function(){return a}});var i=n("vsh_80018"),r=n("vsh_77016"),o=n("vsh_36856"),s=n("vsh_77954"),a=function(t){function e(e,n){var i=t.call(this,e,n)||this;return(0,r.uc)(i,{},e,n),i}return(0,i.c)(e,t),e}(function(){function t(t,e){this.nativeEvent=t,this.type="",(0,r.uc)(this,s.TS,t,e),t=null!==t.defaultPrevented&&void 0!==t.defaultPrevented?t.defaultPrevented:!1===t.returnValue,this.isDefaultPrevented=t?o.cI:o.ar,this.isPropagationStopped=o.ar}var e=t.prototype;return e.preventDefault=function(){this.defaultPrevented=!0,this.nativeEvent.preventDefault(),this.isDefaultPrevented=o.cI},e.stopPropagation=function(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=o.cI},t}())},vsh_85338:function(t,e,n){"use strict";n.d(e,{Y:function(){return s}});var i=n("vsh_80018"),r=n("vsh_77016"),o=n("vsh_77954"),s=function(t){function e(e,n){var i=t.call(this,e,n)||this;return(0,r.uc)(i,o.Is,e,n),i}return(0,i.c)(e,t),e}(n("vsh_55460").R)},vsh_64626:function(t,e,n){"use strict";n.d(e,{$:function(){return s}});var i=n("vsh_80018"),r=n("vsh_77016"),o=n("vsh_77954"),s=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.key="",i.location=0,i.ctrlKey=!1,i.shiftKey=!1,i.altKey=!1,i.metaKey=!1,i.repeat=!1,i.locale="",i.charCode=0,i.keyCode=0,i.which=function(){return 0},(0,r.uc)(i,o.Nf,e,n),i}return(0,i.c)(e,t),e}(n("vsh_17760").D)},vsh_36543:function(t,e,n){"use strict";n.d(e,{U:function(){return s}});var i=n("vsh_80018"),r=n("vsh_77016"),o=n("vsh_77954"),s=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.screenX=0,i.screenY=0,i.clientX=0,i.clientY=0,i.pageX=0,i.pageY=0,i.ctrlKey=!1,i.shiftKey=!1,i.altKey=!1,i.metaKey=!1,i.getModifierState=function(){return!1},i.button=0,i.buttons=0,i.relatedTarget=null,i.movementX=0,i.movementY=0,(0,r.uc)(i,o.Ay,e,n),i}return(0,i.c)(e,t),e}(n("vsh_55460").R)},vsh_55460:function(t,e,n){"use strict";n.d(e,{R:function(){return s}});var i=n("vsh_80018"),r=n("vsh_77016"),o=n("vsh_77954"),s=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.view=null,i.detail=0,(0,r.uc)(i,o.D3,e,n),i}return(0,i.c)(e,t),e}(n("vsh_56815").O)},vsh_77954:function(t,e,n){"use strict";n.d(e,{D3:function(){return a},a6:function(){return s},TS:function(){return r},QA:function(){return g},g8:function(){return _},Y:function(){return f},Is:function(){return y},cd:function(){return m},Nf:function(){return v},Ay:function(){return h},lI:function(){return o},TT:function(){return p}});var i=n("vsh_77016"),r={type:null,target:null,currentTarget:null,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},o={propertyName:null,elapsedTime:null,pseudoElement:null},s={animationName:null,elapsedTime:null,pseudoElement:null},a={view:null,detail:null},l=0,u=0,c=!1,d=!1,h={screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:null,button:null,buttons:null,relatedTarget:null,movementX:function(t){if("movementX"in t)return t.movementX;var e=l;return l=t.screenX,c?"mousemove"===t.type?t.screenX-e:0:(c=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=u;return u=t.screenY,d?"mousemove"===t.type?t.screenY-e:0:(d=!0,0)}},f={dataTransfer:null},p={deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null},v={key:null,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:null,charCode:function(t){return"keypress"===t.type?(0,i.Hr)(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?(0,i.Hr)(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}},g={clipboardData:function(t){return("clipboardData"in t?t:window).clipboardData},data:{}},y={relatedTarget:null},m={data:null,dataTransfer:null,inputType:null},_={data:null}},vsh_77016:function(t,e,n){"use strict";n.d(e,{uc:function(){return o},Hr:function(){return r}});var i=n("vsh_36856");function r(t){var e,n=t.keyCode;return"charCode"in t?0===(e=t.charCode)&&13===n&&(e=13):e=n,32<=(e=10===e?13:e)||13===e?e:0}function o(t,e,n,r){Object.keys(e).forEach((function(o){var s=e[o];(0,i.mf)(s)?t[o]=s(n):t[o]="target"===o?r:n[o]}))}},vsh_97723:function(t,e,n){"use strict";var i=function(){function t(){this._listenersMap={},this._listenersParamsMap={}}var e=t.prototype;return e.on=function(t,e,n){this._addEventListener(t,e,!1,n)},e.once=function(t,e,n){this._addEventListener(t,e,!0,n)},e.off=function(t,e){this._removeEventListener(t,e)},e.removeEventListener=function(t,e){this._removeEventListener(t,e)},e.trigger=function(t,e){return this._triggerEvent(t,e)},e.reset=function(){this._listenersMap={},this._listenersParamsMap={}},e.removeListener=function(t,e){this._removeEventListener(t,e)},e.getListeners=function(t){return Array.from(this._listenersMap[t]||[])},e._addEventListener=function(t,e,n,i){var r;void 0===n&&(n=!1),void 0===i&&(i=1e3),e||console.warn("bind event with invalid cb, event: ".concat(t)),this._listenersMap[t]||(this._listenersMap[t]=[]),this._listenersParamsMap[t]||(this._listenersParamsMap[t]=new WeakMap),this._listenersMap[t][i]||(this._listenersMap[t][i]=[]),this._listenersParamsMap[t].has(e)||void 0!==(r=null===(r=this._listenersMap[t][i])||void 0===r?void 0:r.length)&&(r={listener:e,isOnce:n,index:r,priority:i},null!==(i=this._listenersMap[t][i])&&void 0!==i&&i.push(r),this._listenersParamsMap[t].set(e,r))},e._removeEventListener=function(t,e){var n=this._listenersMap[t]||[],i=null===(i=this._listenersParamsMap[t])||void 0===i?void 0:i.get(e);null!==(t=this._listenersParamsMap[t])&&void 0!==t&&t.delete(e),i&&(e=i.index,i=i.priority,-1<e&&(null===(i=n[i])||void 0===i||delete i[e]))},e._triggerEvent=function(t,e,n){var i=this;void 0===n&&(n=!1);var r,o,s=!1,a=!1,l=[],u=(e=void 0===e?[]:e).find((function(t){return t instanceof Event}));return u&&(r=u.stopImmediatePropagation,o=u.preventDefault,u.stopImmediatePropagation=function(){r.apply(u),s=!0},u.preventDefault=function(){o.apply(u),a=!0}),(this._listenersMap[t]||[]).slice(0).forEach((function(r){if(r)for(var o=0;o<r.length&&!s;o++)if(r[o]){var a=r[o],u=a.listener;if(a.isOnce&&i._removeEventListener(t,u),n)try{u.apply(u,e)}catch(r){l.push(r)}else u.apply(u,e)}})),{shouldStop:s,shouldPrevent:a,errors:l}},t}();e.Z=i},vsh_45832:function(t,e,n){"use strict";var i,r;n.d(e,{r:function(){return i}}),(r=i=i||{}).DID_PASTE="didPaste",r.RESIZE="resize",r.RECT_CHANGE="rectchange",r.SELECTION_CHANGE="selectionchange",r.SELECTION_CHANGE_AND_DOM_UPDATE="editorUpdateDomSelection",r.CONTENT_WILL_CHANGE="contentWillChange",r.CONTENT_CHANGE="contentchange",r.EDITABLE_CHANGE="editablechange",r.PAINT="paint",r.COPY="copy",r.CUT="cut",r.PASTE="paste",r.WILL_DELETE_FROM_CUT="willDeleteFromCut",r.INPUT="input",r.BEFORE_INPUT="beforeinput",r.KEYDOWN="keydown",r.KEYPRESS="keypress",r.KEYUP="keyup",r.EXEC_COMMAND="execCommand",r.ERROR="error",r.DELETE_KEY="keyDelete",r.FOCUS="focus",r.BLUR="blur",r.SCROLL_END="scrollend",r.SCROLL="scroll",r.KEYBAORDCHANGE="keyboardchange",r.COMPOSITION_END="compositionend",r.COMPOSITION_START="compositionstart",r.COMPOSITION_UPDATE="compositionupdate"},vsh_94923:function(t,e,n){"use strict";n.d(e,{f:function(){return l}});var i=n("vsh_80018"),r=n("vsh_98650"),o=n("vsh_92563"),s=n("vsh_97723"),a=n("vsh_25374"),l=new(function(){function t(t){var e=this;this.options=t=void 0===t?{}:t,this._em=new s.Z,this._rect={left:0,top:0},this._canceling=!1,this.container=document.body,this.handleContextMenu=function(t){var n=e.focusEditor||e.lastFocusEditor;if(n&&(!e.container||t.target===e.container)){if(o.Xh.mobile)return e._input.focus(),void t.preventDefault();e._input.style.top="".concat(t.offsetY-1,"px"),e._input.style.left="".concat(t.offsetX-1,"px"),e._input.style.zIndex="999",e._input.style.height="5px";var i,r=(i=n.selection.getSelection()).start;t=i.end;(i=n.getContentState().getZoneState(r.zoneId))&&(e._input.focus(),r=i.slice(r,t).getModelText(),e._input.textContent=r||" ",(t=new Range).setStart(e._input,0),t.setEnd(e._input.childNodes[0],(r||" ").length),null!==(r=window.getSelection())&&void 0!==r&&r.removeAllRanges(),null!==(r=window.getSelection())&&void 0!==r&&r.addRange(t),setTimeout((function(){null!=n&&n.inputModel.updatePosition(),e._input.style.zIndex="-2",e._input.style.height="2px",e._input.textContent=""})))}},this.initInputElement(),this.bindEvents()}var e=t.prototype;return Object.defineProperty(e,"content",{get:function(){return this._input.textContent||""},enumerable:!1,configurable:!0}),e.initInputElement=function(){var t,e,n={position:"absolute",width:"50px",height:"2px",left:"0px",top:"0px",overflow:"hidden",opacity:"0",background:"transparent",color:"transparent",outline:"none",border:"none","font-size":"1px","z-index":"-2","caret-color":"transparent","white-space":"pre-wrap","-webkit-user-select":"text","-moz-user-select":"text","-ms-user-select":"text","user-select":"text"};o.Xh.android&&(n.position="absolute",n.top="100px",n.left="-1200px"),o.Xh.isTouchDevice&&(n["font-size"]="12px"),o.Xh.isIPad&&(n["caret-color"]="auto",n.color="auto"),o.Xh.isIPad&&(n["caret-color"]="auto"),Object.assign(n,this.options.style||{}),o.Xh.ios&&o.Xh.mobile&&!o.Xh.isIPad&&o.Xh.chrome?this._input=document.createElement("input"):(this._input=document.createElement("div"),this._input.tabIndex=0,this._input.contentEditable="true");try{for(var r=(0,i.e)(Object.entries(n)),s=r.next();!s.done;s=r.next()){var a=(0,i._)(s.value,2),l=a[0],u=a[1];this._input.style[l]=u}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}this.container.appendChild(this._input)},e.setContainer=function(t){var e;null!==(e=this.container)&&void 0!==e&&e.removeEventListener("contextmenu",this.handleContextMenu),this.container!==t&&(this.container=t,this.container.appendChild(this._input)),t.addEventListener("contextmenu",this.handleContextMenu)},e.getContainer=function(){return this.container},e.getFocusEditor=function(){return this.focusEditor},e.getLastFocusEditor=function(){return this.lastFocusEditor},e.bindEvents=function(){var t,e;try{for(var n=(0,i.e)(a.aW),r=n.next();!r.done;r=n.next()){var o=r.value;this._input.addEventListener(o,this.handler)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},e.unbindEvents=function(){var t,e;try{for(var n=(0,i.e)(a.aW),r=n.next();!r.done;r=n.next()){var o=r.value;this._input.removeEventListener(o,this.handler)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},e.handler=function(t){this._canceling||this._em.trigger(t.type,[t])},e.isFocus=function(t){var e=document.activeElement===this._input;return t?e&&this.focusEditor===t:e},Object.defineProperty(e,"contentEditable",{set:function(t){this._input.contentEditable=String(t)},enumerable:!1,configurable:!0}),e.on=function(t,e,n){this._em.on(t,e,n)},e.off=function(t,e){this._em.off(t,e)},e.updatePosition=function(t){var e;t.left===this._rect.left&&t.top===this._rect.top||o.Xh.mobile||(null===(e=this.focusEditor)||void 0===e?void 0:e.getScrollContainer())&&(this._rect=t,t=(e=this._rect).left,e=e.top,this._input.style.left="".concat(t,"px"),this._input.style.top="".concat(e,"px"))},e.expandWordRange=function(t){var e=t.text,n=t.offset,i=t.direction;return 0===e.length?n:(t=window.getSelection())&&t.modify?(this._input.textContent="".concat(e,"1"),(e=document.createRange()).setStart(this._input.firstChild,n),e.setEnd(this._input.firstChild,n),t.removeAllRanges(),t.addRange(e),t.modify("move",i,"word"),t=t.anchorOffset,this.clear(),t):n},e.setTextAndSelectAll=function(t){var e,n=window.getSelection();n&&(this._input.textContent=t,(e=document.createRange()).setStart(this._input.firstChild,0),e.setEnd(this._input.firstChild,t.length),n.removeAllRanges(),n.addRange(e))},e.setToFront=function(){this._input.style.zIndex="99999",this._input.style.position="fixed"},e.setToBack=function(){this._input.style.zIndex="-2",this._input.style.position="absolute"},e.focus=function(t){var e,n;null!=t&&t.focusEditor||!t||(t.focusEditor=this.focusEditor),null!=t&&t.focusEditor&&this.focusEditor!==(null==t?void 0:t.focusEditor)&&(this.setContainer(t.focusEditor.inputModel.getInputContainer()),null!==(n=this.focusEditor)&&void 0!==n&&n.blur(),this.focusEditor=t.focusEditor,this.lastFocusEditor=this.focusEditor),!0!==(null==t?void 0:t.force)&&document.activeElement===this._input||((e=window.getSelection())&&(n=document.createRange(),e.removeAllRanges(),n.selectNodeContents(this._input),n.collapse(!1),e.addRange(n),e.addRange(n)),this._input.focus(t))},e.blur=function(t){this.focusEditor===(null==t?void 0:t.blurEditor)&&(this.focusEditor=void 0,o.Xh.isIOS&&o.Xh.safari&&!o.Xh.isIPad&&this._input.blur(),null!==(t=window.getSelection())&&void 0!==t&&t.removeAllRanges())},e.clear=function(){this._input.textContent=""},e.cancelComposing=function(){this._canceling=!0,this.clear(),this.blur(),this.focus({force:!0}),this._canceling=!1},e.destroy=function(){var t;this.unbindEvents(),null!==(t=this._input.parentNode)&&void 0!==t&&t.removeChild(this._input)},e.changeStyle=function(t){t?this._input.style.removeProperty("transform"):this._input.style.transform="scale(0, 0.01)"},(0,i.a)([r.W],t.prototype,"handler",null),t}())},vsh_99568:function(t,e,n){"use strict";n.d(e,{g:function(){return S}});var i=n("vsh_80018"),r=n("vsh_97698"),o=n("vsh_98650"),s=n("vsh_40285"),a=n("vsh_95066"),l=n("vsh_92563"),u=n("vsh_45832"),c=n("vsh_45933"),d=n("vsh_64626"),h=n("vsh_77016"),f=n("vsh_77954"),p=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.inputType="",(0,h.uc)(i,f.cd,e,n),i}return(0,i.c)(e,t),e}(n("vsh_17760").D),v=(n("vsh_44960"),n("vsh_45110")),g=n("vsh_25374"),y=n("vsh_94923"),m=n("vsh_82631"),_=n("vsh_37075"),b=function(t){var e=t.evt,n=void 0===(d=t.isBackward)||d,i=void 0===(o=t.charToDeleteIfNotAtLineStartOrEnd)?1:o,r=t.editor;if(r.triggerEditorEvent(u.r.DELETE_KEY,{e:e,isBackward:n}),e.defaultPrevented)return null;var o,a=r.getContentState().getActiveZone(),l=a.getZoneId(),c=(h=(f=r.selection.getSelection()).start).line,d=h.offset,h=(t=(o=f.toPosition()).start,o.len),f={evt:e,deltaSet:(new _.D).compose(new s.I({zoneId:l})),editor:r};if(n&&r.pluginManager.call("editorWillDoDeleteKey",f),r.callAll("aceDoDeleteKey",{editor:r,evt:e,caretLine:r.selection.getSelection().start.line}),o=[],h?(h=new s.I({zoneId:l}).retain(t).delete(h),h=f.deltaSet.compose(h),r.getContentState().apply(h,{type:g.kK.DeleteRange}),o=[!0]):n&&(d={editor:r,evt:e,lineMarker:null===(a=a.getLine(c))||void 0===a?void 0:a.hasLineMarker(),zoneId:l,theLine:c,col:d},o=r.callAll("editorDoDeleteKey",d)),o.includes(!0))return r.callAll("editorAfterDoDeleteKey",{editor:r,theLine:c,evt:e}),null;var p=!1;return f.deltaSet.forEach((function(t){0<t.ops.length&&(p=!0)})),p?f.deltaSet:(r=function(t){var e=t.isBackward,n=void 0===(u=t.charToDeleteIfNotAtLineStartOrEnd)?1:u,i=(d=t.editor).selection.getSelection(),r=d.getContentState(),o=(h=i.start).offset,a=h.zoneId,l=i.toPosition().start,u=new s.I({zoneId:a});if(t=i.start.line,h=null===(d=r.getZoneState(a))||void 0===d?void 0:d.getLine(t)){r=Number(h.hasLineMarker()),a=i.start.offset===r;var c,d=h.length()-i.start.offset==1,h=(i=h.nextSibling(),h.getModelText());return!i&&d&&!e||a&&e&&0===t?null:(e?a?u.retain(l-1-r).delete(r+1):(c="function"==typeof n?n({lineText:h,offset:o,lineMarker:r}):n,u.retain(l-c).delete(c)):d?(i=Number(i.hasLineMarker()),u.retain(l).delete(1+i)):(c="function"==typeof n?n({lineText:h,offset:o,lineMarker:r}):n,u.retain(l).delete(c)),u)}}({isBackward:n,charToDeleteIfNotAtLineStartOrEnd:i,editor:r}),r?f.deltaSet.compose(r):null)};var E="​​",S=function(){function t(t,e){var n=this;this.editor=t,this._inputContainer=e,this._hiddenInput=y.f,this._isComposing=!1,this._compositionStartEditorRange=null,this._additionText="",this.recordQueue=[],this._compositionStartBrowserOffset=void 0,this._mergeInputRecord=function(){for(var t=n.recordQueue.length-1,e=t-1;0<=e&&0<=t;){var i=n.recordQueue[t],r=n.recordQueue[e];i.type===r.type&&g.MU.includes(i.type)?(n.editor.undoModule.mergeRecords(r,i),e=(t=e)-1):e=(t=e-1)-1}n.recordQueue=[]},this._mergeInputRecordThrottle=(0,r.P)(this._mergeInputRecord,g.mT,{leading:!1}),this.bindEvents()}var e=t.prototype;return Object.defineProperty(e,"isComposing",{get:function(){return this._isComposing},set:function(t){this._isComposing&&!t&&this.reset(),this._isComposing=t,this.editor.setStatus("isComposing",t)},enumerable:!1,configurable:!0}),e.bindEvents=function(){var t,e;try{for(var n=(0,i.e)(g.aW),r=n.next();!r.done;r=n.next()){var o=r.value;this.editor._listenEvents.includes(o)&&this._hiddenInput.on(o,this.eventHandler)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.editor.on(u.r.SELECTION_CHANGE_AND_DOM_UPDATE,this.handleViewSelectionChange),this.editor.on(u.r.CONTENT_CHANGE,this.handleContentChange,0),this._inputContainer.addEventListener("scroll",this.handleScroll)},e.unbindEvents=function(){var t,e;try{for(var n=(0,i.e)(g.aW),r=n.next();!r.done;r=n.next()){var o=r.value;this.editor._listenEvents.includes(o)&&this._hiddenInput.off(o,this.eventHandler)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.editor.off(u.r.SELECTION_CHANGE_AND_DOM_UPDATE,this.handleViewSelectionChange),this.editor.off(u.r.CONTENT_CHANGE,this.handleContentChange),this._inputContainer.removeEventListener("scroll",this.handleScroll)},e.handleScroll=function(){this._inputContainer.scrollLeft=0,this._inputContainer.scrollTop=0},e.eventHandler=function(t){var e=this.editor;if(this._hiddenInput.getFocusEditor()===e&&t instanceof FocusEvent&&"blur"===t.type&&this.editor.blur(),this._hiddenInput.getLastFocusEditor()===e&&t instanceof FocusEvent&&"focus"===t.type&&this.editor.focus(),e.isFocus()){if(t instanceof KeyboardEvent){if(e.isInEmbed())return;var n=new d.$(t,t.target);if(e.triggerEditorEvent(t.type,n).shouldPrevent)return;"keydown"===t.type&&(this.handleKeyDown(t),e.callAll("editorKeyDown",{evt:t}),(0,m.YO)(t)&&!t.defaultPrevented&&e.selection.handleMovementKey({evt:n}))}if(t instanceof InputEvent){var i=new p(t,t.target);if(e.triggerEditorEvent(t.type,i).shouldPrevent)return;switch(t.type){case"beforeinput":this.handleBeforeInput(t);break;case"input":this.handleInput(t)}}if(t instanceof CompositionEvent){if(i=new c.h(t,t.target),e.triggerEditorEvent(t.type,i).shouldPrevent)return;switch(t.type){case"compositionstart":this.handleCompositionStart(t);break;case"compositionupdate":this.handleCompositionUpdate(t);break;case"compositionend":this.handleCompositionEnd(t)}}if(t instanceof ClipboardEvent)switch(t.type){case"copy":this.editor._handleCopy(t);break;case"paste":this.editor._handlePaste(t);break;case"cut":this.editor._handleCut(t)}t instanceof FocusEvent&&"focus"===t.type&&this.editor._handleFocusEvent(t)}},e.handleBeforeInput=function(t){void 0!==t.isComposing&&(this.isComposing=t.isComposing,this._compositionStartBrowserOffset=t.isComposing?this._compositionStartBrowserOffset:void 0),l.Xh.safari&&"insertText"===t.inputType&&this.isComposing&&(this.isComposing=!1,this._compositionStartBrowserOffset=void 0),this.resolveQuickTyping(t),this.applyInputChange(t.data,t.inputType,this.isComposing?{composingUnderlineStatus:"true"}:void 0),this.isComposing||this._mergeInputRecordThrottle()},e.handleInput=function(t){this.isComposing||this.reset()},e.handleCompositionStart=function(t){this.isComposing=!0;var e=(i=this.editor.selection.getSelection()).start,n=i.isBackward,i=this.editor.modulesContainer.get(v.h.Range);this._compositionStartEditorRange=new i({start:e,end:e,isBackward:n,editor:this.editor}),this._compositionStartBrowserOffset=this.browserSelectionLength},e.handleCompositionUpdate=function(t){this.isComposing=!0},e.handleCompositionEnd=function(t){var e=(r=this.editor.selection.getSelection().toPosition()).start,n=r.len,i=r.zoneId,r=new s.I({zoneId:i});null!==this._compositionStartEditorRange&&(n=e-(i=this._compositionStartEditorRange.toPosition().start)+n,e=i),r.retain(e).retain(n,{composingUnderlineStatus:""}),this.isComposing=!1,this.editor.isEditable()&&(this.editor.getContentState().apply(r,{type:g.kK.FlushInput}),this._mergeInputRecord()),this._compositionStartBrowserOffset=void 0},e.handleViewSelectionChange=function(t){t.fromView,t=t.selection,!this.isComposing&&l.Xh.isIPad&&(null!=t&&t.isCollapsed()?y.f.clear():y.f.setTextAndSelectAll(E)),this.updatePosition(),this.editor.isFocus()&&this._hiddenInput.setContainer(this._inputContainer)},e.handleKeyDown=function(t){var e,n,i=t.keyCode,r=t.ctrlKey,o=t.metaKey,u=t.altKey,c=this.editor,d=g.kK.KeyEvent;(0,m.Wl)(t)||!this.editor.isEditable()||this.editor.getStatus("isComposing")||(e=!1,n=null,i===a.VD.Enter?(function(t){var e,n=t.evt,i=t.editor,r=(e=i.getContentState()).getActiveZone().getZoneId(),o=(l=i.selection.getSelection()).start.line,a=l.toPosition(),l=(t=a.start,a.len);(e=null===(a=e.getZoneState(r))||void 0===a?void 0:a.getLine(o))&&(a=e.getLineAttributes().toMap(),e={evt:n,delta:new s.I({zoneId:r}),editor:i},i.callAll("doReturnKey",{}),i.pluginManager.call("editorWillDoReturnKey",e),r=new s.I({zoneId:r}),e.delta.ops.length?r=r.compose(e.delta):r.retain(t).delete(l).insertEnter().insertLineMarker(a),i.getContentState().apply(r,{type:g.kK.Return}),i.callAll("editorAfterDoReturnKey",{theLine:o}),n.preventDefault())}({evt:t,editor:c}),this._mergeInputRecordThrottle(),e=!0):i===a.VD.BackSpace&&(r||o)?(n=b({evt:t,isBackward:!0,charToDeleteIfNotAtLineStartOrEnd:m.KO,editor:c}),d=g.kK.DeleteToLineStart,e=!0):i===a.VD.Delete&&(r||o)||r&&i===a.VD.K&&(l.Xh.isMac||l.Xh.isIOS)?(n=b({evt:t,isBackward:!1,charToDeleteIfNotAtLineStartOrEnd:m.bi,editor:c}),d=g.kK.DeleteToLineEnd,e=!0):i===a.VD.BackSpace&&u?(n=b({evt:t,isBackward:!0,charToDeleteIfNotAtLineStartOrEnd:m.z4,editor:c}),d=g.kK.DeleteEntireWordBackward,e=!0):i===a.VD.Delete&&u?(n=b({evt:t,isBackward:!1,charToDeleteIfNotAtLineStartOrEnd:m.Cv,editor:c}),d=g.kK.DeleteEntireWordForward,e=!0):i===a.VD.BackSpace||r&&i===a.VD.H&&(l.Xh.isMac||l.Xh.isIOS)?(n=b({evt:t,isBackward:!0,charToDeleteIfNotAtLineStartOrEnd:m.FM,editor:c}),d=g.kK.DeleteBackward,e=!0):i===a.VD.Delete||r&&i===a.VD.D&&(l.Xh.isMac||l.Xh.isIOS)?(n=b({evt:t,isBackward:!1,charToDeleteIfNotAtLineStartOrEnd:m.R7,editor:c}),d=g.kK.DeleteForward,e=!0):l.Xh.isIPad&&l.Xh.safari&&(i===a.VD.C&&o?(this.editor.focus(),y.f.setTextAndSelectAll(E)):i===a.VD.X&&o&&this.editor.focus()),e&&t.preventDefault(),n&&(this.editor.getContentState().apply(n,{type:d}),this._mergeInputRecordThrottle()))},e.resolveQuickTyping=function(t){var e,n,r,o;this.isComposing||(r=t.inputType).startsWith("delete")||r.startsWith("deleteBy")||(e=this.getBrowserRange())&&!e.collapsed&&(n=this._hiddenInput.content.length-e.startOffset,t=(o=this.editor.selection.getSelection()).start,r=o.isBackward,o=this.editor.modulesContainer.get(v.h.Range),this._compositionStartEditorRange=new o({start:(0,i.b)((0,i.b)({},t),{offset:t.offset-n}),end:(0,i.b)((0,i.b)({},t),{offset:t.offset-n}),isBackward:r,editor:this.editor}),this._additionText=this._hiddenInput.content.slice(e.endOffset))},e.applyInputChange=function(t,e,n){var r=this;if((null!==t||["deleteCompositionText","deleteContentBackward"].includes(e))&&void 0!==t&&this.editor.isEditable()){var o=(0,m.cB)(this.editor),a=n?(0,i.b)((0,i.b)({},o),n):o,u=this.editor.selection.getSelection(),c=u.toPosition();e=new s.I({zoneId:c.zoneId}),n=c.start,o=c.len;null!==this._compositionStartEditorRange&&(o=n-(h=this._compositionStartEditorRange.toPosition().start)+o,n=h);var d,h=(null!=t?t:"")+this._additionText;return l.Xh.mobile?(o||(t=this.getBrowserRange())&&(n-=o=t.endOffset-t.startOffset,this._compositionStartEditorRange&&((d=this._compositionStartEditorRange.start).offset-=o,t=this.editor.modulesContainer.get(v.h.Range),this._compositionStartEditorRange=new t({start:d,end:d,isBackward:!1,editor:this.editor}))),e.retain(n).delete(o).insert(h,a),void this.editor.getContentState().apply(e,{type:g.kK.FlushInput})):this._isComposing?(o=this.browserSelectionLength-(null!==(d=this._compositionStartBrowserOffset)&&void 0!==d?d:0),e.retain(n).delete(c.len+o).insert(h,a),this.editor.getContentState().apply(e,{type:g.kK.FlushInput}),void(u.isCollapsed()&&requestAnimationFrame((function(){var t,e,n,o;void 0!==r._compositionStartBrowserOffset&&(t=(null!==(n=null===(e=r._compositionStartEditorRange)||void 0===e?void 0:e.start.offset)&&void 0!==n?n:0)+r.browserSelectionLength-(null!==(o=r._compositionStartBrowserOffset)&&void 0!==o?o:0),e=u.start,n=u.end,o=u.isBackward,r.editor.selection.setSelection({end:(0,i.b)((0,i.b)({},n),{offset:t,isEdge:!0}),start:(0,i.b)((0,i.b)({},e),{offset:t,isEdge:!0}),isBackward:o}))})))):(e.retain(n).delete(o).insert(h,a),void this.editor.getContentState().apply(e,{type:g.kK.FlushInput}))}},e.getBrowserRange=function(){var t=window.getSelection();return null!=t&&t.rangeCount?t.getRangeAt(0):null},Object.defineProperty(e,"browserSelectionLength",{get:function(){var t,e=this.getBrowserRange(),n=null==e?void 0:e.toString();return l.Xh.isIPad&&l.Xh.safari&&n===E&&(null==e?void 0:e.endOffset)===E.length||null===(t=null==e?void 0:e.endOffset)||void 0===t?0:t},enumerable:!1,configurable:!0}),e.updatePosition=function(){var t,e,n,i,r;l.Xh.mobile||(r=(t=this.editor.selection.getSelection()).start,n=t.end,e=t.isBackward,t=(i=this.editor.rectModule.getCaretRect(e?n:r)).top,e=i.left,n=i.height,this.editor.isFocus()&&(i=(r=this.editor.rectModule._getEditorRectRelativeContainer()).top,r=r.left,this._hiddenInput.updatePosition({top:t+n+i-2,left:e+r})))},e.reset=function(){null!==this._compositionStartEditorRange&&(this._compositionStartEditorRange=null,this._additionText="",this._hiddenInput.clear())},e.focusAndClearHiddenInput=function(){this._hiddenInput.isFocus(this.editor)||(this._hiddenInput.focus({focusEditor:this.editor,force:!0}),this._hiddenInput.clear())},e.handleContentChange=function(){var t=this.editor.getContentState().contentApplyRuntime;this.recordQueue.push(t.currentRuntime)},e.hasFocus=function(){return this._hiddenInput.isFocus(this.editor)},e.focus=function(){this.focusAndClearHiddenInput()},e.blur=function(){this._hiddenInput.blur({blurEditor:this.editor})},e.destroy=function(){this.unbindEvents()},e.getInputContainer=function(){return this._inputContainer},e.changeHiddentInputStyle=function(t){return this._hiddenInput.changeStyle(t)},e.setContentEditable=function(t){this._hiddenInput.contentEditable=t},(0,i.a)([o.W],t.prototype,"handleScroll",null),(0,i.a)([o.W],t.prototype,"eventHandler",null),(0,i.a)([o.W],t.prototype,"handleBeforeInput",null),(0,i.a)([o.W],t.prototype,"handleInput",null),(0,i.a)([o.W],t.prototype,"handleCompositionStart",null),(0,i.a)([o.W],t.prototype,"handleCompositionUpdate",null),(0,i.a)([o.W],t.prototype,"handleCompositionEnd",null),(0,i.a)([o.W],t.prototype,"handleViewSelectionChange",null),(0,i.a)([o.W,function(t,e,n){var i=n.value;return n.value=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.editor.undoModule.batchedUndo((function(){i.apply(t,e)}))},n}],t.prototype,"handleKeyDown",null),(0,i.a)([o.W],t.prototype,"applyInputChange",null),(0,i.a)([o.W],t.prototype,"updatePosition",null),(0,i.a)([o.W],t.prototype,"reset",null),(0,i.a)([o.W],t.prototype,"handleContentChange",null),t}()},vsh_25374:function(t,e,n){"use strict";n.d(e,{kK:function(){return r},mT:function(){return u},Uk:function(){return c},Ly:function(){return a},aW:function(){return d},MU:function(){return l}});var i,r,o,s=n("vsh_95066");(o=r=r||{}).FlushInput="flushInput",o.Composition="composition",o.DeleteForward="deleteForward",o.DeleteBackward="deleteBackward",o.DeleteToLineStart="deleteToLineStart",o.DeleteToLineEnd="deleteToLineEnd",o.DeleteEntireWordBackward="deleteEntireWordBackward",o.DeleteEntireWordForward="deleteEntireWordForward",o.DeleteRange="deleteRange",o.Return="doReturnKey",o.KeyEvent="handleKeyEvent";var a,l=[r.FlushInput,r.DeleteForward,r.DeleteBackward,r.Return,r.Composition],u=1e3,c=((i={})[s.VD.Enter]="_handleReturnKey",i[s.VD.Delete]="_handleDeleteKey",i[s.VD.BackSpace]="_handleDeleteKey",/[\u0030-\u0039\u0041-\u005A\u0061-\u007A\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF\u0100-\u1FFF\u3040-\u9FFF\uF900-\uFDFF\uFE70-\uFEFE\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFDC]/);!function(t){t.KEYDOWN="keydown",t.KEYPRESS="keypress",t.KEYUP="keyup",t.INPUT="input",t.BEFORE_INPUT="beforeinput",t.COMPOSITION_START="compositionstart",t.COMPOSITION_UPDATE="compositionupdate",t.COMPOSITION_END="compositionend",t.COPY="copy",t.CUT="cut",t.PASTE="paste",t.FOCUS="focus",t.BLUR="blur",t.CONTEXT_MENU="contextmenu"}(a=a||{});var d=Object.values(a)},vsh_82631:function(t,e,n){"use strict";n.d(e,{FM:function(){return T},bi:function(){return M},KO:function(){return k},z4:function(){return R},Cv:function(){return P},R7:function(){return x},cB:function(){return L},Wl:function(){return C},YO:function(){return D}});var i=n("vsh_80018"),r=n("vsh_95066"),o=n("vsh_92563");n("vsh_44960");var s=RegExp("[".concat("\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\u1ab0-\\u1aff\\u1dc0-\\u1dff\\ufe0e\\ufe0f","]"));var a="\\ud800-\\udfff",l="[".concat(a,"]"),u="[".concat("\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\u1ab0-\\u1aff\\u1dc0-\\u1dff","]"),c="\\ud83c[\\udffb-\\udfff]",d="(?:".concat(u,"|").concat(c,")"),h="[^".concat(a,"]"),f="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",v="".concat(d,"?"),g="[".concat("\\ufe0e\\ufe0f","]?"),y=g+v+"(?:".concat("\\u200d","(?:").concat([h,f,p].join("|"),")").concat(g+v,")*"),m="".concat(h).concat(u,"?"),_="(?:".concat([m,u,f,p,l].join("|"),")"),b=RegExp("".concat(c,"(?=").concat(c,")|").concat(_+y),"g");function E(t){return function(t){return s.test(t)}(t)?function(t){return t.match(b)||[]}(t):t.split("")}var S,w=n("vsh_25374"),C=function(t){var e=t.keyCode;t=t.ctrlKey;return[r.VD.Left,r.VD.Right,r.VD.Up,r.VD.Down].includes(e)||o.Xh.isMac&&t&&e===r.VD.B||o.Xh.isMac&&t&&e===r.VD.F},I=function(t){return w.Uk.test(t)},T=function(t){var e=t.offset;return function(t){return t.length<2?t.length:(t=E(t))[t.length-1].length}((t=t.lineText).slice(0,e))},x=function(t){var e=t.offset;return function(t){return(t.length<2?t:E(t)[0]).length}((t=t.lineText).slice(e))},k=function(t){var e=t.lineMarker;return t.offset-e},M=function(t){var e=t.offset;return t.lineText.length-1-e},R=function(t){var e=t.lineMarker,n=t.offset,i=t.lineText;if(1<(t=T(t)))return t;for(var r=n-1;e<r&&I(i[r-1]);)r--;return n-r},P=function(t){var e=t.offset,n=t.lineText;if(1<(t=x(t)))return t;for(var i=e+1;i<n.length-1&&I(n[i]);)i++;return i-e},O=(S=null,function(t){var e,n;if(S)return S;var r=t.getContentState().schema,o=[];try{for(var s=(0,i.e)(Object.keys(r.schemas)),a=s.next();!a.done;a=s.next()){var l=a.value;r.schemas[l].mark&&o.push(l)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return o.length?S=new RegExp(o.join("|")):null});function L(t,e){var n,r,o=e||O(t),s=t.getContentState(),a=t._getInlineAttributesOfPreviousPosition(),l=(e=t.selection.getSelection().toPosition(),e=s.getInlineStyleOverride(e),{});try{for(var u=(0,i.e)(a),c=u.next();!c.done;c=u.next()){var d=(0,i._)(c.value,2),h=d[0],f=d[1];if(null!=o&&o.test(h)){var p=t.getContentState().schema.get(h);if(p&&!1===p.tailInherit&&t._getInlineAttributesOfNextPosition().toMap()[h]!==f)continue;l[h]=f}}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return(0,i.b)((0,i.b)({},l),e)}var D=function(t){var e=t.keyCode;t=t.ctrlKey;return[r.VD.Left,r.VD.Right,r.VD.Up,r.VD.Down,r.VD.Home,r.VD.End,r.VD.PageUp,r.VD.PageDown].includes(e)||o.Xh.isMacOSX&&t&&[r.VD.A,r.VD.E,r.VD.F,r.VD.B,r.VD.P,r.VD.N].includes(e)}},vsh_38761:function(t,e,n){"use strict";var i,r;n.d(e,{A:function(){return i}}),(r=i=i||{})[r.EQUAL=0]="EQUAL",r[r.UNEQUAL=1]="UNEQUAL",r[r.UPDATE=2]="UPDATE"},vsh_48096:function(t,e,n){"use strict";n.d(e,{M:function(){return S}});var i=n("vsh_80018"),r=n("vsh_52948"),o=n("vsh_40285"),s=n("vsh_8458"),a=n("vsh_30436"),l=n("vsh_45110"),u=n("vsh_94150");var c=n("vsh_37075"),d=n("vsh_95066");function h(t,e,n){if(void 0===n&&(n={}),!t)throw"object"==typeof n&&Object.keys(n).length&&(n=Object.entries(n).map((function(t){t=(e=(0,i._)(t,2))[0];var e=e[1];return"".concat(t,": ").concat(e)})).join(", "),console.log("[oops debug]: ".concat(n))),e="Failed assertion: ".concat(e),new Error(e)}var f=n("vsh_22328"),p=n("vsh_98650");function v(t){var e;throw null!==(e=t.e)&&void 0!==e?e:new Error(t.message)}var g=function(){function t(){this.handleError=v,this.numToAttrib={},this.attribToNum={},this.nextNum=0,this.dirty=!1}var e=t.prototype;return e.putAttrib=function(t,e){var n=[String(t[0]||""),String(t[1]||"")];return(t=String(n))in this.attribToNum?this.attribToNum[t]:e?-1:(e=this.nextNum++,this.attribToNum[t]=e,this.numToAttrib[e]=n,this.dirty=!0,e)},e.getAttrib=function(t){return(t=this.numToAttrib[t])&&[t[0],t[1]]},e.updateAttrib=function(t,e){var n,i=this.getAttrib(t);i&&(n=String(i),i=String(e),null!=this.attribToNum[n]&&delete this.attribToNum[n],this.attribToNum[i]=t,this.numToAttrib[t]=e)},e.getAttribKey=function(t){return(t=this.numToAttrib[t])?t[0]:""},e.getAttribValue=function(t){return(t=this.numToAttrib[t])?t[1]:""},e.getAttribNum=function(t){return"string"!=typeof t&&(t=String(t)),this.attribToNum[t]},e.eachAttrib=function(t){for(var e in this.numToAttrib)this.numToAttrib.hasOwnProperty(e)&&t((e=this.numToAttrib[e])[0],e[1])},e.toJsonable=function(){var t,e,n={};for(t in this.numToAttrib)this.numToAttrib.hasOwnProperty(t)&&(e=this.numToAttrib[t],n[t]=[e[0],e[1]]);return{numToAttrib:n,nextNum:this.nextNum}},e.fromJsonable=function(t){for(var e in this.numToAttrib={},this.nextNum=t.nextNum,this.attribToNum={},t.numToAttrib){var n;t.numToAttrib.hasOwnProperty(e)&&(n=t.numToAttrib[e],this.attribToNum[String(n)]=Number(e),this.numToAttrib[e]=[n[0],n[1]])}try{this.checkConsistent()}catch(t){this.handleError({e:t,message:"[attribute-pool][fromJsonable] check consistent fail",level:d.WV.FATAL})}return this.dirty=!0,this},e.toJsonableNoCloning=function(){return{numToAttrib:this.numToAttrib,nextNum:this.nextNum}},e.fromJsonableNoCloning=function(t){for(var e in this.numToAttrib=t.numToAttrib,this.nextNum=t.nextNum,this.attribToNum={},this.numToAttrib)this.numToAttrib.hasOwnProperty(e)&&(this.attribToNum[String(this.numToAttrib[e])]=Number(e));try{this.checkConsistent()}catch(t){this.handleError({e:t,message:"[attribute-pool][fromJsonableNoCloning] check consistent fail",level:d.WV.FATAL})}return this},e.copy=function(){var e,n,i,r=new t;for(e in this.numToAttrib)this.numToAttrib.hasOwnProperty(e)&&(n=this.numToAttrib[e],r.numToAttrib[e]=[n[0],n[1]]);for(i in this.attribToNum)this.attribToNum.hasOwnProperty(i)&&(r.attribToNum[i]=this.attribToNum[i]);return r.nextNum=this.nextNum,r},e.checkConsistent=function(){for(var t=0;t<this.nextNum;t++)h(t in this.numToAttrib,"AttribPool: "+t+" is not in this.numToAttrib");var e,n,i,r={};for(e in this.numToAttrib)this.numToAttrib.hasOwnProperty(e)&&(h(0<=Number(e)&&Number(e)<this.nextNum,"AttribPool: "+e+" is not in range [0,"+this.nextNum+"]"),n=this.numToAttrib[e],h("[object Array]"===Object.prototype.toString.call(n),"AttribPool: attrib should be an array"),h(2===n.length,"AttribPool: attrib length should be 2"),h("string"==typeof n[0],"AttribPool: key should be string"),h("string"==typeof n[1],"AttribPool: value should be string"),h(!(String(n)in r),"AttribPool: attrib was already seen"),r[String(n)]=!0,h(this.attribToNum[String(n)]===Number(e),"AttribPool: attribToNum does not match"));for(i in this.attribToNum)this.attribToNum.hasOwnProperty(i)&&h(i in r,"AttribPool: attr was not seen")},e.setAttributes=function(t){var e=this,n=[];t instanceof c.D?t.forEach((function(t){t.forEach((function(t){t.attributes&&e.setAttributes(t.attributes)}))})):t instanceof Array||(n=(0,f.L)(t)),n.forEach((function(t){return e.putAttrib(t)}))},e.setOnErrorCb=function(t){this.handleError=t},e.resetOnErrorCb=function(){this.handleError=v},e.clear=function(){this.numToAttrib={},this.attribToNum={},this.nextNum=0,this.dirty=!1},(0,i.a)([p.W],t.prototype,"toJsonable",null),(0,i.a)([p.W],t.prototype,"fromJsonable",null),(0,i.a)([p.W],t.prototype,"checkConsistent",null),t}(),y=n("vsh_40896"),m=n("vsh_34859"),_=function(){function t(){this.runtimeStack=[]}var e=t.prototype;return Object.defineProperty(e,"atRuntime",{get:function(){return!!this.runtimeStack.length},enumerable:!1,configurable:!0}),Object.defineProperty(e,"atDeepRuntime",{get:function(){return 1<this.runtimeStack.length},enumerable:!1,configurable:!0}),Object.defineProperty(e,"currentRuntime",{get:function(){return this.runtimeStack[this.runtimeStack.length-1]},enumerable:!1,configurable:!0}),e.start=function(t){var e=(0,y.zs)(6);this.runtimeStack.push({id:e,type:t})},e.stop=function(){return this.runtimeStack.pop()},t}(),b=function(){function t(t){var e=this,n=t.deltaSet,i=t.schema;t=t.modulesContainer;this.content=new Map,this._changeCbk=function(){},this.activeZoneId=u.S,this.storeAttributes={},this._getInternalZoneEntities=function(t,e,n){return[]},this.contentApplyRuntime=new _,this.schema=null!=i?i:new m.V({}),this._attributes=new g,this.modulesContainer=t,null!=n&&n.forEach((function(t){var n=e.modulesContainer.get(l.h.ZoneState);e.content.set(t.zoneId,new n(t.zoneId,t)),t.forEach((function(t){t.attributes&&e._attributes.setAttributes(t.attributes)}))}))}var e=t.prototype;return e.create=function(e){return new t(e)},e.getContent=function(){return this.content},e.setActiveZone=function(t){this.getZoneState(t)&&(this.activeZoneId=t)},e.getActiveZone=function(){return this.getZoneState(this.activeZoneId)},e[Symbol.iterator]=function(){return this.content.values()},e.getEntities=function(t,e){var n=[];if(t instanceof Array){var r=this.getZoneState(u.S);n.push.apply(n,(0,i.d)([],(0,i._)(r.getEntities(t,e,this._getInternalZoneEntities)),!1))}else{t instanceof Function&&(e=t,t={start:{line:0,offset:0,zoneId:"0"},end:{line:o=(r=this.getZoneState(u.S)).length()-1,offset:r.getLine(o).length(),zoneId:"0"}});var o=t.start.zoneId;if(!(o=this.getZoneState(o)))return[];n.push.apply(n,(0,i.d)([],(0,i._)(o.getEntities(t,e,this._getInternalZoneEntities)),!1))}return n},e._logIfInvalidDelta=function(t){try{throw new Error("invalid delta")}catch(e){console.log(t,e.stack)}},e.apply=function(t,e){return t=this.applyToContentState(t,e=void 0===e?{}:e),this.triggerChangeCbk((0,i.b)((0,i.b)({},t),{options:e}))},e.applyToContentState=function(t,e){var n,i=this;void 0===e&&(e={}),this._willApplyCbk&&this._willApplyCbk(),this.contentApplyRuntime.start(e.type||"editEvent");t=(0,c.o)(t)?t:new c.D(((s={})[t.zoneId]=t,s));var s=this._clone(!1,t);if(t.forEach((function(t){t.forEach((function(t){"string"==typeof t.insert&&t.insert.includes(d.T6)&&i._logIfInvalidDelta("invalid delta: insert a zero space")}))})),e.isRemote||!1===e.normalize||(t=(0,y.qW)(this,this.schema,t)),this._willChangeCbk)try{t=this._willChangeCbk({current:this,next:this,deltaSet:t,options:e})}catch(t){null!==(n=this._errorCbk)&&void 0!==n&&n.call(this,{e:t,message:"[contentState][apply] call _willChangeCbk error",level:r.W.ERROR})}var a={};try{t.forEach((function(t){var e,n=t.zoneId,s=i.getZoneState(n);s?(e=s.apply(t,(function(t,e,o){var s={start:t,deletes:e,inserts:o};a[n]?a[n].push(s):a[n]=[s],(0,y.s7)(o)?i._onZoneMutate(n,t,e,o):null!==(e=i._errorCbk)&&void 0!==e&&e.call(i,{message:"[contentState][apply] 数据异常: ".concat(o),level:r.W.FATAL})})),i.content.set(n,e),t instanceof o.I&&i._followInlineStyleOverride(t)):(s=i.addZone(n,t),a[n]=[{start:0,deletes:[],inserts:s.lines}])}))}catch(t){null!==(n=this._errorCbk)&&void 0!==n&&n.call(this,{message:"[contentState][apply] error",level:r.W.FATAL,e:t})}return{changes:this._fixChanges(a),previous:s,deltaSet:t}},e.triggerChangeCbk=function(t){var e=t.changes,n=t.previous,i=t.deltaSet;t=t.options;try{this._changeCbk&&this._changeCbk({previous:n,current:this,deltaSet:i,changes:e,options:t})}catch(e){null!==(t=this._errorCbk)&&void 0!==t&&t.call(this,{e:e,message:"[contentState][apply] call _changeCbk error",level:r.W.ERROR})}return this.contentApplyRuntime.stop()},e._fixChanges=function(t){var e,n,r={};try{for(var o=(0,i.e)(Object.keys(t)),s=o.next();!s.done;s=o.next())!function(e){var n=t[e],i=0;r[e]=n.map((function(t){var e=t.start,n=t.deletes;t=t.inserts,e={start:e+i,deletes:n,inserts:t};return i+=n.length-t.length,e}))}(s.value)}catch(n){e={error:n}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},e._onZoneMutate=function(t,e,n,i){this._onMutateCbk&&this._onMutateCbk(t,e,n,i)},e._clone=function(t,e){var n,r,o=this,s=new Map;if(t||!e)try{for(var a=(0,i.e)(this.content),l=a.next();!l.done;l=a.next()){var u=(0,i._)(l.value,2),c=u[0],d=u[1];s.set(c,d.clone())}}catch(t){n={error:t}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}else s=new Map(this.content),e.forEach((function(t,e){var n=o.content.get(e);n&&s.set(e,n.clone())}));return t=t?this._attributes.toJsonable():this._attributes,(t=this.create({apool:t,schema:this.schema,modulesContainer:this.modulesContainer})).content=s,t._changeCbk=this._changeCbk,t._willChangeCbk=this._willChangeCbk,t},e.onChange=function(t){this._changeCbk=t},e.onWillChange=function(t){this._willChangeCbk=t},e._onMutate=function(t){this._onMutateCbk=t},e._onRefresh=function(t){this._refreshCbk=t},e._onError=function(t){this._errorCbk=t,this._attributes.setOnErrorCb(t)},e._onWillApply=function(t){this._willApplyCbk=t},e.getAttributes=function(t,e){var n=t.zoneId;return(n=this.getZoneState(n))?n.getAttributes(t,e):(0,y.vA)()},e.getLineAttributes=function(t,e){return(e=null===(t=this.getZoneState(t))||void 0===t?void 0:t.getLine(e))?e.getLineAttributes():(0,y.vA)()},e.getZoneState=function(t){return this.content.get(t)},e._dangerouslyReplaceAttribute=function(t,e,n,r){var o,s,a,l;try{for(var u=(0,i.e)(this),c=u.next();!c.done;c=u.next()){var d=c.value;try{for(var h=(a=void 0,(0,i.e)(d)),f=h.next();!f.done;f=h.next())f.value._getDelta().forEach((function(i){var o;(null===(o=i.attributes)||void 0===o?void 0:o[t])===e&&(delete i.attributes[t],i.attributes[n]=r)}))}catch(s){a={error:s}}finally{try{f&&!f.done&&(l=h.return)&&l.call(h)}finally{if(a)throw a.error}}}}catch(s){o={error:s}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}},e.setAttributes=function(t,e,n){var s,a,l,u,d,h,f;void 0===n&&(n={internalZonesIncluded:!0});var p,v=(m=t.start).zoneId,g=m.offset,y=m.line,m=(b=t.end).zoneId,_=b.offset,b=b.line;if(v===m){var E=this.rangeToPosition(t);if(null!==E)if(g!==_||y!==b){if(0!==E.len){var S,w={},C=this.getEntities(t),I=(p=function(t){return t.start.zoneId},C.reduce((function(t,e){var n=p(e);return t[n]||(t[n]=[]),t[n].push(e),t}),{}));for(S in I)if((n.internalZonesIncluded||v===S)&&I.hasOwnProperty(S)){var T=new o.I({zoneId:S}),x=I[S];S===v&&T.retain(E.start);try{for(var k=(u=void 0,(0,i.e)(x.entries())),M=k.next();!M.done;M=k.next()){var R,P,O,L=(0,i._)(M.value,2),D=L[0],A=L[1];(null===(f=A.attributes)||void 0===f||!f.lmkr||n.withLineMarker)&&("\n"!==A.text||n.withEnter)?(R=A.text.endsWith("\n")&&!n.withEnter?1:0,P=A.start.offset,O=A.end.offset,0===D&&(P=g),D===C.length-1&&0!==_&&(R=_===A.end.offset?R:0,O=_),T.retain(O-P-R,e).retain(R)):T.retain(1)}}catch(t){u={error:t}}finally{try{M&&!M.done&&(d=k.return)&&d.call(k)}finally{if(u)throw u.error}}w[S]=T}return t=new c.D(w),this.apply(t,(0,i.b)({type:"setAttributes"},n))}try{for(var z=(0,i.e)(Object.entries(e)),N=z.next();!N.done;N=z.next()){var W=(0,i._)(N.value,2),B=W[0],K=W[1];this._setInlineStyleOverride(E,B,K)}}catch(t){a={error:t}}finally{try{N&&!N.done&&(l=z.return)&&l.call(z)}finally{if(a)throw a.error}}}else try{for(var Z=(0,i.e)(Object.keys(e)),j=Z.next();!j.done;j=Z.next()){var U=j.value;this._setInlineStyleOverride(E,U,e[U])}}catch(t){h={error:t}}finally{try{j&&!j.done&&(s=Z.return)&&s.call(Z)}finally{if(h)throw h.error}}}else null!==(h=this._errorCbk)&&void 0!==h&&h.call(this,{message:"[ContentState][setAttributes] start zoneId: ".concat(v," not equal to end zoneId: ").concat(m),level:r.W.ERROR})},e.setLineAttributes=function(t,e,n,r){void 0===r&&(r={});var s=null===(s=this.content.get(t))||void 0===s?void 0:s.getLine(e);if(s&&null!==(e=this.rangePointToOffset({line:e,offset:0,zoneId:t})))return(t=new o.I({zoneId:t})).retain(e),s.hasLineMarker()?t.retain(1,n):t.insertLineMarker(n),this.apply(t,(0,i.b)({type:"setLineAttributes"},r))},e.hasLineMarker=function(t){var e=t.line;t=t.zoneId;return!(null===(e=null===(t=this.content.get(t))||void 0===t?void 0:t.getLine(e))||void 0===e||!e.hasLineMarker())},e.isLineStart=function(t){return this.hasLineMarker(t)?1===t.offset:0===t.offset},e.deleteText=function(t,e){void 0===e&&(e={});var n=this.rangeToPosition(t);if(null!==n){var r=n.start,s=n.len,a=n.zoneId;if(t=this.getZoneState(a))return n=t.getContent().length(),t=s,n-1<=r+s&&(t=n-r-1,console.warn("auto correct when delete too many texts",s,n)),t=new o.I({zoneId:a}).retain(r).delete(t),this.apply(t,(0,i.b)({type:"deleteText"},e))}},e.getInsertTextDelta=function(t,e,n,i){return void 0===i&&(i={}),new o.I({zoneId:t.zoneId}).retain(e).insert(n,i)},e.insertText=function(t,e,n,r){void 0===n&&(n={}),void 0===r&&(r={});var o=this.rangePointToOffset(t);if(null!==o)return n=this.getInsertTextDelta(t,o,e,n),this.apply(n,(0,i.b)({type:"insertText"},r))},e.getReplaceTextDelta=function(t){var e=t.pos,n=t.text,i=t.attributes,r=e.start;t=e.len,e=e.zoneId;return new o.I({zoneId:e}).retain(r).delete(t).insert(n,i)},e.replaceText=function(t,e,n,r){void 0===n&&(n={}),void 0===r&&(r={});var o=this.rangeToPosition(t);if(null!==o)return n=this.getReplaceTextDelta({sel:t,pos:o,text:e,attributes:n}),this.apply(n,(0,i.b)({type:"replaceText"},r))},e.rangeToPosition=function(t){var e=t.start,n=t.end;t=this.rangePointToOffset(e),n=this.rangePointToOffset(n);return null===t||null===n?null:{start:t,len:n-t,zoneId:e.zoneId}},e.rangePointToOffset=function(t){var e=t.zoneId,n=t.line;t=t.offset;return(e=this.getZoneState(e))?e.pointToOffset({line:n,offset:t}):null},e._setInlineStyleOverride=function(t,e,n){var i=t.zoneId;t=t.start;(i=this.storeAttributes[i]=this.storeAttributes[i]||{})[t]=i[t]||{},i[t][e]=n},e.getInlineStyleOverride=function(t,e){if(t){var n=t.zoneId,i=t.start;return e?null===(t=null===(t=this.storeAttributes[n])||void 0===t?void 0:t[i])||void 0===t?void 0:t[e]:(null===(n=this.storeAttributes[n])||void 0===n?void 0:n[i])||{}}return this.storeAttributes},e._clearInlineStyleOverride=function(t){var e;t?(e=t.zoneId,t=t.start,this.storeAttributes[e]&&delete this.storeAttributes[e][t]):this.storeAttributes={}},e._followInlineStyleOverride=function(t){var e,n,r,o,s,a,l,u,c,d,h=this.getInlineStyleOverride()[t.zoneId];if(h){var f=0;try{for(var p=(0,i.e)(t.ops),v=p.next();!v.done;v=p.next()){var g=v.value;if(f+=null!==(d=null!==(u=null!==(l=g.retain)&&void 0!==l?l:g.delete)&&void 0!==u?u:null===(c=g.insert)||void 0===c?void 0:c.length)&&void 0!==d?d:0,g.delete)try{for(var y=(r=void 0,(0,i.e)(Object.keys(h))),m=y.next();!m.done;m=y.next()){var _=m.value;(w=Number(_))<=f&&f-g.delete<w&&delete h[_]}}catch(t){r={error:t}}finally{try{m&&!m.done&&(o=y.return)&&o.call(y)}finally{if(r)throw r.error}}}}catch(t){e={error:t}}finally{try{v&&!v.done&&(n=p.return)&&n.call(p)}finally{if(e)throw e.error}}try{for(var b=(0,i.e)(Object.entries(h)),E=b.next();!E.done;E=b.next()){var S=(0,i._)(E.value,2),w=S[0],C=S[1],I=t.transform(Number(w));I!==Number(w)&&(h[I]=C,delete h[w])}}catch(t){s={error:t}}finally{try{E&&!E.done&&(a=b.return)&&a.call(b)}finally{if(s)throw s.error}}}},e._forceRefresh=function(t,e){var n=this.getZoneState(t);if(n){for(var i=0;i<e.length;i++){var r=e[i],o=n.getLine(r),s=o.clone();s._refreshKey(),o._node&&o._node instanceof HTMLElement&&(s._node=o._node.cloneNode(!0)),n._splice(r,1,[s])}this._refreshCbk&&this._refreshCbk({zoneId:t,lineArr:e})}},e.toDeltaSet=function(t,e){var n,r;void 0===t&&(t=!1),void 0===e&&(e=!1);var o=new c.D;try{for(var s=(0,i.e)(this.content.entries()),a=s.next();!a.done;a=s.next()){var l=(0,i._)(a.value,2),u=l[0],d=l[1];o.add(u,d.getContent(t,e))}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o},e.isEmpty=function(){var t=this.getZoneState(u.S);return!t||!(1<t.length())&&t.getLine(0).isEmpty()},e.setContent=function(t,e){var n;void 0===e&&(e={});var r=new c.D,o=t instanceof c.D?t:new c.D(((n={})[t.zoneId]=t,n));this.getContent().forEach((function(t,e){var n=t.getType()===s.Ak.Content;(l=(0,c.y)({zoneId:e,zoneType:t.getType()})).delete(t.getModelText().length-(n?1:0));t=l;var a,l=(t=o.get(e)?l.concat(o.get(e)):t).ops.length-1;n&&null!==(a=t.ops[l])&&void 0!==a&&a.insert&&(a=t.ops[l].insert).endsWith("\n")&&(l=t.ops.pop(),(a=a.slice(0,-1))&&t.insert(a,(0,i.b)({},null==l?void 0:l.attributes))),r.add(e,t)})),o.forEach((function(t){r.get(t.zoneId)||r.add(t.zoneId,t)})),this.apply(r,e)},e.clear=function(){this._attributes.clear(),this._clearInlineStyleOverride()},e._clearListener=function(){this._changeCbk=function(){},this._errorCbk=void 0,this._willApplyCbk=void 0,this._willChangeCbk=void 0,this._refreshCbk=void 0,this._onMutateCbk=void 0,this._attributes.resetOnErrorCb()},t}(),E=function(){function t(t){this.LINE_STATE_TO_ZONE_ID=new Map,this.ZONE_ID_TO_LINE_STATE=new Map,this.ZONE_ID_TO_SCROLL_MODULE=new Map,this.zoneAttrs=[],this.zoneRules=new Map,this.contentState=t,this.registerZoneRule("zoneId",(function(t){return[t]}))}var e=t.prototype;return e.registerScrollModule=function(t,e){this.ZONE_ID_TO_SCROLL_MODULE.set(t,e)},e.getAllScrollModules=function(){return(0,i.d)([],(0,i._)(this.ZONE_ID_TO_SCROLL_MODULE.values()),!1)},e.getScrollModuleByZoneId=function(t){return this.ZONE_ID_TO_SCROLL_MODULE.get(t)},e.removeScrollModule=function(t){this.ZONE_ID_TO_SCROLL_MODULE.delete(t)},Object.defineProperty(e,"zoneIdMap",{get:function(){return this.ZONE_ID_TO_LINE_STATE},enumerable:!1,configurable:!0}),e.init=function(){var t=this;this.contentState.getEntities((function(e){return t.zoneAttrs.includes(e)})).forEach((function(e){var n=e.start,i=e.attributes,r=null===(e=t.contentState.getZoneState(n.zoneId))||void 0===e?void 0:e.getLine(n.line);t.zoneAttrs.forEach((function(e){var n;!i[e]||(n=t.zoneRules.get(e))&&r&&n(i[e]).forEach((function(e){t.update(e,r)}))}))}))},e.registerZoneRule=function(t,e){this.zoneRules.set(t,e),this.zoneAttrs.push(t)},e.update=function(t,e){var n=this.ZONE_ID_TO_LINE_STATE.get(t);!n||n===e||(i=this.LINE_STATE_TO_ZONE_ID.get(n))&&delete i[t];var i=this.LINE_STATE_TO_ZONE_ID.get(e)||{};i[t]=!0,this.LINE_STATE_TO_ZONE_ID.set(e,i),this.ZONE_ID_TO_LINE_STATE.set(t,e),(t=this.contentState.getZoneState(t))&&t._setParent(e)},e.removeZoneId=function(t){var e,n=this.ZONE_ID_TO_LINE_STATE.get(t);!n||(e=this.LINE_STATE_TO_ZONE_ID.get(n))&&(delete e[t],Object.keys(e).length||this.LINE_STATE_TO_ZONE_ID.delete(n)),this.ZONE_ID_TO_LINE_STATE.delete(t)},e.removeLineState=function(t){var e=this;(t=this.LINE_STATE_TO_ZONE_ID.get(t))&&Object.keys(t).forEach((function(t){e.ZONE_ID_TO_LINE_STATE.delete(t)}))},e.updateLineState=function(t,e){var n=this,i=this.LINE_STATE_TO_ZONE_ID.get(t);i&&(this.LINE_STATE_TO_ZONE_ID.delete(t),this.LINE_STATE_TO_ZONE_ID.set(e,i),Object.keys(i).forEach((function(t){(t=n.contentState.getZoneState(t))&&t._setParent(e)})))},e.getZoneIdsByAttributes=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=(n=(r=(0,i._)(n,2))[0],r[1]);if(n=this.zoneRules.get(n))return n(r)}return[]},e._detectZoneChange=function(t){function e(t){return t=t.getAttributes(),r.getZoneIdsByAttributes(t)}var n,r=this,o=[],s=this;for(n in t)!function(n){var a,l;t.hasOwnProperty(n)&&(a=t[n],(l=s.ZONE_ID_TO_LINE_STATE.get(n))&&n!==u.S&&e(l).forEach((function(t){r.update(t,l)})),a.forEach((function(t){t.inserts.forEach((function(t){var n=e(t);o.push.apply(o,(0,i.d)([],(0,i._)(n),!1)),n.forEach((function(e){r.update(e,t)}))}))})))}(n);for(n in t)t.hasOwnProperty(n)&&t[n].forEach((function(t){t.deletes.forEach((function(t){(t=r.LINE_STATE_TO_ZONE_ID.get(t))&&Object.keys(t).forEach((function(t){r.removeZoneId(t)}))}))}))},e.getAncestorZones=function(t){for(var e,n=[t],i=t;i;)(i=null===(e=this.ZONE_ID_TO_LINE_STATE.get(i))||void 0===e?void 0:e.getZoneId())&&n.push(i);return n},t}(),S=function(t){function e(e){var n=t.call(this,e)||this;return n._getInternalZoneEntities=function(t,e,r){void 0===e&&(e=[]);var o=[];return n._zoneManager.getZoneIdsByAttributes(t).reduce((function(t,o){return t.push.apply(t,(0,i.d)([],(0,i._)(n._getZoneStateEntities(o,e,r)),!1)),t}),o),o},n._getZoneStateEntities=function(t,e,r){var s=n.getZoneState(t),a=[];return s||(s=new o.I({zoneId:t}).insertEnter(),s=new(n.modulesContainer.get(l.h.ZoneState))(t,s)),a.push.apply(a,(0,i.d)([],(0,i._)(s.getEntities(e,r)),!1)),a},n._zoneManager=new E(n),n}(0,i.c)(e,t);var n=e.prototype;return n.init=function(){this._zoneManager.init()},n.create=function(t){return new e(t)},n.getZoneManager=function(){return this._zoneManager},n._clone=function(e,n){return(n=t.prototype._clone.call(this,e,n))._zoneManager.zoneAttrs=Array.from(this._zoneManager.zoneAttrs),n._zoneManager.zoneRules=new Map(this._zoneManager.zoneRules),n},n.addZone=function(t,e,n){var i;return this.content.get(t)?(null!==(i=this._errorCbk)&&void 0!==i&&i.call(this,{message:"[ContentState][addZone] zoneId:".concat(t," existed"),level:r.W.ERROR}),null):(e=e||new o.I({zoneId:t}).insertEnter(),e=new(this.modulesContainer.get(l.h.ZoneState))(e.zoneId,e),this.content.set(t,e),n&&this._zoneManager.update(t,n),e)},n.removeZone=function(t){this._zoneManager.removeZoneId(t);var e=this.getZoneState(t);e&&(e=new o.I({zoneId:t}).delete(e.totalWidth()-1),this.apply(e),this.content.delete(t))},n.apply=function(t,e){return t=this.applyToContentState(t,e=void 0===e?{}:e),this._zoneManager._detectZoneChange(t.changes),this.triggerChangeCbk((0,i.b)((0,i.b)({},t),{options:e}))},n.slice=function(t,n){var o,s=this,a=t.zoneId,l=n.zoneId;if(a!==l)return null!==(o=this._errorCbk)&&void 0!==o&&o.call(this,{message:"[contentState][slice] start zoneId: ".concat(a," not equal to end zoneId: ").concat(l),level:r.W.ERROR}),null;if(!(l=this.content.get(a)))return null;var u=new e({apool:this._attributes.toJsonable(),schema:this.schema,modulesContainer:this.modulesContainer});n=l.slice(t,n);return u.content.set(a,n),"0"===a&&n.getEntities([["aceTable",void 0]]).forEach((function(t){t=(e=(0,i._)(t.attributes.aceTable.split(" "),2))[0];var e=e[1];u.content.set(t,s.getZoneState(t)),u.content.set(e,s.getZoneState(e));e=(t=s._getRowColIds(t,e)).rowIds;var n=t.colIds;e.forEach((function(t){n.forEach((function(e){e="x".concat(t,"x").concat(e),u.content.set(e,s.getZoneState(e))}))}))})),u._zoneManager.init(),u},n.getReplaceTextDelta=function(t){var e=t.sel,n=t.pos,i=t.text,r=t.attributes,s=n.start;t=n.len,n=n.zoneId,t=new o.I({zoneId:n}).retain(s).delete(t);return this.assertPointAfterLineMarker(e.start),this.addLineMarkerAfterEnter({text:i,attributes:r,delta:t}),t},n.getInsertTextDelta=function(t,e,n,i){return void 0===i&&(i={}),e=new o.I({zoneId:t.zoneId}).retain(e),this.assertPointAfterLineMarker(t),this.addLineMarkerAfterEnter({text:n,attributes:i,delta:e}),e},n.addLineMarkerAfterEnter=function(t){var e=t.text,n=t.attributes,i=t.delta,r=e.split(s.K5);return r.forEach((function(t,e){r[e+1]?i.insert(t,n).insertEnter(n).insertLineMarker(n):i.insert(t,n)})),i},n.assertPointAfterLineMarker=function(t){if(this.hasLineMarker(t)&&0===t.offset)throw new Error("Cannot insertText at the offset 0 of line,  because there is a lineMarker")},n._getRowColIds=function(t,e){var n,r,o,s;t=this.getZoneState(t),e=this.getZoneState(e);if(!t||!e)return{rowIds:[],colIds:[]};t=t.getLine(0),e=e.getLine(0);var l=[],u=[];if(!t||!e)return{rowIds:l,colIds:u};try{for(var c=(0,i.e)(t),d=c.next();!d.done;d=c.next()){var h=d.value;(v=(0,a.Jg)(h))&&l.push(v)}}catch(t){n={error:t}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}try{for(var f=(0,i.e)(e),p=f.next();!p.done;p=f.next()){var v;h=p.value;(v=(0,a.Jg)(h))&&u.push(v)}}catch(t){o={error:t}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}return{rowIds:l,colIds:u}},e}(b)},vsh_69811:function(t,e,n){"use strict";n.d(e,{V:function(){return u}});var i=n("vsh_80018"),r=n("vsh_22328"),o=n("vsh_40351"),s=n("vsh_37075"),a=n("vsh_40896"),l=n("vsh_38761"),u=function(){function t(t,e,n){var l,u=this;this.key="",this.parent=null,this._node=null,this._keepKey=!1,this._invisible=!1,this._index=0,this._offsetStart=0,this._offsetEnd=0,this._zoneId="",this._length=0,this._modelText="",this._lmkr=0,this.content=t,n||(this.parent=e,this._zoneId=e.getZoneId(),this._modelText=this.content.ops.map((function(t){return(0,s.d)(t)?t.insert:" "})).join(""),this._length=this._modelText.length,e=(0,a.vA)(),this.hasLineMarker()&&(this._lmkr=1,e.push.apply(e,(0,i.d)([],(0,i._)((0,r.L)(this._getOps()[0].attributes)),!1))),this._lineAttributes=e,this._lineAttributes.toMap=function(){return l=l||(0,o.A)(u._lineAttributes),(0,i.b)({},l)},this.key=(0,a.zs)(6))}var e=t.prototype;return Object.defineProperty(e,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),e.isInvisible=function(){return this._invisible},e.isEndOfLine=function(t){return this._length===t+1},e.compose=function(e){return(e=new t(this.content.compose(e,!1),this.parent))._index=this._index,e},e.clone=function(){var e=new t(null,null,!0);return e.content=this.content,e._zoneId=this._zoneId,e._modelText=this._modelText,e._length=this._length,e._lmkr=this._lmkr,e._lineAttributes=this._lineAttributes,e.key=this.key,e._offsetStart=this._offsetStart,e._offsetEnd=this._offsetEnd,e._index=this._index,e.parent=this.parent,e},e.slice=function(e,n){var i=[],r=0;return this.content.forEach((function(t){var o,a,l;null!=t&&t.insert&&"object"!=typeof t.insert&&(o=(0,s.a)(t),r<=n&&e<=r+o&&(a=Math.max(0,e-r))<(l=Math.min(o,n-r))&&i.push({insert:null==t?void 0:t.insert.slice(a,l),attributes:t.attributes}),r+=o)})),new t(this.content.create({ops:i}),this.parent)},e.getZoneId=function(){return this._zoneId},e.getKey=function(){return this.key},e.getText=function(){var t=this.content.ops.map((function(t){return(0,s.d)(t)?t.insert:"*"})).join("");return this.hasLineMarker()?t.slice(1):t},e.getLineMarker=function(){return this._lmkr},e.getModelText=function(){return this._modelText},e.length=function(){return this._length},e.getOps=function(){return this._getOps()},e._getDelta=function(){return this.content},e._getOps=function(){return this.content.ops},e._setKey=function(t){this.key=t},e._setIndex=function(t){this._index=t},e._setOffset=function(t,e){this._offsetStart=t,this._offsetEnd=e},e._refreshKey=function(){this.key=(0,a.zs)(6)},e.getAttributes=function(t,e){var n,r,o,s;void 0===t&&(t=0),void 0===e&&(e=this.getModelText().length);var l=0,u=(0,a.vA)();try{for(var c=(0,i.e)(this),d=c.next();!d.done;d=c.next()){var h=d.value;if(null!=h&&h.insert&&"object"!=typeof h.insert){var f=h.insert.length,p=h.attributes;if(l+f<=t||e<=l||!p)l+=f;else{try{for(var v=(o=void 0,(0,i.e)(Object.entries(p))),g=v.next();!g.done;g=v.next()){var y=(0,i._)(g.value,2),m=y[0],_=y[1];u.push([m,_])}}catch(t){o={error:t}}finally{try{g&&!g.done&&(s=v.return)&&s.call(v)}finally{if(o)throw o.error}}l+=f}}}}catch(t){n={error:t}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return u},e.getEntities=function(t,e,n){var i,r=0,o=this.length();return t instanceof Array?i=t:(r=t.start,(o=t.end)===r&&0<o&&r--),this._getEntities({attributes:i,start:r,end:o,matcher:e,getInternalZoneEntities:n})},e._getEntities=function(t){var e,n,r,o,s,a,l,u,c=t.attributes,d=t.start,h=t.end,f=t.allMatch,p=void 0!==f&&f,v=t.matcher,g=t.getInternalZoneEntities,y=[],m=0,_=this._index;try{for(var b=(0,i.e)(this),E=b.next();!E.done;E=b.next()){var S=E.value;if(S.insert&&"object"!=typeof S.insert){var w=S.insert.length;if(m+w<=d||h<=m)m+=w;else{var C=!1,I=!0,T=S.attributes;if(T&&Object.keys(T).length||(I=!(T={})),v)try{for(var x=(r=void 0,(0,i.e)(Object.entries(T))),k=x.next();!k.done;k=x.next()){var M=(0,i._)(k.value,2);v(L=M[0],D=M[1])?C=!0:I=!1}}catch(t){r={error:t}}finally{try{k&&!k.done&&(o=x.return)&&o.call(x)}finally{if(r)throw r.error}}else if(null!=c&&c.length)try{for(var R=(s=void 0,(0,i.e)(Object.entries(T))),P=R.next();!P.done;P=R.next()){var O=(0,i._)(P.value,2),L=O[0],D=O[1];try{for(var A=(l=void 0,(0,i.e)(c)),z=A.next();!z.done;z=A.next()){var N=z.value,W=void 0!==N[1];N[0]!==L||W&&String(N[1])!==String(D)?I=!1:C=!0}}catch(t){l={error:t}}finally{try{z&&!z.done&&(u=A.return)&&u.call(A)}finally{if(l)throw l.error}}}}catch(t){s={error:t}}finally{try{P&&!P.done&&(a=R.return)&&a.call(R)}finally{if(s)throw s.error}}else I=!0;(C&&!p||I)&&y.push({start:{line:_,offset:Math.max(m,d),zoneId:this._zoneId},end:{line:_,offset:Math.min(m+w,h),zoneId:this._zoneId},text:S.insert.slice(Math.max(d-m,0),h-m),attributes:T}),m+=w;var B=null==g?void 0:g(Object.entries(T),c,v);B&&y.push.apply(y,(0,i.d)([],(0,i._)(B),!1))}}}}catch(t){e={error:t}}finally{try{E&&!E.done&&(n=b.return)&&n.call(b)}finally{if(e)throw e.error}}return y},e.getLineAttributes=function(){return this._lineAttributes},e.getOffset=function(){return{start:this._offsetStart,end:this._offsetEnd}},e.forEach=function(t){return this._getOps().forEach(t)},e[Symbol.iterator]=function(){return this._getOps().values()},e.hasLineMarker=function(){var t;return!(null===(t=null===(t=this._getOps()[0])||void 0===t?void 0:t.attributes)||void 0===t||!t.lmkr)},e.isEmpty=function(){var t=this.hasLineMarker()?1:0;return this.length()-t==1&&this._lineAttributes.length<=1||0===this.length()},e.isTextEmpty=function(){var t=this.hasLineMarker()?1:0;return this.length()-t==1||0===this.length()},e.previousSibling=function(){return this.parent.getLine(this._index-1)},e.nextSibling=function(){return this.parent.getLine(this._index+1)},e.compare=function(e){if(e===this)return t.EQAUL;if(e&&e.getKey()===this.getKey()){for(var n=this.getOps(),i=e.getOps(),r=0,o=i.length;r<o;r++)if(i[r]!==n[r])return t.UPDATE;return t.EQAUL}return t.UNEQUAL},t.EQAUL=l.A.EQUAL,t.UNEQUAL=l.A.UNEQUAL,t.UPDATE=l.A.UPDATE,t}()},vsh_40896:function(t,e,n){"use strict";n.d(e,{ky:function(){return S},zs:function(){return g},vA:function(){return v},qF:function(){return k},qW:function(){return P},s7:function(){return O}});var i,r,o=n("vsh_80018"),s=n("vsh_40351"),a=n("vsh_30436"),l=n("vsh_37075"),u=n("vsh_8458"),c=n("vsh_40285"),d=n("vsh_36856");(r=i=i||{}).inline="inline",r.block="block";var h,f,p="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function v(){var t=[];return t.toMap=function(){return(0,s.A)(this)},t}function g(t){void 0===t&&(t=20);for(var e="",n=0;n<t;n++){var i=Math.floor(Math.random()*p.length);e+=p[i]}return e}function y(t,e,n){var i=(e=t.offsetToPoint(e)).line,r=e.offset,o=(n=t.offsetToPoint(n)).line,s=n.offset,a="";if(i===o)return t.getLine(i).getModelText().slice(r,s);for(var l=i;l<=o;l++){var u=t.getLine(l).getModelText();a+=l===i?u.slice(r):l===o?u.slice(0,s):u}return a}function m(t,e,n){return e=t.offsetToPoint(e),n=t.offsetToPoint(n),t.getEntities({start:e,end:n})}(f=h=h||{})[f.BLOCK=0]="BLOCK",f[f.LMKR=1]="LMKR",f[f.TEXT=2]="TEXT";var _=function(t,e){return S(t.attributes,e)?h.BLOCK:(0,a.eV)(t)?h.LMKR:h.TEXT},b=[[d.cI,d.cI,function(t,e){return!e.startsWith("\n")}],[d.ar,d.cI,d.ar],[function(t){return!t.endsWith("\n")},function(t){return!t.endsWith("\n")},d.ar]];function E(t,e,n,i,r){var s=t.ops[n],a=t.ops[e];if(a){var c=(0,l.f)(a);return c===u.HP.INSERT?(0,b[_(a,r)][_(s,r)])(a.insert,s.insert):c!==u.HP.RETAIN?E(t,e-1,n,i,r):(t=t.ops.slice(0,e+1).filter((function(t){return(0,l.f)(t)!==u.HP.INSERT})).reduce((function(t,e){return t+(0,l.a)(e)}),0),e=(0,o._)(m(i,t-1,t),1)[0],t=y(i,t-1,t),e=_({insert:t,attributes:e.attributes},r),(0,b[e][_(s,r)])(t,s.insert))}return!1}function S(t,e){return void 0===t&&(t={}),Object.keys(t).some((function(n){var r=null===(r=e.get(n))||void 0===r?void 0:r.display;return"string"==typeof r?r===i.block:"function"==typeof r&&r(t[n])===i.block}))}function w(t,e,n,i,r){var s=t.ops[e],a=t.ops[n];if(!a){if(!i)return!1;var c=t.ops.slice().filter((function(t){return(0,l.f)(t)!==u.HP.INSERT})).reduce((function(t,e){return t+(0,l.a)(e)}),0),d=(0,o._)(m(i,c,c+1),1)[0],h=y(i,c,c+1);c=_({insert:h,attributes:d.attributes},r);return(0,b[_(s,r)][c])(s.insert,h)}if((d=(0,l.f)(a))===u.HP.INSERT)return(0,b[_(s,r)][_(a,r)])(s.insert,a.insert);if(d!==u.HP.RETAIN)return d===u.HP.DELETE&&w(t,e,n+1,i,r);t=t.ops.slice(0,n).filter((function(t){return(0,l.f)(t)!==u.HP.INSERT})).reduce((function(t,e){return t+(0,l.a)(e)}),0),n=(0,o._)(m(i,t,t+1),1)[0],h=y(i,t,t+1),c=_({insert:h,attributes:n.attributes},r);return(0,b[_(s,r)][c])(s.insert,h)}function C(t,e,n,i,r){var s=t.ops[e],a=t.ops[n];if(!s.attributes||!S(s.attributes,r))return function(t,e,n,i){for(var r=!1,s=e+1;s<t.ops.length;){var a=(0,l.f)(t.ops[s]);if(a===u.HP.INSERT)return!1;if(a===u.HP.RETAIN)break;a===u.HP.DELETE&&(r=!0),s++}if(!r)return!1;var c=t.ops.slice(0,e+1).filter((function(t){return(0,l.f)(t)!==u.HP.INSERT})).reduce((function(t,e){return(0,l.a)(e)+t}),0),d=(0,o._)(m(n,c-1,c),1)[0],h=S(d.attributes,i),f=t.ops.slice(0,s).filter((function(t){return(0,l.f)(t)!==u.HP.INSERT})).reduce((function(t,e){return(0,l.a)(e)+t}),0);i=S((e=(0,o._)(m(n,f,f+1),1)[0]).attributes,i);return h?!y(n,f,f+1).startsWith("\n"):i?!d.attributes.lmkr&&!y(n,c-1,c).endsWith("\n"):!(!d.attributes.lmkr||!e.attributes.lmkr)}(t,e,i,r);if(!a)return"\n"!==y(i,c=t.ops.filter((function(t){return(0,l.f)(t)!==u.HP.INSERT})).reduce((function(t,e){return t+(0,l.a)(e)}),0),c+1);if((s=(0,l.f)(a))!==u.HP.INSERT)return s!==u.HP.RETAIN?C(t,e,n+1,i,r):"\n"!==y(i,c=t.ops.slice(0,n).filter((function(t){return(0,l.f)(t)!==u.HP.INSERT})).reduce((function(t,e){return t+(0,l.a)(e)}),0),c+1);var c;a=a.insert.startsWith("\n"),e=y(i,(e=t.ops.slice(0,e+1).filter((function(t){return(0,l.f)(t)!==u.HP.INSERT})).reduce((function(t,e){return t+(0,l.a)(e)}),0))-1,e).endsWith("\n");return!a&&!e}function I(t,e,n){return n.reduce((function(n,i){if(!(i instanceof c.I))return n.concat(i);var r=t.getZoneState(i.zoneId);if(!r&&i.ops.some((function(t){return!t.insert})))throw new Error("attempt to apply new ZoneDelta which is invalid");var s=!1,a=i.reduce((function(t,n,a){var c=(0,l.f)(n);return c===u.HP.DELETE?(t.push(n),t):c===u.HP.RETAIN?(s=!1,function(t,e,n,i,r){var s=t.ops[n];if(!s.attributes||!S(s.attributes,r))return!1;if(e=function(t){return t.ops[t.ops.length-1]}(e),!e)return!1;if((0,l.f)(e)===u.HP.INSERT)return!e.insert.endsWith("\n");for(var a=t.ops.slice(0,n).filter((function(t){return(0,l.f)(t)!==u.HP.INSERT}));a[a.length-1]&&(0,l.f)(a[a.length-1])===u.HP.DELETE;)a.pop();return 0!==a.length&&(n=a.reduce((function(t,e){return t+(0,l.a)(e)}),0),"\n"!==y(i,n-1,n)&&!(0,o._)(m(i,n-1,n),1)[0].attributes.lmkr)}(i,t,a,r,e)&&t.insertEnter(),t.push(n),C(i,a,a+1,r,e)&&t.insertEnter(),t):(!s&&E(i,a-1,a,r,e)&&t.insertEnter(),t.push(n),(a=w(i,a,a+1,r,e))&&t.insertEnter(),s=a,t)}),i.create({zoneId:i.zoneId}));return n.concat(a)}),new l.D)}function T(t,e,n,i){var r=Object.keys(t).reduce((function(r,o){return o===e||function(e,i){if(i instanceof RegExp){if(e.match(i))return!0}else if(i(e,t[e],n))return!0;return!1}(o,i)?r[o]=t[o]:r[o]="",r}),{});return t.lmkr&&(r.lmkr=t.lmkr),r}function x(t,e){var n=(0,o.b)({},t);return Object.keys(t).forEach((function(i){t[i]&&!e[i]&&delete n[i]})),n}function k(t,e){if(e)return Object.keys(e).filter((function(t){return e[t]})).find((function(e){var n;return(null===(n=t.get(e))||void 0===n?void 0:n.attributes)||(null===(e=t.get(e))||void 0===e?void 0:e.lineAttributes)}))}function M(t,e,n){if(e>=t.ops.length)throw new Error("getOpOffsetInDocumentWithCache index overstep");for(var i=e,r=0;0<=i;){if(n.has(i)){r+=n.get(i);break}var o=t.ops[i];(0,l.f)(o)!==u.HP.INSERT&&(r+=(0,l.a)(o)),i--}return r}function R(t,e,n){return n.reduce((function(n,i){if(!(i instanceof c.I))return n.concat(i);var r=t.getZoneState(i.zoneId);if(!r&&i.ops.some((function(t){return!t.insert})))throw new Error("attempt to apply new ZoneDelta which is invalid");var s=new Map,a=i.reduce((function(t,n,a){var c=(0,l.f)(n);if(c===u.HP.DELETE||!n.attributes)return t.push(n);var d,h,f=M(i,a-1,s);if(s.set(a-1,f),c===u.HP.RETAIN&&(d=f+(0,l.a)(n),(h=function(t,e,n){for(var i,r,s=[],a=t.offsetToPoint(e).line,u=t.getLine(a)._offsetStart,c=a;c<t.length();c++){var d=t.getLine(c).getOps();try{for(var h=(i=void 0,(0,o.e)(d)),f=h.next();!f.done;f=h.next()){var p,v,g=f.value,y=(0,l.a)(g);if(n<=u)return s;u<=n&&e<u+y&&(p=Math.max(e-u,0),v=Math.min(y,n-u),s.push({insert:g.insert.slice(p,v),attributes:g.attributes})),u+=y}}catch(t){i={error:t}}finally{try{f&&!f.done&&(r=h.return)&&r.call(h)}finally{if(i)throw i.error}}}return s}(r,f,d)).forEach((function(c,f){var p,v,g=(0,o.b)((0,o.b)({},c.attributes),n.attributes),y=k(e,g);if(y&&c.attributes&&null!==(p=e.get(y))&&void 0!==p&&p.attributes&&(C=e.get(y).attributes,g=T(g,y,c.attributes[y],C)),null!=g&&g.lmkr){var _=void 0;if(f<h.length-1)_=h[f+1].attributes;else{for(var b=!1,E=a+1;E<i.ops.length;){var S=i.ops[E];if((0,l.f)(S)!==u.HP.DELETE){var w;b=!0;_=(0,l.f)(S)===u.HP.INSERT?S.attributes:(w=M(i,a,s),s.set(a,w),w=(0,o._)(m(r,w,w+1),1)[0],(0,o.b)((0,o.b)({},w.attributes),S.attributes));break}E++}b||(_=(0,o._)(m(r,d,d+1),1)[0].attributes)}var C=k(e,_);return C?((I=e.get(C).lineAttributes)&&(g=T(g,C,_[C],I)),t.retain(c.insert.length,x(n.attributes,g))):t.retain(c.insert.length,x(n.attributes,g))}if(y){var I=e.get(y).lineAttributes;if(0<=f)return t.retain(c.insert.length,x(n.attributes,g));for(var R=t.ops.length-1,P=void 0;0<=R;){var O=(0,l.f)(t.ops[R]);if(O!==u.HP.DELETE){P=O;break}R++}return R<0||(f=t.ops[R],P===u.HP.INSERT&&null!==(v=f.attributes)&&void 0!==v&&v.lmkr?I&&(t.ops[R]={insert:f.insert,attributes:T(f.attributes,y,c.attributes[y],I)}):P===u.HP.RETAIN&&f.attributes),t.retain(c.insert.length,x(n.attributes,g))}return t.retain(c.insert.length,x(n.attributes,g))}))),c!==u.HP.INSERT)return t;var p=n.attributes,v=k(e,p);if(v&&null!==(g=e.get(v))&&void 0!==g&&g.attributes&&(p=T(p,v,p[v],e.get(v).attributes)),n.attributes.lmkr){for(var g,y=void 0,_=!1,b=a+1;b<i.ops.length;){var E=i.ops[b];if((0,l.f)(E)!==u.HP.DELETE){_=!0,y=E.attributes;break}b++}_?(c=i.ops[b],(g=(0,l.f)(c))===u.HP.INSERT&&c.attributes&&(y=c.attributes),g===u.HP.RETAIN&&!c.attributes&&r&&(y=(w=(0,o._)(m(r,f,f+1),1)[0]).attributes)):r&&(y=(w=(0,o._)(m(r,f,f+1),1)[0]).attributes),!y||(S=k(e,y))&&(C=e.get(S).lineAttributes)&&(p=T(p,S,y[S],C))}else if(v){for(var S,w,C=e.get(v).lineAttributes,I=t.ops.slice(),R=I.length-1;0<=R;){var P=I[R],O=(0,l.f)(P);if(O===u.HP.RETAIN)break;if(O===u.HP.INSERT&&P.insert&&P.insert.includes("\n")){R=-1;break}R--}0<=R&&!I[R].attributes&&C&&r&&(P=I[R],S=I.slice(0,R+1).filter((function(t){return(0,l.f)(t)!==u.HP.INSERT})).reduce((function(t,e){return t+(0,l.a)(e)}),0),(w=(0,o._)(m(r,S-1,S),1)[0]).attributes.lmkr&&(v=T(w.attributes,v,n.attributes[v],C),C=1<P.retain?[{retain:P.retain-1},{retain:1,attributes:v}]:[{retain:1,attributes:v}],(v=t.ops).splice.apply(v,(0,o.d)([R,1],(0,o._)(C),!1))))}return t.insert(n.insert,p)}),new c.I({zoneId:i.zoneId}));return n.concat(a)}),new l.D)}function P(t,e,n){return R(t,e,I(t,e,n))}function O(t){return!t.some((function(t){return t._getOps().map((function(t){return"string"==typeof t.insert?t.insert:" "})).join("")!==t.getModelText()}))}},vsh_36569:function(t,e,n){"use strict";n.d(e,{i:function(){return _}});var i=n("vsh_80018"),r=n("vsh_15808"),o=n("vsh_37075"),s=n("vsh_40896"),a=n("vsh_69811"),l=n("vsh_97321"),u=n("vsh_40285"),c=function(){function t(t){this.curLine=0,this.curCol=0,this.originLine=0,this.originCol=0,this.mutateStart=0,this.mutateDeleteCount=0,this.mutateInsert=[],this.isInMutate=!1,this.mutatee=t}var e=t.prototype;return e.insert=function(t,e){var n,r,o,s,c,d,h,f,p,v,g=this;t&&(n=t,this.isInMutate||this.enter(),this.mutatee.length()-1<this.originLine&&this.putCurLineInMutate(),-1<n.indexOf("\n")?(c=n.split("\n"),this.isCurLineInMutate()?(r=this.mutateInsert.length-1,(o=this.mutateInsert[r])._keepKey&&o!==this.mutatee.get(this.originLine)&&(o._keepKey=!1,o._refreshKey()),t=c.shift(),f=c.pop(),void 0!==t&&(v=(new u.I).retain(this.curCol).insert(t,e).insertEnter(e),s=o.slice(0,this.curCol).compose(v),this.curCol&&s._setKey(o.getKey()),this.curLine++,this.mutateInsert[r]=s),c.length&&(h=c.map((function(t){return new a.V((new u.I).insert(t,e).insertEnter(e),o.parent)})),(s=this.mutateInsert).push.apply(s,(0,i.d)([],(0,i._)(h),!1)),this.curLine+=c.length),void 0!==f&&(v=(new u.I).insert(f,e),d=o.slice(this.curCol,o.length()).compose(v),f?this.mutateInsert.push(d):(c=this.mutatee.get(this.originLine))&&d.length()===c.length()&&(0,l.X)(d._getOps(),c._getOps())?this.mutateInsert.push(c):d.length()&&this.mutateInsert.push(d),this.curCol=f.length)):(d=(p=this.splitTextLines(n)).length,h=p.map((function(t){return new a.V((new u.I).insert(t,e),g.mutatee.get(0).parent)})),p[d-1].includes("\n")||(f=this.mutatee.get(this.originLine))&&(h[d-1]=f.compose(h[d-1]._getDelta()),this.curCol=p[d-1].length,this.curLine--,this.mutateDeleteCount+=1),(d=this.mutateInsert).push.apply(d,(0,i.d)([],(0,i._)(h),!1)),this.curLine+=p.length)):(p=this.putCurLineInMutate(),v=(new u.I).retain(this.curCol).insert(n,e),(v=this.mutateInsert[p].compose(v))._setKey(this.mutateInsert[p].getKey()),v._keepKey=!0,this.mutateInsert[p]=v,this.curCol+=n.length))},e.retain=function(t,e){if(t){var n=(i=this.getLineAndCol(t)).line,i=i.col;if(n>this.originLine)return this.retainLines(n-this.originLine,e),void(i&&this.retainChars(i,e));t&&this.retainChars(t,e)}},e.retainChars=function(t,e){var n,i;e&&(this.isInMutate||this.enter()),this.isInMutate&&(this.putCurLineInMutate(),n=this.mutateInsert.length-1,i=this.mutateInsert[n],e=(new u.I).retain(this.curCol).retain(t,e),this.mutateInsert[n]=new a.V(i._getDelta().compose(e,!1),i.parent),this.mutateInsert[n]._setKey(i.getKey())),this.curCol+=t,this.originCol+=t},e.delete=function(t){if(t){var e=(n=this.getLineAndCol(t)).line,n=n.col;if(e>this.originLine)return this.deleteLines(e-this.originLine),void(n&&this.deleteChars(n));t&&this.deleteChars(t)}},e.close=function(){this.leave()},e.getLineAndCol=function(t){for(var e=0,n=this.originLine,i=this.originCol,r=this.mutatee.length(),o=n;o<r;o++){var s=this.mutatee.get(o).length();if(e<=t+i&&t+i<e+s)return{line:o,col:t-e+i};e+=s}return e===t+i?{line:r,col:0}:(console.warn("can not find the correct line and col"),{line:-1,col:-1})},e.deleteLines=function(t){var e,n,i;this.isInMutate||this.enter(),this.isCurLineInMutate()?0===this.curCol?(this.mutateDeleteCount+=t-1,this.originLine+=t,this.mutateInsert.pop()):(i=this.nextKLinesObject(t-1),this.mutateDeleteCount+=t,this.originLine+=t,e=this.mutateInsert.length-1,n=this.mutateInsert[e],(i=i.compose(n.slice(0,this.curCol)._getDelta()))._setKey(n.getKey()),this.mutateInsert[e]=i):(this.originLine+=t,this.mutateDeleteCount+=t),this.originCol=0},e.deleteChars=function(t){this.isInMutate||this.enter();var e=this.putCurLineInMutate(),n=this.mutateInsert[e],i=(new u.I).retain(this.curCol).delete(t);(i=n.compose(i))._setKey(n.getKey()),this.mutateInsert[e]=i,this.originCol+=t},e.nextKLinesObject=function(t){var e=this.mutateStart+this.mutateDeleteCount;return this.mutatee.get(e+t)},e.retainLines=function(t,e){if(e){var n,i,r;this.curCol&&(r=this.curCol,this.curCol=0,this.isInMutate||this.enter(),this.putCurLineInMutate(),n=this.mutateInsert.length-1,i=this.mutateInsert[n],r=(new u.I).retain(r).retain(i.length()-r,e),this.mutateInsert[n]=new a.V(i._getDelta().compose(r,!1),i.parent),this.mutateInsert[n]._setKey(i.getKey()),this.originLine++,this.curLine++,t--),this.curCol=0,this.isInMutate||this.enter();for(var o=0;o<t;o++)this.curLine++,this.originLine++,this.putCurLineInMutate(e);this.originCol=0}else this.curLine+=t,this.originLine+=t,this.curCol=0,this.originCol=0,this.isInMutate&&this.leave()},e.putCurLineInMutate=function(t){var e,n=this.mutatee.get(this.mutateStart+this.mutateDeleteCount);return t&&n&&(e=(new u.I).retain(n.length(),t),(e=new a.V(n._getDelta().compose(e,!1),n.parent))._setKey(n.getKey()),n=e),!this.isCurLineInMutate()&&n?(this.mutateInsert.push(n),this.mutateDeleteCount++):t&&n&&(this.mutateInsert[this.mutateInsert.length-1]=n),this.curLine-this.mutateStart},e.enter=function(){this.isInMutate=!0,this.mutateStart=this.curLine,this.mutateDeleteCount=0,this.mutateInsert=[],this.originLine=this.curLine,0<this.curCol&&this.putCurLineInMutate()},e.leave=function(){var t=this.mutateInsert.length;(0<this.mutateDeleteCount||0<t)&&(this.removeLastLineIfNecessary(),this.mutatee.splice(this.mutateStart,this.mutateDeleteCount,this.mutateInsert)),this.mutateStart=this.curLine,this.originLine=this.curLine,this.mutateDeleteCount=0,this.mutateInsert=[]},e.removeLastLineIfNecessary=function(){var t;this.mutateInsert.length&&(t=this.mutateInsert.length-1,this.mutateInsert[t]._getOps().length||this.mutateInsert.splice(t))},e.splitTextLines=function(t){return t.match(/[^\n]*(?:\n|[^\n]$)/g)},e.isCurLineInMutate=function(){return this.curLine-this.mutateStart<this.mutateInsert.length},t}(),d=function(){function t(t,e){var n=this;this.lines=[],this.parent=null,this._node=null,this.placeholder="",this._allText="",this.linesWidth=[],this.zoneId=t,this._content=e.create({zoneId:t,ops:e.ops}),this.lines=[],this._content.eachLine((function(t){t=new a.V(t,n),n.lines.push(t),n._allText+=t.getModelText(),n.linesWidth.push(t.length())})),this._updateLineStateInfos(),this.type=e.zoneType}var e=t.prototype;return t.register=function(e,n){t.mutators[e]=n},e._updateLineStateInfos=function(){var t=this,e=0;this.lines.forEach((function(n,i){var r=e+n.length();n._setOffset(e,r),n._setIndex(i),n.parent=t,e=r}))},Object.defineProperty(e,"allText",{get:function(){return console.warn("zoneState.allText是过时API，请换成zoneState.getModelText"),this._allText},enumerable:!1,configurable:!0}),e.getContainer=function(){return this._node},e.getModelText=function(){return this._allText},e._updateAllText=function(t,e,n){var r=[];n.forEach((function(t){r.push(t.length())})),(o=this.linesWidth).splice.apply(o,(0,i.d)([t,e.length],(0,i._)(r),!1));var o=this.linesWidth.slice(0,t).reduce((function(t,e){return t+e}),0);t=n.reduce((function(t,e){return t+e.getModelText()}),""),n=e.reduce((function(t,e){return t+e.getModelText()}),""),e=n.length;n!==t&&(e=this._allText.slice(o+e),this._allText=this._allText.slice(0,o)+t+e)},e.getType=function(){return this.type},e.slice=function(t,e){for(var n=t.line,i=t.offset,r=e.line,o=e.offset,s=this.cloneEmptyState(),a=n;a<=r;a++){var l=this.lines[a],u=void 0;u=n===r?l.slice(i,o):a===n?l.slice(i,l.length()):a===r?l.slice(0,o):l.slice(0,l.length());s._content=s._content.concat(u._getDelta()),s._allText+=u.getModelText(),s.linesWidth.push(u.length()),s._node=this._node,s.lines.push(u)}return s._updateLineStateInfos(),s},e._splice=function(t,e,n){var r;(r=this.lines).splice.apply(r,(0,i.d)([t,e],(0,i._)(n),!1))},e.clone=function(){var t=this.cloneEmptyState();t._allText=this._allText;for(var e=0,n=this.lines.length;e<n;e++)t.lines.push(this.lines[e].clone());return t},e.getLine=function(t){return this.lines[t]||null},e.getLineIndexOfKey=function(t){for(var e=0,n=this.lines.length;e<n;e++)if(t===this.lines[e].getKey())return e;return-1},e.getLineByKey=function(t){var e,n;try{for(var r=(0,i.e)(this.lines),o=r.next();!o.done;o=r.next()){var s=o.value;if(t===s.getKey())return s}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null},e.getEntities=function(t,e,n){var r=[];if(t instanceof Array)for(var o=0;o<this.length();o++)(s=this.getLine(o))&&r.push.apply(r,(0,i.d)([],(0,i._)(s.getEntities(t,e,n)),!1));else{t instanceof Function&&(e=t,t={start:{line:0,offset:0},end:{line:u=this.length()-1,offset:this.getLine(u).length()}});var s,a,l,u,c=(u=t.start).line,d=u.offset,h=(u=t.end).line,f=u.offset;for(o=c;o<=h;o++)(s=this.getLine(o))&&(a=o===c?d:0,l=o===h?f:s.length(),r.push.apply(r,(0,i.d)([],(0,i._)(s.getEntities({start:a,end:l},e,n)),!1)))}return r},e.getAttributes=function(t,e){e=this.getEntities({start:t,end:e},void 0,this._getInternalZoneEntities);var n,r,o,a,l=(0,s.vA)();if(!e||!e.length)return l;try{for(var u=(0,i.e)(e),c=u.next();!c.done;c=u.next()){var d=c.value.attributes;if(d)try{for(var h=(o=void 0,(0,i.e)(Object.entries(d))),f=h.next();!f.done;f=h.next()){var p=(0,i._)(f.value,2),v=p[0],g=p[1];l.push([v,String(g)])}}catch(t){o={error:t}}finally{try{f&&!f.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return l},e.length=function(){return this.lines.length},e.getZoneId=function(){return this._content.zoneId},Object.defineProperty(e,"content",{get:function(){return this._getContent()},enumerable:!1,configurable:!0}),e._getContent=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var n=(r=this._content).zoneId,r=r.zoneType,s=this._content.create({zoneId:n,zoneType:r,ops:[]});return this.lines.forEach((function(n,r){var a=(n=n._getOps()).length;n.forEach((function(n,l){var u,c;t&&(0,o.d)(n)&&(0===l&&0!==r||l===a-1)?s.insert(n.insert,n.attributes):e?(l=(0,i.b)({},n),(u=n.attributes)&&(c={},Object.keys(u).forEach((function(t){t.startsWith("clientside-")||(c[t]=u[t])})),l.attributes=c),s.ops.push(l)):s.ops.push(n)}))})),s},e.getContent=function(t,e){return this._getContent(t=void 0!==t&&t,e=void 0!==e&&e)},e.isEmpty=function(){var t;return!(1!==this.length()||null===(t=this.getLine(0))||void 0===t||!t.isEmpty())},e.apply=function(e,n){var o=this,s=this.lines.slice(0),a=e.zoneType,l=t.mutators[a];if(!l)throw new Error("can not find zoneType of ".concat(a,", you need call ZoneState.register(").concat(a,") before apply"));var u=this.cloneEmptyState();u._allText=this._allText,u.linesWidth=(0,i.d)([],(0,i._)(this.linesWidth),!1);var c=new l({getParent:function(){return o},getZoneId:function(){return o.getZoneId()},getZoneType:function(){return a},splice:function(t,e,r){var o=s.slice(t,t+e);s.splice.apply(s,(0,i.d)([t,e],(0,i._)(r),!1)),u._updateAllText(t,o,r),n(t,o,r)},length:function(){return s.length},get:function(t){return s[t]},map:function(t){return s.map((function(e,n,i){return t(e,n,i)}))}});return e.forEach((function(t){t.delete?c.delete(t.delete):t.retain?c.retain(t.retain,t.attributes):t.insert&&("string"==typeof t.insert&&(t.insert=(0,r.$)(t.insert)),c.insert(t.insert,t.attributes))})),c.close(),u.lines=s,u._node=this._node,u._updateLineStateInfos(),u.parent=this.parent,u},e.cloneEmptyState=function(){var e=this._content.create({zoneType:this.type,zoneId:this.zoneId});return(e=new t(this.getZoneId(),e)).type=this.type,e.zoneId=this.zoneId,e._node=this._node,e.placeholder=this.placeholder,e},e[Symbol.iterator]=function(){return this.lines.values()},e.setPlaceholder=function(t){this.placeholder=t},e._setLine=function(t,e){this.lines[t]=e},e._setParent=function(t){this.parent=t},e._getZoneDelta=function(){return this.content},e._indexOf=function(t){return t?t.index:0},e.pointToOffset=function(t){var e=t.line;t=t.offset;return(e=this.getLine(e))?e._offsetStart+t:null},e.offsetToPoint=function(t){var e=h(t,0,this.lines.length,this.lines),n=this.zoneId;if(null===e)return{zoneId:n,line:0,offset:0};var i=this.lines[e];return t===i._offsetEnd&&e!==this.lines.length-1?{zoneId:n,line:e+1,offset:0}:{zoneId:n,line:e,offset:t-i._offsetStart}},e.totalWidth=function(){return this.lines.reduce((function(t,e){return t+e.length()}),0)},t.mutators={},t}();function h(t,e,n,i){var r=Math.floor((e+n)/2);return n<e||!i.length||t>i[i.length-1]._offsetEnd||t<0?null:t>=i[r]._offsetStart&&t<=i[r]._offsetEnd?r:t>i[r]._offsetEnd?h(t,r,n,i):t<i[r]._offsetStart?h(t,e,r,i):null}d.register("Z",c);var f=n("vsh_61499"),p=n("vsh_8458"),v=(n("vsh_72862"),function(t){function e(e){var n=t.call(this)||this;n.ops=[];var i=e.zoneId,r=e.ops,o=e.zoneType;return n.zoneId=i,n.zoneType=o,r&&r.length>0&&(n.ops=r),n}(0,f.d)(e,t);var n=e.prototype;return n.insert=function(e,n){if(!e)return this;var i={id:e};return t.prototype.insert.call(this,i,n,!1)},n.create=function(t){return t.zoneType=t.zoneType||this.zoneType,new e(t)},e}(o.x)),g=function(t){function e(e){return t.call(this,(0,f._)({zoneType:p.Ak.Row},e))||this}return(0,f.d)(e,t),e}(v),y=function(t){function e(e){return t.call(this,(0,f._)({zoneType:p.Ak.Column},e))||this}return(0,f.d)(e,t),e}(v);o.x.registerCreator(p.Ak.Row,g),o.x.registerCreator(p.Ak.Column,y);var m=function(){function t(t){this.mutateStart=0,this.mutatee=t}var e=t.prototype;return e.insert=function(t,e){var n=t;t=(t=this.mutatee.get(0))||new a.V(this.createDelta(),this.mutatee.getParent()),e=this.createDelta().retain(this.mutateStart).insert(n.id,e),e=t.compose(e);this.mutatee.splice(0,1,[e]),this.mutateStart+=(0,o.a)({insert:n})},e.retain=function(t,e){e&&(e=this.createDelta().retain(this.mutateStart).retain(t,e),e=this.mutatee.get(0).compose(e),this.mutatee.splice(0,1,[e])),this.mutateStart+=t},e.delete=function(t){var e=this.createDelta();t=this.mutatee.get(0).compose(e.retain(this.mutateStart).delete(t));this.mutatee.splice(0,1,[t])},e.createDelta=function(){var t=this.mutatee.getZoneType(),e=this.mutatee.getZoneId();return new("R"===t?g:y)({zoneId:e})},e.close=function(){},t}(),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.c)(e,t),e}(d);_.register("R",m),_.register("C",m)},vsh_45110:function(t,e,n){"use strict";var i,r;n.d(e,{h:function(){return i}}),(r=i=i||{}).Range="Range",r.ZoneState="ZoneState",r.ContentState="ContentState",r.UndoModule="UndoModule",r.InputModel="InputModel"},vsh_14795:function(t,e,n){"use strict";n.d(e,{zq:function(){return l},$l:function(){return a},j0:function(){return d}});var i=n("vsh_80018"),r=n("vsh_44897"),o=n("vsh_98650"),s=n("vsh_45832"),a="undo",l="redo",u=function(t){var e=t.id,n=t.type,i=t.deltaSet;t=t.selection;this.id=e,this.type=n,this.deltaSet=i,this.selection=t};function c(){}c.prototype=Object.create(Array.prototype,{clear:{value:function(){this.splice(0,this.length)}},getNthFromTop:{value:function(t){return null!==(t=this[this.length-1-(t=void 0===t?0:t)])&&void 0!==t?t:null}},getNthFromBottom:{value:function(t){return null!==(t=this[t=void 0===t?0:t])&&void 0!==t?t:null}}}),c.prototype.constructor=c;var d=function(){function t(t){this.name="undoModule",this.uuid=(0,r.D)(6),this.undoDispatcher=null,this.undoStack=new c,this.redoStack=new c,this.batchedUndoCursors=[],this.didRecord=!1,this.selectionBeforeApply=null,this.editor=t,this.bindEvents(),this.registerCommands()}var e=t.prototype;return e.registerCommands=function(){var t=this,e=this.editor;e.registerCommand(a,(function(){t.undo()})),e.registerCommand(l,(function(){t.redo()}))},e.bindEvents=function(){this.editor.on(s.r.CONTENT_WILL_CHANGE,this.handleContentWillChange),this.editor.on(s.r.CONTENT_CHANGE,this.handleContentChange),this.editor.on(s.r.INPUT,this.handleInputEvent,100)},e.unbindEvents=function(){this.editor.off(s.r.CONTENT_WILL_CHANGE,this.handleContentWillChange),this.editor.off(s.r.CONTENT_CHANGE,this.handleContentChange),this.editor.off(s.r.INPUT,this.handleInputEvent)},e.handleInputEvent=function(t){var e=!1;"historyUndo"===t.nativeEvent.inputType?(this.undo(),e=!0):"historyRedo"===t.nativeEvent.inputType&&(this.redo(),e=!0),e&&(t.preventDefault(),t.stopEvent())},e.isApplyByMyself=function(){var t=this.editor.getContentState().contentApplyRuntime;return!!t.atRuntime&&(t=t.runtimeStack[0].type,[a,l].includes(t))},Object.defineProperty(e,"inBatching",{get:function(){return 0<this.batchedUndoCursors.length},enumerable:!1,configurable:!0}),e.handleContentWillChange=function(){this.selectionBeforeApply=this.editor.selection.getSelection()},e.handleContentChange=function(t){var e=t.previous,n=t.deltaSet,r=(t=(r=t.options).nonundoable,r.type);if(this.isApplyByMyself())return(r=(r===a?this.redoStack:this.undoStack).getNthFromTop(0))?void(r.selection=this.selectionBeforeApply):void 0;t?this.recordNonUndoable(n):(t=this.editor.getContentState().contentApplyRuntime,this.record(n,e.toDeltaSet(),(0,i.b)((0,i.b)({},t.currentRuntime),{selection:this.selectionBeforeApply})))},e.startBatchedUndo=function(){this.inBatching&&this.consumeBatchedUndo(this.batchedUndoCursors[this.batchedUndoCursors.length-1]);var t=this.undoStack.getNthFromTop(0);this.batchedUndoCursors.push((null==t?void 0:t.id)||null)},e.closeBatchedUndo=function(){var t;this.inBatching&&(t=this.batchedUndoCursors.pop(),this.consumeBatchedUndo(t),this.inBatching&&(this.batchedUndoCursors.pop(),this.startBatchedUndo()))},e.consumeBatchedUndo=function(t){var e=(0,i._)(t?this.getRecordEntryByID(t):[-1],1)[0];void 0!==e&&((t=this.undoStack.slice(e+1)).length&&this.didRecord&&(this.didRecord=!1,null!==(e=this.undoDispatcher)&&void 0!==e&&e.do(this.uuid)),1<t.length&&this.mergeRecords.apply(this,(0,i.d)([],(0,i._)(t),!1)))},e.record=function(t,e,n){var i=n.id,r=n.type;n=n.selection,e=t.invert(e);this.undoStack.push(new u({id:i,type:r,deltaSet:e,selection:n})),this.redoStack.clear(),this.inBatching?this.didRecord=!0:null!==(n=this.undoDispatcher)&&void 0!==n&&n.do(this.uuid)},e.recordNonUndoable=function(t){this.transform(this.undoStack,t),this.transform(this.redoStack,t)},e.transform=function(t,e){for(var n=t.length-1;0<=n;n--){var i=t[n].deltaSet;t[n].deltaSet=e.transform(i),e=i.transform(e)}},e.conversion=function(t,e,n){var r;t.length&&(r=t.pop(),t=this.editor.getContentState().toDeltaSet(),t=r.deltaSet.invert(t),e.push(new u((0,i.b)((0,i.b)({},r),{deltaSet:t}))),this.editor.getContentState().apply(r.deltaSet,n),this.editor.selection.setSelection(r.selection,!1))},e.performUndo=function(){this.conversion(this.undoStack,this.redoStack,{type:"undo"})},e.performRedo=function(){this.conversion(this.redoStack,this.undoStack,{type:"redo"})},e.getRecordEntryByID=function(t){var e,n;try{for(var r=(0,i.e)(this.undoStack.entries()),o=r.next();!o.done;o=r.next()){var s=(0,i._)(o.value,2),a=s[0],l=s[1];if(l.id===t)return[a,l]}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return[]},e._mergeRecord=function(t,e){var n=t.id,r=t.type,o=e.id,s=(t=(0,i._)(this.getRecordEntryByID(n),2))[0];e=t[1],o=(t=(0,i._)(this.getRecordEntryByID(o),2))[0],t=t[1];if(e&&t&&void 0!==s&&void 0!==o){var a=t.deltaSet;t=e.deltaSet;if(s<o)for(var l=o-1;s<l;l--)a=this.undoStack.getNthFromBottom(l).deltaSet.transform(a);else for(l=o+1;l<s;l++)a=this.undoStack.getNthFromBottom(l).deltaSet.transform(a);t=a.compose(t),this.undoStack.splice(s,1,new u({id:n,type:r,deltaSet:t,selection:e.selection})),this.undoStack.splice(o,1)}},e.batchedUndo=function(t){this.startBatchedUndo(),t(),this.closeBatchedUndo()},e.setUndoDispatcher=function(t,e){this.undoDispatcher=t,null!=e&&e.id&&(this.uuid=null==e?void 0:e.id),this.undoDispatcher.register((0,i.b)({id:this.uuid,undo:this.performUndo,redo:this.performRedo},e))},e.undo=function(){this.undoDispatcher?this.undoDispatcher.undo():this.performUndo()},e.redo=function(){this.undoDispatcher?this.undoDispatcher.redo():this.performRedo()},e.mergeRecords=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{for(var n=t.length-1;0<n;n--)this._mergeRecord(t[n-1],t[n])}catch(t){this.editor.log("mergeRecords failed",t.stack)}},Object.defineProperty(e,"undoable",{get:function(){return 0<this.undoStack.length},enumerable:!1,configurable:!0}),Object.defineProperty(e,"redoable",{get:function(){return 0<this.redoStack.length},enumerable:!1,configurable:!0}),e.markNonundoable=function(t){var e=(0,i._)(this.getRecordEntryByID(t.id),1)[0];void 0!==e&&(t=(0,i._)(this.undoStack.splice(e,1),1)[0].deltaSet.invert(this.editor.getContentState().toDeltaSet()),this.transform(this.undoStack.slice(0,e),t))},e.getNthUndoRecordFromTop=function(t){return this.undoStack.getNthFromTop(t=void 0===t?0:t)},e.getNthUndoRecordFromBottom=function(t){return this.undoStack.getNthFromBottom(t=void 0===t?0:t)},e.getNthRedoRecordFromTop=function(t){return this.redoStack.getNthFromTop(t=void 0===t?0:t)},e.getNthredoRecordFromBottom=function(t){return this.redoStack.getNthFromBottom(t=void 0===t?0:t)},e.clearUndoStack=function(){this.undoStack.clear()},e.clearRedoStack=function(){this.redoStack.clear()},e.clear=function(){this.clearRedoStack(),this.clearUndoStack()},e.destroy=function(){var t;this.unbindEvents(),null!==(t=this.undoDispatcher)&&void 0!==t&&t.unregister(this.uuid)},(0,i.a)([o.W],t.prototype,"handleInputEvent",null),(0,i.a)([o.W],t.prototype,"handleContentWillChange",null),(0,i.a)([o.W],t.prototype,"handleContentChange",null),(0,i.a)([o.W],t.prototype,"performUndo",null),(0,i.a)([o.W],t.prototype,"performRedo",null),(0,i.a)([o.W],t.prototype,"batchedUndo",null),t}()},vsh_83927:function(t,e,n){"use strict";n.d(e,{S:function(){return i}});var i=function(){function t(){}var e=t.prototype;return e.match=function(t,e){return!1},e.renderLine=function(t){return t.children},e.render=function(t){return t.children},e.serialize=function(t){return t},e.deserialize=function(t){return t.deltaSet},t}()},vsh_83640:function(t,e,n){"use strict";n.d(e,{Q$:function(){return d},gv:function(){return a},iI:function(){return l}});var i=n("vsh_80018"),r=n("vsh_95066"),o=(n("vsh_44960"),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="composingUnderlineStatus",e}(0,i.c)(e,t);var n=e.prototype;return n.match=function(t){return t===e.KEY},n.render=function(t){var e=t.children;t=t.style;return Object.assign(t,{textDecoration:"underline"}),e},e.KEY="composingUnderlineStatus",e}(n("vsh_83927").S)),s="priority";function a(t){return function(e,n,i){return e["".concat(n,"_").concat(s)]=t,i}}function l(t,e){return(0,i.d)([],(0,i._)(t),!1).sort((function(t,n){return u(t,e)-u(n,e)}))}function u(t,e){return"number"==typeof t["".concat(e,"_").concat(s)]?t["".concat(e,"_").concat(s)]:1e3}var c=function(){return[]},d=function(){function t(t,e){var n=this;this._plugins=[],this._matchCache=new Map,this._indexMap=new Map,this._pluginsWithPriorityMapCache=new Map,this._pluginConstructorSet=new Set,this._zoneToPlugins=new Map,this._init=function(){var t=n.editor;return n._registerPlugin(t).concat([new o]).forEach((function(t){n.register(t)})),n._pluginsWithPriorityMapCache.clear(),n._plugins},this._registerPlugin=null!=e?e:c,this.editor=t}var e=t.prototype;return e.setPluginToZoneMap=function(t,e){var n=null!==(n=this._zoneToPlugins.get(e=void 0===e?"all":e))&&void 0!==n?n:new Set;n.add(t),this._zoneToPlugins.set(e,n)},e.resetPluginToZoneMap=function(t){t?this._zoneToPlugins.delete(t):this._zoneToPlugins=new Map},e.isPluginInZone=function(t,e){return(null===(e=this._zoneToPlugins.get(e))||void 0===e?void 0:e.has(t.constructor))||(null===(e=this._zoneToPlugins.get("all"))||void 0===e?void 0:e.has(t.constructor))},e.register=function(t,e){if(Array.isArray(t)){var n=(r=(0,i._)(t,2))[0],r=r[1];if(this.setPluginToZoneMap(n,e),this._pluginConstructorSet.has(n))return;t=new n(r)}else if(n=t.constructor,this.setPluginToZoneMap(n,e),this._pluginConstructorSet.has(n))return;this.process(t,this._plugins.length)},e.process=function(t,e){this._pluginsWithPriorityMapCache.clear(),this._plugins.push(t),this._indexMap.set(t,e),this._pluginConstructorSet.add(t.constructor)},e.call=function(t,e,n,i){var o=this;return void 0===n&&(n=function(t,e){return t}),this.getPluginsWithPriority(t,i).reduce((function(e,i){var s=i[t];if(s&&"function"==typeof s){try{return n(e,s.call(i,e))}catch(e){i="Warning: call hook failed. hook: ".concat(t,". plugin: ").concat(i.name),o.editor.error({e:e,level:r.WV.ERROR,message:i})}return e}return e}),e)},e.getPluginsWithPriority=function(t,e){var n=this,i=[];return this._pluginsWithPriorityMapCache.has(t)?i=this._pluginsWithPriorityMapCache.get(t):(i=l(this._plugins,t),this._pluginsWithPriorityMapCache.set(t,i)),e?i.filter((function(t){return n.isPluginInZone(t,e)})):i},e.getPlugins=function(t){var e=this;return t?this._plugins.filter((function(n){return e.isPluginInZone(n,t)})):this._plugins},e._matchPlugin=function(t){var e,n,o,s=t.attributeKey,a=t.value,l=t.zoneId,u=t.attributes,c=s+a,d=this._matchCache.get(c);if(!d)try{for(var h=(0,i.e)(this._plugins),f=h.next();!f.done;f=h.next()){var p=f.value;try{if(null!==(o=p.match)&&void 0!==o&&o.call(p,s,a,u)){this._matchCache.set(c,p),d=p;break}}catch(t){var v="Warning: call hook failed. hook: match. plugin: ".concat(p.name);this.editor.error({e:t,level:r.WV.ERROR,message:v})}}}catch(t){e={error:t}}finally{try{f&&!f.done&&(n=h.return)&&n.call(h)}finally{if(e)throw e.error}}return!d||l&&!this.isPluginInZone(d,l)?null:d},e.getPlugin=function(t,e){var n,r;try{for(var o=(0,i.e)(this._plugins),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.name===t)return!e||this.isPluginInZone(a,e)?a:null}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return null},e._indexOf=function(t){return null!==(t=this._indexMap.get(t))&&void 0!==t?t:-1},e.destroy=function(){this.call("destroy",{}),this._plugins=[],this._registerPlugin=null,this._matchCache.clear(),this._indexMap.clear(),this._pluginsWithPriorityMapCache.clear(),this._pluginConstructorSet.clear(),this._zoneToPlugins.clear()},t}()},vsh_82662:function(t,e,n){"use strict";function i(t,e){return{left:t.left-e.left,right:(t.right||0)-e.left,top:t.top-e.top,bottom:(t.bottom||0)-e.top}}function r(t,e){var n;void 0!==e.line&&(n=t.length()-1,e.line=Math.max(Math.min(n,e.line),0),void 0!==e.offset&&(t=t.getLine(e.line).getModelText().length-1,e.offset=Math.max(Math.min(t,e.offset),0)))}function o(t,e){return[t.zoneId,t.line,t.offset,e].filter((function(t){return void 0!==t})).join("-")}function s(t,e){return t.top<=e.top&&t.bottom>=e.bottom||e.top<=t.top&&e.bottom>=t.bottom}function a(t,e){return t.top<e.bottom&&t.bottom>e.bottom||t.top<e.top&&t.bottom>e.top}n.d(e,{xR:function(){return r},ah:function(){return o},jF:function(){return s},GR:function(){return a},s8:function(){return i}})},vsh_34859:function(t,e,n){"use strict";n.d(e,{V:function(){return r}});var i=n("vsh_80018"),r=function(){function t(t){this.schemas=t}return t.prototype.get=function(t){var e,n;try{for(var r=(0,i.e)(Object.keys(this.schemas)),o=r.next();!o.done;o=r.next()){var s=o.value;if(new RegExp(s).test(t))return this.schemas[s]}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t}()},vsh_51858:function(t,e,n){"use strict";n.d(e,{W:function(){return u}});var i=n("vsh_80018"),r=n("vsh_95066"),o=(n("vsh_44960"),n("vsh_45110")),s=n("vsh_83875"),a=n("vsh_94150"),l=function(){function t(t){var e=t.line,n=t.offset,i=t.position,r=void 0===(o=t.zoneId)?a.S:o,o=t.side;t=t.isEdge;this._position=0,this.line=e,this.offset=n,this.zoneId=r,this.side=o,this.isEdge=t,Object.defineProperty(this,"_position",{enumerable:!1,value:i})}return t.prototype[Symbol.toPrimitive]=function(t){return"number"===t?this._position:JSON.stringify({line:this.line,offset:this.offset,zoneId:this.zoneId})},t}(),u=function(){function t(t){var e=t.editor,n=t.start,i=t.end,r=void 0!==(r=t.isBackward)&&r;t=t.state;this.editor=e,n=this.createRangePoint(n,!1,t),t=(i=this.createRangePoint(i,!1,t))<n,this.start=t?i:n,this.end=t?n:i,this.isBackward=t||r,Object.defineProperties(this,{editor:{enumerable:!1},_start:{enumerable:!1},_end:{enumerable:!1},start:{enumerable:!0,get:function(){return this._start},set:function(t){this._start=t}},end:{enumerable:!0,get:function(){return this._end},set:function(t){this._end=t}}})}var e=t.prototype;return t.isRange=function(e){return e instanceof t},t.isPointEqual=function(t,e){var n=t.line,i=t.offset,r=t.zoneId,o=t.isEdge,s=t.side,a=e.line,l=e.offset,u=e.zoneId;t=e.isEdge,e=e.side;return n===a&&i===l&&r===u&&o===t&&s===e},t.isPointEqualIgnoreSide=function(t,e){var n=t.line,i=t.offset,r=t.zoneId,o=e.line;t=e.offset,e=e.zoneId;return n===o&&i===t&&r===e},t.isRangeEqual=function(e,n){var i=e.start,r=e.end;e=n.start,n=n.end;return t.isPointEqual(i,e)&&t.isPointEqual(r,n)},t.isRangesEqual=function(t,e){if(t.length!==e.length)return!1;for(var n=0,i=t.length;n<i;n++){var r=t[n],o=e[n];if(!o)return!1;if(!this.isRangeEqual(r,o))return!1}return!0},t.isPointLargerThan=function(t,e){var n=t.line,i=t.offset,r=t.zoneId,o=e.line;t=e.offset;return r===e.zoneId&&(o<n||n===o&&t<i)},Object.defineProperty(e,"start",{get:function(){return this._start},set:function(t){this._start=this.createRangePoint(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"end",{get:function(){return this._end},set:function(t){this._end=this.createRangePoint(t)},enumerable:!1,configurable:!0}),e.create=function(e){return new t(e)},e.createRangePoint=function(t,e,n){return!(e=void 0!==e&&e)&&t instanceof l?t:(e=n||this.editor.getContentState(),n=null,"rangePointToOffset"in e?n=e.rangePointToOffset(t):"pointToOffset"in e&&(n=e.pointToOffset(t)),null===n?(this.editor.error({message:"point: ".concat(t," can't parse to position"),level:r.WV.ERROR}),new l((0,i.b)((0,i.b)({},t),{position:-1}))):new l((0,i.b)((0,i.b)({},t),{position:n})))},e.toPosition=function(t){var e=t||this.editor.getContentState(),n=null;t=null;return"rangePointToOffset"in e?(n=e.rangePointToOffset(this.start),t=e.rangePointToOffset(this.end)):"pointToOffset"in e&&(n=e.pointToOffset(this.start),t=e.pointToOffset(this.end)),null===n||null===t?(this.editor.error({message:"startOffset: ".concat(n,", endOffset: ").concat(t),level:r.WV.ERROR}),new s.L({editor:this.editor,start:-1,len:0,zoneId:this.start.zoneId,isBackward:this.isBackward})):new s.L({editor:this.editor,start:n,len:t-n,zoneId:this.start.zoneId,isBackward:this.isBackward,isEdge:this._end.isEdge})},e.isCollapsed=function(){return t.isPointEqualIgnoreSide(this.start,this.end)},e.clone=function(t){return new(this.editor.modulesContainer.get(o.h.Range))({editor:this.editor,start:this.createRangePoint(this.start,!0,t),end:this.createRangePoint(this.end,!0,t),isBackward:this.isBackward})},e.toString=function(){return JSON.stringify(this)},t}()},vsh_83875:function(t,e,n){"use strict";n.d(e,{L:function(){return s}});var i=n("vsh_80018"),r=n("vsh_94150"),o=n("vsh_45110"),s=function(){function t(t){var e=t.start,n=t.len,i=void 0===(s=t.zoneId)?r.S:s,o=void 0!==(a=t.isBackward)&&a,s=t.side,a=t.editor;t=t.isEdge;this.start=e,this.len=n,this.zoneId=i,this.isBackward=o,this.side=s,this.editor=a,this.isEdge=t,Object.defineProperty(this,"editor",{enumerable:!1})}var e=t.prototype;return t.isPosition=function(e){return e instanceof t},e.toRange=function(t){var e,n=(e=this).editor,r=e.start,s=e.len,a=e.zoneId,l=e.isBackward,u=e.side,c=e.isEdge;t=(e=(t||n.getContentState()).getZoneState(a)).offsetToPoint(r),s=e.offsetToPoint(r+s);return new(this.editor.modulesContainer.get(o.h.Range))({editor:n,start:(0,i.b)((0,i.b)({},t),{zoneId:a,side:u,isEdge:c}),end:(0,i.b)((0,i.b)({},s),{zoneId:a,side:u,isEdge:c}),isBackward:l})},e.isCollapsed=function(){return 0===this.len},t}()},vsh_4268:function(t,e,n){"use strict";n.d(e,{e:function(){return o}});var i=n("vsh_80018"),r=n("vsh_94150"),o=(n("vsh_44960"),function(t){function e(n){var i=n.editor,r=n.start,o=n.end,s=void 0!==(a=n.isBackward)&&a,a=(n=r,o);return r.zoneId!==o.zoneId&&(n=(o=e.fixToCommonZone(i,r,o)).start,a=o.end),t.call(this,{editor:i,start:n,end:a,isBackward:s})||this}(0,i.c)(e,t);var n=e.prototype;return e.fixToCommonZone=function(t,e,n){var o=e.zoneId,s=n.zoneId;if(o===s)return{start:e,end:n};var a=t.getContentState().getZoneManager(),l=t.getContentState(),u=(t=a.getAncestorZones(o),a.getAncestorZones(s));return(a=t.find((function(t){return u.includes(t)})))?(a!==o&&(t=t[t.indexOf(a)-1],(t=null===(t=l.getZoneState(t))||void 0===t?void 0:t.parent)&&(e=(0,i.b)((0,i.b)({},e),{zoneId:a,line:t.index,offset:null!=t&&t.hasLineMarker()?1:0}))),a!==s&&(s=u[u.indexOf(a)-1],(s=null===(s=l.getZoneState(s))||void 0===s?void 0:s.parent)&&(n=(0,i.b)((0,i.b)({},n),{zoneId:a,line:s.index,offset:s.hasLineMarker()?1:0}))),{start:e,end:n}):{start:(0,i.b)((0,i.b)({},e),{zoneId:r.S}),end:(0,i.b)((0,i.b)({},n),{zoneId:r.S})}},n.clone=function(t){return new e({editor:this.editor,start:this.createRangePoint(this.start,!0,t),end:this.createRangePoint(this.end,!0,t),isBackward:this.isBackward})},e}(n("vsh_51858").W))},vsh_70597:function(t,e,n){"use strict";n.d(e,{y1:function(){return o},DP:function(){return s},cA:function(){return a}});var i=n("vsh_82662"),r=function(t){return t instanceof Node},o=function(t){return r(t)&&t.nodeType===Node.TEXT_NODE};function s(t,e){return(0,i.jF)(t,e)||(0,i.GR)(t,e)}function a(t,e){var n=t.start,i=t.end;return!(t.isCollapsed()||n.zoneId!==t.end.zoneId||n.zoneId!==e.zoneId||e.line<n.line||e.line>i.line||e.line===n.line&&e.offset<n.offset||e.line===i.line&&e.offset>i.offset)}},vsh_80018:function(t,e,n){"use strict";n.d(e,{_:function(){return c},a:function(){return s},b:function(){return o},c:function(){return r},d:function(){return d},e:function(){return u},f:function(){return a},g:function(){return l}});var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function s(t,e,n,i){var r,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;0<=a;a--)(r=t[a])&&(s=(o<3?r(s):3<o?r(e,n,s):r(e,n))||s);return 3<o&&s&&Object.defineProperty(e,n,s),s}function a(t,e,n,i){return new(n=n||Promise)((function(r,o){function s(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))}function l(t,e){var n,i,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,(s=r?[2&s[0],r.value]:s)[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=0<(r=o.trys).length&&r[r.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&i>=t.length?void 0:t)&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function d(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||((i=i||Array.prototype.slice.call(e,0,r))[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}},vsh_80055:function(t,e,n){"use strict";n.d(e,{a:function(){return M},d:function(){return R},e:function(){return P},f:function(){return O},w:function(){return L}});var i=n("vsh_80018"),r=n("vsh_52948"),o=n("vsh_94150"),s=n("vsh_98650"),a=n("vsh_37075"),l=n("vsh_40285"),u=n("vsh_30436"),c=n("vsh_78638"),d=n("vsh_47786"),h=n("vsh_92563");var f=function(){function t(){}var e=t.prototype;return e.getData=function(t,e){return t.getData(e)},e.setData=function(t,e,n){return t.setData(e,n)},e.getTypes=function(t){return t.types},t}(),p=function(){function t(t){void 0===t&&(t=new f),this.proxyClipboard=t}var e=t.prototype;return e.getTypes=function(t){return this.proxyClipboard.getTypes(t)},e.getData=function(t,e){return void 0===e&&(e="text/html"),h.Xh.modernIE?this.proxyClipboard.getData(t,"text"):this.proxyClipboard.getData(t,e)},e.setData=function(t,e){var n=e.text,i=e.html;(n||i)&&(e=null===(e=null===(e=null===(e=window.lark)||void 0===e?void 0:e.biz)||void 0===e?void 0:e.clipboard)||void 0===e?void 0:e.setContent,h.Xh.modernIE?this.proxyClipboard.setData(t,"text",i):this.proxyClipboard instanceof f&&e&&((0,h.WZ)()||h.Xh.isBytedanceApp&&h.Xh.isIPad||h.Xh.isAndroid&&i.length&&!n.length)?function(t,e){window.lark.biz.clipboard.setContent({text:t,html:e})}(n,i):(this.proxyClipboard.setData(t,"text/html",i),this.proxyClipboard.setData(t,"text/plain",n)))},e.setDataWithoutEvent=function(t){var e=this,n=function(i){i.preventDefault(),i.stopImmediatePropagation&&i.stopImmediatePropagation();var r=t.html,o=t.text;document.createElement("div").innerHTML=r,i=i.clipboardData||window.clipboardData,h.Xh.modernIE?e.proxyClipboard.setData(i,"text",r):(e.proxyClipboard.setData(i,"text/html",r),e.proxyClipboard.setData(i,"text/plain",o)),t.customCopyDatas&&e.setCustomData(i,t.customCopyDatas),document.removeEventListener("copy",n)},i=document.createElement("textarea");document.body.appendChild(i),document.addEventListener("copy",n),i.style.opacity="0",i.value=" ",h.Xh.mobile&&(i.readOnly=!0);var r=window.scrollX,o=window.scrollY;i.focus({preventScroll:!0}),i.select(),h.Xh.isAndroid&&window.scrollTo(r,o),h.Xh.lark&&h.Xh.isIOS?window.lark.biz.navigation.handleCopyMenuClick():document.execCommand("copy"),document.body.removeChild(i)},e.setCustomData=function(t,e){var n,i,r=this;t&&t.setData&&(h.Xh.isAndroid?(n=this.proxyClipboard.getData(t,"text/html"),i="",e.forEach((function(t){var e=t.key;t=t.data;i+='<span id="custom-clipboard-data-'.concat(e,'" data-custom-clipboard="').concat(encodeURIComponent(t),'"></span>')})),this.proxyClipboard.setData(t,"text/html",n+i)):e.forEach((function(e){r.proxyClipboard.setData(t,e.key,e.data)})))},e.getCustomData=function(t,e){if(!t||!t.setData)return"";if(h.Xh.isAndroid){var n=this.proxyClipboard.getData(t,"text/html");n=(new DOMParser).parseFromString(n,"text/html").getElementById("custom-clipboard-data-".concat(e));return decodeURIComponent((null==n?void 0:n.getAttribute("data-custom-clipboard"))||"")}return this.proxyClipboard.getData(t,e)},t}();var v=n("vsh_45832"),g=n("vsh_16717"),y=(n("vsh_44960"),n("vsh_28099")),m=n("vsh_82572"),_=n("vsh_58699");var b=Symbol.isConcatSpreadable;function E(t){return Array.isArray(t)||function(t){return(0,_.y)(t)&&"[object Arguments]"===(0,m.h)(t)}(t)||!(!t||!t[b])}function S(t,e,n,i,r){var o,s;if(void 0===n&&(n=E),void 0===i&&(i=!1),void 0===r&&(r=[]),null==t)return r;try{for(var a=(0,y._)(t),l=a.next();!l.done;l=a.next()){var u=l.value;e>0&&n(u)?e>1?S(u,e-1,n,i,r):r.push.apply(r,(0,y.b)([],(0,y.a)(u),!1)):i||(r[r.length]=u)}}catch(t){o={error:t}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(o)throw o.error}}return r}function w(t){try{return JSON.parse(t)}catch(t){console.error("Warning: JSON parse failed. ".concat(t.message))}}Array.prototype.flat;var C=n("vsh_45110"),I=n("vsh_69811"),T=function(){function t(t){this.pasteTimes=0,this.fromBusinessKey="",this.editor=t}var e=t.prototype;return t.isBlob=function(t){var e=t.types,n=t.files,i=1===e.length&&n&&n.length;t=2===e.length&&e.includes("text/plain")&&e.includes("Files"),n=2===e.length&&e.includes("text/html")&&e.includes("Files"),e=h.Xh.safari&&e.includes("Files")&&e.includes("text/uri-list");return i||t||n||e},e.callHook=function(t,e,n){var r=!1;(n=void 0===n?{}:n).canPrevent&&(e.preventDefault=function(){r=!0}),n.pickKey&&(o=function(t,e){return e&&(t[n.pickKey]=e),t});var o=this.editor.pluginManager.call(t,e,o);return(0,i.b)((0,i.b)({},o),{defaultPrevented:r})},e.onPaste=function(e){var n=e.clipboardData;if(n){var o=this.editor,s=new g.y(e,e.target),l=null,u=this.editor.clipboard.dataHelper,c=u.getCustomData(n,d.iC);this.fromBusinessKey=u.getCustomData(n,d.K6);var h,f=/data-editor-unique-id="([0-9a-zA-Z]+)"/;c?(l=w(c))&&(h=l.editorUniqueId):u.getTypes(n).includes("text/html")&&f.test(u.getData(n,"text/html"))&&(h=f.exec(u.getData(n,"text/html"))[1]),(f=this.fromBusinessKey&&this.fromBusinessKey===o.businessKey)||o.log('[Paste][onPaste] Copy from different business "'.concat(this.fromBusinessKey,'"')),!(f=f||o.clipboard.canInternalPasteWhitelist.includes(this.fromBusinessKey))&&this.fromBusinessKey&&console.warn('if want to accept the internal clipboard data from "'.concat(this.fromBusinessKey,'",\n        you can config it into the editor.canInternalPasteWhitelist ').concat(o.clipboard.canInternalPasteWhitelist)),this.updatePasteInfo(h);try{this.editor.triggerEditorEvent(v.r.PASTE,s)}catch(e){o.error({e:e,message:"[Paste][onPaste][Warning] call paste event failed.",level:r.W.ERROR})}if(!s.isDefaultPrevented()){if(n={text:u.getData(n,"text/plain"),types:u.getTypes(n),files:t.isBlob(n)?n.files:void 0,fromBusinessKey:this.fromBusinessKey},l&&f){var p=l.deltas;return this.modifyDeltas(p),this.applyPaste(e,new a.D(p),(0,i.b)((0,i.b)({},n),{isInternalPaste:!0}))}l=(f=this.normalizeClipboardData(e)).node,p=f.defaultPrevented,f=f.clipboardHasElement,p||(f=this.deserialize((0,i.b)({node:l},n),f),o.log("[Paste][onPaste] paste node is:",l),this.applyPaste(e,f,(0,i.b)((0,i.b)({},n),{isInternalPaste:!1})))}}},e.modifyDeltas=function(t){t&&"object"==typeof t&&Object.values(t).forEach((function(t){null!==(t=null==t?void 0:t.ops)&&void 0!==t&&t.forEach((function(t){var e,n;(null==(n=w(n=null===(n=null==t?void 0:t.attributes)||void 0===n?void 0:n.dataMetaBlockProps))?void 0:n.blockType)===d.Q2&&null!==(e=null===(e=null==n?void 0:n.props)||void 0===e?void 0:e.data)&&void 0!==e&&e.mentionNotify&&(n.props.data.mentionNotify=!1,t.attributes.dataMetaBlockProps=JSON.stringify(n))}))}))},e.updatePasteInfo=function(t){t===this.editor.editorUniqueId?this.pasteTimes++:(this.editor.clipboard.from=null,this.pasteTimes=0)},e.getPasteInfo=function(){return{pasteFrom:this.editor.clipboard.from,pasteTimes:this.pasteTimes}},e.normalizeClipboardData=function(t){var e,n=(s=t.clipboardData).types,i=s.files,r=(e=this.editor.clipboard.dataHelper).getData(t.clipboardData,"text/html"),o=e.getData(t.clipboardData,"text/plain"),s=r;r=!!(e=(new DOMParser).parseFromString(s,"text/html").body).firstElementChild;return z(e),i={UNSAFE_HTML:s,node:e,text:o,files:i},t=this.callHook("UNSAFE_editorNormalizePasteNode",{types:n,data:i,event:t},{canPrevent:!0}),{node:i.node,defaultPrevented:t.defaultPrevented,clipboardHasElement:r}},e.applyPaste=function(t,e,n){t.stopImmediatePropagation(),t.preventDefault();var s,u=this.editor,c=u.selection.getSelection(),d=(s=c.start).zoneId,h=s.line;if(s=null===(p=u.getContentState().getZoneState(d))||void 0===p?void 0:p.getLine(h)){var f,p=Object.keys(e.deltas);p[0]!==o.S&&1===p.length&&(f=e.get(p[0]),e=e.replace(p[0],f.create((0,i.b)((0,i.b)({},f),{zoneId:o.S})))),e.get(o.S)||((f=function(t){var e=null;return Object.keys(t.deltas).forEach((function(n){var i;(n=t.get(n))instanceof l.I&&!e&&(i=!1,n.forEach((function(t){(null===(t=t.attributes)||void 0===t?void 0:t.zoneId)&&!e&&(i=!0)})),i&&(e=n.zoneId))})),e}(e))?(g=e.get(f),e=e.replace(f,g.create((0,i.b)((0,i.b)({},g),{zoneId:o.S})))):console.warn("can not find container zone when paste, debug info:",Object.keys(e.deltas).join("|")));var g=e.get(o.S);d!==o.S&&g&&e.replace(o.S,new l.I({zoneId:d,ops:g.ops}));var y=e.get(d);if(O(y,"\n")&&(g=y.reduce((function(t,e,n){return n===y.ops.length-1&&e.insert?t.insert(e.insert.slice(0,-1),e.attributes):t.push(e)}),new l.I({zoneId:d})),e.replace(d,g)),t={deltaSet:e,zoneId:d,lineState:s,event:t,isInternalPaste:n.isInternalPaste},!this.callHook("editorWillPaste",t,{canPrevent:!0,pickKey:"deltaSet"}).defaultPrevented){t=function(t,e,n){var r=(u=t.toPosition()).start,o=u.len,s=u.zoneId;if(!e.hasLineMarker())return(new a.D).concat(new l.I({zoneId:s}).retain(r).delete(o)).concat(n);var u=!(null===(c=null===(u=null===(c=n.get(s))||void 0===c?void 0:c.ops[0])||void 0===u?void 0:u.attributes)||void 0===c||!c.lmkr),c=e.hasLineMarker()&&1===t.start.offset;if(u&&c){var d=new l.I({zoneId:s}),h=(c=e.slice(0,t.start.offset))._getOps().slice(1);return t=n.reduce((function(t,n){if(n.zoneId!==s||!(n instanceof l.I))return t.concat(n);var r=e._getOps()[0].attributes;return d.insertLineMarker((0,i.b)((0,i.b)({},r),n.ops[0].attributes)),h.forEach((function(t){return d.push(t)})),n.ops.slice(1).forEach((function(t){return d.push(t)})),t.concat(d)}),new a.D),c=new l.I({zoneId:s}).retain(r-c.length()).delete(o+c.length()),(new a.D).concat(c).concat(t)}return(new a.D).concat(new l.I({zoneId:s}).retain(r).delete(o)).concat(n)}(c,s,t.deltaSet),u.log("[Paste][applyPaste] paste apply delta:",t),u.getContentState().apply(t,{type:"applyPaste"});try{u.call(v.r.DID_PASTE,{deltaSet:t,UNSAFE_text:n.text,isInternalPaste:n.isInternalPaste})}catch(t){u.error({e:t,level:r.W.ERROR,message:"[Paste][applyPaste] ".concat(t.message)})}}}else u.error({message:"[Paste][applyPaste][Warning] can't get lineState! zone: ".concat(d," line: ").concat(h),level:r.W.ERROR})},e.deserialize=function(t,e){var n=t.node,i=t.html,r=t.text;return"files"in t&&t.files?this.handleBlob(t.files,t.types):n&&(n.hasChildNodes()||e)?this.traverse(n,r):(i=(i=i&&function(t){var e="<([^>\\/]+)>",n="<\\/([^>]+)>",i=new RegExp("".concat(e,"\\n+").concat(e),"g");e=new RegExp("".concat(n,"\\n+").concat(e),"g"),n=new RegExp("".concat(n,"\\n+").concat(n),"g");return t.replace(i,"<$1><$2>").replace(e,"</$1><$2>").replace(n,"</$1></$2>")}(i))?(new DOMParser).parseFromString(i,"text/html"):null,null!=i&&i.body&&i.body.hasChildNodes()?(z(i.body),this.traverse(i.body,r)):r?this.handleText(r):(new a.D).concat(new l.I))},e.traverse=function(t,e){var n=this;if(!t.childNodes.length){var i=(new a.D).concat(new l.I);return this.callHook("deserialize",{node:t,zoneId:o.S,deltaSet:i,types:["text/html"],fromBusinessKey:this.fromBusinessKey,text:e},{pickKey:"deltaSet"}).deltaSet}return i=Array.from(t.childNodes).reduce((function(t,i){return n.traverse(i,e).compose(t,!0,!1)}),new a.D),this.callHook("deserialize",{node:t,zoneId:o.S,deltaSet:i,types:["text/html"],fromBusinessKey:this.fromBusinessKey,text:e},{pickKey:"deltaSet"}).deltaSet},e.handleText=function(t){var e=(new a.D).compose(new l.I);return this.callHook("deserialize",{text:t,zoneId:o.S,deltaSet:e,types:["text/plain"],fromBusinessKey:this.fromBusinessKey},{pickKey:"deltaSet"}).deltaSet},e.handleBlob=function(t,e){var n=(new a.D).compose(new l.I);return this.callHook("deserialize",{files:t,zoneId:o.S,deltaSet:n,types:e,fromBusinessKey:this.fromBusinessKey},{pickKey:"deltaSet"}).deltaSet},t}(),x=function(){function t(t){this.editor=t}var e=t.prototype;return e.onCopy=function(t,e){var n=this.editor;return n.copyable?this._onCopy(t,e):(n.call(d.HY),t.preventDefault(),void t.stopImmediatePropagation())},e.onCut=function(t,e){var n=this.editor;return n.copyable?n.isEditable()?this._onCopy(t,e,!0):void 0:(n.call(d.HY),t.preventDefault(),void t.stopImmediatePropagation())},e.slice=function(t){var e=this.editor,n=t.start,i=t.end;t=e.getContentState().getZoneState(n.zoneId),e=new a.D;return t&&t&&n.zoneId===i.zoneId?(i=new l.I({zoneId:n.zoneId,ops:K(t,n,i)}),e.add(n.zoneId,i),e):e},e.fixSelectionWithLmkr=function(t){if(t.isCollapsed())return t;var e=(i=t.start).zoneId,n=i.line,i=i.offset;return(n=null===(n=null==(e=this.editor.getContentState().getZoneState(e))?void 0:e.getLine(n))||void 0===n?void 0:n.getLineMarker())&&i===n&&(t.start.offset-=n),t},e._onCopy=function(t,e,n){void 0===n&&(n=!1);var r=this.editor;e=e||this.fixSelectionWithLmkr(r.selection.getSelection());var o,s,l,u,c,f=[];this.editor.pluginManager.call("shouldPreventCopy",{e:t,html:""},(function(t,e){return f.push(e),t})),f.includes(!0)||(h.Xh.isAndroid&&r.isEditable()&&r.selection.updateViewSelection(),c=new g.y(t,t.target),r.triggerEditorEvent(t.type,c),c.isDefaultPrevented()||(t.preventDefault(),t.stopImmediatePropagation(),o={deltaSet:this.slice(e),range:e,customCopyDatas:[]},this.callPluginsWillSerialize(o),s={zoneId:(e=o.range).start.zoneId,deltaSet:o.deltaSet,node:null,customCopyDatas:o.customCopyDatas},r.clipboard.from=n?v.r.CUT:v.r.COPY,r.clipboard.resetPasteTimes(),this.serialize(s),l=function(t){return Array.from(t.childNodes).reduce((function(t,e){return t+Z(e)}),"").slice(0,-1)}(s.node),h.Xh.windows&&(l=l.replace(/\n/g,"\r\n")),c=(0,i.b)((0,i.b)({},s),{text:l}),this.callPluginsDidSerialize(c),o=c.node,s=c.customCopyDatas,l=c.text,u=c.deltaSet,c=t.clipboardData||window.clipboardData,t=r.clipboard.dataHelper,o&&0<o.childElementCount&&t.setData(c,{text:l,html:W(N(A(o)))}),0!==s.length&&t.setCustomData(c,s),(0,a.q)(u)||(t.setCustomData(c,[{key:d.iC,data:JSON.stringify({deltas:u.deltas,editorUniqueId:this.editor.editorUniqueId})}]),t.setCustomData(c,[{key:d.K6,data:r.businessKey}])),!0===n&&(r.triggerEditorEvent(v.r.WILL_DELETE_FROM_CUT).shouldPrevent||(e=(n=e||r.selection.getSelection()).start,n=n.end,r.getContentState().deleteText({start:e,end:n},{type:"handleCut"})))))},e.serialize=function(t){var e=this,n=t.deltaSet,r=t.zoneId,o=n.get(r);if(!o)return console.warn("[copy]: zoneDelta  miss, zoneId: "+r),t;var s=document.createDocumentFragment();return o.eachLine((function(n,i,l){var h=document.createDocumentFragment(),f=e.editor.modulesContainer.get(C.h.ZoneState);f=e.editor.getContentState().getZoneState(r)||new f(r,n),f={lineState:new I.V(n,f),index:l,callHookFrom:"serialize"};e.editor.callAll("_editorLineStateWillRender",f),f.lineState.getOps().forEach((function(i){var r;(0,a.d)(i)&&!(0,u.eV)(i)&&(r=i.insert.replace(/\n/g,"")||"",r=document.createTextNode(r),i=e.callPluginsSerialize(Object.assign(t,{type:c.T.LEAF,node:r,op:i,lineDelta:n})),h.appendChild(i.node))})),(f=document.createElement("div")).style.whiteSpace="pre-wrap",i=e.callPluginsSerialize(Object.assign(t,{type:c.T.LINE,node:h,lineNode:f,lineAttributes:i,lineDelta:n})),f.appendChild(i.node),f.dataset.zoneId=o.zoneId,f.dataset.lineIndex=String(l),f.setAttribute(d.mX,"true"),f.style.whiteSpace="pre",s.appendChild(f)})),n=this.callPluginsSerialize(function(t,e){var n,r,o=t.type,s=t.node,a=t.lineAttributes,l=e.tagAttribute,u=e.wrapNodesInfo;a=a&&a[l],l=e.wrapTag||d.c5[l]||a;if(o===c.T.LINE&&a&&(s instanceof Element||((a=document.createElement("div")).appendChild(s),s=a),l&&!u&&(u=[{tag:l}]),s.setAttribute(d.fF,JSON.stringify((0,i.d)((0,i.d)([],(0,i._)(u),!1),(0,i._)(D(s)),!1)))),o===c.T.ROOT){var h=[];o=Array.from(s.querySelectorAll("[".concat(d.mX,"]")));try{for(var f=(0,i.e)(o),p=f.next();!p.done;p=f.next())!function(t){var e=t.querySelectorAll("[".concat(d.fF,"]"))[0];if(!e)return h=[];var n=D(e);if(n.length){e.removeAttribute(d.fF);var r=[],o=document.createElement(n[0].tag);n.reduce((function(t,s,a){var l,u,c,d=s.tag,f=s.style,p=s.attributes,v=(s=s.split,document.createElement(d));if(f)try{for(var g=(l=void 0,(0,i.e)(Object.entries(f))),y=g.next();!y.done;y=g.next()){var m=(0,i._)(y.value,2),_=m[0],b=m[1];v.style[_]=b}}catch(t){l={error:t}}finally{try{y&&!y.done&&(u=g.return)&&u.call(g)}finally{if(l)throw l.error}}if(p)try{for(var E=(C=void 0,(0,i.e)(Object.entries(p))),S=E.next();!S.done;S=E.next()){var w=(0,i._)(S.value,2);_=w[0],b=w[1];v.setAttribute(_,b)}}catch(t){C={error:t}}finally{try{S&&!S.done&&(c=E.return)&&c.call(E)}finally{if(C)throw C.error}}var C=h[a];return!s&&C&&C.tagName.toLowerCase()===d.toLowerCase()?!(v=C).getAttribute("start")&&null!=p&&p.start&&v.setAttribute("start",p.start):h=[],r.push(v),0===a?o=v:t.appendChild(v),a===n.length-1&&v.appendChild(e),v}),o),h=r,t.parentNode.insertBefore(o,t),t.hasChildNodes()||t.parentNode.removeChild(t)}}(p.value)}catch(t){n={error:t}}finally{try{p&&!p.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}}return Object.assign(t,{node:s})}(Object.assign(t,{type:c.T.ROOT,node:s}),{tagAttribute:""})),Object.assign(t,{node:n.node})},e.callPluginsSerialize=function(t){return this.editor.pluginManager.call("serialize",t,(function(e){return t=e})),t},e.callPluginsWillSerialize=function(t){return this.editor.pluginManager.call("editorWillCopy",t)},e.callPluginsDidSerialize=function(t){return this.editor.pluginManager.call("editorWillSetClipboard",t)},(0,i.a)([s.W],t.prototype,"onCopy",null),(0,i.a)([s.W],t.prototype,"onCut",null),(0,i.a)([s.W],t.prototype,"slice",null),t}(),k=(0,r.K)((function(t){this.editor.error(t)}))(r.W.ERROR),M=function(){function t(t,e){this.from=null,this.canInternalPasteWhitelist=[],this.editor=t,this.dataHelper=new p(e),this.pasteModule=new T(t),this.copyModule=new x(t)}var e=t.prototype;return e.deserialize=function(t,e){return this.pasteModule.deserialize(t,e)},e.serialize=function(t){return this.copyModule.serialize(t)},e.onCopy=function(t){return this.copyModule.onCopy(t)},e.onPaste=function(t){this.pasteModule.onPaste(t)},e.slice=function(t){return this.copyModule.slice(t)},e.onCut=function(t){return this.copyModule.onCut(t)},e.resetPasteTimes=function(){this.pasteModule.pasteTimes=0},e.getPasteInfo=function(){return this.pasteModule.getPasteInfo()},e.setCanInternalPasteWhitelist=function(t){this.canInternalPasteWhitelist=t},e.setDataToClipboard=function(t){var e=t.data,n=t.type;e&&e.html&&(t=(0,i.b)((0,i.b)({},e),{type:n}),this.editor.callAll("beforeSetDataToClipboard",t),this.from=n,this.resetPasteTimes(),this.dataHelper.setDataWithoutEvent(Object.assign({},e,{html:this.addUniqueIdIntoHTML(t.html)})))},e.copyRange=function(t){this.handleCopyOrCutRange(t,"copy")},e.cutRange=function(t){this.handleCopyOrCutRange(t,"cut")},e.getClipboardDataFromSelectedContent=function(t){var e=new DataTransfer,n=t.toPosition(),i=n.start,r=n.len;if(t=null===(t=this.editor.getContentState().getZoneState(n.zoneId))||void 0===t?void 0:t.getContent()){i=t.slice(i,i+r),(r=new a.D).add(i);i=document.createTextNode("");var o=this.editor.clipboard.serialize({zoneId:n.zoneId,deltaSet:r,node:i,customCopyDatas:[]});if(o.node instanceof DocumentFragment){for(var s=document.createElement("div"),l=0;l<o.node.children.length;l++){var u=o.node.children.item(l);u&&s.appendChild(u)}e.setData("text/html",s.innerHTML),e.setData("text/plain",s.textContent||"")}}return e},e.copyOrCutListener=function(t,e,n){if(this.editor){switch(t.stopPropagation(),t.stopImmediatePropagation(),n){case"copy":this.copyModule.onCopy(t,e);break;case"cut":this.copyModule.onCut(t,e)}t.preventDefault()}},e.handleCopyOrCutRangeBySyncClipboard=function(t,e){var n=this.getClipboardDataFromSelectedContent(t),i=new ClipboardEvent(e,{clipboardData:n});if(this.copyOrCutListener(i,t,e),i.clipboardData)try{var r={},o=["text/html","text/plain"];i.clipboardData.types.filter((function(t){return o.includes(t)})).forEach((function(t){var e;(e=(e=null===(e=i.clipboardData)||void 0===e?void 0:e.getData(t))&&new Blob([e],{type:t}))&&(r[t]=e)})),navigator.clipboard.write([new ClipboardItem(r)])}catch(t){navigator.clipboard.writeText(i.clipboardData.getData("text/plain"))}},e.handleCopyOrCutRangeByExecCommand=function(t,e){function n(n){i.copyOrCutListener(n,t,e)}var i=this,r=this.editor,o=document.createElement("textarea");(r=h.Xh.isIPad?r.getScrollContainer():document.body)&&((r=r instanceof Window?document.body:r).appendChild(o),o.addEventListener(e,n),o.style.position="fixed",o.style.left="-10000000px",o.value=" ",o.focus(),o.select(),document.execCommand(e),o.removeEventListener(e,n),r.removeChild(o))},e.handleCopyOrCutRange=function(t,e){h.Xh.mobile?this.handleCopyOrCutRangeBySyncClipboard(t,e):this.handleCopyOrCutRangeByExecCommand(t,e)},e.addUniqueIdIntoHTML=function(t){return t?((t=$((new DOMParser).parseFromString(t,"text/html").body)).children().first().attr("data-editor-unique-id",this.editor.editorUniqueId),t.html()):t},(0,i.a)([k],t.prototype,"deserialize",null),(0,i.a)([k],t.prototype,"serialize",null),(0,i.a)([k],t.prototype,"onCopy",null),(0,i.a)([k],t.prototype,"onPaste",null),(0,i.a)([k],t.prototype,"onCut",null),(0,i.a)([k],t.prototype,"setDataToClipboard",null),(0,i.a)([k],t.prototype,"copyRange",null),(0,i.a)([k],t.prototype,"cutRange",null),(0,i.a)([k],t.prototype,"getClipboardDataFromSelectedContent",null),(0,i.a)([k],t.prototype,"handleCopyOrCutRangeBySyncClipboard",null),t}();function R(t,e,n,r){void 0===r&&(r=!0);var o=new a.D;return t.forEach((function(t,s){o=s===e?(s=t.create({zoneId:s}),s=t.reduce((function(t,e){var o;if(!e.insert||null!==(o=e.attributes)&&void 0!==o&&o.lmkr)return t.push(e);var s=r?(0,i.b)((0,i.b)({},e.attributes),n):(0,i.b)((0,i.b)({},n),e.attributes);if("string"!=typeof e.insert)t.insert(e.insert.id,s);else for(var a=e.insert;0<a.length;){var l=a.includes("\n"),u=a.split("\n",1)[0],c=a.substring(u.length+1);t.insert(a=u,s),a=c,l&&t.insertEnter(e.attributes)}return t}),s),o.concat(s)):o.concat(t)})),o}function P(t,e,n,r){void 0===r&&(r=!0);var o=new a.D;return t.forEach((function(t,s){var u;o=s===e&&t instanceof l.I?(u=new l.I({zoneId:s}),t.eachLine((function(t){t.ops.forEach((function(t,e){0===e?(e=null!==(e=t.attributes)&&void 0!==e?e:{},(0,a.l)(t)?u.insert("*",r?(0,i.b)((0,i.b)({},e),n):(0,i.b)((0,i.b)({},n),e)):u.insertLineMarker(n).push(t)):u.push(t)}))})),o.concat(u)):o.concat(t)})),o}function O(t,e){for(var n="",i=t.ops.length-1;0<=i&&n.length<e.length;--i){var r=t.ops[i];if("string"!=typeof r.insert)break;n=r.insert+n}return n.slice(-1*e.length)===e}function L(t,e){var n=t.type,i=t.node,r=t.op,o=e.tagAttribute;return n===c.T.LEAF&&r&&r.attributes&&r.attributes[o]?(o=e.wrapTag||d.c5[o],(o=document.createElement(o)).appendChild(i),Object.assign(t,{node:o})):t}function D(t){var e=[];try{e=JSON.parse(t.getAttribute(d.fF)||"[]")}catch(t){e=[]}return e}function A(t){var e=document.createElement("div");return e.appendChild(t),e.innerHTML}function z(t){try{Array.from(t.querySelectorAll("style")).forEach((function(e){var n,i;e.textContent&&/\}?(\S+)\s*{[\s\S]*?white-space\s*:\s*pre[\s\S]*?}/.test(e.textContent)&&(!(n=/\}?(\S+)\s*{[\s\S]*?white-space\s*:\s*pre[\s\S]*?}/.exec(e.textContent.replace(/<!--[\s\S]*?-->/,"")))||(e=/white-space\s*:\s*pre.*?(?=;| |})/.exec(n[0]))&&(i=e[0].split(":")[1],Array.from(t.querySelectorAll(n[1])).forEach((function(t){t instanceof HTMLElement&&(t.style.whiteSpace=i.trim())}))))}))}catch(n){console.error(n)}var e,n=[".".concat(d.Z6),".ignore-dom","style","script"];Array.from(t.querySelectorAll(n.join(","))).forEach((function(t){t.innerHTML=""})),e=t,Array.from(e.childNodes).forEach((function(t){var e;t.nodeType!==Node.TEXT_NODE&&t.nodeType!==Node.ELEMENT_NODE&&null!==(e=t.parentNode)&&void 0!==e&&e.removeChild(t)}))}function N(t){return t.replace(/<(?:img|iframe)[^>]*(data-no-request-)src=[^>]*>/g,(function(t,e){return t.replace(e,"")}))}function W(t){return"".concat('<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />').concat(t)}var B=function(t,e,n){var r=[],o=0;return t.getOps().forEach((function(t){var s,l,u;null!=t&&t.insert&&"string"==typeof t.insert&&(s=(0,a.a)(t),o<=n&&e<=o+s&&(l=Math.max(0,e-o))<(u=Math.min(s,n-o))&&r.push({insert:t.insert.slice(l,u),attributes:(0,i.b)({},t.attributes)}),o+=s)})),r},K=function(t,e,n){for(var r=[],o=Math.max(0,e.line),s=Math.min(n.line,t.length()-1),a=o;a<=s;a++){var l=t.getLine(a);e.line===s?r.push.apply(r,(0,i.d)([],(0,i._)(B(l,e.offset,n.offset)),!1)):a===o?r.push.apply(r,(0,i.d)([],(0,i._)(B(l,e.offset,l.length())),!1)):a===s?r.push.apply(r,(0,i.d)([],(0,i._)(B(l,0,n.offset)),!1)):r.push.apply(r,(0,i.d)([],(0,i._)(B(l,0,l.length())),!1))}return r};function Z(t){if(t instanceof Text)return t.textContent;if(!(t instanceof Element))return"";var e="";return t.childNodes.forEach((function(t){e+=Z(t)})),t.getAttribute(d.mX)&&(e+="\n"),e}},vsh_83079:function(t,e,n){"use strict";n.d(e,{rU:function(){return s},eT:function(){return a}});var i=n("vsh_80018"),r=n("vsh_98125"),o=n.n(r),s=o().createContext(null),a=function(t){return o().forwardRef((function(e,n){return o().createElement(s.Consumer,null,(function(r){return o().createElement(t,(0,i.b)({},e,{editor:r,ref:n}))}))}))}},vsh_61499:function(t,e,n){"use strict";n.d(e,{_:function(){return o},a:function(){return s},b:function(){return a},c:function(){return l},d:function(){return r},i:function(){return d},s:function(){return u},t:function(){return c}});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)};function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)};function s(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function l(t,e,n){void 0===t&&(t={}),void 0===e&&(e={}),"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});var i=o({},e);for(var r in n||(i=Object.keys(i).reduce((function(t,e){return null!==i[e]&&""!==i[e]&&(t[e]=i[e]),t}),{})),t)void 0!==t[r]&&void 0===e[r]&&(i[r]=t[r]);return Object.keys(i).length>0?i:void 0}function u(t,e){return void 0===e&&(e=!0),Object.keys(t).reduce((function(n,i){return!1!==e||t[i]?(n[i]="string"==typeof t[i]?t[i]:String(t[i]),n):n}),{})}function c(t,e,n){if(void 0===t&&(t={}),void 0===e&&(e={}),void 0===n&&(n=!1),"object"!=typeof t)return e;if("object"==typeof e){if(!n)return e;var i=Object.keys(e).reduce((function(n,i){return void 0===t[i]&&(n[i]=e[i]),n}),{});return Object.keys(i).length>0?i:void 0}}function d(t,e){void 0===t&&(t={}),void 0===e&&(e={}),t=t||{};var n=Object.keys(e).reduce((function(n,i){return e[i]!==t[i]&&void 0!==t[i]&&(n[i]=e[i]),n}),{});return Object.keys(t).reduce((function(n,i){return t[i]!==e[i]&&void 0===e[i]&&(n[i]=""),n}),n)}},vsh_37075:function(t,e,n){"use strict";n.d(e,{D:function(){return v},a:function(){return l},d:function(){return h},f:function(){return p},l:function(){return g},o:function(){return m},p:function(){return _},q:function(){return b},x:function(){return E},y:function(){return S}});var i=n("vsh_61499"),r=n("vsh_8458"),o=n("vsh_97321"),s=(n("vsh_72862"),function(){function t(t){this.ops=t,this.index=0,this.offset=0}var e=t.prototype;return e.hasNext=function(){return this.peekLength()<1/0},e.next=function(t){t||(t=1/0);var e=this.ops[this.index];if(e){var n=this.offset,i=l(e);if(t>=i-n?(t=i-n,this.index+=1,this.offset=0):this.offset+=t,u(e))return{delete:t};var r={};return e.attributes&&(r.attributes=e.attributes),c(e)?r.retain=t:h(e)?r.insert=e.insert.substr(n,t):r.insert=e.insert,r}return{retain:1/0}},e.peek=function(){return this.ops[this.index]},e.peekLength=function(){return this.ops[this.index]?l(this.ops[this.index])-this.offset:1/0},e.peekType=function(){return this.ops[this.index]?p(this.ops[this.index]):r.HP.RETAIN},e.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var t=this.offset,e=this.index,n=this.next(),i=this.ops.slice(this.index);return this.offset=t,this.index=e,[n].concat(i)}return[]},t}());function a(t){return new s(t)}function l(t){if(u(t))return t.delete;if(c(t))return t.retain;if(h(t))return t.insert.length;if(f(t))return 1;throw new Error("op is unknown")}function u(t){return"number"==typeof(null==t?void 0:t.delete)}function c(t){return"number"==typeof(null==t?void 0:t.retain)}function d(t){return h(t)||f(t)}function h(t){return"string"==typeof(null==t?void 0:t.insert)}function f(t){return"object"==typeof(null==t?void 0:t.insert)}function p(t){if(u(t))return r.HP.DELETE;if(c(t))return r.HP.RETAIN;if(d(t))return r.HP.INSERT;throw new Error("op is unknown")}var v=function(){function t(t,e){void 0===t&&(t={}),e=null!=e?e:Object.keys(t).some((function(e){return t[e]instanceof E})),this._deltas=e?t:Object.keys(t).reduce((function(e,n){return e[n]=S(t[n]),e}),{})}var e=t.prototype;return Object.defineProperty(e,"deltas",{get:function(){return this._deltas},enumerable:!1,configurable:!0}),e.get=function(t){return this._deltas[t]},e.compose=function(t,e,n){return void 0===e&&(e=!0),void 0===n&&(n=!0),this._call("compose",t,{keepEmptyAttributes:e,immutable:n})},e.concat=function(t){return this._call("concat",t)},e.invert=function(e){var n=new t;if(y(e))n=(new t).add(e.zoneId,e);else{if(!m(e))throw Error("DeltaSet invert data is wrong");n=e}return this.reduce((function(t,e){var i=n.get(e.zoneId)||e.create({zoneId:e.zoneId}),r=e.invert(i);return t.compose(r)}),new t)},e.transform=function(e,n){var i=this;if(void 0===n&&(n=!1),y(e))return e.zoneId in this.deltas?this.deltas[e.zoneId].transform(e,n):e;if(m(e))return new t(e.reduce((function(t,e){return t[e.zoneId]=i.transform(e,n),t}),{}));throw Error("DeltaSet call data is wrong")},e.delete=function(t){return delete this._deltas[t],this},e.add=function(t,e){if(y(t)){var n=t.zoneId;this._deltas[n]=t}else{if(!e)return console.error("DeltaSet add delta error, delta is undefined"),this;n=t;if(e.zoneId!==n)return console.error("DeltaSet add delta error, zoneId is not match"),this;this._deltas[n]=e}return this},e.replace=function(t,e){return this.delete(t).add(e.zoneId,e),this},e._call=function(e,n,i){if(y(n))return this._callDeltaFunc(e,n,i);if(m(n)){var r=new t(this.deltas);return n.forEach((function(t){r=r._callDeltaFunc(e,t,i)})),r}throw Error("DeltaSet call: data: ".concat(n," is not Delta or DeltaSet"))},e._callDeltaFunc=function(e,n,r){var o=Object.assign({keepEmptyAttributes:!0,immutable:!0},r),s=n.zoneId,a=o.immutable?(0,i._)({},this.deltas):this.deltas;if(this.deltas[s])a[s]=this.deltas[s][e](n,o.keepEmptyAttributes);else{var l=n.zoneType;a[s]=n.create({zoneId:s,zoneType:l})[e](n,o.keepEmptyAttributes)}return new t(a,!0)},e.reduce=function(t,e){var n=this;return Object.keys(this._deltas).map((function(t){return n._deltas[t]})).reduce(t,e)},e.forEach=function(t){var e,n;try{for(var r=(0,i.a)(Object.entries(this._deltas)),o=r.next();!o.done;o=r.next()){var s=(0,i.b)(o.value,2),a=s[0];t(s[1],a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t}();function g(t){return t.insert===r.F5&&t.attributes&&t.attributes.lmkr}function y(t){return Object.values(r.Ak).includes(t.zoneType)}function m(t){return void 0!==t.deltas}function _(t){var e;return!t||0===(null===(e=null==t?void 0:t.ops)||void 0===e?void 0:e.length)}function b(t){if(!t)return!0;var e=t.deltas,n=Object.keys(e);return 0===n.length||!n.some((function(t){return!_(e[t])}))}var E=function(){function t(){this.ops=[]}var e=t.prototype;return t.registerCreator=function(e,n){t.creators.set(e,n)},t.getCreator=function(e){return t.creators.get(e)},e.insert=function(t,e,n){if(void 0===n&&(n=!0),"string"==typeof t&&0===t.length)return this;var r={insert:t};return null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(r.attributes=(0,i.s)(e,n)),this.push(r)},e.delete=function(t){return t<=0?this:this.push({delete:t})},e.retain=function(t,e){if(t<=0)return this;var n={retain:t};return null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(n.attributes=(0,i.s)(e)),this.push(n)},e.forEach=function(t){this.ops.forEach(t)},e.eachLine=function(t,e){void 0===e&&(e=r.K5);for(var n=a(this.ops),i=0,o={},s=[];n.hasNext();){if(n.peekType()!==r.HP.INSERT)return;var u=n.peek();g(u)&&(o=u.attributes||{});var c=l(u)-n.peekLength(),d="string"==typeof u.insert?u.insert.indexOf(e,c)-c:-1;if(d<0)s.push(n.next());else{if(s.push(n.next(d+1)),!1===t(this.create({zoneId:this.zoneId,ops:s}),o,i))return;s=[],o={},i+=1}}var h=this.create({zoneId:this.zoneId,ops:s});h.length()>0&&t(h,o,i)},e.push=function(t){if(u(t)&&t.delete<=0)return console.warn("delete op is wrong"),this;if(c(t)&&t.retain<=0)return console.warn("retain op is wrong"),this;if(h(t)&&0===t.insert.length)return console.warn("insert op is wrong"),this;var e=this.ops.length,n=this.ops[e-1];if(t=function(t){var e=(0,i._)({},t);return t.attributes&&(e.attributes=(0,i._)({},t.attributes)),e}(t),"object"==typeof n){if(u(t)&&u(n))return this.ops[e-1]={delete:n.delete+t.delete},this;if((0,o.X)(t.attributes,n.attributes)){if(h(t)&&h(n))return this.ops[e-1]={insert:n.insert+t.insert},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this;if(c(t)&&c(n))return this.ops[e-1]={retain:n.retain+t.retain},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this},e.compose=function(t,e){if(void 0===e&&(e=!0),!1===e){var n=t.zoneId,s=t.zoneType;t=t.reduce((function(t,n){return n.insert&&n.attributes&&(n.attributes=(0,i.s)(n.attributes,e)),t.push(n),t}),this.create({zoneId:n,zoneType:s}))}var l=a(this.ops),d=a(t.ops),f=[],p=d.peek();if(null!=p&&c(p)&&null==p.attributes){for(var v=p.retain;l.peekType()===r.HP.INSERT&&l.peekLength()<=v;)v-=l.peekLength(),f.push(l.next());p.retain-v>0&&d.next(p.retain-v)}for(var g=this.create({zoneId:this.zoneId,zoneType:this.zoneType,ops:f});l.hasNext()||d.hasNext();)if(d.peekType()===r.HP.INSERT)g.push(d.next());else if(l.peekType()===r.HP.DELETE)g.push(l.next());else{var y=Math.min(l.peekLength(),d.peekLength()),m=l.next(y),_=d.next(y);if(u(_)&&h(m));else if(u(_)&&c(m))g.push(_);else if(c(_)){var b={};c(m)?b.retain=y:b.insert=m.insert;var E=(0,i.c)(m.attributes,_.attributes,e);if(E&&(b.attributes=E),g.push(b),!d.hasNext()&&(0,o.X)(g.ops[g.ops.length-1],b)){var S=this.create({zoneId:this.zoneId,zoneType:this.zoneType,ops:l.rest()});return g.concat(S).chop()}}}return g.chop()},e.concat=function(t){var e=this.create({zoneId:this.zoneId,zoneType:this.zoneType,ops:this.ops.slice()});return t.ops.length>0&&(e.push(t.ops[0]),e.ops=e.ops.concat(t.ops.slice(1))),e},e.length=function(){return this.reduce((function(t,e){return t+l(e)}),0)},e.reduce=function(t,e){return this.ops.reduce(t,e)},e.chop=function(){var t=this.ops[this.ops.length-1];return t&&t.retain&&!t.attributes&&this.ops.pop(),this},e.transform=function(t,e){if(void 0===e&&(e=!1),e=!!e,"number"==typeof t)return this.transformPosition(t,e);for(var n=t,o=a(this.ops),s=a(n.ops),c=this.create({zoneId:this.zoneId,zoneType:this.zoneType});o.hasNext()||s.hasNext();)if(o.peekType()!==r.HP.INSERT||!e&&s.peekType()===r.HP.INSERT)if(s.peekType()===r.HP.INSERT)c.push(s.next());else{var d=Math.min(o.peekLength(),s.peekLength()),h=o.next(d),f=s.next(d);if(u(h))continue;u(f)?c.push(f):c.retain(d,(0,i.t)(h.attributes,f.attributes,e))}else c.retain(l(o.next()));return c.chop()},e.transformPosition=function(t,e){void 0===e&&(e=!1),e=!!e;for(var n=a(this.ops),i=0;n.hasNext()&&i<=t;){var r=n.peekLength(),o=n.peekType();n.next(),"delete"!==o?("insert"===o&&(i<t||!e)&&(t+=r),i+=r):t-=Math.min(r,t-i)}return t},e.slice=function(t,e){void 0===t&&(t=0),void 0===e&&(e=1/0);for(var n=[],i=a(this.ops),r=0;r<e&&i.hasNext();){var o=void 0;r<t?o=i.next(t-r):(o=i.next(e-r),n.push(o)),r+=l(o)}return this.create({zoneId:this.zoneId,zoneType:this.zoneType,ops:n})},e.invert=function(t){var e=this.create({zoneId:this.zoneId,zoneType:this.zoneType});return this.reduce((function(n,r){if(d(r))e.delete(l(r));else{if(c(r)&&!r.attributes)return e.retain(r.retain),n+r.retain;if(u(r)||c(r)&&r.attributes){var o=r.delete||r.retain;return t.slice(n,n+o).forEach((function(t){u(r)?e.push(t):c(r)&&r.attributes&&e.retain(l(t),(0,i.i)(r.attributes,t.attributes))})),n+o}}return n}),0),e.chop()},t.creators=new Map,t}();function S(t){var e=E.getCreator(t.zoneType);return e||console.error("DeltaCreator undefiend",t.zoneType),new e(t)}},vsh_8458:function(t,e,n){"use strict";var i,r;n.d(e,{K5:function(){return o},F5:function(){return s},HP:function(){return i},Ak:function(){return r}}),function(t){t.DELETE="delete",t.RETAIN="retain",t.INSERT="insert"}(i||(i={})),function(t){t.Content="Z",t.Row="R",t.Column="C"}(r||(r={}));var o="\n",s="*";r.Content,r.Row,r.Column},vsh_30436:function(t,e,n){"use strict";n.d(e,{Jg:function(){return o},eV:function(){return r}});var i=n("vsh_8458");function r(t){return Boolean(t.insert===i.F5&&t.attributes&&t.attributes.lmkr)}function o(t){return"object"==typeof t.insert&&t.insert.id}},vsh_40285:function(t,e,n){"use strict";n.d(e,{I:function(){return s}});var i=n("vsh_61499"),r=n("vsh_8458"),o=(n("vsh_72862"),n("vsh_37075")),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}(0,i.d)(e,t);var n=e.prototype;return n.create=function(t){return t.zoneType=t.zoneType||this.zoneType,new e(t)},n.insert=function(e,n,i){return void 0===i&&(i=!0),t.prototype.insert.call(this,e,n,!1)},n.insertLineMarker=function(t){void 0===t&&(t={});var e=Object.assign({lmkr:1},t);return this.insert(r.F5,e),this},n.insertEnterAndLineMarker=function(t){this.insert(r.K5,t&&t.enterAttributes?t.enterAttributes:{});var e=Object.assign({lmkr:1},t&&t.lineAttributes?t.lineAttributes:{});return this.insert(r.F5,e),this},e}(function(t){function e(e){void 0===e&&(e={});var n=t.call(this)||this;n.ops=[];var i=e.zoneId,o=e.ops;return n.zoneId=i||"0",n.zoneType=r.Ak.Content,o&&o.length>0&&(n.ops=o),n}(0,i.d)(e,t);var n=e.prototype;return n.create=function(t){return t.zoneType=t.zoneType||this.zoneType,new e(t)},n.insertEnter=function(t){return void 0===t&&(t={}),this.insert(r.K5,t),this},n.insertEnterAndLineMarker=function(t){return this},n.insertLineMarker=function(t){return this},e}(o.x));o.x.registerCreator(r.Ak.Content,s)},vsh_50488:function(t,e,n){"use strict";n.d(e,{x:function(){return l}});var i=n("vsh_98540"),r=n("vsh_80055"),o=n("vsh_78638"),s=n("vsh_83640"),a=n("vsh_83927"),l=function(t){function e(n){var r=n.editor,o=t.call(this)||this;return o.name="Align",r.registerCommand(e.KEY,(function(t){var n=t.value;!function(t,e,n,r){var o,s,a,l;void 0===n&&(n=""),void 0===r&&(r=!1);var u=t.selection.getSelection(),c=u.start,d=u.end,h=Math.min(c.line,d.line),f=Math.max(c.line,d.line);if(r){for(var p="",v=h;v<=f;v++)t.getContentState().getLineAttributes(c.zoneId,v).toMap()[e]!==n&&(p=n);for(v=h;v<=f;v++)t.getContentState().setLineAttributes(c.zoneId,v,((o={})[e]=p,o))}else{p="";var g=t.getContentState().getEntities({start:c,end:d});try{for(var y=(0,i.c)(g),m=y.next();!m.done;m=y.next())m.value.attributes[e]!==n&&(p=n)}catch(t){s={error:t}}finally{try{m&&!m.done&&(a=y.return)&&a.call(y)}finally{if(s)throw s.error}}t.getContentState().setAttributes({start:c,end:d},((l={})[e]=p,l))}}(r,e.KEY,n,!0)})),o}(0,i.b)(e,t);var n=e.prototype;return n.renderLine=function(t){var n=t.lineState,i=t.children,r=t.style,o=n.getLineAttributes().toMap()[e.KEY];return Object.assign(r,{textAlign:o}),i},n.deserialize=function(t){var e=t.node,n=t.deltaSet,i=t.zoneId;if(e instanceof HTMLElement){var o=/(?:^| )align-(\S+)/.exec(e.className),s=void 0;if(o&&(s=o[1]),!o&&["left","center","right"].includes(e.style.textAlign)&&(s=e.style.textAlign),s)return(0,r.e)(n,i,{align:s},!1)}return n},n.serialize=function(t){var e=t.type,n=t.node,i=t.lineAttributes,r=i&&i.align;if(e===o.T.LINE&&r)if(n instanceof HTMLElement)n.style["text-align"]=r;else{var s=document.createElement("div");s.appendChild(n),s.style["text-align"]=r,t.node=s}return t},e.KEY="align",(0,i.d)([(0,s.gv)(1002)],e.prototype,"serialize",null),e}(a.S)},vsh_746:function(t,e,n){"use strict";n.d(e,{Q:function(){return o}});var i=n("vsh_98540"),r=n("vsh_78638"),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.b)(e,t),e.prototype.serialize=function(t){var e,n,i=t.lineDelta;return t.type===r.T.LEAF&&"\n"===(null===(e=t.op)||void 0===e?void 0:e.insert)&&(2===(null==i?void 0:i.length())&&(null===(n=i.ops[0].attributes)||void 0===n?void 0:n.lmkr)||1===(null==i?void 0:i.length()))&&(t.node=document.createElement("br")),t},e}(n("vsh_83927").S)},vsh_94753:function(t,e,n){"use strict";n.d(e,{d:function(){return c}});var i=n("vsh_98540"),r=n("vsh_45832"),o=n("vsh_80055"),s=n("vsh_47786"),a=(n("vsh_19496"),n("vsh_37833"),n("vsh_83927")),l=n("vsh_98249"),u=function(t){function e(e){var n=e.editor,i=t.call(this)||this;return i.name="Bold",i.editor=n,i}(0,i.b)(e,t);var n=e.prototype;return n.match=function(t){return t===e.KEY},n.render=function(t){var e=t.children;return t.style.fontWeight="bold",e},e.KEY="bold",(0,i.d)([l.P],e.prototype,"render",null),e}(a.S),c=function(t){function e(n){var i=t.call(this,n)||this;i.handleInput=function(t){"formatBold"===t.inputType&&(t.preventEvent(),t.preventDefault(),t.stopEvent(),i.editor.toggleAttribute(e.KEY))};var o=i.editor;return o.registerCommand(e.KEY,(function(){o.toggleAttribute(e.KEY)})),o.on(r.r.INPUT,i.handleInput),i}(0,i.b)(e,t);var n=e.prototype;return n.deserialize=function(t){var e,n,i,r=t.node,s=t.deltaSet,a=t.zoneId;return r&&r instanceof HTMLElement&&(n=(e=r).tagName,i=e.getAttribute("style")||"","B"===n||"STRONG"===n||/\bfont-weight:\s*bold\b/i.test(i))?(0,o.d)(s,a,{bold:"true"},!1):s},n.serialize=function(t){return(0,o.w)(t,{tagAttribute:"bold",wrapTag:s.c5.bold})},e}(u)},vsh_39977:function(t,e,n){"use strict";n.d(e,{vx:function(){return P}});var i,r=n("vsh_98540"),o=n("vsh_98125"),s=n.n(o),a=n("vsh_98681"),l=n("vsh_45832"),u=n("vsh_4268"),c=n("vsh_78638"),d=n("vsh_80055"),h=n("vsh_83927"),f=n("vsh_40285"),p=n("vsh_66523"),v=(n("vsh_19496"),n("vsh_37833"),n("vsh_40289")),g=n("vsh_75119"),y=n("vsh_9452"),m=n("vsh_18817"),_=n("vsh_44897"),b=n("vsh_78898"),E=n.n(b),S=n("vsh_96580"),w=n("vsh_76020"),C=n("vsh_71257");function I(t,e){var n=t.boxRect,r=t.relativeRect,o=t.anchorRect,s=r.left,a=r.top,l=r.height,u=r.width,c=o,d=c.top,h=c.left,f=c.right,p=c.bottom,v=c.width,g=c.height,y={top:d-a,left:h-s,right:f-s,bottom:p-a,width:v,height:g},m={top:Math.min(d,y.top),left:Math.min(h,y.left),right:u-y.left-v,bottom:l-y.top-g,width:v,height:g};return e===i.BC?function(t){var e,n=t.absRect,i=t.boxRect,r=t.anchorRect,o=t.remainRect,s=n.left,a=n.top,l=i.width,u=i.height,c=r.width,d=r.height,h=o.right,f=o.left,p=o.bottom,v=o.top;e=f+c/2>=l/2&&h+c/2>=l/2?{left:s+c/2-l/2,top:0}:h+c/2>=l?{left:s,top:0}:f+c/2>=l?{left:Math.min(s+c+h-l,s),top:0}:{left:0,top:a+d};e.top=p>=u?a+d:v>=u?a-u:a-u*Math.abs(v)/(Math.abs(p)+Math.abs(v));return e}({absRect:y,boxRect:n,anchorRect:o,remainRect:m}):{top:0,left:0}}!function(t){t.BC="BC"}(i||(i={}));var T;!function(t){t[t.TYPE_HOVER=0]="TYPE_HOVER",t[t.TYPE_MODIFY_LINK=1]="TYPE_MODIFY_LINK",t[t.TYPE_MODIFY_ALL=2]="TYPE_MODIFY_ALL",t[t.TYPE_CREATE=3]="TYPE_CREATE"}(T||(T={}));var x=function(t){function e(e){var n=t.call(this,e)||this;n.container=null,n.boxElem=null,n.linkInputElem=null,n.textInputElem=null,n.raf=0,n.handleClickModify=function(){n.setState({type:2},(function(){n.updatePosition(),n.updateFocus()})),n.props.onClickModify&&n.props.onClickModify(n.props.data)},n.handleDelete=function(){n.props.onClickDelete(n.props.data)},n.handleKeyDown=function(t){if(13===t.keyCode){var e=n.state,i=e.text,r=e.link;t.preventDefault(),t.stopPropagation(),n.props.onSubmit({text:i,link:r})}else 27===t.keyCode&&(t.preventDefault(),t.stopPropagation(),n.props.onEsc())},n.handleTextChange=function(t){n.setState({text:t.target.value})},n.handleLinkChange=function(t){n.setState({link:t.target.value})};var i=e.data,r=e.type,o=i.text,s=i.link;return n.state={type:r,text:o,link:s,style:{left:-1e3,top:0}},n}(0,r.b)(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this;this.updatePosition(),this.raf=requestAnimationFrame((function(){t.updateFocus()}))},n.componentWillUnmount=function(){cancelAnimationFrame(this.raf)},n.updatePosition=function(){this.setState({style:this.getPosition()})},n.updateFocus=function(){var t,e,n=this.state.type;3===n?null===(t=this.textInputElem)||void 0===t||t.focus():1!==n&&2!==n||null===(e=this.linkInputElem)||void 0===e||e.focus()},n.getPosition=function(){var t,e,n;return I({boxRect:this.boxElem.getBoundingClientRect(),relativeRect:null===(n=null===(e=null===(t=this.container)||void 0===t?void 0:t.parentElement)||void 0===e?void 0:e.parentElement)||void 0===n?void 0:n.getBoundingClientRect(),anchorRect:this.props.anchorRect},i.BC)},n.renderHoverUI=function(){var t=this,e=this.props.data.link,n=this.props.editable;return s().createElement("div",{ref:function(e){return t.boxElem=e},className:"link-modify-popup layout-row"},s().createElement("div",{className:"link-popup__input-group"},s().createElement("div",{className:"link-row"},s().createElement("span",{className:"link-modify-text"},e),n&&s().createElement("button",{onClick:this.handleClickModify,className:"link-modify-submit"},s().createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s().createElement("path",{d:"m17.57 7.244-.006-.006.37-.37a1 1 0 0 0 .001-1.412l-3.434-3.453-.002-.002a1 1 0 0 0-1.414 0l-.705.706.01.01L2 13.186V17a1 1 0 0 0 1 1h3.814L17.57 7.244Zm-3.273.389-2.015-2.015 1.487-1.515 2.023 2.034-1.495 1.496Zm-3.415-.587 2.002 2.002-6.913 6.92h-.004l-1.934-1.935v-.003l6.849-6.984ZM3 20a1 1 0 1 0 0 2h18a1 1 0 1 0 0-2H3Z",fill:"#2B2F36"}))),n&&s().createElement("button",{onClick:this.handleDelete,className:"link-modify-delete"},s().createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s().createElement("path",{d:"m10.652 19.131 1.815-2.42 1.429 1.428-1.644 2.192a5.037 5.037 0 1 1-7.963-6.168l1.43-1.788a1 1 0 0 1 1.562 1.25l-1.43 1.787a3.037 3.037 0 1 0 4.8 3.719Zm4.455-2.61-1.45-1.45-1.161-1.16c0-.001 0 0 0 0L8.073 9.486 2.707 4.121a1 1 0 1 1 1.414-1.414l16.97 16.97a1 1 0 1 1-1.414 1.415l-4.57-4.57ZM13.348 4.869 11.532 7.29l-1.428-1.429 1.644-2.192a5.037 5.037 0 1 1 7.962 6.168l-1.43 1.788a1 1 0 1 1-1.561-1.25l1.43-1.787a3.037 3.037 0 1 0-4.801-3.719Z",fill:"#2B2F36"}))))))},n.renderModfiyUI=function(){var t,e,n=this,i=this.props.i18n,r=!!(null===(e=null===(t=this.props.data.entity)||void 0===t?void 0:t.attributes)||void 0===e?void 0:e.image),o=this.state.type,a=i["hyperlink.text"],l=i["hyperlink.link"],u=i["hyperlink.determine"],c=i["hyperlink.add-link"],d=i["hyperlink.enter-text"];return s().createElement("div",{ref:function(t){return n.boxElem=t},className:"link-popup layout-row"},s().createElement("svg",{className:"link-popup__triangle",width:"20px",height:"20px",viewBox:"271 193 224 132",version:"1.1",xmlns:"http://www.w3.org/2000/svg"}),s().createElement("div",{className:"link-popup__input-group"},(2===o||3===o)&&!r&&s().createElement("div",{className:"link-row"},s().createElement("span",{className:"link-row-text"},a),s().createElement("input",{ref:function(t){return n.textInputElem=t},type:"text",spellCheck:!1,placeholder:d,value:this.state.text,onKeyDown:this.handleKeyDown,onChange:this.handleTextChange,className:"link-row-input text-input"})),s().createElement("div",{className:"link-row"},s().createElement("span",{className:"link-row-text"},l),s().createElement("input",{ref:function(t){return n.linkInputElem=t},onKeyDown:this.handleKeyDown,type:"text",spellCheck:!1,className:"link-row-input link-input",value:this.state.link,onChange:this.handleLinkChange,placeholder:c}),s().createElement("button",{onClick:function(){return n.props.onSubmit({text:n.state.text,link:n.state.link})},className:"link-submit",disabled:!this.props.onValidLink(this.state.link)},u))))},n.render=function(){var t=this,e=this.state,n=e.type,i=e.style;return s().createElement("div",{ref:function(e){return t.container=e},style:(0,r.g)({position:"absolute",zIndex:999},i)},0===n&&this.renderHoverUI(),0!==n&&this.renderModfiyUI())},e.HYPERLINK_WIDTH=392,e.TYPE_HOVER=0,e.TYPE_MODIFY_LINK=1,e.TYPE_MODIFY_ALL=2,e.TYPE_CREATE=3,e}(o.Component);var k="".concat(m.P).concat("link_background"),M="".concat(m.P,"link_mark"),R="hyperlink",P=function(t){function e(n){var i=t.call(this)||this;return i.props=n,i.name="HyperLinks",i.inlineWrapperCache=null,i.mouseEnterTimer=0,i.show=!1,i.popupMountNode=null,i.closePopupTimer=0,i.linkOperations=[],i.currentSelection=null,i.preventNextClick=!1,i.handleKeydown=function(){var t=i.editor.selection.getSelection(),n=i.editor.getContentState().getActiveZone();0!==t.start.offset&&t.start.offset!==n.getLine(t.start.line).getLineMarker()||!t.isCollapsed()||i.editor.toggleAttribute(e.KEY,"")},i.handleContentChange=function(t){if(i.currentSelection){var e=i.currentSelection.range.start.zoneId,n=t.deltaSet.get(e);if(!n)return;var r=i.currentSelection.position,o=i.editor.transformPosition(n,r);o!==r&&(i.currentSelection={range:o.toRange(),position:o})}},i.completeURLProtocolWithCustom=function(t){return p.Z.completeURLProtocol(t,i.getCustomProtocols())},i.handlePopUpMouseEnter=function(){i.closePopupTimer&&clearTimeout(i.closePopupTimer)},i.handleDocumentClick=function(t){var e,n=t.target;!document.body.contains(n)||(null===(e=i.popupMountNode)||void 0===e?void 0:e.contains(n))||n.closest('[adit-key="hyperlink"]')||i.preventNextClick||i.closePopup(),i.preventNextClick=!1},i.handleMouseUp=function(t){var e,n=t.target;(null===(e=i.popupMountNode)||void 0===e?void 0:e.contains(n))&&(i.preventNextClick=!0)},i.handleMouseLeave=function(t){i.props.onMouseLeave?i.props.onMouseLeave(t,i.editor):(i.mouseEnterTimer&&clearTimeout(i.mouseEnterTimer),i.popupType===T.TYPE_HOVER&&(i.closePopupTimer=setTimeout((function(){i.closePopup()}),e.closeDuration)))},i.handleMouseEnter=function(t){if(i.props.onMouseEnter)i.props.onMouseEnter(t,i.editor);else{var e=i.editor,n=t.target,r=i.editor.editorUtils.closest(n,"[outer-u-container]");r&&(n=r),i.closePopupTimer&&clearTimeout(i.closePopupTimer),i.mouseEnterTimer=window.setTimeout((function(){var t,r=n&&(0,a.Ve)(n,i.editor);if(r){var o=e.getContentState().getEntities(r);o.length>1&&(o=[{start:o[0].start,end:o[o.length-1].end,text:o.map((function(t){return t.text})).join(""),attributes:o[0].attributes}]);var s=o[0],l="",u="";if(s.attributes.hyperlink){var c=JSON.parse(s.attributes.hyperlink);l=s.text,u=c.href}else{var d=r.start,h=r.end,f=null===(t=e.getContentState().getZoneState(d.zoneId))||void 0===t?void 0:t.getLine(d.line);if(!f)return void console.error("Hyperlinks handleMouseEnterUrl zone ".concat(d.zoneId," line ").concat(d.line," not exist"));u=l=f.getModelText().slice(d.offset,h.offset)}i.currentSelection={range:r,position:r.toPosition()};var p=e.rectModule.getRangeRect({start:s.start,end:s.end}),v=i.relativeRectToScreen(p);i.unmountPopup(),i.openPopup({range:r,anchorRect:v,data:{text:l,link:i.completeURLProtocolWithCustom(u),entity:s},type:x.TYPE_HOVER})}}),500)}},i.handleClick=function(t){if(i.show&&i.popupType!==T.TYPE_HOVER)t.preventDefault();else{var e=t.target,n=i.editor.editorUtils.closest(e,"[data-href]"),r=i.editor.editorUtils.getAttribute(n,"data-href");if(i.props.onClick)i.props.onClick(t,r);else{t.preventDefault();var o=i.editor.editorUtils.closest(t.target,"[href]"),s=o&&i.editor.editorUtils.getAttribute(o,"href");if(!s)return;window.open(i.completeURLProtocolWithCustom(s),"_blank","noopener,noreferrer")}}},i.editor=n.editor,i.register(),p.Z.addExtraProtocols(i.getCustomProtocols()),i.editor.on("keydown",i.handleKeydown),i.editor.on(l.r.CONTENT_CHANGE,i.handleContentChange),i}(0,r.b)(e,t);var n=e.prototype;return n.editorDidMount=function(){var t;this.popupMountNode=document.createElement("div"),this.popupMountNode.setAttribute("id","@editor-kit-hyperlink-container-".concat(Math.random())),this.popupMountNode.classList.add("adit-popup-container"),this.popupMountNode.style.position="relative",this.popupMountNode.style.top="0px",this.popupMountNode.style.left="0px",(null==(t=this.props.getPopupContainer?this.props.getPopupContainer():document.body)?void 0:t.firstChild)?t.insertBefore(this.popupMountNode,t.firstChild):t.append(this.popupMountNode),document.addEventListener("click",this.handleDocumentClick),document.addEventListener("mouseup",this.handleMouseUp),this.popupMountNode.addEventListener("mouseenter",this.handlePopUpMouseEnter)},n.match=function(t){return t===e.KEY||t===S.in||t===k||t.startsWith("url-")||t.startsWith("url:")},n.renderInlineWrapper=function(t){var n,i,r=t.index,o=t.attributes,s=t.lineState,a=e.KEY;if(!o[a])return null;var l=r-1,u=null;if(l>=0){var c=null===(n=s.getOps()[l].attributes)||void 0===n?void 0:n[a];if(c){var d=JSON.parse(c);u=null!==(i=null==d?void 0:d.linkId)&&void 0!==i?i:null}}var h=JSON.parse(o[a]).linkId;if(this.inlineWrapperCache&&h===u)return this.inlineWrapperCache;var f=(0,g.az)(w.x,{"outer-u-container":!0});return this.inlineWrapperCache=f,f},n.getUrl=function(t){var n=t[S.in],i=t[e.KEY],r="",o="";if(i){var s=JSON.parse(i);r=s.href,o=s.linkId}else r=n;return{href:r,linkId:o}},n.render=function(t){var e,n=t.attributes,i=t.children,r=n[S.in];n[k]&&(i=(0,g.az)(w.x,{style:{backgroundColor:y.iw}},i));var o=this.getUrl(n),s=o.href,a=o.linkId;if(s){p.Z.getRegex(this.getCustomProtocols()).test(s)||(s="");var l=this.completeURLProtocolWithCustom(s),u=!r&&!p.Z.isValidLink(l.trim(),null===(e=this.props)||void 0===e?void 0:e.customLinkRegexp),c=l;if(u)try{c=decodeURIComponent(l)}catch(t){}return(0,g.az)(C.r,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onClick:this.handleClick,"data-href":s,href:c,"data-id":a||S.in,alwayHasUnderline:this.props.alwayHasUnderline,linkColor:this.props.linkColor},i)}return i},n._editorLineStateWillRender=function(t){var e=t.lineState,n=new f.I({zoneId:e.getZoneId()}),i=this.getCustomLinkRegexp(p.Z.LINK_REG);(0,S.Z7)(e,n,i),n.ops.length&&(t.lineState=e.compose(n))},n.destroy=function(){var t,e;this.closePopup(),document.removeEventListener("click",this.handleDocumentClick),document.removeEventListener("mouseup",this.handleMouseUp),this.popupMountNode&&this.popupMountNode.removeEventListener("mouseenter",this.handlePopUpMouseEnter),this.mouseEnterTimer&&clearTimeout(this.mouseEnterTimer),null===(e=null===(t=this.popupMountNode)||void 0===t?void 0:t.parentElement)||void 0===e||e.removeChild(this.popupMountNode),this.popupMountNode=null},n.getCustomProtocols=function(){return this.props.customProtocols||[]},n.getCustomLinkRegexp=function(t){return this.props.customLinkRegexp?this.props.customLinkRegexp:t},n.register=function(){var t=this,n=this.editor;n.registerCommand(e.KEY,(function(){var e=n.selection.getSelection();e&&(t.currentSelection={range:e,position:e.toPosition()},e.isCollapsed()?t.handleHyperLinkCommand(e):n.once(l.r.PAINT,(function(){t.handleHyperLinkCommand(e)})),t.addLocalIdToRange(e))}))},n.handleHyperLinkCommand=function(t){var e=this,n=this.editor;if(this.show)this.removeLinkBackColor(),this.closePopup();else{var i=t.isCollapsed(),r=n.rectModule.getCaretRect(t.start);this.openPopup({anchorRect:this.relativeRectToScreen(r),data:{text:"",link:""},range:t,type:i?x.TYPE_CREATE:x.TYPE_MODIFY_LINK}),i||requestAnimationFrame((function(){e.addLinkBackColor()}))}},n.openPopup=function(t){var e=t.anchorRect,n=t.data,i=t.type;this.show=!0,this.popupType=i,function(t,e){E().render(s().createElement(x,t),e)}({type:i,i18n:this.props.i18n,anchorRect:e,editable:this.editor.isEditable(),data:n,onSubmit:this.handleSave,onClickDelete:this.handleClickDelete,onClickModify:this.handleClickModify,onValidLink:this.handleValidLink,onEsc:this.closePopup},this.popupMountNode)},n.closePopup=function(){var t=this;this.show&&(this.removeLinkBackColor(),this.unmountPopup()),this.show=!1,this.currentSelection=null,this.removeLocalIdToRange();var e=this.linkOperations.filter(Boolean);if(this.linkOperations=[],e.length>1){var n=e.pop();e.reduceRight((function(e,n){return t.editor.undoModule.mergeRecords(n,e),n}),n)}},n.unmountPopup=function(){var t;this.popupMountNode&&(t=this.popupMountNode,E().unmountComponentAtNode(t))},n.relativeRectToScreen=function(t){var e=this.editor.getRect("0"),n=t.left,i=t.top,r=t.bottom,o=t.right,s=t.width,a=t.height;return{left:e.left+n,top:Math.max(e.top+i,40),right:e.left+o,bottom:e.top+r,width:s,height:a}},n.handleValidLink=function(t){var e;return p.Z.isValidLink(t.trim(),null===(e=this.props)||void 0===e?void 0:e.customLinkRegexp)},n.handleSave=function(t){var e=t.text,n=t.link;n=n.trim(),(0,S.b2)(n)&&(n=""),n&&this.doInsertLink(n,e),this.closePopup()},n.handleClickDelete=function(t){var n,i=this.editor,o=t.entity.attributes,s=(0,r.f)(i.getContentState().getEntities([[e.KEY,o[e.KEY]]]),1)[0];s&&this.addLocalIdToRange(s),i.getContentState().setAttributes(this.selection,((n={})[e.KEY]="",n.removeLink="true",n),{type:R}),this.closePopup()},n.addLocalIdToRange=function(t){var e,n=this.editor.getContentState().setAttributes(t,((e={})[M]="true",e),{type:R});this.linkOperations.push(n)},n.removeLocalIdToRange=function(){var t,e=(0,r.f)(this.editor.getContentState().getEntities([[M,"true"]]),1)[0];if(e){var n=this.editor.getContentState().setAttributes(e,((t={})[M]="",t),{type:R});this.linkOperations.push(n)}},Object.defineProperty(n,"selection",{get:function(){return this.currentSelection?this.currentSelection.range:this.editor.selection.getSelection()},enumerable:!1,configurable:!0}),n.handleClickModify=function(t){this.popupType=T.TYPE_MODIFY_ALL;var n=t.entity.attributes,i=this.editor.getContentState().getEntities([[e.KEY,n[e.KEY]]]).find((function(t){return t.attributes===n}));i&&this.addLocalIdToRange(i),this.addLinkBackColor()},n.genHyperLinkAttribFromURL=function(t){var n,i=(0,_.D)(10);return(n={})[e.KEY]=JSON.stringify({href:this.completeURLProtocolWithCustom(t),linkId:i}),n.removeLink="",n},n.doInsertLink=function(t,n){var i,o,s,a,l,c=this,d=this.editor,h=this.selection,f=h.start,p=h.end,v=this.genHyperLinkAttribFromURL(t),g=d.getContentState(),y=g.getZoneState(f.zoneId);if(y){var m=y.getEntities({start:f,end:p},(function(t){return t===e.KEY})),_="";try{for(var b=(0,r.c)(m),E=b.next();!E.done;E=b.next()){var S=E.value;_+=S.text;var w=y.getEntities([[e.KEY,S.attributes[e.KEY]]]);try{for(var C=(s=void 0,(0,r.c)(w)),I=C.next();!I.done;I=C.next()){var T=I.value;this.linkOperations.push(g.setAttributes(T,((l={})[e.KEY]="",l)))}}catch(t){s={error:t}}finally{try{I&&!I.done&&(a=C.return)&&a.call(C)}finally{if(s)throw s.error}}}}catch(t){i={error:t}}finally{try{E&&!E.done&&(o=b.return)&&o.call(b)}finally{if(i)throw i.error}}if(!n&&u.e.isPointEqual(f,p)&&(n=t),n&&n!==_){var x=g.replaceText({start:f,end:p},n,v,{type:R});this.linkOperations.push(x)}else{x=g.setAttributes({start:f,end:p},v,{type:R});this.linkOperations.push(x)}p&&this.editor.once("paint",(function(){var t=c.editor.getScrollContainer(),e=p;if(n){var i=g.getZoneState(f.zoneId);if(!i)return;var r=i.pointToOffset(f);if(null!==r){var o=i.offsetToPoint(r+n.length),s=o.line,a=o.offset;e.line=s,e.offset=a}}var l=t.scrollTop||0;d.scrollTo({top:l}),d.focus(),d.selection.setSelection({start:p,end:p},!0)}))}},n.addLinkBackColor=function(){this.setLinkBackColor(!0)},n.removeLinkBackColor=function(){this.setLinkBackColor(!1)},n.setLinkBackColor=function(t){var e,n=this.editor.getContentState().setAttributes(this.selection,((e={})[k]=t?"true":"",e),{type:R});this.linkOperations.push(n)},n.serialize=function(t){var e,n,i,o,s=t.type,a=t.node,l=t.op,u=null===(i=null==l?void 0:l.attributes)||void 0===i?void 0:i.hyperlink;if(!u&&(null===(o=null==l?void 0:l.attributes)||void 0===o?void 0:o[S.in])&&(u=JSON.stringify({href:l.attributes[S.in]})),s===c.T.LEAF&&u){var d=document.createElement("a"),h=JSON.parse(u);try{for(var f=(0,r.c)(Object.entries(h)),p=f.next();!p.done;p=f.next()){var v=(0,r.f)(p.value,2),g=v[0],y=v[1];d.setAttribute(g,String(y))}}catch(t){e={error:t}}finally{try{p&&!p.done&&(n=f.return)&&n.call(f)}finally{if(e)throw e.error}}return d.setAttribute("target","_blank"),d.setAttribute("rel","noopener noreferrer"),d.appendChild(a),Object.assign(t,{node:d})}return t},n.deserialize=function(t){var e,n=t.node,i=t.deltaSet,r=t.zoneId,o=i;if(!(n instanceof HTMLElement))return o;if("a"!==n.tagName.toLowerCase())return o;var s=n.getAttribute("href")||(null===(e=n.closest(".url"))||void 0===e?void 0:e.getAttribute("data-href"));if(!s)return o;var a=this.genHyperLinkAttribFromURL(s);return o=(0,d.d)(o,r,a)},e.KEY="hyperlink",e.closeDuration=600,(0,r.d)([v.MR],e.prototype,"handleValidLink",null),(0,r.d)([v.MR],e.prototype,"handleSave",null),(0,r.d)([v.MR],e.prototype,"handleClickDelete",null),(0,r.d)([v.MR],e.prototype,"addLocalIdToRange",null),(0,r.d)([v.MR],e.prototype,"removeLocalIdToRange",null),(0,r.d)([v.MR],e.prototype,"handleClickModify",null),e}(h.S)},vsh_96580:function(t,e,n){"use strict";n.d(e,{in:function(){return o},Z7:function(){return s},b2:function(){return a}});var i=n("vsh_98540"),r=n("vsh_66523"),o=(n("vsh_19496"),n("vsh_37833"),"auto-url");var s=function(t,e,n){var s=new RegExp("".concat(n.source),"gi");s.lastIndex=0;for(var a,l=null,u=[],c=!1,d=new Map([["(",")"],["[","]"],["{","}"],["<",">"]]),h=null,f=t.hasLineMarker()?1:0,p=t.getModelText(),v=p.slice(f,p.endsWith("\n")?-1:p.length),g=function(){l||(l=[],u=[]);var e=a.index+f,n=a[0];(function(t,e){var n,r=_((n=(0,i.e)([],(0,i.f)(e.keys()),!1)).concat.apply(n,(0,i.e)([],(0,i.f)(e.values()),!1)));return new RegExp("[".concat(r,"]")).test(t)})(n,d)&&(n=function(t,e){for(var n=[],r=t.length,o=t,s=0;s<r;s++){var a=t[s],l=new RegExp("[".concat(_((0,i.e)([],(0,i.f)(e.values()),!1)),"]")).test(a);if(e.has(a))n.push([e.get(a),s]);else if(l){var u=n.pop();if(!u)return o=t.slice(0,s);if(a!==u[0])return o=n[0]?o=t.slice(0,n[0][1]):t.slice(0,u[1])}}n.length&&(o=t.slice(0,n[0][1]));return o}(a[0],d)),h||(h=function(){var e,n,r=0,o=[];try{for(var s=(0,i.c)(t),a=s.next();!a.done;a=s.next()){var l=a.value;if(l.insert&&"string"==typeof l.insert&&"\n"!==l.insert){var u=l.insert.length;r+=u;var c=t.getAttributes(r-u,r).find((function(t){var e=(0,i.f)(t,2),n=e[0];return e[1],n.includes("mention-token")}));c?o.push([r-u,r]):o.push(null)}else o.push(null)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return o.filter(Boolean)}());var r=h.filter((function(t){return null!==t&&(e<t[0]&&e+n.length>=t[0])}));if(r.length){var o=r[0][0];n=n.slice(0,o-e)}if(h.some((function(t){return null!==t&&(e>=t[0]&&e+n.length<=t[1])})))return"continue";l.push([e,n]),u.push(e,e+n.length)};a=s.exec(v);)g();if(l){var y,m=function(t,e){var n=0,i=0;if(e)for(;n<e.length&&0===e[n];)n++;return function r(o,s){if(!e||n>=e.length)t(o,s),i+=o.length;else{var a=e[n]-i,l=o.length;if(a>=l)t(o,s),i+=o.length,a===l&&n++;else{var u=o;if(a>0){var c=u.substring(0,a);t(c,s),i+=a}n++,r(u.substring(a),s)}}}}((y=0,function(t,n){var i;void 0===n&&(n={}),n.list&&/code/.test(n.list)&&(c=!0);var a=t.length,u=Object.keys(n),d=u.find((function(t){return"hyperlink"===t||"auto-url"===t})),h=u.find((function(t){return"removeLink"===t})),f=function(t,e,n,i){if(!l)return!1;for(var r=0;r<l.length;r++){var o=l[r];if(t>=o[0]&&t<o[0]+o[1].length){if(!n){if(i){s.lastIndex=0;var a=s.exec(o[1].substring(e.length));return a?l.splice(r,1,[o[0]+e.length,a[0]]):l.splice(r,1),o[1]}return o[1]}l.splice(r,1),r--}}return!1}(y,t,d,n.removeLink),p=u.find((function(t){return"dataMetaBlockProps"===t||t.startsWith("mention")||"mention"===t}));if(!f||c||h||p)e.retain(a);else{var v=o;e.retain(a,((i={})[v]=r.Z.completeURLProtocol(f),i))}y+=a}),u);t.getOps().forEach((function(t){return m(t.insert,t.attributes||{})}))}function _(t){return t.map((function(t){return"\\"+t})).join("")}},a=function(t){return void 0===t&&(t=""),/^data:/.test(t)}},vsh_10002:function(t,e,n){"use strict";n.d(e,{T:function(){return u}});var i=n("vsh_98540"),r=n("vsh_45832"),o=n("vsh_80055"),s=n("vsh_47786"),a=(n("vsh_19496"),n("vsh_37833"),n("vsh_83927")),l=n("vsh_98249"),u=function(t){function e(n){var i=t.call(this,n)||this;i.handleInput=function(t){"formatItalic"===t.inputType&&(t.preventEvent(),t.preventDefault(),t.stopEvent(),i.editor.toggleAttribute(e.KEY))};var o=i.editor;return o.registerCommand(e.KEY,(function(){o.toggleAttribute(e.KEY)})),o.on(r.r.INPUT,i.handleInput),i}(0,i.b)(e,t);var n=e.prototype;return n.deserialize=function(t){var e=t.node,n=t.deltaSet,i=t.zoneId;if(e instanceof HTMLElement){var r=e.tagName,s=e.getAttribute("style")||"";if("I"===r||"EM"===r||/\bfont-style:\s*italic\b/i.test(s))return(0,o.d)(n,i,{italic:"true"},!1)}return n},n.serialize=function(t){return(0,o.w)(t,{tagAttribute:"italic",wrapTag:s.c5.italic})},e}(function(t){function e(e){var n=e.editor,i=t.call(this)||this;return i.name="Italic",i.editor=n,i}(0,i.b)(e,t);var n=e.prototype;return n.match=function(t){return t===e.KEY},n.render=function(t){var e=t.children;return t.style.fontStyle="italic",e},e.KEY="italic",(0,i.d)([l.P],e.prototype,"render",null),e}(a.S))},vsh_44858:function(t,e,n){"use strict";n.d(e,{W:function(){return g}});var i=n("vsh_98540"),r=n("vsh_83927"),o=n("vsh_19496"),s=n.n(o),a=window.sessionStorage.getItem("__ENTER_FROM__"),l=window.User&&window.User.userAgent||navigator.userAgent||"",u=s().getParser(l),c={isFeishu:!1,isLark:!1,isLarkPcTab:!1,isLarkWindow:!1,isDocs:!1,isDocsSDK:!1,isAndroidSDK:!1,isIOSSDK:!1,isMobileSDK:!1,isFeed:!1,isIphoneX:!1,isIPad:!1,isMobile:!1,isMac:!1,isWindows:!1,isLinux:!1,isSafari:!1,isIE:!1,isSougou:!1,isIOS:!1,isAndroid:!1,isQQ:!1,isX5:!1,is360:!1,is360Fast:!1,isUc:!1,isBaiDu:!1,isLB:!1,oldIE:!1,modernIE:!1,kernel:"",isLarkTab:!1,isOldLarkTab:!1,isEdge:!1,isFF:!1,isChrome:!1,isWebKit:!1,isBytedanceApp:!1,isOpendoc:!1,isIPhoneSeries:function(){return!1},isIOSBelow12:function(){return!1},getChromeVersion:function(){return null},isPrimaryChrome:!1,isOpera:!1,is2345:!1,isMaxthon:!1,isTheWorld:!1,isH5:!1};if(c.isFeishu=/feishu/i.test(l),c.isLark=c.isFeishu||/lark/i.test(l),c.isLarkPcTab=c.isLark&&/TYPE\/PC_TAB/i.test(l),c.isLarkWindow=c.isLark&&"lark.window"===a,c.isDocs=/Docs/i.test(l),c.isDocsSDK=c.isLark&&c.isDocs,c.isAndroidSDK=/DocEditorSDk/i.test(l),c.isIOSSDK=/DocsSDK/i.test(l),c.isMobileSDK=c.isAndroidSDK||c.isIOSSDK,c.isFeed=/Feed/i.test(l)||/lark=1/.test(location.search)||/sourceType=feed/.test(location.search),c.isIphoneX=f("X")||!1,c.isIPad=/iPad/i.test(l),c.isMobile=u.getPlatformType(!0).includes("mobile"),c.isMac=u.getOSName(!0).includes("macos"),c.isWindows=u.getOSName(!0).includes("windows"),c.isLinux=u.getOSName(!0).includes("linux"),c.isSafari=u.getBrowserName(!0).includes("safari"),c.isIE=u.getBrowserName(!0).includes("internet explorer"),c.isIOS=!!l.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),c.isAndroid=l.indexOf("Android")>-1||l.indexOf("Adr")>-1,c.isQQ=/QQBrowser/i.test(l),c.isX5=/MQQBrowser/i.test(l),c.is360=/360SE/i.test(l),c.is360Fast=/360EE/i.test(l),c.isUc=/UBrowser/i.test(l),c.isBaiDu=/BIDUBrowser/i.test(l),c.is2345=/2345Explorer/i.test(l),c.isMaxthon=/Maxthon/i.test(l),c.isTheWorld=/TheWorld/i.test(l),c.isLB=/LBBROWSER/i.test(l),c.isEdge=/Edge/i.test(l),c.isFF=/Firefox/i.test(l),c.isOpera=/OPR/i.test(l),c.isWebKit=/AppleWebKit/i.test(l),c.isChrome=u.getBrowserName(!0).includes("chrome"),c.isPrimaryChrome=c.isChrome&&!c.isOpera&&!c.isLB&&!c.isUc&&!c.isBaiDu&&!c.is360&&!c.is360Fast&&!c.isQQ&&!c.isSougou&&!c.isEdge&&!c.is2345&&!c.isTheWorld&&!c.isMaxthon,c.isOpendoc=/opendoc=(true|1)/.test((location.search||"").toLowerCase())||/^\/component\//.test(location.pathname||""),c.isIE){var d=parseInt(String(u.getBrowserVersion()),10);c.oldIE=d<11,c.modernIE=d>=11}c.kernel=["msie","webkit","blink","gecko","msedge","tablet","mobile"].find((function(t){return u.getEngineName().toLowerCase().includes(t)})),c.isLarkTab=/from\/(old_)?lark_tab/i.test(l),c.isOldLarkTab=/from\/old_lark_tab/i.test(l);var h=c.isLark||c.isDocs;function f(t){var e=new RegExp("(iPhone\\s".concat(t,")"));return!!navigator.userAgent.match(e)}c.isBytedanceApp=h,c.isIPhoneSeries=f,c.isIOSBelow12=function(){var t=function(){if(function(){var t=navigator.userAgent;return t.indexOf("iPhone")>0||t.indexOf("iPad")>0||t.indexOf("iPhone")>0}()){var t=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/);return t?{major:+t[1],minor:+t[2]}:null}return null}();return!!t&&t.major<12},c.getChromeVersion=function(){var t=navigator.userAgent.match(/Chrome\/([\d.]+)/i);return t&&t[1]?t[1]:null},c.isH5=c.isMobile&&!c.isBytedanceApp||c.isOpendoc&&c.isMobile;var p=c,v=(n("vsh_37833"),"");p.isMac||p.isIPad?v="mac":p.isWindows?v="windows":p.isLinux&&(v="linux");var g=function(t){function e(e){var n=e.editor,i=e.shortcutsMap,r=t.call(this)||this;return r.name="KeyboardShortcuts",r.handleKeydown=function(t){var e=t.evt,n=r.getHotKeyName(e);if(n){var i=n.key,o=n.value;return r.editor.execCommand(i,o?{value:o}:void 0),e.preventDefault(),!0}return!1},r.editor=n,r.shortcutToCommandMap=r.normalizeShortCutsMap(i),r.editor.on("keydown",r.handleKeydown),r}(0,i.b)(e,t);var n=e.prototype;return n.getShortCutID=function(t){var e=t.metaKey,n=t.altKey,i=t.shiftKey,r=t.ctrlKey,o=t.keyCode;return[e?"meta":"",n?"alt":"",i?"shift":"",r?"ctrl":"",null!=o?o:""].filter(Boolean).join("-")},n.normalizeShortCutsMap=function(t){var e,n,r,o,s={};try{for(var a=(0,i.c)(t),l=a.next();!l.done;l=a.next()){var u=l.value,c=u.key,d=u.value,h=u.shortcut,f=void 0;f=Array.isArray(h)?h:[h];try{for(var p=(r=void 0,(0,i.c)(f)),g=p.next();!g.done;g=p.next()){var y=g.value[v];if(y)s[this.getShortCutID(y)]={key:c,value:d}}}catch(t){r={error:t}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(r)throw r.error}}}}catch(t){e={error:t}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return s},n.getHotKeyName=function(t){var e=this.getShortCutID(t);return this.shortcutToCommandMap[e]},e}(r.S)},vsh_53367:function(t,e,n){"use strict";var i;n.d(e,{Ri:function(){return o},Q2:function(){return r},wy:function(){return i},oT:function(){return s},eH:function(){return a}}),function(t){t[t.USER=0]="USER",t[t.DOC=1]="DOC",t[t.SHEET=3]="SHEET",t[t.BITABLE=8]="BITABLE",t[t.MINDNOTE=11]="MINDNOTE",t[t.BOX=12]="BOX",t[t.WIKI=16]="WIKI",t[t.DOCX=22]="DOCX"}(i||(i={}));var r="AT_USER_BLOCK",o="mentionBlock",s=["@","＠"],a=["Escape","ArrowLeft","ArrowRight"]},vsh_50923:function(t,e,n){"use strict";n.d(e,{p:function(){return c}});var i=n("vsh_98540"),r=n("vsh_82631"),o=n("vsh_83640"),s=n("vsh_40285"),a=n("vsh_98249"),l=(n("vsh_19496"),n("vsh_37833"),n("vsh_98650")),u=n("vsh_53367"),c=function(){function t(t){var e=this;this.name="Mention",this.offset=-1,this.current=null,this.popupMountNode=null,this.attributesAllowList=[],this.handleContentChange=function(t){var n,r,o,s;if(e.mentionKeyboard.maybeIsAt&&!e.mentionSuggest.suggest){e.mentionKeyboard.maybeIsAt=!1;var a=t.deltaSet;if(!(Object.keys(a.deltas).length>1)){var l=!1;try{for(var c=(0,i.c)(Object.values(a.deltas)),d=c.next();!d.done;d=c.next()){var h=d.value;try{for(var f=(o=void 0,(0,i.c)(h.ops)),p=f.next();!p.done;p=f.next()){var v=p.value;if(!v.retain&&!v.delete){if("string"!=typeof v.insert)return;1===v.insert.length&&u.oT.includes(v.insert)&&(l=!0)}}}catch(t){o={error:t}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}}}catch(t){n={error:t}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}l&&e.mentionSuggest.openSuggest()}}},this.props=t;var n=t.editor,r=t.getPopupContainer,o=t.MentionSuggest,s=t.MentionKeyboard,a=t.attributesAllowList;a&&a.length&&(this.attributesAllowList=a),this.getPopupContainer=r,n.on("contentchange",this.handleContentChange),this.mentionSuggest=new o({editor:n,mentionPlugin:this,onSuggest:t.onSuggest}),this.mentionKeyboard=new s({editor:n,mentionPlugin:this})}var e=t.prototype;return e.render=function(t){var e=t.lineState,n=t.children,i=t.attributes,r=t.op,o=this.formatAttributesFromEditor(i,r.insert||"");if(o)switch(o.blockId&&(t.key=o.blockId),o.blockType){case u.Q2:var s=o.props.data.user;return this.renderAt(e.getZoneId(),i,{title:s["".concat(this.props.lang,"_name")]||s.name||s.cn_name||s.en_name,enName:s.en_name,type:u.wy.USER,token:s.id,url:"",isReply:s.isReply,avatarUrl:s.avatar_url},s);case u.Ri:var a=o.props,l=a.title,c=a.token,d=a.link,h=a.type,f=a.iconInfo;return this.renderAt(e.getZoneId(),i,{title:l,token:c,url:d,type:h,iconInfo:f},o.props)}return n},e.handleOpenSuggest=function(){var t=this.props.editor,e=t.selection.getSelection(),n=e.toPosition(),i=n.start,r=n.len,o=new s.I({zoneId:e.start.zoneId}).retain(i).delete(r).insert("@");t.getContentState().apply(o),this.mentionSuggest.openSuggest(),this.mentionKeyboard.atKeyPressed=!1,this.offset=e.start.offset+1},e.getExtendedAttribs=function(){var t=this.props,e=t.editor,n=t.attributesAllowList;if(!n||!n.length)return{};var i=(0,r.cB)(e),o={};for(var s in i)n.includes(s)&&(o[s]=i[s]);return o},e.applyMention=function(t,e){var n,r,o,a=this.props.editor,l=a.selection.getSelection(),c=l.start,d=c.zoneId,h=a.getContentState(),f=null===(o=h.getZoneState(d))||void 0===o?void 0:o.getLine(c.line);if(f){var p=f.getModelText().slice(0,c.offset),v=f.getOffset().start,g=-1;try{for(var y=(0,i.c)(u.oT),m=y.next();!m.done;m=y.next()){var _=m.value;g=Math.max(g,p.lastIndexOf(_))}}catch(t){n={error:t}}finally{try{m&&!m.done&&(r=y.return)&&r.call(y)}finally{if(n)throw n.error}}var b=this.formatAttributesToEditor(t);if(g>-1){var E=v+g,S=this.getExtendedAttribs(),w=new s.I({zoneId:d}).retain(E).delete(l.toPosition().start-E).insert(null!=e?e:" ",(0,i.g)((0,i.g)({},b),S));h.apply(w)}}},e.destroy=function(){var t=this.props.editor;this.mentionSuggest.popupMountNode=null,this.mentionSuggest.destroy(),t.off("contentchange",this.handleContentChange),this.mentionKeyboard.destroy()},(0,i.d)([(0,o.gv)(500),a.P],t.prototype,"render",null),(0,i.d)([l.W],t.prototype,"handleOpenSuggest",null),t}()},vsh_25845:function(t,e,n){"use strict";n.d(e,{m:function(){return a}});var i=n("vsh_92563"),r=n("vsh_69811"),o=n("vsh_45832"),s=n("vsh_53367"),a=function(){function t(t){var e=this;this.props=t,this.atKeyPressed=!1,this.maybeIsAt=!1,this.handleKeyDown=function(t){var n=e.props,i=n.editor,r=n.mentionPlugin.mentionSuggest;e.isInIME(t)&&(e.maybeIsAt=!0),r.suggest&&("Escape"===t.key&&(t.stopPropagation(),t.preventEvent(),t.preventDefault(),t.stopEvent()),s.eH.includes(t.key)&&(r.closeSuggest(),i.selection.focus()))},this.handleInput=function(t){var n=e.props.mentionPlugin.mentionSuggest,r=t.data||"";s.oT.includes(r)&&!n.suggest?i.Xh.safari?setTimeout((function(){n.openSuggest()})):n.openSuggest():e.props.mentionPlugin.mentionSuggest.updateSuggest()},this.handleSelectionChange=function(){var t=e.props.mentionPlugin;if(t.mentionSuggest.suggest){var n=e.props.editor,i=n.selection.getSelection().start;if(i.offset<t.offset)return t.mentionSuggest.closeSuggest();var o=n.getContentState().getActiveZone().getLine(i.line);t.current.compare(o)===r.V.UNEQUAL&&t.mentionSuggest.closeSuggest()}};var n=t.editor,a=t.mentionPlugin;n.on(o.r.KEYDOWN,this.handleKeyDown),n.on(o.r.KEYUP,a.mentionSuggest.updateSuggest),n.on(o.r.INPUT,this.handleInput),n.on(o.r.SELECTION_CHANGE,this.handleSelectionChange)}var e=t.prototype;return e.isInIME=function(t){return 229===t.keyCode},e.destroy=function(){var t=this.props,e=t.editor,n=t.mentionPlugin.mentionSuggest;n.closeSuggest(),e.off(o.r.KEYDOWN,this.handleKeyDown),e.off(o.r.SELECTION_CHANGE,this.handleSelectionChange),e.off(o.r.KEYUP,n.updateSuggest),e.off(o.r.INPUT,this.handleInput)},t}()},vsh_25934:function(t,e,n){"use strict";n.d(e,{n:function(){return o}});var i=n("vsh_98540"),r=n("vsh_98650"),o=function(){function t(t){var e=this;this.props=t,this.leaveDuration=600,this.suggest=null,this.popupMountNode=null,this.updateSuggest=function(){var t=e.props,n=t.editor,i=t.mentionPlugin;if(e.suggest){var r=n.selection.getSelection().start;if(r.offset<i.offset||-1===i.offset)return e.closeSuggest();e.suggest=e.props.onSuggest({query:e.getQuery(),onConfirm:e.handleConfirm,anchorRect:n.rectModule.getCaretRect(r),mountNode:e.popupMountNode})}},this.popupMountNode=document.createElement("div"),this.popupMountNode.setAttribute("id","@editor-kit-mention-container"),this.popupMountNode.style.position="absolute",this.popupMountNode.style.top="0px",this.popupMountNode.style.left="0px";var n,i=this.props.mentionPlugin;(null==(n=i.getPopupContainer?i.getPopupContainer():document.body)?void 0:n.firstChild)?n.insertBefore(this.popupMountNode,n.firstChild):n.append(this.popupMountNode)}var e=t.prototype;return e.openSuggest=function(){var t=this.props,e=t.editor,n=t.mentionPlugin;n.mentionKeyboard.atKeyPressed=!0,e.flushInput();var i=e.selection.getSelection().start,r=e.rectModule.getCaretRect(i);this.suggest=this.props.onSuggest({query:"",onConfirm:this.handleConfirm,anchorRect:this.relativeRectToScreen(r),mountNode:this.popupMountNode}),n.mentionKeyboard.atKeyPressed=!1,n.offset=i.offset,n.current=e.getContentState().getActiveZone().getLine(i.line)},e.closeSuggest=function(){var t,e=this.props.mentionPlugin;null===(t=this.suggest)||void 0===t||t.close(this.popupMountNode),this.suggest=null,e.offset=-1},e.getQuery=function(){var t,e=this.props,n=e.editor,i=e.mentionPlugin,r=n.selection.getSelection(),o=r.start,s=r.end,a=((null===(t=n.getContentState().getActiveZone().getLine(o.line))||void 0===t?void 0:t.getModelText())||"").slice(i.offset,s.offset);return n.getStatus("isComposing")&&(a=a.replace(/'/g,"")),a},e.relativeRectToScreen=function(t){var e=this.props.editor.getScrollContainer(),n=e.getBoundingClientRect(),i=e.scrollTop,r=e.scrollLeft,o=t.left,s=t.top,a=t.bottom,l=t.right,u=t.width,c=t.height;return{left:n.left+o-r,top:n.top+s-i,right:n.left+l-r,bottom:n.top+a-i,width:u,height:c}},e.handleConfirm=function(t,e){var n=this.props.mentionPlugin,i=n.generateData(t);n.applyMention(i,e),this.closeSuggest()},e.destroy=function(){var t;this.closeSuggest(),null===(t=this.popupMountNode)||void 0===t||t.remove()},(0,i.d)([r.W],t.prototype,"handleConfirm",null),t}()},vsh_94477:function(t,e,n){"use strict";n.d(e,{P:function(){return a}});var i=n("vsh_98540"),r=n("vsh_83927"),o=n("vsh_75119"),s=n("vsh_18817"),a=("".concat(s.P,"placeholder"),function(t){function e(e,n){var i=t.call(this)||this;return i.editor=e,i.name="TextPlaceholder",i.textualPlaceholderStyle={fontColor:"grey"},n.fontColor&&(i.textualPlaceholderStyle.fontColor=n.fontColor),i}return(0,i.b)(e,t),e.prototype.renderLine=function(t){var e=t.children,n=t.lineState,r=this.editor.getContentState().getZoneState(n.getZoneId()),s=(null==r?void 0:r.isEmpty())&&((null==r?void 0:r.placeholder)||this.editor.placeholder)||"";if(!s)return e;var a=(0,o.az)(o.ZC,{style:{paddingLeft:"2px"}},(0,o.az)(o.xv,{content:s,selectable:!1,style:this.textualPlaceholderStyle}));return(0,i.e)((0,i.e)([],(0,i.f)(e),!1),[a],!1)},e}(r.S))},vsh_85585:function(t,e,n){"use strict";n.d(e,{n:function(){return u}});var i=n("vsh_98540"),r=n("vsh_45832"),o=n("vsh_80055"),s=n("vsh_47786"),a=(n("vsh_19496"),n("vsh_37833"),n("vsh_83927")),l=n("vsh_98249"),u=function(t){function e(n){var i=t.call(this,n)||this;i.handleInput=function(t){"formatStrikeThrough"===t.inputType&&(t.preventEvent(),t.preventDefault(),t.stopEvent(),i.editor.toggleAttribute(e.KEY))};var o=i.editor;return o.registerCommand(e.KEY,(function(){o.toggleAttribute(e.KEY)})),o.on(r.r.INPUT,i.handleInput),i}(0,i.b)(e,t);var n=e.prototype;return n.deserialize=function(t){var e=t.node,n=t.deltaSet,i=t.zoneId;if(e instanceof HTMLElement){var r=e.tagName,s=e.getAttribute("style")||"";if("S"===r||/\btext-decoration:([^;]*?\s|\s*)line-through\b/i.test(s))return(0,o.d)(n,i,{strikethrough:"true"},!1)}return n},n.serialize=function(t){return(0,o.w)(t,{tagAttribute:"strikethrough",wrapTag:s.c5.strikethrough})},e}(function(t){function e(e){var n=e.editor,i=t.call(this)||this;return i.name="Strikethrough",i.editor=n,i}(0,i.b)(e,t);var n=e.prototype;return n.match=function(t){return t===e.KEY},n.render=function(t){var e=t.children,n=t.style,i=n.textDecoration||"";return n.textDecoration=i+" line-through",e},e.KEY="strikethrough",(0,i.d)([l.P],e.prototype,"render",null),e}(a.S))},vsh_74607:function(t,e,n){"use strict";n.d(e,{i:function(){return L}});var i=n("vsh_98540"),r=n("vsh_98125"),o=n.n(r),s=n("vsh_83927"),a=n("vsh_97754"),l=n.n(a),u=n("vsh_78898"),c=n.n(u),d=function(){function t(){var t=this;this.pluginMap={},this.destroy=function(){for(var e in t.pluginMap)t.pluginMap[e].destroy();t.pluginMap={}}}var e=t.prototype;return e.registry=function(t){this.pluginMap[t.name]=t},e.unregistered=function(t){delete this.pluginMap[t]},Object.defineProperty(e,"buttons",{get:function(){var t=[];for(var e in this.pluginMap)t=t.concat(this.pluginMap[e].buttons);return t},enumerable:!1,configurable:!0}),t}(),h=function(t,e){var n=function(t,e){var n=e||t.selection.getSelection(),i=t.rectModule.getRangeRect(n),r=t.getRect();return Object.assign({},i,{left:r.left+i.left,top:r.top+i.top,bottom:r.top+i.bottom,right:r.left+i.right})}(t,e),i=function(t){var e,n=null===(e=t.scrollModule)||void 0===e?void 0:e.getScroller();return n instanceof Element?{x:n.scrollLeft,y:n.scrollTop}:{x:(null==n?void 0:n.scrollX)||0,y:(null==n?void 0:n.scrollY)||0}}(t),r=i.x,o=i.y;return Object.assign({},n,{left:n.left-r,top:n.top-o})},f={position:"fixed",borderRadius:"6px",overflow:"visible",boxShadow:"1px 1px #333",opacity:0,zIndex:20,transform:"translate3d(0px, 0px, 0px)",WebkitTransform:"translate3d(0px, 0px, 0px)",transition:"opacity 0.3s 0.5s ease-in, transform 0.3s 0.5s ease-in-out",WebkitTransition:"opacity 0.3s 0.5s ease-in, transform 0.3s 0.5s ease-in-out"},p={opacity:1},v={transform:"translate3d(0px, -5px, 0px)",WebkitTransform:"translate3d(0px, -5px, 0px)"},g={transform:"translate3d(0px, 5px, 0px)",WebkitTransform:"translate3d(0px, 5px, 0px)"},y={display:"flex",position:"relative",zIndex:2},m={padding:"6px 20px",lineHeight:"24px",fontSize:"14px",background:"#000",color:"#fff",textShadow:"0 0 1px #333",borderRight:"1px solid #666"},_={paddingLeft:"24px",borderRadius:"6px 0 0 6px"},b={paddingRight:"24px",borderRight:0,borderRadius:"0 6px 6px 0"},E={color:"#999"},S={position:"absolute",width:"10px",height:"10px",left:"40%",transform:"rotate(45deg)",WebkitTransform:"rotate(45deg)",background:"#000",boxShadow:"1px 1px #333"},w={bottom:"-5px"},C={top:"-5px"};function I(t){var e,n,r=t.split(" "),o={};try{for(var s=(0,i.c)(r),a=s.next();!a.done;a=s.next()){switch(a.value){case"container":o=Object.assign(o,f);break;case"visible":o=Object.assign(o,p);break;case"buttons":o=Object.assign(o,y);break;case"button":o=Object.assign(o,m);break;case"arrow":o=Object.assign(o,S);break;case"top":r.includes("container")&&r.includes("visible")&&(o=Object.assign(o,v)),r.includes("arrow")&&(o=Object.assign(o,w));break;case"bottom":r.includes("container")&&r.includes("visible")&&(o=Object.assign(o,g)),r.includes("arrow")&&(o=Object.assign(o,C));break;case"first":r.includes("button")&&(o=Object.assign(o,_));break;case"last":r.includes("button")&&(o=Object.assign(o,b));break;case"disabled":r.includes("button")&&(o=Object.assign(o,E))}}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return o}var T=function(t){var e=t.id,n=t.title,i=t.onTap,s=t.disabled,a=t.idx,u=void 0===a?0:a,c=t.length,d=void 0===c?0:c,h=(0,r.useRef)(null),f=function(t){s||(t.preventDefault(),t.stopPropagation(),i())},p=function(t){t.stopPropagation()};return(0,r.useEffect)((function(){return h.current?(h.current.addEventListener("pointerdown",p),h.current.addEventListener("mousedown",f),h.current.addEventListener("touchstart",p),function(){var t,e,n;null===(t=h.current)||void 0===t||t.removeEventListener("pointerdown",p),null===(e=h.current)||void 0===e||e.removeEventListener("mousedown",f),null===(n=h.current)||void 0===n||n.removeEventListener("touchstart",p)}):function(){}}),[]),o().createElement("div",{key:e,ref:h,className:l()("button",{disabled:s}),style:I(l()("button",{disabled:s,first:0===u,last:u===d-1}))},n)},x=function(t){var e,n,s,a={type:"top",left:t.minMargin,top:t.minMargin,maxWidth:"unset",arrowLeft:"calc(50% - 5px)"},u=(0,i.f)((0,r.useState)(a),2),c=u[0],d=u[1],f=(0,i.f)((0,r.useState)(!1),2),p=f[0],v=f[1],g=(0,r.useRef)(null);return(0,r.useEffect)((function(){if(t.pattern)d(t.pattern),v(!0);else if(g.current){var e=h(t.editor),n=function(){if(t.viewport){var e=t.viewport.getBoundingClientRect();return Object.assign({},e,{left:0,top:0,right:e.right-e.left,bottom:e.bottom-e.top})}return{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight,width:window.innerWidth,height:window.innerHeight}}(),r=g.current.getBoundingClientRect(),o=(0,i.g)({},a);o.maxWidth=n.width-2*t.minMargin;var s=e.width/2+e.left,l=r.width/2,u=s-l,c=s+l;c>n.right-t.minMargin?(o.left=n.right-t.minMargin-r.width,o.arrowLeft=l-5+Math.abs(n.right-t.minMargin-c)):u<n.left+t.minMargin?(o.left=t.minMargin,o.arrowLeft=l-5-Math.abs(n.left+t.minMargin-u)):(o.left=u,o.arrowLeft=l-5);var f=r.height+10;e.top-n.top<f+5?n.bottom-e.bottom>f+5?(o.type="bottom",o.top=e.bottom+10):(o.type="top",o.top=10):(o.type="top",o.top=e.top-f),d(o),v(!0)}}),[t.buttons,t.editor,t.viewport]),o().createElement("div",{ref:g,className:l()("container",(e={},e[c.type]=!0,e.visible=p,e)),style:Object.assign({},I(l()("container",(n={},n[c.type]=!0,n.visible=p,n))),{maxWidth:c.maxWidth,left:c.left,top:c.top})},o().createElement("div",{className:"arrow",style:Object.assign({},I(l()("arrow",(s={},s[c.type]=!0,s))),{left:c.arrowLeft})}),o().createElement("div",{className:"buttons",style:I("buttons")},t.buttons.map((function(e,n){var i=e.id,r=e.title,s=e.disabled,a=e.onTap;return o().createElement(T,{idx:n,length:t.buttons.length,key:i,id:i,title:r,disabled:s,onTap:a})}))))},k=function(){function t(t){var e=this;this.show=function(t){e.node&&!e.isVisible&&c().render(o().createElement(x,{editor:e.editor,buttons:e.buttons,viewport:e.viewportNode,minMargin:e.minMargin,pattern:t}),e.node)},this.hide=function(){e.node&&e.isVisible&&c().unmountComponentAtNode(e.node)},this.destroy=function(){e.node&&e.containerNode.removeChild(e.node)},this.initial=function(t){e.node=document.createElement("div"),e.node.style.position="fixed",e.node.style.left="0",e.node.style.top="0",e.node.style.width="0",e.node.style.height="0",e.node.style.userSelect="none",e.node.style.zIndex=String(t),e.containerNode.appendChild(e.node)},this.editor=t.editor,this.buttons=t.buttons,this.containerNode=t.containerNode,this.viewportNode=t.viewportNode,this.minMargin=t.minMargin,this.initial(t.zIndex)}var e=t.prototype;return Object.defineProperty(e,"isVisible",{get:function(){var t;return!!(null===(t=this.node)||void 0===t?void 0:t.innerHTML)},enumerable:!1,configurable:!0}),t}(),M=function(t){var e=this;this.destroy=function(){e.unbindEvents(),e.destroyDelayShowTimer(),e.isSelectionChanged=!1,e.selectionChangedTime=0,e.isTouchActive=!1},this.selectionChangedTime=0,this.delayShowTimer=0,this.bindEvents=function(){e.editor.on("selectionchange",e.handleSelectionChange),e.editor.on("click",e.handleEditorClick),e.editor.on("touchstart",e.handleTouchStart),e.editor.on("touchend",e.handleTouchEnd),e.editor.on("contextmenu",e.handleContextMenu),e.editor.on("keydown",e.handleKeydown),e.body.addEventListener("click",e.handleBodyClick),e.body.addEventListener("touchend",e.handleBodyTouchEnd),window.addEventListener("blur",e.hanldeWindowBlur)},this.unbindEvents=function(){e.editor.off("selectionchange",e.handleSelectionChange),e.editor.off("click",e.handleEditorClick),e.editor.off("touchstart",e.handleTouchStart),e.editor.off("touchend",e.handleTouchEnd),e.editor.off("contextmenu",e.handleContextMenu),e.editor.off("keydown",e.handleKeydown),e.body.removeEventListener("click",e.handleBodyClick),e.body.removeEventListener("touchend",e.handleBodyTouchEnd),window.removeEventListener("blur",e.hanldeWindowBlur)},this.hanldeWindowBlur=function(){e.hide(),e.destroyDelayShowTimer()},this.handleEditorClick=function(t){var e=function(t){for(var e=t;e.nativeEvent;)e=e.nativeEvent;return e}(t);e.stopPropagation()},this.handleSelectionChange=function(){e.selectionChangedTime=Date.now(),e.isSelectionChanged=!0,e.destroyDelayShowTimer()},this.handleTouchStart=function(){e.isTouchActive=!0,e.hide(),e.isSelectionChanged=!1;var t=Date.now();t>e.selectionChangedTime&&t-e.selectionChangedTime<100&&(e.isSelectionChanged=!0)},this.handleTouchEnd=function(){var t=e.editor.selection.getSelection().isCollapsed();!t&&e.isSelectionChanged?e.show():t&&!e.isSelectionChanged?e.createDelayShowTimer():e.hide(),e.selectionChangedTime=0,e.isSelectionChanged=!1,e.isTouchActive=!1},this.handleContextMenu=function(){e.show()},this.handleKeydown=function(){e.hide()},this.handleBodyClick=function(){e.isTouchActive||e.hide()},this.handleBodyTouchEnd=function(){e.isTouchActive&&e.handleTouchEnd()},this.createDelayShowTimer=function(){e.delayShowTimer=window.setTimeout(e.show,100)},this.destroyDelayShowTimer=function(){clearTimeout(e.delayShowTimer),e.delayShowTimer=0},this.show=function(){e.context.onShow()},this.hide=function(){e.context.onHide()},this.editor=t.editor,this.context=t.context,this.body=t.bodyNode,this.bindEvents()},R=n("vsh_40285"),P=function(){function t(t){this._id=t.id,this._title=t.title,this._onTap=t.onTap,this.disabled=t.disabled}var e=t.prototype;return Object.defineProperty(e,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e,"title",{get:function(){return this._title},enumerable:!1,configurable:!0}),Object.defineProperty(e,"onTap",{get:function(){return this._onTap},enumerable:!1,configurable:!0}),t}(),O=function(){function t(t){var e,n,r,o=this;this.name="clipboard",this.destroy=function(){o.editor.off("copy",o.handleCopyEvent),o.editor.off("cut",o.handleCutEvent)},this.readClipboard=function(){return(0,i._)(o,void 0,void 0,(function(){var t,e,n,r,o,s,a,l,u,c,d,h,f,p,v,g;return(0,i.a)(this,(function(y){switch(y.label){case 0:t=new DataTransfer,y.label=1;case 1:return y.trys.push([1,18,,19]),[4,navigator.clipboard.read()];case 2:e=y.sent(),y.label=3;case 3:y.trys.push([3,15,16,17]),n=(0,i.c)(e),r=n.next(),y.label=4;case 4:if(r.done)return[3,14];o=r.value,y.label=5;case 5:y.trys.push([5,11,12,13]),v=void 0,s=(0,i.c)(o.types),a=s.next(),y.label=6;case 6:return a.done?[3,10]:(l=a.value,[4,o.getType(l)]);case 7:return u=y.sent(),["text/html","text/plain"].includes(l)?[4,u.text()]:[3,9];case 8:c=y.sent(),t.setData(l,c),y.label=9;case 9:return a=s.next(),[3,6];case 10:return[3,13];case 11:return d=y.sent(),v={error:d},[3,13];case 12:try{a&&!a.done&&(g=s.return)&&g.call(s)}finally{if(v)throw v.error}return[7];case 13:return r=n.next(),[3,4];case 14:return[3,17];case 15:return h=y.sent(),f={error:h},[3,17];case 16:try{r&&!r.done&&(p=n.return)&&p.call(n)}finally{if(f)throw f.error}return[7];case 17:return[3,19];case 18:return y.sent(),[3,19];case 19:return[2,t]}}))}))},this.onCopyButtonTap=function(){return(0,i._)(o,void 0,void 0,(function(){var t;return(0,i.a)(this,(function(e){return t=this.editor.selection.getSelection(),this.editor.clipboard.copyRange(t),this.hide(),[2]}))}))},this.onCutButtonTap=function(){return(0,i._)(o,void 0,void 0,(function(){var t;return(0,i.a)(this,(function(e){return t=this.editor.selection.getSelection(),this.editor.clipboard.cutRange(t),this.hide(),[2]}))}))},this.onPasteButtonTap=function(){return(0,i._)(o,void 0,void 0,(function(){var t,e,n,r,o,s,a,l,u,c,d,h;return(0,i.a)(this,(function(i){switch(i.label){case 0:return[4,this.readClipboard()];case 1:return(t=i.sent()).items.length?(e=new ClipboardEvent("paste",{clipboardData:t}),this.editor.clipboard.onPaste(e)):this.data&&(n=this.editor.selection.getSelection(),r=n.toPosition(),o=r.start,s=r.len,a=new R.I({zoneId:r.zoneId}),l=this.editor.getContentState(),u=null===(h=l.getZoneState(r.zoneId))||void 0===h?void 0:h.getLine(n.start.line),c=u?{zoneId:r.zoneId,deltaSet:this.data,lineState:u,isInternalPaste:!0,event:new ClipboardEvent("paste"),preventDefault:function(){}}:void 0,this.editor.callAll("editorWillPaste",c),(d=null==c?void 0:c.deltaSet.get(r.zoneId))&&c&&this.editor.getContentState().apply(a.retain(o).delete(s).concat(d),{type:"paste"})),this.hide(),[2]}}))}))},this.handleCopyEvent=function(){var t=o.editor.selection.getSelection();o.data=o.editor.clipboard.slice(t)},this.handleCutEvent=function(){var t=o.editor.selection.getSelection();o.data=o.editor.clipboard.slice(t),o.editor.selection.setSelection({start:t.start,end:t.start}),o.editor.focus()},this.hide=t.hide,this.editor=t.editor,this.globalDataKey=t.globalDataKey,this.cutButton=new P({id:"cut",title:(null===(e=t.buttonsTitle)||void 0===e?void 0:e.cut)||"剪切",onTap:this.onCutButtonTap}),this.copyButton=new P({id:"copy",title:(null===(n=t.buttonsTitle)||void 0===n?void 0:n.copy)||"复制",onTap:this.onCopyButtonTap}),this.pasteButton=new P({id:"paste",title:(null===(r=t.buttonsTitle)||void 0===r?void 0:r.paste)||"粘贴",onTap:this.onPasteButtonTap}),this.editor.on("copy",this.handleCopyEvent),this.editor.on("cut",this.handleCutEvent)}var e=t.prototype;return Object.defineProperty(e,"buttons",{get:function(){return[this.cutButton,this.copyButton,this.pasteButton]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"data",{get:function(){return this.globalDataKey?window[this.globalDataKey]:this._data},set:function(t){this.globalDataKey&&(window[this.globalDataKey]=t),this._data=t},enumerable:!1,configurable:!0}),t}(),L=function(t){function e(e){var n,r,o,s=t.call(this)||this;if(s.name="TooltipMenu",s.destroy=function(){s.pluginManager.destroy(),s.container.destroy(),s.monitor.destroy()},s.show=function(t){s.container.show(t)},s.hide=function(){s.container.hide()},s.editor=e.editor,s.pluginManager=new d,null===(o=e.plugins)||void 0===o?void 0:o.length)try{for(var a=(0,i.c)(e.plugins),l=a.next();!l.done;l=a.next()){var u=l.value;s.pluginManager.registry(u)}}catch(t){n={error:t}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}else{var c=new O({editor:s.editor,hide:s.hide,globalDataKey:e.globalClipboardDataKey,buttonsTitle:e.clipboardButtonsTitle});s.pluginManager.registry(c)}return s.container=new k({editor:s.editor,buttons:s.pluginManager.buttons,viewportNode:e.viewport,containerNode:e.container||document.body,minMargin:e.minMargin||10,zIndex:e.zIndex||220}),s.monitor=new M({editor:s.editor,bodyNode:e.body||document.body,context:{onShow:s.show,onHide:s.hide}}),s}return(0,i.b)(e,t),e}(s.S)},vsh_98540:function(t,e,n){"use strict";n.d(e,{_:function(){return a},a:function(){return l},b:function(){return r},c:function(){return u},d:function(){return s},e:function(){return d},f:function(){return c},g:function(){return o}});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)};function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)};function s(t,e,n,i){var r,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,n,s):r(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function a(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))}function l(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function d(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}},vsh_95096:function(t,e,n){"use strict";n.d(e,{v:function(){return u}});var i=n("vsh_98540"),r=n("vsh_45832"),o=n("vsh_80055"),s=n("vsh_47786"),a=(n("vsh_19496"),n("vsh_37833"),n("vsh_83927")),l=n("vsh_98249"),u=function(t){function e(n){var i=t.call(this,n)||this;i.handleInput=function(t){"formatUnderline"===t.inputType&&(t.preventEvent(),t.preventDefault(),t.stopEvent(),i.editor.toggleAttribute(e.KEY))};var o=i.editor;return o.registerCommand(e.KEY,(function(){o.toggleAttribute(e.KEY)})),o.on(r.r.INPUT,i.handleInput),i}(0,i.b)(e,t);var n=e.prototype;return n.deserialize=function(t){var e=t.node,n=t.deltaSet,i=t.zoneId;if(e instanceof HTMLElement){var r=e.tagName,s=e.getAttribute("style")||"";if("U"===r||/\btext-decoration:\s*underline\b/i.test(s))return(0,o.d)(n,i,{underline:"true"},!1)}return n},n.serialize=function(t){return(0,o.w)(t,{tagAttribute:e.KEY,wrapTag:s.c5[e.KEY]})},e}(function(t){function e(e){var n=e.editor,i=t.call(this)||this;return i.name="Underline",i.editor=n,i}(0,i.b)(e,t);var n=e.prototype;return n.match=function(t){return t===e.KEY},n.render=function(t){var e=t.children,n=t.style,i=n.textDecoration||"";return n.textDecoration=i+" underline",e},e.KEY="underline",(0,i.d)([l.P],e.prototype,"render",null),e}(a.S))},vsh_90827:function(t,e,n){"use strict";n.d(e,{_s:function(){return a}});var i=n("vsh_98540");var r,o,s={};!function(t){t.INLINE="inline",t.CARD="card",t.PREVIEW="preview"}(r||(r={})),function(t){t.BLOCK="block",t.INLINE="inline"}(o||(o={}));var a=function(t){var e=t.blockType,n=t.initData,a=t.props,l=t.depLoading;if(s[e]&&a&&!a.viewType){var u=s[e];a.viewType=u,u===r.INLINE?a.displayMode=o.INLINE:a.displayMode=o.BLOCK}var c=n||{},d=l?{depLoading:l}:{};return(0,i.g)({blockId:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})),blockType:e,props:a||{},initData:escape(JSON.stringify(c))},d)}},vsh_98249:function(t,e,n){"use strict";function i(t,e,n){var i=n.value;n.value=function(t){var e=t.children;return t.attributes.lmkr?e:i.apply(this,[t])}}n.d(e,{P:function(){return i}})},vsh_66523:function(t,e,n){"use strict";var i=n("vsh_98540"),r="\\b([/#?][\\-A-Z0-9@:%_+.~#?&/=;$,!\\*\\[\\]\\(\\){}^|<>]*[-A-Z0-9&@#/%=~\\(\\)_|]?)?",o=/localhost(:[0-9]{2,5})?/,s=/(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}(2[0-4][0-9]|25[0-5]|1[0-9]{2}|[1-9][0-9]|[0-9])(:[0-9]{2,5})?/,a="([\\-A-Z:0-9%_+~#@]{1,256}\\.){1,50}",l="[a-z\\-]{2,15}",u="[\\w.!#$%&'*+-/=?^_\\`{|}~]{1,2000}@[A-Za-z0-9_.-]+\\.",c=new(function(){function t(){this.PROTOCOL="https?|s?ftp|ftps|nfs|ssh",this.TOP_DOMAIN="com|org|net|int|edu|gov|mil|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gh|gi|gl|gm|gn|gp|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mf|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|site|top|wtf|xxx|xyz|cloud|engineering|help|one",this.TOP_DOMAIN_LITE="com|cn|tk|de|net|org|uk|info|nl|ru|hk",this.LENGTH_LIMITED_EMAIL_REG=new RegExp("^(?!data:)((mailto:".concat(u).concat(l,")|(").concat(u,"(").concat(this.TOP_DOMAIN,")))\\b"),"gi"),this.IP_REG=this.getIpReg(),this.URL_REG=this.getUrlReg(),this.LINK_REG=this.getLinkReg()}var e=t.prototype;return e.getIpReg=function(){return new RegExp("((((".concat(this.PROTOCOL,")://)?(").concat(o.source,"))|(((").concat(this.PROTOCOL,")://)(").concat(s.source,")))").concat(r),"gi")},e.getUrlReg=function(){return new RegExp("(((".concat(this.PROTOCOL,"):\\/\\/").concat(a).concat(l,")|(").concat(a,"(").concat(this.TOP_DOMAIN_LITE,")))(:[0-9]{2,5})?").concat(r),"gi")},e.getLinkReg=function(){return new RegExp("(".concat(this.IP_REG.source,")|(").concat(this.URL_REG.source,")|(").concat(this.LENGTH_LIMITED_EMAIL_REG.source,")"),"gi")},e.addExtraProtocols=function(t){var e=t.length>0?"|":"";this.PROTOCOL=this.PROTOCOL+e+t.join("|"),this.IP_REG=this.getIpReg(),this.URL_REG=this.getUrlReg(),this.LINK_REG=this.getLinkReg()},e.isValidLink=function(t,e){var n=null!=e?e:this.LINK_REG,i=new RegExp("".concat(n.source),"gi"),r=new RegExp(i).exec(t);return!(!r||0!==r.index)},e.getRegex=function(t){void 0===t&&(t=[]);var e=(0,i.e)(["","https?","mailto","ftp","file"],(0,i.f)(t),!1),n="^(#|(".concat(e.join("|"),"):)");return new RegExp(n)},e.completeURLProtocol=function(t,e){void 0===t&&(t=""),void 0===e&&(e=[]);var n=new RegExp(this.LENGTH_LIMITED_EMAIL_REG).test(t);return this.getRegex(e).test(t)?t:n?"mailto:"+t:(t.startsWith("http")||(t="http://"+t),t)},t}());e.Z=c},vsh_5153:function(t,e,n){"use strict";n.d(e,{u:function(){return l}});var i=n("vsh_75119"),r=n("vsh_80624"),o=n("vsh_23154"),s=n("vsh_10189"),a=n("vsh_73400"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handleClick=function(t){if(e.props.onClick)e.props.onClick(t);else if(!t.defaultPrevented){var n=e.props.url;n&&window.open(decodeURIComponent(n))}},e.clickGen=new a.c(e.handleClick),e.handleTouchend=function(t){t.nativeEvent.stopImmediatePropagation(),e.clickGen.handleTouchEnd(t)},e}return(0,r._)(e,t),e.prototype.render=function(){var t=this.props,e=t.title,n=t.disableHover,r=t.type,a=t.icon,l=t.tag,u=t.wrapperStyle,c=t.tagStyle,d=t.onMouseEnter,h=t.onMouseLeave,f={margin:"0px"};return(0,i.az)(s.c,{length:(null==e?void 0:e.length)||0,dir:i.oZ.NONE},(0,i.az)(i.ZC,{on:{pointerenter:d,pointerleave:h,mousedown:this.clickGen.handleMouseDown,mouseup:this.clickGen.handleMouseUp,touchstart:this.clickGen.handleTouchStart,touchend:this.handleTouchend}},(0,i.az)(o.PgN,{type:r,tag:l,icon:a,wrapperStyle:n?Object.assign(null!=u?u:{},{$hover:{}},f):Object.assign(null!=u?u:{},f),tagStyle:c},(0,i.az)(i.xv,{content:e}))))},e}(i.wA)},vsh_78331:function(t,e,n){"use strict";n.d(e,{H:function(){return a}});var i=n("vsh_75119"),r=n("vsh_80624"),o=n("vsh_23154"),s=n("vsh_10189"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handleMousedown=function(t){t.nativeEvent.preventDefault()},e}return(0,r._)(e,t),e.prototype.render=function(){var t=this.props,e=t.type,n=t.avatar,r=t.wrapperStyle,a=t.avatarWrapperStyle,l=t.avatarStyle,u=t.name,c=t.disableHover,d=t.onMouseEnter,h=t.onMouseLeave,f=t.onClick,p=t.length,v=void 0===p?1:p;return(0,i.az)(s.c,{lineWrap:!1,dir:i.oZ.NONE,length:v},(0,i.az)(i.ZC,{on:{pointerenter:d,pointerleave:h,mousedown:this.handleMousedown,click:f}},(0,i.az)(o.pfS,{type:e,avatar:n,wrapperStyle:c?Object.assign(null!=r?r:{},{$hover:{}}):r,avatarWrapperStyle:a,avatarStyle:l},(0,i.az)(i.xv,{content:u}))))},e}(i.wA)},vsh_10189:function(t,e,n){"use strict";n.d(e,{c:function(){return g}});var i=n("vsh_75119"),r=n("vsh_80624"),o=n("vsh_21917"),s=n("vsh_80018"),a=n("vsh_98650"),l=n("vsh_40285"),u=n("vsh_95066"),c=n("vsh_45832"),d=(n("vsh_44960"),n("vsh_40896")),h=(n("vsh_98125"),n("vsh_87296"));!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}(0,s.c)(e,t);var n=e.prototype;n.updateLeafModel=function(t){},n.getSelectionOfCurrentRef=function(){return null},n.getZoneIdByCurrentRef=function(){return""}}(h.jn);var f=n("vsh_98681");function p(t){return(0,i.az)(i.xv,{content:u.T6,"data-zero-space":!0,ref:t.forwardRef})}var v=["editor","leafModel","length","disableDefaultSelected","forwardRef","onSelect","onDeselect","onKeyDown"],g=function(t){var e,n;function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.tagName=h.Kw.TEXT,t.option={viewportEventEnabled:!0,selectEventEnabled:!0},t.leafModelMap=new WeakMap,t}return e=(0,h.Or)(t),(0,s.c)(i,e),Object.defineProperty(i.prototype,"_length",{get:function(){var t=this.props.length;return"number"==typeof t&&isFinite(t)?Math.max(t,1):1},enumerable:!1,configurable:!0}),i.prototype.handleDeleteKey=function(t){var e=t.e,n=t.stopEvent,i=t.preventEvent,r=t.isBackward,o=this.editor,s=o.selection.getSelection(),a=(v=s.toPosition()).zoneId,u=v.start;if(s.isCollapsed()&&(this.isBlockType()||1!==this._length)){var c=this.getSelectionOfCurrentRef();if(c){var d,h=o.getContentState(),f=(d=s.start).line,p=d.offset,v=(t=r?c.end:c.start,f+-1*(r?1:-1));if(d=h.getZoneState(a)){var g;f=d.getLine(f);if(this.isBlockType()&&t.line===v&&f&&p===(r?f.getLineMarker():f.length()-1)&&t.zoneId===s.start.zoneId)return n(),i(),e.preventDefault(),e.stopPropagation(),f.isTextEmpty()&&(p=f.index===d.length()-1,g=new l.I({zoneId:a}),d=0,p||d++,f.hasLineMarker()&&d++,g.retain(u+(f.hasLineMarker()?-1:0)).delete(d),h.apply(g),r||(c.start.line--,c.end.line--)),void o.selection.setSelection(c,!0);t.line===s.start.line&&t.offset===s.start.offset&&(n(),i(),e.preventDefault(),e.stopPropagation(),(g=new l.I({zoneId:a})).retain(u+(r?-1*this._length:0)).delete(this._length),h.apply(g))}}}},i.prototype.handleKeyDown=function(t){if(this.props.onKeyDown)return this.props.onKeyDown(t);if(this.isBlockType()){var e=t.keyCode,n=!1;switch(!0){case e===u.VD.Enter:n=this.handleEnterKey();break;case[u.VD.Left,u.VD.Right,u.VD.Up,u.VD.Down].includes(e):n=this.handleArrowKey(t)}n&&(t.stopEvent(),t.stopPropagation(),t.preventDefault(),t.preventEvent())}},i.prototype.handleEnterKey=function(){if(!this.isFocusOnMe())return!1;if(!(i=this.getSelectionOfCurrentRef()))return!1;var t,e=this.editor.getContentState(),n=(t=i.start).zoneId,i=t.line;return!!(t=null===(t=e.getZoneState(n))||void 0===t?void 0:t.getLine(i))&&(!!(i=e.rangePointToOffset({line:i,zoneId:n,offset:t.length()-1}))&&(t=new l.I({zoneId:n}).retain(i).insertEnterAndLineMarker(),e.apply(t),this.editor.selection.setSelection({start:i+2,len:0,zoneId:n}),!0))},i.prototype.handleArrowKey=function(t){var e,n=this.getSelectionOfCurrentRef();if(!n)return!1;var i=(d=n.start).zoneId,r=d.line,o=(h=this.editor.selection.getSelection()).start,s=h.end,a=o.line,l=o.offset,c=o.zoneId,d=s.line,h=s.offset;if(i!==c)return!1;var f={start:n.start,end:n.end},p=this.editor.getContentState().getZoneState(c);if(!p)return!1;if(this.isFocusOnMe()){switch(t.keyCode){case u.VD.Left:case u.VD.Up:f.start.line=Math.max(0,r-1),f.start.offset=(null!==(e=null===(e=p.getLine(f.start.line))||void 0===e?void 0:e.length())&&void 0!==e?e:1)-1,f.end=f.start;break;case u.VD.Right:case u.VD.Down:f.start.line=Math.min(p.length()-1,r+1),f.start.offset=null!==(e=null===(e=p.getLine(f.start.line))||void 0===e?void 0:e.getLineMarker())&&void 0!==e?e:0,f.end=f.start;break;default:return!1}return this.editor.selection.setSelection(f,!0),!0}return(a===r+1&&(t.keyCode===u.VD.Up&&this.isFirstLineOfParagraph(o)||t.keyCode===u.VD.Left&&l===(null===(a=p.getLine(a))||void 0===a?void 0:a.getLineMarker()))||!(d!==r-1||!(t.keyCode===u.VD.Down&&this.isLastLineOfParagraph(s)||t.keyCode===u.VD.Right&&h+1===(null===(d=p.getLine(d))||void 0===d?void 0:d.length()))))&&(this.editor.selection.setSelection(f=n,!0),!0)},i.prototype.isFirstLineOfParagraph=function(t){if(!(n=null===(e=this.editor.getContentState().getZoneState(t.zoneId))||void 0===e?void 0:e.getLine(t.line)))return!1;var e=n.getLineMarker(),n=this.editor.rectModule.getCaretRect(t,t.zoneId);t=this.editor.rectModule.getCaretRect({line:t.line,offset:e,zoneId:t.zoneId},t.zoneId);return n.top===t.top},i.prototype.isLastLineOfParagraph=function(t){var e=null===(n=this.editor.getContentState().getZoneState(t.zoneId))||void 0===n?void 0:n.getLine(t.line);if(!e)return!1;var n=this.editor.rectModule.getCaretRect(t,t.zoneId);t=this.editor.rectModule.getCaretRect({line:t.line,offset:e.length()-1,zoneId:t.zoneId},t.zoneId);return n.bottom===t.bottom},i.prototype.isFocusOnMe=function(){var t=null===(e=this.getSelectionOfCurrentRef())||void 0===e?void 0:e.toPosition();if(!t)return!1;var e=this.editor.selection.getSelection().toPosition();return t.start===e.start&&t.len===e.len&&t.zoneId===e.zoneId},i.prototype.componentDidUpdate=function(t){e.prototype.componentDidUpdate.call(this,t),this._ref.current&&(this.handleRef(this._ref.current),this.updateLeafModel()),t=this.getZoneIdByCurrentRef(),this.editor.once(c.r.PAINT,this.updateLeafModel,{zoneId:t})},i.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this);var t=this.getZoneIdByCurrentRef();this.editor.on(c.r.DELETE_KEY,this.handleDeleteKey,{zoneId:t,priority:900}),this.editor.on(c.r.KEYDOWN,this.handleKeyDown,{zoneId:t,priority:900}),this.updateLeafModel(),this.editor.once(c.r.PAINT,this.updateLeafModel,{zoneId:t})},i.prototype.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this),this.editor.off(c.r.DELETE_KEY,this.handleDeleteKey),this.editor.off(c.r.KEYDOWN,this.handleKeyDown),this._ref&&this._ref.current&&this.editor._getViewModel()._deleteLeaf(this._ref.current)},i.prototype.isBlockType=function(){var t=(this._ref.current&&this.leafModelMap.get(this._ref.current)||{}).op,e=null==t?void 0:t.attributes;return!!e&&(t=this.editor.getContentState().schema,(0,d.ky)(e,t))},i.prototype.handleMouseDown=function(t){var e;!1===this.props.autoSelectOnClick||(e=this.getSelectionOfCurrentRef())&&(this.editor.selection.setSelection(e,!0),this.props.editor.selection.updateViewSelection(!0))},i.prototype._handleMouseDown=function(t){this.handleMouseDown(t)},i.prototype.handleRef=function(t){t&&(this._ref.current=t)},i.prototype.updateLeafModel=function(){var t,n=this._ref.current;!n||(t=null==(t=this.editor.editorUtils.closest(n,"[".concat(u.MB,"]")))?void 0:t.__leafModel)&&(this.editor._getViewModel()._setLeaf(n,t),this.leafModelMap.set(n,t),e.prototype.updateLeafModel.call(this,t))},(0,s.a)([a.W],i.prototype,"handleDeleteKey",null),(0,s.a)([a.W],i.prototype,"handleKeyDown",null),(0,s.a)([a.W],i.prototype,"_handleMouseDown",null),(0,s.a)([a.W],i.prototype,"handleRef",null),(0,s.a)([a.W],i.prototype,"updateLeafModel",null),n=t=i,(0,s.c)(r,n),r;function r(){return null!==n&&n.apply(this,arguments)||this}}(function(t){function e(e){var n=t.call(this,e)||this;return n._ref=(0,i.Vf)(),n._rightZeroSpaceRef=(0,i.Vf)(),n.editor=e.provides.editor,n}(0,r._)(e,t);var n=e.prototype;return n.getLeafModel=function(t){return void 0===t&&(t=this.props),t.provides.leafModel},n.updateLeafModel=function(){},n.getSelectionOfCurrentRef=function(){var t;if(!this._rightZeroSpaceRef.current&&!this._ref.current)return null;var e=null!==(t=this._rightZeroSpaceRef.current)&&void 0!==t?t:this._ref.current,n=this.editor.selection.getElementRange(e);return n||null},n.handleZeroSpaceRef=function(t){t&&(this.props.forwardRef&&(this.props.forwardRef.current=t),this._rightZeroSpaceRef.current=t)},n.getZoneIdByCurrentRef=function(){var t,e,n=null!==(t=this._rightZeroSpaceRef.current)&&void 0!==t?t:this._ref.current;return(null===(e=this.editor.editorUtils.closest(n,"[".concat(u.P9,"]")))||void 0===e?void 0:e.props["data-zone-id"])||""},n.render=function(){var t,e,n,s=this,a=Object.keys(this.props).reduce((function(t,e){return v.includes(e)||(e.startsWith("on")?t[e]=f.eb.includes((0,f.Le)(e))?void 0:s._handleSynthesisEvents:t[e]=s.props[e]),t}),{}),l=this.isBlockType()?{position:"absolute",width:0,height:0,display:"inline-block"}:{},c=" ".repeat(this._length),d=(0,r.a)((0,r.a)((0,r.a)({},a),((t={})[u.eu]=c,t)),{provides:(e={},e[u.eu]=c,e)}),h=((n={})[u.Pk]=!0,n.dir=this.props.dir,n.lineWrap=this.props.lineWrap,n);return(0,i.az)(i.hk,h,(0,i.az)(p,{style:l}),(0,i.az)(i.ZC,(0,o._)({ref:this._ref,onMouseDown:this._handleMouseDown},d),this.props.children,this.props.disableDefaultSelected&&(0,i.az)(p,{forwardRef:this.handleZeroSpaceRef,style:l})),(0,i.az)(p,{style:l}))},e}(i.wA))},vsh_71257:function(t,e,n){"use strict";n.d(e,{r:function(){return c}});var i=n("vsh_75119"),r=n("vsh_80624"),o=n("vsh_80018"),s=(n("vsh_98125"),n("vsh_87296"));!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}(0,o.c)(e,t),e.prototype.render=function(){return null}}(s.jn);var a=n("vsh_73400"),l=n("vsh_98650"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clickGen=new a.c(e.handleClick),e}(0,r._)(e,t);var n=e.prototype;return n.handleClick=function(t){var e,n;null===(n=(e=this.props).onClick)||void 0===n||n.call(e,t)},n.handleMouseEnter=function(t){var e,n;null===(n=(e=this.props).onMouseEnter)||void 0===n||n.call(e,t)},n.handleMouseLeave=function(t){var e,n;null===(n=(e=this.props).onMouseLeave)||void 0===n||n.call(e,t)},n.render=function(){var t={mousedown:this.clickGen.handleMouseDown,mouseup:this.clickGen.handleMouseUp,touchstart:this.clickGen.handleTouchStart,touchend:this.clickGen.handleTouchEnd,pointerenter:this.handleMouseEnter,pointerleave:this.handleMouseLeave},e={fontColor:this.props.linkColor||"rgb(51,112,255)",cursor:"pointer"};return this.props.alwayHasUnderline?Object.assign(e,{underline:!0}):Object.assign(e,{$hover:{underline:!0}}),(0,i.az)(i.ZC,{style:e,on:t},this.props.children)},(0,r.b)([l.W],e.prototype,"handleClick",null),(0,r.b)([l.W],e.prototype,"handleMouseEnter",null),(0,r.b)([l.W],e.prototype,"handleMouseLeave",null),e}(i.ZC),c=function(t){var e,n;function i(){return null!==e&&e.apply(this,arguments)||this}return e=(0,s.Or)(t),(0,o.c)(i,e),n=t=i,(0,o.c)(r,n),r;function r(){return null!==n&&n.apply(this,arguments)||this}}(u)},vsh_76020:function(t,e,n){"use strict";n.d(e,{x:function(){return d}});var i=n("vsh_75119"),r=n("vsh_80624"),o=n("vsh_21917"),s=n("vsh_80018"),a=(n("vsh_98125"),n("vsh_87296"));!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tagName=a.Kw.TEXT,e}(0,s.c)(e,t)}(a.cc);var l,u=n("vsh_98681"),c=function(t){function e(e){var n=t.call(this,e)||this;return n.editor=e.provides.editor,n}return(0,r._)(e,t),e.prototype.render=function(){var t=this,e=Object.keys(this.props).reduce((function(e,n){return n.startsWith("on")?e[n]=u.eb.includes((0,u.Le)(n))?void 0:t._handleSynthesisEvents:e[n]=t.props[n],e}),{});return"string"==typeof this.props.children?(0,i.az)(i.xv,(0,o._)({content:this.props.children,ref:this._ref},e)):(0,i.az)(i.hk,(0,o._)({ref:this._ref},e),this.props.children)},e}(i.ZC),d=(l=c,(0,a.Or)(l))},vsh_5079:function(t,e,n){"use strict";n.d(e,{G:function(){return d}});var i=n("vsh_75119"),r=n("vsh_80624"),o=n("vsh_21917"),s=n("vsh_80018"),a=(n("vsh_98125"),n("vsh_87296"));!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tagName=a.Kw.VIEW,e.option={viewportEventEnabled:!0,selectEventEnabled:!0},e}(0,s.c)(e,t)}(a.cc);var l,u=n("vsh_98681"),c=function(t){function e(e){var n=t.call(this,e)||this;return n.editor=e.provides.editor,n}return(0,r._)(e,t),e.prototype.render=function(){var t=this,e=Object.keys(this.props).reduce((function(e,n){return n.startsWith("on")?e[n]=u.eb.includes((0,u.Le)(n))?void 0:t._handleSynthesisEvents:e[n]=t.props[n],e}),{});return(0,i.az)(i.ZC,(0,o._)({ref:this._ref},e),this.props.children)},e}(i.ZC),d=(l=c,(0,a.Or)(l))},vsh_21917:function(t,e,n){"use strict";n.d(e,{_:function(){return a}});var i,r,o,s=(i=function(t){function e(){return t.exports=e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(this,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},i(r={exports:{}},r.exports),r.exports),a=(o=s)&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o},vsh_80624:function(t,e,n){"use strict";n.d(e,{_:function(){return r},a:function(){return o},b:function(){return s},c:function(){return a},d:function(){return u},e:function(){return l}});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)};function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)};function s(t,e,n,i){var r,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,n,s):r(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function a(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function u(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}},vsh_73400:function(t,e,n){"use strict";n.d(e,{c:function(){return i}});var i=function(t){var e=this;this.eventStartTimeStamp=0,this.recordTime=function(t){e.eventStartTimeStamp=t.nativeEvent.timeStamp},this.triggerClick=function(t){t.nativeEvent.timeStamp-e.eventStartTimeStamp<200&&(e.onClick(t),e.eventStartTimeStamp=0)},this.handleMouseDown=function(t){t.nativeEvent.preventDefault(),e.recordTime(t)},this.handleTouchStart=function(t){t.nativeEvent.preventDefault(),e.recordTime(t)},this.handleMouseUp=function(t){e.triggerClick(t)},this.handleTouchEnd=function(t){e.triggerClick(t)},this.onClick=t}},vsh_10014:function(t,e,n){"use strict";n.d(e,{P:function(){return Oe}});var i=n("vsh_75119"),r=n("vsh_80624"),o=n("vsh_80018"),s=n("vsh_52948"),a=n("vsh_98650"),l=n("vsh_95066"),u=n("vsh_92563"),c=n("vsh_45832"),d="selectionchange",h=function(){function t(){var t=this;this.fastListener=new WeakMap,this.hasBindMap=new WeakMap,this.dispatchNativeEvent=function(e){var n=e.type,i=null;if(e.type===d){var r=window.getSelection();if(!r||!r.rangeCount)return;i=r.getRangeAt(0).startContainer.parentElement}for(var o=t.getListenersByNode(n,i||e.target),s=0,a=o.length;s<a;s++){var l=(u=o[s]).dom,u=u.handle;t.shouldDispatchEvent(e,l,i)&&u(e)}},this.on=function(e,n,i,r){var o=void 0===(r=(s=void 0===r?{}:r).priority)?0:r,s=s.customizedDelegateDom;t.bindNativeEvent(e,n,s||null);var a={dom:n,handle:i,priority:o},l=t.fastListener.get(n);l||t.fastListener.set(n,l={}),l[e]||(l[e]=[]);for(var u=0;u<l[e].length;u++)if(l[e][u].priority>o)return void l[e].splice(u,0,a);l[e].push(a)},this.off=function(e,n,i){var r=t.fastListener.get(n);r&&r[e]&&(0,o.d)([],(0,o._)(r[e]),!1).forEach((function(t,n){t.handle===i&&r[e].splice(n,1)}))}}var e=t.prototype;return e.bindNativeEvent=function(t,e,n){var i;switch(t){case"resize":i=n||window;break;case"focus":case"blur":i=n||e instanceof HTMLElement&&e.closest("[contenteditable]")||document;break;default:i=n||document}var r=this.hasBindMap.get(i);r||(r=new Map,this.hasBindMap.set(i,r)),r.has(t)||(i.addEventListener(t,this.dispatchNativeEvent),r.set(t,!0))},e.getListenersByNode=function(t,e){for(var n=[];e;){var i=this.fastListener.get(e);i&&i[t]&&n.push.apply(n,(0,o.d)([],(0,o._)(i[t]),!1)),e=e.parentNode}return n.sort((function(t,e){return t.priority-e.priority}))},e.shouldDispatchEvent=function(t,e,n){if(t.defaultPrevented)return!1;if(t.type===d){if(e instanceof HTMLElement)return e.hasAttribute("contenteditable")?e.contains(n):!(!(n=window.getSelection())||!n.rangeCount)&&e.contains(n.getRangeAt(0).startContainer);if(e instanceof Document)return e===t.target}return!(!t.target||!t.target.contains)&&(e===t.target||e.contains(t.target))},t}(),f=new h,p=(n("vsh_44960"),n("vsh_44897")),v=n("vsh_97698"),g=n("vsh_97321"),y=n("vsh_94150"),m=n("vsh_15808"),_=n("vsh_40285"),b=n("vsh_37075"),E=n("vsh_97723"),S=n("vsh_55460"),w=n("vsh_45933"),C=n("vsh_64626"),I=n("vsh_85338"),T=n("vsh_36543"),x=n("vsh_77016"),k=n("vsh_77954"),M=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.dataTransfer=null,i.evtTargetSelection=null,(0,x.uc)(i,k.Y,e,n),i}return(0,o.c)(e,t),e}(T.U),R=n("vsh_80055"),P=n("vsh_40896"),O=n("vsh_45110"),L=function(){function t(){this.modules=new Map}var e=t.prototype;return e.get=function(t){var e=this.modules.get(t);if(!e)throw Error("modules undefined, type is ".concat(t));return e},e.set=function(t,e){var n,i,r=this;"object"==typeof t?(n=t,Object.keys(n).forEach((function(t){O.h[t]||console.warn("modules not in ".concat(O.h,", type is ").concat(t)),r.set(t,n[t])}))):"string"==typeof t&&e?(this.modules.get(i=t)&&console.warn("modules repeat, type is ".concat(i)),this.modules.set(i,e)):console.error("set modules param error",t,e)},e.getInstance=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=this.get(t);return new(i.bind.apply(i,(0,o.d)([void 0],(0,o._)(e),!1)))},t}(),D=n("vsh_83640"),A=function(){function t(){this.NODE_TO_DOM=new WeakMap,this.DOM_TO_NODE=new WeakMap,this.DOM_TO_LEAF=new WeakMap}var e=t.prototype;return e._setNode=function(t,e){t._node=e,this._deleteNode(t),this._deleteNode(e),this.NODE_TO_DOM.set(t,e),this.DOM_TO_NODE.set(e,t)},e._resetNode=function(t){t._node=null},e._deleteNode=function(t){var e;this.DOM_TO_NODE.has(t)?((e=this.DOM_TO_NODE.get(t))&&this.NODE_TO_DOM.delete(e),this.DOM_TO_NODE.delete(t)):((e=this.NODE_TO_DOM.get(t))&&this.DOM_TO_NODE.delete(e),this.NODE_TO_DOM.delete(t))},e.getModel=function(t){return this.DOM_TO_NODE.get(t)},e.getView=function(t){return this.NODE_TO_DOM.get(t)},e._setLeaf=function(t,e){this.DOM_TO_LEAF.set(t,e)},e._deleteLeaf=function(t){},e.getLeafModel=function(t){return this.DOM_TO_LEAF.get(t)},e.destroy=function(){this.NODE_TO_DOM=new WeakMap,this.DOM_TO_NODE=new WeakMap,this.DOM_TO_LEAF=new WeakMap},t}(),z=n("vsh_83875");function N(t,e){var n;if(document.caretPositionFromPoint){if(n=document.caretPositionFromPoint(t,e))return{textNode:n.offsetNode,offset:n.offset}}else if(document.caretRangeFromPoint&&(n=document.caretRangeFromPoint(t,e)))return{textNode:n.startContainer,offset:n.startOffset};return null}var W=n("vsh_85351");var B,K,Z=(B=function(t){function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},B(K={exports:{}},K.exports),K.exports),j=function(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}(Z),U=(0,s.K)((function(t){this.error(t)}))(s.W.ERROR),V=["input","beforeinput","keyup","keydown","keypress","compositionstart","compositionupdate","compositionend"],F=function(){function t(t){var e,n=this;this.props=t,this.version=l.cH+"@4.139.0-alpha-feat-roadster.1 - January 16, 2025 07:15:46",this.log=null!==(e=this.props.onLog)&&void 0!==e?e:console.log.bind(console)||console.log,this.copyable=null===(i=this.props.copyable)||void 0===i||i,this.businessKey=this.props.businessKey,this.mounted=!1,this.editorUniqueId=(0,p.D)(6),this._hydrateMap=new Map,this._dir=this.props.dir,this._listenEvents=W.Cn,this.isError=!1,this.rootContainer=this.props.container,this.contentEditableTemp=Boolean(this.props.editable),this.rect={height:0,left:0,top:0,width:0},this.editable=null===(e=this.props.editable)||void 0===e||e,this.contentEditableLock=!1,this._listenerToZone=new WeakMap,this.setEditable=function(t,e){t||n.blur(),n.setPluginMode(t,e)},this._handleShortcuts=function(t){n._maybeSelectAll(t)},this._handleDragOver=function(t){t.preventDefault()},this._handleContainerResize=(0,v.P)((function(){n.rectModule.clearCache();var t=n.getRect();n.setRect();var e=n.getRect();(0,g.X)(t,e)||n.call("editorRectChange",{prev:t,next:e})})),this.delegator=this.props.eventDelegator,this.eventEmitter=new E.Z,this.modulesContainer=new L,this.modulesContainer.set(t.modules);var i=this.modulesContainer.get(O.h.UndoModule);this.undoModule=new i(this),this._viewModel=new A,this.clipboard=new R.a(this,t.proxyClipboard),this._contentState=t.contentState||this.initContentState(this.props.initData,this.props.schema),this.bindContentStateEvents(),this._status={isPerforming:!1,contentChanged:!1,preventScrolling:!1,stopUpdateSelection:!1,preventUpdateDomSelection:!1,isComposing:!1,isPainting:!1},this.initPluginManager(this.props.register),null!==(i=(e=this._contentState).init)&&void 0!==i&&i.call(e),this.delegator=null!==(e=t.eventDelegator)&&void 0!==e?e:f,this._listenEvents=null!==(t=t.listenEvents)&&void 0!==t?t:W.Cn}var e=t.prototype;return Object.defineProperty(e,"scrollModule",{get:function(){var t,e;return null===(e=null===(t=null===(e=this.getContentState())||void 0===e?void 0:e.getZoneManager)||void 0===t?void 0:t.call(e))||void 0===e?void 0:e.getScrollModuleByZoneId(y.S)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"getViewPortPadding",{get:function(){return this.props.getViewPortPadding},enumerable:!1,configurable:!0}),Object.defineProperty(e,"placeholder",{get:function(){return this.props.placeholder},enumerable:!1,configurable:!0}),e.init=function(t){t=t.element,(this.rootContainer=t)instanceof HTMLElement&&(this.rootContainer.zoneId={value:"0"}),this.initBrowserEnv()},e.initContentState=function(t,e){var n,i=t instanceof _.I?(new b.D).add(y.S,t):t;return i.get(y.S)||(n="[Editor][constructor] invalid initDeltaSet: ".concat(i,', initDeltaSet must has zone "0"'),t=new Error(n),this.error({e:t,message:n,level:s.W.FATAL})),new(this.modulesContainer.get(O.h.ContentState))({deltaSet:i,schema:e,modulesContainer:this.modulesContainer})},e.bindContentStateEvents=function(){var t=this,e=this._contentState;e._onWillApply(this._handleContentWillApply),e.onWillChange(this._handleContentWillChange),e.onChange(this._handleContentChange),e._onRefresh((function(e){t.call("_forceRefresh",e)})),e._onError((function(e){var n=e.e,i=e.message;e=e.level;t.error({e:n,message:i,level:e})}))},e.initPluginManager=function(t){this.pluginManager&&this.pluginManager.destroy(),this.pluginManager=new D.Q$(this,t),this.pluginManager._init()},e.call=function(t,e){var n,i=this;"error"!==t||this.isError||(this.isError=!0,n=null===(n=null==e?void 0:e.e)||void 0===n?void 0:n.stack,e=(0,o.b)((0,o.b)({},e),{errorStack:new Error("editor oops").stack,originErrorStack:n})),this.eventEmitter.getListeners(t).slice(0).forEach((function(n){if(n)for(var r=0;r<n.length;r++)!function(r){if(r=n[r]){var s,a=r.listener,l=r.isOnce;if(l&&i.eventEmitter.removeEventListener(t,a),!a.plugin)return i._listenerToZone.has(a)?(r=i._listenerToZone.get(a),t===c.r.CONTENT_WILL_CHANGE?e.deltaSet.get(r)&&(a.call(a,e),l&&i.off(t,a)):t===c.r.CONTENT_CHANGE?r in e.changes&&(a.call(a,e),l&&i.off(t,a)):t===c.r.PAINT?r===(null==e?void 0:e.zoneId)&&(a.call(a,e),l&&i.off(t,a)):i.selection.isZoneInSelection(r)&&(a.call(a,e),l&&i.off(t,a))):(a.call(a,e),l&&i.eventEmitter.removeEventListener(t,a));null!=e&&e.changes?(s=Object.assign((0,o.b)({},e),{changes:{},deltaSet:new b.D}),Object.keys(null==e?void 0:e.changes).forEach((function(t){s.changes[t]=e.changes[t],s.deltaSet.add(t,e.deltaSet.get(t))})),a.call(a,s),l&&i.off(t,a)):i.selection.getMultipleSelection().forEach((function(n){n=n.start.zoneId,a.plugin&&i.pluginManager.isPluginInZone(a.plugin,n)&&(a.call(a,e),l&&i.off(t,a))}))}}(r)}))},e.getRect=function(t){return(t=void 0===t?y.S:t)===y.S?this.rect:this.rectModule.getZoneRect(t)},e.setRect=function(){this.rootContainer&&(this.rect=this.rectModule.getEditorRect())},e.getRootContainer=function(){var t=this.rootContainer||null;return t||console.warn("editor root container is not exist"),t},e.getContainer=function(){return this.rootContainer},e.setMounted=function(t){this.mounted=t},e.getStatus=function(t){return this._status[t]},e.getDelegator=function(){return this.delegator},e._getInlineAttributesOfPreviousPosition=function(){var t=(o=this._contentState.getActiveZone()).getZoneId(),e=this.selection.getSelection(t),n=o.getLine(e.start.line),i=n.getLineMarker(),r=e.start,o=e.start;return i===e.start.offset&&n.length()>i?o=new z.L({start:e.toPosition().start+1,editor:this,len:0,zoneId:t}).toRange().start:e.start.offset>i&&(r=new z.L({start:e.toPosition().start-1,editor:this,len:0,zoneId:t}).toRange().start),this._contentState.getAttributes(r,o)},e._getInlineAttributesOfNextPosition=function(){var t=this._contentState.getActiveZone().getZoneId(),e=this.selection.getSelection(t),n=null===(i=this._contentState.getZoneState(t))||void 0===i?void 0:i.getLine(e.start.line);if(!n)return(0,P.vA)();var i=e.start;return e.start.offset<n.length()&&(i=new z.L({start:e.toPosition().start+1,editor:this,len:0,zoneId:t}).toRange().start),this._contentState.getAttributes(e.start,i)},e.toggleAttribute=function(t,e,n){var i,r,s,a;void 0===e&&(e="true");var l=(n=n||this.selection.getSelection()).start,u=l.line,c=l.zoneId,d=n.end.line,h=this.getContentState(),f=h.schema;if(null===(l=f.get(t))||void 0===l?void 0:l.lmkr){for(var p=Math.min(u,d),v=Math.max(u,d),g="",y=p;y<=v;y++)h.getLineAttributes(c,y).toMap()[t]!==e&&(g=e);for(y=p;y<=v;y++)this.getContentState().setLineAttributes(c,y,((i={})[t]=g,i))}else if(n.isCollapsed()){var m=n.toPosition();d=this._getInlineAttributesOfPreviousPosition().toMap();(g=null!==(p=this._contentState.getInlineStyleOverride(m,t))&&void 0!==p?p:d[t])===e?this._contentState._setInlineStyleOverride(m,t,""):this._contentState._setInlineStyleOverride(m,t,e)}else{if(g="",m=this._contentState.getEntities(n))try{for(var _=(0,o.e)(m),b=_.next();!b.done;b=_.next()){var E=b.value,S=!0,w=(0,P.qF)(f,E.attributes),C=w&&(null===(a=f.get(w))||void 0===a?void 0:a.attributes);if(w&&C&&(S=C instanceof RegExp?C.test(t):C(t,e,w)),"\n"!==E.text&&!("lmkr"in E.attributes)&&S&&E.attributes[t]!==e){g=e;break}}}catch(t){r={error:t}}finally{try{b&&!b.done&&(s=_.return)&&s.call(_)}finally{if(r)throw r.error}}this._contentState.setAttributes(n,((n={})[t]=g,n))}},e.on=function(t,e,n){var i,r;"object"===j(n)?(r=n.priority,(i=n.zoneId)&&this._listenerToZone.set(e,i),this.eventEmitter.on(t,e,r)):this.eventEmitter.on(t,e,r=n)},e.once=function(t,e,n){var i,r;"object"===j(n)?(r=n.priority,(i=n.zoneId)&&this._listenerToZone.set(e,i),this.eventEmitter.once(t,e,r)):this.eventEmitter.once(t,e,r=n)},e.off=function(t,e){this._listenerToZone.has(e)&&this._listenerToZone.delete(e),this.eventEmitter.off(t,e)},e.registerCommand=function(t,e){var n=this;this.on(t,(function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];n.undoModule.batchedUndo((function(){e.apply(n,t)}))}))},e.execCommand=function(t,e){var n=!1,i={name:t,data:e=void 0===e?{}:e,preventEvent:function(){n=!0}};this.call(c.r.EXEC_COMMAND,i),n||this.eventEmitter.trigger(t,[e])},e.getContentState=function(){return this._contentState},e.getContent=function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),this.getContentState().toDeltaSet(t,e)},e.setContent=function(t,e){void 0===e&&(e={}),this.getContentState().setContent(t,Object.assign({},{type:"setContent"},e))},e.getHTML=function(){var t=this.getContent(),e={zoneId:y.S,deltaSet:t,node:this.getContainer(),customCopyDatas:[]};t=this.clipboard.serialize(e);return(e=document.createElement("div")).appendChild(t.node),e.innerHTML},e.setHTML=function(t){t=this.clipboard.deserialize({html:t},!0),this.setContent(t)},e.getText=function(){var t,e,n=this,i=[],r=this.getContentState().getZoneState(y.S);if(!r)return"";try{for(var s=(0,o.e)(r),a=s.next();!a.done;a=s.next()){var l=a.value;(l.hasLineMarker()?l.getOps().slice(1):l.getOps()).forEach((function(t){t={text:t.insert,attributes:(0,o.b)({},t.attributes)},n.pluginManager.call("editorCollectText",t),i.push(t.text)}))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return i.join("")},e.setText=function(t){t.endsWith("\n")||(console.warn("text should end with \\n"),t+="\n"),this.setContent(new _.I({zoneId:y.S}).insert((0,m.$)(t)))},e.isSelectionInEditor=function(t){return this.selection.isSelectionInEditor(t)},e.isFocus=function(t){var e;return(null===(e=this.inputModel)||void 0===e?void 0:e.hasFocus())||!1},e.isEmpty=function(){return!this.getStatus("isComposing")&&this.getContentState().isEmpty()},e.focusAtEnd=function(){var t,e=this.getContentState().getZoneState(y.S);e&&(this.focus(),t=e.getModelText().length-1,this.selection.setSelection({start:(0,o.b)((0,o.b)({zoneId:y.S},e.offsetToPoint(t)),{isEdge:!0}),end:(0,o.b)((0,o.b)({zoneId:y.S},e.offsetToPoint(t)),{isEdge:!0})},!0))},e.focus=function(t,e){var n=this.editable,i=this.copyable;(n||i)&&(!n&&u.Xh.mobile&&this.inputModel.setContentEditable(!1),this.inputModel.focus(),this.selection.updateViewSelection(),!n&&u.Xh.mobile&&this.inputModel.setContentEditable(!0))},e.blur=function(){this.editable&&(this.inputModel.blur(),this.selection.setCursorActive(!1),this.call(c.r.BLUR))},e.flushInput=function(){},e.isInEmbed=function(){return!1},e.setContentEditable=function(t){var e;this.contentEditableLock?this.contentEditableTemp=t:((e=this.isEditable())!==t&&this.call(c.r.EDITABLE_CHANGE,{previous:e,current:t}),this.callAll("aceChangeContentediable"))},e.scrollToSelection=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0,o.f)(this,void 0,void 0,(function(){return(0,o.g)(this,(function(n){return[2,null===(t=this.scrollModule)||void 0===t?void 0:t.scrollIntoViewport.apply(t,(0,o.d)([],(0,o._)(e),!1))]}))}))},e.scrollTo=function(t){var e;return(0,o.f)(this,void 0,void 0,(function(){return(0,o.g)(this,(function(n){return[2,null===(e=this.scrollModule)||void 0===e?void 0:e.scrollTo(t)]}))}))},e.scrollBy=function(t){var e;return(0,o.f)(this,void 0,void 0,(function(){return(0,o.g)(this,(function(n){return[2,null===(e=this.scrollModule)||void 0===e?void 0:e.scrollBy(t)]}))}))},e.callAll=function(t,e){var n=[];return this.pluginManager.call(t,e||{},(function(t,e){return n.push(e),t})),n},e.destroy=function(){try{this.selection.destroy(),this.inputModel.destroy(),this.undoModule.destroy(),this.rectModule.clearCache(),this.eventEmitter.reset(),this._contentState._clearListener(),this.destroyPlugins()}catch(t){this.log("[Editor][destroy]".concat(t))}},e.reset=function(){this.getContentState().clear(),this.callAll("reset"),this.setText(""),this.clearStatus(),this.rectModule.clearCache(),this.undoModule.clear()},e.getScrollContainer=function(){var t;return null===(t=this.scrollModule)||void 0===t?void 0:t.getScroller()},e.isEditable=function(){return!!this.editable},e.isFocusOnBlock=function(t){return!1},e.getOuterContainer=function(){var t=this.getContainer();return t?t instanceof HTMLElement?t.parentNode:t.parent:null},e._maybeSelectAll=function(t){var e=t.keyCode,n=t.shiftKey,i=t.metaKey,r=t.altKey,o=t.ctrlKey;n||r||(u.Xh.isMac||u.Xh.isIPad?i:o)&&e===l.VD.A&&(e=this.selection.getSelection().start.zoneId,this.selection.selectAll(e),t.preventDefault())},e.assignCaretSelection=function(t){var e=t.clientX,n=t.clientY;(e=N(e=e-window.pageXOffset,n=n-window.pageYOffset))&&(n=e.textNode,e=e.offset,n&&(t.evtTargetSelection=this.selection.getElementRange(n,{start:e||0,end:e||0})))},e.initBrowserEnv=function(){var t,e,n=this.rootContainer;n instanceof HTMLElement&&(t=[],u.Xh.chrome&&t.push("chrome"),u.Xh.isFF&&t.push("mozilla"),u.Xh.safari&&t.push("safari"),u.Xh.msie&&t.push("msie"),u.Xh.windows&&t.push("window"),(e=(0,u.vu)())&&88<=parseInt(e)&&t.push("chrome88"),(n=n.classList).add.apply(n,(0,o.d)([],(0,o._)(t),!1)))},e.destroyPlugins=function(){try{this.pluginManager.destroy()}catch(t){console.error("destroy plugin fail",t)}},e.clearStatus=function(){var t,e,n=this._status;try{for(var i=(0,o.e)(Object.keys(n)),r=i.next();!r.done;r=i.next()){var s=r.value;this.setStatus(s,!1)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},e._toggleZonePlaceHolder=function(t,e){},e.setStatus=function(t,e){this._status[t]=e},e.transformPosition=function(t,e){var n=e.zoneId;if(t.zoneId!==n)return e;var i=e.start,r=e.len,o=e.isBackward,s=e.isEdge;e=t.transform(i),r=t.transform(i+r);return new z.L({start:e,len:r-e,zoneId:n,editor:this,isBackward:o,isEdge:s})},e._getViewModel=function(){return this._viewModel},e._correctCompositionIfNecessary=function(t){var e,n,i=this;!0===this.getStatus("isComposing")&&(e=t.type,t=t.sourceEvent||t.nativeEvent||t,n=new w.h(new CompositionEvent("compositionend"),this.getContainer()),V.includes(e)?t instanceof KeyboardEvent&&!1===t.isComposing&&(this.triggerEditorEvent("compositionend",n),this.log("[Editor][_correctCompositionIfNecessary]\n                   dispatchCompositionEvent because eventType is ".concat(e," and isComposing is false"))):(u.Xh.windows&&"blur"===e?setTimeout((function(){i.triggerEditorEvent("compositionend",n)})):this.triggerEditorEvent("compositionend",n),this.log("[Editor][_correctCompositionIfNecessary] dispatchCompositionEvent because eventType is ".concat(e))))},e._setPlaceholder=function(t){this.props.placeholder=t},e._handleMouseDown=function(t){this.triggerMouseEvent(t)},e._handleContentWillApply=function(){},e._handleContentWillChange=function(t){return this.pluginManager.call("editorWillApplyChange",t,(function(e,n){return t.deltaSet=n,t})),this.call(c.r.CONTENT_WILL_CHANGE,t),t.deltaSet},e._handleContentChange=function(t){var e,n,i,r,s,a,l=this,u=t.previous,d=t.current,h=t.options;(p=this._contentState.getZoneState(y.S))&&this._getViewModel()._setNode(p,this.getContainer());var f=Object.keys(t.changes).map((function(t){return null===(t=l.selection.getSelection(t,u))||void 0===t?void 0:t.toPosition(u)})).filter(Boolean),p=f.map((function(e){return t.deltaSet.get(e.zoneId)}));t.deltaSet.forEach((function(t){l.rectModule.clearZoneRect(t.zoneId)}));try{for(var v=(0,o.e)(Object.values(t.changes)),g=v.next();!g.done;g=v.next()){var m=g.value;try{for(var _=(i=void 0,(0,o.e)(m)),E=_.next();!E.done;E=_.next()){var S=E.value;try{for(var w=(s=void 0,(0,o.e)(S.deletes)),C=w.next();!C.done;C=w.next()){var I=C.value;S.inserts.includes(I)||this._getViewModel()._deleteNode(I)}}catch(n){s={error:n}}finally{try{C&&!C.done&&(a=w.return)&&a.call(w)}finally{if(s)throw s.error}}}}catch(n){i={error:n}}finally{try{E&&!E.done&&(r=_.return)&&r.call(_)}finally{if(i)throw i.error}}}}catch(n){e={error:n}}finally{try{g&&!g.done&&(n=v.return)&&n.call(v)}finally{if(e)throw e.error}}p.forEach((function(t,e){e=f[e];var n=t&&(0,b.p)(null===(n=d.getZoneState(t.zoneId))||void 0===n?void 0:n.getContent());t&&e&&!n&&(e=l.transformPosition(t,e),l.selection._replaceSingleRangeModel(e))})),this.setStatus("contentChanged",!0),h.preventScrolling&&this.setStatus("preventScrolling",!0),this.call(c.r.CONTENT_CHANGE,t),this.setStatus("preventScrolling",!1),this.selection._dispatchEvent(!1)},e._handleMouseUp=function(t){this.triggerMouseEvent(t)},e.triggerMouseEvent=function(t){var e=new T.U(t,t.target);this.triggerEditorEvent(t.type,e)},e.triggerTouchEvent=function(t){var e=new S.R(t,t.target);this.triggerEditorEvent(t.type,e)},e._handleClickEvent=function(t){var e,n;this.contains(t.target)&&(e=this.selection.getElementRange(t.target),n=new T.U(t,t.target),this.triggerEditorEvent(t.type,(0,o.b)((0,o.b)({},n),{selection:e})))},e._handleTouchStart=function(t){this.triggerTouchEvent(t)},e._handleTouchEnd=function(t){this.contains(t.target)&&(this.focus(),this.triggerTouchEvent(t))},e._handleKeyEvent=function(t){var e;!this.isInEmbed()&&this.isEditable()&&(e=new C.$(t,t.target),this.triggerEditorEvent(t.type,e).shouldPrevent||this._handleShortcuts(e.nativeEvent))},e._handleCopy=function(t){var e=this;this.undoModule.batchedUndo((function(){e.clipboard.onCopy(t)}))},e._handleCut=function(t){var e=this;this.undoModule.batchedUndo((function(){e.clipboard.onCut(t)}))},e._handlePaste=function(t){var e=this;!this.isFocusOnBlock()&&this.isEditable()&&this.undoModule.batchedUndo((function(){e.clipboard.onPaste(t)}))},e._handleDrag=function(t){var e=new M(t,t.target);this.assignCaretSelection(e),this.triggerEditorEvent(t.type,e)},e._handleFocusEvent=function(t){"focus"===t.type&&!this.getStatus("isPerforming")&&!this.getStatus("preventUpdateDomSelection")&&this.isFocus()&&t.target&&this.selection.updateViewSelection();var e=new I.Y(t,t.target);this.triggerEditorEvent(t.type,e)},e._handleResizeEvent=function(t){var e,n,i;i=t instanceof Event?function(t){if(!(t instanceof Element))return{width:0,height:0,left:0,right:0,top:0,bottom:0};var e=window.getComputedStyle(t),n=(parseFloat(e.paddingLeft)||0)+(parseFloat(e.paddingRight)||0),i=(parseFloat(e.paddingTop)||0)+(parseFloat(e.paddingBottom)||0);return e=t.getBoundingClientRect(),{width:t.clientWidth-n,height:t.clientHeight-i,left:e.left,right:e.right,top:e.top,bottom:e.bottom}}(this.getContainer()):{width:(t=t[0].contentRect).width,height:t.height,top:t.top,bottom:t.bottom,left:t.left,right:t.right};var r=this.getRect();r.width===i.width&&r.height===i.height||this.call(c.r.RESIZE,{previous:r,current:i});try{for(var s=(0,o.e)(Object.entries(i)),a=s.next();!a.done;a=s.next()){var l=(0,o._)(a.value,2),u=l[0],d=l[1];if(r[u]!==d){this.call(c.r.RECT_CHANGE,{previous:r,current:i});break}}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}},e.triggerEditorEvent=function(t,e){function n(){r=!0}var i=this,r=(t=this.eventEmitter.getListeners(t),!1),o=!1;function a(){o=!0}return e=e||{},t.forEach((function(t){if(t)for(var o=0;o<t.length&&"break"!==function(o){if(r)return"break";if(!t[o])return"continue";var l,u=(o=t[o]).listener;o=o.isOnce;e&&(e.stopEvent=n,e.preventEvent=a,e.evt=e);try{u.plugin?i.selection.getMultipleSelection().forEach((function(t){t=t.start.zoneId,u.plugin&&i.pluginManager.isPluginInZone(u.plugin,t)&&u.call(u,e)})):i._listenerToZone.has(u)?(l=i._listenerToZone.get(u))&&i.selection.isZoneInSelection(l)&&(u.call(u,e),o&&i._listenerToZone.delete(u)):u.call(u,e)}catch(o){i.error({e:o,message:o.message,level:s.W.ERROR})}}(o);o++);})),{shouldStop:r,shouldPrevent:o}},e.setStopUpdateSelection=function(t){this.setStatus("stopUpdateSelection",t)},e.setPreventUpdateDomSelection=function(t){this.setStatus("preventUpdateDomSelection",t)},e._getAttributesOfPreviousPosition=function(){var t=this._contentState.getActiveZone().getZoneId(),e=this.selection.getSelection(t),n=e.start;return 0<e.start.offset&&(n=new z.L({start:e.toPosition().start-1,editor:this,len:0,zoneId:t}).toRange().start),this._contentState.getAttributes(n,e.start)},e._getAttributesOfNextPosition=function(){var t=this._contentState.getActiveZone().getZoneId(),e=this.selection.getSelection(t),n=null===(i=this._contentState.getZoneState(t))||void 0===i?void 0:i.getLine(e.start.line);if(!n)return(0,P.vA)();var i=e.start;return e.start.offset<n.length()&&(i=new z.L({start:e.toPosition().start+1,editor:this,len:0,zoneId:t}).toRange().start),this._contentState.getAttributes(e.start,i)},e.setPluginMode=function(t,e){if(this.editorStatusLocked)this.editableArgTemp={designMode:t,args:e};else{this.inputModel.setContentEditable(t),this.editable=t;try{this.editable?this.callAll("pluginReadWrite",e):this.callAll("pluginReadOnly",e)}catch(t){this.log("[Editor][setPluginMode] ".concat(t))}}},e.setEditStatusLock=function(t,e){var n;!(this.editorStatusLocked=t)&&e&&this.editableArgTemp&&(e=(n=this.editableArgTemp).designMode,n=n.args,this.setEditable(e,n)),t&&(this.editableArgTemp={designMode:this.editable,args:{}})},e.setContentEditableLock=function(t){(this.contentEditableLock=t=void 0!==t&&t)||this.setContentEditable(this.contentEditableTemp)},e.setContainerContentEditableLock=function(t){},e.unstable_hydrate=function(t,e){this._hydrateMap.set(t,e),this._getViewModel()._setNode(t,e),e[l.e0]=!0},e._deleteHydrateTask=function(t){this._hydrateMap.delete(t),t._node&&(t._node[l.e0]=!1)},e.error=function(t){t.e||(t.e=new Error(t.message)),this.call("error",t)},e.contains=function(t){if(!t)return!1;var e=this.getContainer();return e instanceof HTMLElement?t instanceof Node&&e.contains(t):this.selection.contains(e,t)},e.changeHiddentInputStyle=function(t){this.inputModel.changeHiddentInputStyle(t)},(0,o.a)([a.W],t.prototype,"setRect",null),(0,o.a)([U],t.prototype,"toggleAttribute",null),(0,o.a)([U],t.prototype,"setContent",null),(0,o.a)([U],t.prototype,"setHTML",null),(0,o.a)([U],t.prototype,"setText",null),(0,o.a)([a.W],t.prototype,"scrollToSelection",null),(0,o.a)([a.W],t.prototype,"scrollTo",null),(0,o.a)([a.W],t.prototype,"_handleMouseDown",null),(0,o.a)([a.W],t.prototype,"_handleContentWillApply",null),(0,o.a)([a.W],t.prototype,"_handleContentWillChange",null),(0,o.a)([a.W],t.prototype,"_handleContentChange",null),(0,o.a)([a.W],t.prototype,"_handleMouseUp",null),(0,o.a)([a.W],t.prototype,"_handleClickEvent",null),(0,o.a)([a.W],t.prototype,"_handleTouchStart",null),(0,o.a)([a.W],t.prototype,"_handleTouchEnd",null),(0,o.a)([U],t.prototype,"_handleKeyEvent",null),(0,o.a)([U],t.prototype,"_handleCopy",null),(0,o.a)([U],t.prototype,"_handleCut",null),(0,o.a)([U],t.prototype,"_handlePaste",null),(0,o.a)([a.W],t.prototype,"_handleDrag",null),(0,o.a)([a.W],t.prototype,"_handleFocusEvent",null),(0,o.a)([a.W],t.prototype,"_handleResizeEvent",null),(0,o.a)([U],t.prototype,"triggerEditorEvent",null),t}(),H=function(){function t(){this.scroller=document.body,this.isActive=!1;var t=document.createElement("div");t.className="selection-cursor",this.cursor=t,document.body.appendChild(t)}var e=t.prototype;return e.setScroller=function(t){this.scroller=t,this.scroller.insertBefore(this.cursor,t.children[t.childElementCount-1])},e.getScroller=function(){return this.scroller},e.applyColor=function(t){null!=t&&t.startsWith("--")&&(t="var(".concat(t,")")),this.cursor.style.borderLeftColor=t||this.defaultColor},e.setDefaultColor=function(t){this.defaultColor=t},e.setActive=function(t,e){var n=this;void 0===e&&(e=!0),(this.isActive=t)?(this.cursor.classList.remove("animation-active"),this.cursor.classList.add("display-cursor"),e?setTimeout((function(){n.isActive&&n.cursor.classList.add("animation-active")}),100):this.cursor.classList.add("animation-active")):(this.cursor.classList.remove("display-cursor"),this.cursor.classList.remove("animation-active"))},e.setPosition=function(t){var e=t.top,n=t.left,i=t.height;t=this.cursor;this.isEqualRect({top:e,left:n,height:i},this.rect)||(t.style.top=e+"px",t.style.left=n+"px",t.style.height=i+"px")},e.isEqualRect=function(t,e){return!(!t||!e)&&t.top===e.top&&t.left===e.left&&t.height===e.height},t}(),X=new H;!function(){function t(){}var e=t.prototype;e.bind=function(){},e.unbind=function(){},e.onMount=function(){},e.handleRef=function(t){}}();var Y,G=n("vsh_25374"),q=["resize","dragenter","dragover","dragleave","drop"],Q=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}(0,r._)(e,t);var n=e.prototype;return n.hasAttribute=function(t,e){return!!this.getAttribute(t,e)},n.closest=function(t,e,n){var r=this;if(!t||!t.parent)return null;for(var o=[e.trim().slice(1,-1)],s=(0,i.ST)(t),a=t;a;){if(o.every((function(t){return r.hasAttribute(a,t)})))return a;if(null==n?void 0:n.every((function(t){return r.hasAttribute(a,t)})))break;if(!a.parent)break;a=s.getElementByEid(a.parent)}return null},n.contains=function(t,e){var n,r,o;if(!t||!e)return!1;if((null===(n=t.props.provides)||void 0===n?void 0:n.editor)&&(null===(r=t.props.provides)||void 0===r?void 0:r.editor)===(null===(o=e.props.provides)||void 0===o?void 0:o.editor))return!0;if(!e.parent)return!1;for(var s=(0,i.ST)(e),a=s.getElementByEid(e.parent);a;){if(a.eid===t.eid)return!0;if(!a.parent)return!1;a=s.getElementByEid(a.parent)}return!1},n.getAttribute=function(t,e){return Object.prototype.hasOwnProperty.call(t.props,e)&&t.props[e]},e}((function(){})),J=n("vsh_98125"),$=n.n(J),tt=n("vsh_83079"),et=n("vsh_98681"),nt=n("vsh_87296"),it=n("vsh_82631"),rt={left:void 0,top:void 0},ot=((Y={})[c.r.SELECTION_CHANGE]={onlyScrollWhenCollapsed:!0},Y);function st(t){return t instanceof Window?{clientWidth:window.innerWidth,clientHeight:window.innerHeight,scrollTop:t.scrollY,scrollLeft:t.scrollX}:t instanceof Element?{clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}:(console.error("not a valid scroller"),{clientHeight:0,clientWidth:0,scrollLeft:0,scrollTop:0})}function at(t){return"number"==typeof t?{paddingBottom:t,paddingLeft:t,paddingRight:t,paddingTop:t}:{paddingBottom:t.bottom||0,paddingTop:t.top||0,paddingLeft:t.left||0,paddingRight:t.right||0}}function lt(t){return 0!==t.height||0!==t.top||0!==t.left||0!==t.right||0!==t.left}function ut(t){return t.left||t.top}!function(){function t(t){this.props=t}t.prototype.render=function(){return null}}();var ct=function(){function t(t,e,n,i,r){void 0===n&&(n={}),void 0===r&&(r=[]),this.editor=t,this.scroller=e,this.scrollerOptions=n,this.zoneId=i,this.autoScrollEvents=r,this._listeners=[],this._timers={},this.init()}var e=t.prototype;return e.listenEditorEvents=function(){var t=this;this.autoScrollEvents.forEach((function(e){var n,i="string"==typeof e?ot[n=e]||{}:(n=e.type,Object.assign({},ot[n],e.overideConfig)),r=function(){return t.scrollIntoViewport(void 0,(0,o.b)({_event:n},i))};n===c.r.SELECTION_CHANGE&&(r=function(){var e=t.editor.selection.getSelection(t.zoneId);e&&t.scrollIntoViewport(e.start,(0,o.b)({_event:n},i))}),e=i.triggerAfterPaint?function(){return t.editor.once("paint",r)}:r,t.editor.on(n,e,t.zoneId===y.S?void 0:{zoneId:t.zoneId}),t._listeners.push(e)}))},e.getScroller=function(){return this.scroller},e.emitScroll=function(t){this.editor.call(c.r.SCROLL,t)},e.destroy=function(){for(var t,e=0;e<this.autoScrollEvents.length;e++){var n=this.autoScrollEvents[e],i="string"==typeof n?n:n.type;this.editor.off(i,this._listeners[e])}Object.values(this._timers).forEach((function(t){return window.clearTimeout(t)}));var r=null===(t=null===(r=this.editor.getContentState())||void 0===r?void 0:r.getZoneManager)||void 0===t?void 0:t.call(r);null!=r&&r.removeScrollModule(this.zoneId),this.scroller.removeEventListener("scroll",this.emitScroll)},e.init=function(t){void 0===t&&(t=!0);var e,n=null===(n=null===(e=this.editor.getContentState())||void 0===e?void 0:e.getZoneManager)||void 0===n?void 0:n.call(e);this.scroller.style.position="relative",null!=n&&n.registerScrollModule(this.zoneId,this),t&&this.scroller.addEventListener("scroll",this.emitScroll),this.listenEditorEvents()},e.scrollTo=function(t){this.scroller.scrollTo(t)},e.scrollBy=function(t){this.scroller.scrollBy(t)},e.scrollPointIntoScrollerView=function(t,e,n,i){var r=this.editor,o=this.zoneId;if(!r||!o)return rt;var s,a={};if(!lt(i))return rt;try{s=st(e)}catch(t){return console.error(t),rt}return e=r.rectModule.getCaretRect(t,o),t=(r=at(n)).paddingBottom,o=r.paddingLeft,n=r.paddingRight,r=r.paddingTop,r=-e.top+r+s.scrollTop,t=e.bottom-s.clientHeight+t-s.scrollTop,r>1?a.top=s.scrollTop-r:t>1&&(a.top=s.scrollTop+t),o=-e.left+o+s.scrollLeft,n=e.right-s.clientWidth+n-s.scrollLeft,o>1?a.left=s.scrollLeft-o:n>1&&(a.left=s.scrollLeft+n),a},e.scrollPointIntoWindowView=function(t,e,n,i){if(!this.editor)return rt;var r,o={};if(!lt(i))return rt;try{r=st(e),window.visualViewport&&(r.clientHeight=window.visualViewport.height,r.clientWidth=window.visualViewport.width)}catch(t){return console.error(t),rt}var s=(l=at(n)).paddingBottom,a=l.paddingLeft,l=(n=l.paddingRight,l.paddingTop);l=-i.top+l,s=i.bottom-r.clientHeight+s;return e===document.documentElement&&(l+=r.scrollTop,s-=r.scrollTop),l>1?o.top=r.scrollTop-l:s>1&&(o.top=r.scrollTop+s),a=-i.left+a,n=i.right-r.clientWidth+n,a>1?o.left=r.scrollLeft-a:n>1&&(o.left=r.scrollLeft+n),o},e._scrollIntoViewport=function(t,e){var n,i=this.editor,r=this.scroller,o=this.zoneId,s=this.scrollerOptions,a=(e=void 0===e?{}:e).onlyScrollWhenCollapsed;e=i.selection.getSelection();a&&!e.isCollapsed()||!t||t.zoneId!==o&&o!==y.S||(!i.getStatus("preventScrolling")&&i.isEditable()?(e=i.rectModule.getRawCaretRect(t),o=rt,r!==document.scrollingElement&&(o=this.scrollPointIntoScrollerView(t,r,(null===(n=s.getScrollerPadding)||void 0===n?void 0:n.call(s))||0,e),r.scrollTo(o)),n=document.scrollingElement||window,r=rt,s.disableBodyScroll||(r=this.scrollPointIntoWindowView(t,n,(null===(t=s.getViewPortPadding)||void 0===t?void 0:t.call(s))||0,e),n.scrollTo(r)),(ut(o)||ut(r))&&this.emitScroll()):i.setStatus("preventScrolling",!1))},e.scrollIntoViewport=function(){for(var t,e,n=this,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];this.editor.isFocus()&&(e=(null===(t=i[1])||void 0===t?void 0:t._event)||"DEFAULT",void 0===this._timers[e]&&(this._scrollIntoViewport.apply(this,(0,o.d)([],(0,o._)(i),!1)),this._timers[e]=window.setTimeout((function(){n._timers[e]=void 0}),66)))},(0,o.a)([a.W],t.prototype,"getScroller",null),(0,o.a)([a.W],t.prototype,"emitScroll",null),(0,o.a)([a.W],t.prototype,"destroy",null),(0,o.a)([a.W],t.prototype,"init",null),(0,o.a)([a.W],t.prototype,"scrollTo",null),(0,o.a)([a.W],t.prototype,"scrollBy",null),(0,o.a)([a.W],t.prototype,"scrollPointIntoScrollerView",null),(0,o.a)([a.W],t.prototype,"scrollPointIntoWindowView",null),(0,o.a)([a.W],t.prototype,"_scrollIntoViewport",null),(0,o.a)([a.W],t.prototype,"scrollIntoViewport",null),t}();var dt=function(t){function e(e){var n=t.call(this,e)||this;return n.tagName=nt.Kw.TEXT,n._ref=$().createRef(),n._changes={},n.leafModelMap=new WeakMap,(e=n.props.editor).on(c.r.KEYDOWN,n.handleKeyDown,900),e.on(c.r.CONTENT_CHANGE,n.handleContentChange),n}(0,o.c)(e,t);var n=e.prototype;return n.handleContentChange=function(t){this._changes=t.changes,this.editor.once(c.r.PAINT,this.handlePaint)},n.handlePaint=function(){var t,e,n,i=(0,et.Ve)(this._ref.current,this.props.editor);i&&this._ref.current&&(e=i.start.zoneId,(n=this._changes[e])&&(t=i.start.line,e=null===(e=this.props.editor.getContentState().getZoneState(e))||void 0===e?void 0:e.getLine(t),n=n.some((function(e){return e.start===t})),e&&n&&this.updateViewModel(this._ref.current,e)))},n.handleKeyDown=function(t){var e,n,i,r,s,a;(0,it.Wl)(t.nativeEvent)&&this._ref&&(!(i=(n=(e=this.props.editor.selection).getSelection()).toPosition()).isCollapsed()||t.shiftKey||(r=(0,et.Ve)(this._ref.current,this.props.editor))&&(s=r.toPosition(),a=null,i.start===s.start&&n.start.zoneId===r.start.zoneId&&t.keyCode===l.VD.Right&&(a=(0,o.b)((0,o.b)({},i),{start:i.start+1})),(a=i.start===s.start+1&&n.start.zoneId===r.start.zoneId&&t.keyCode===l.VD.Left?(0,o.b)((0,o.b)({},i),{start:i.start-1}):a)&&(t.preventDefault(),t.stopPropagation(),t.preventEvent(),t.stopEvent(),e.setSelection(a,!0))))},n.handleRef=function(t){var e;t&&((e=null==(e=null===(e=this._ref.current)||void 0===e?void 0:e.closest("[".concat(l.MB,"]")))?void 0:e.__leafModel)&&(this.props.editor._getViewModel()._setLeaf(t,e),this.leafModelMap.set(t,e)),this._ref.current=t)},n.updateViewModel=function(t,e){var n=null==(i=null===(r=this._ref.current)||void 0===r?void 0:r.closest("[".concat(l.MB,"]")))?void 0:i.__leafModel,i=(r=n||{}).start,r=r.op;e=null!=e?e:n.lineState,e=i&&r?i+r.insert.length:e.length();this.props.editor._getViewModel()._setLeaf(t,(0,o.b)((0,o.b)({},n),{start:e}))},n.handleMouseDown=function(){var t;!this._ref||(t=(0,et.Ve)(this._ref.current,this.props.editor))&&this.props.editor.selection.setSelection(t,!0)},n.componentWillUnmount=function(){this.editor.off(c.r.KEYDOWN,this.handleKeyDown),this.editor.off(c.r.CONTENT_CHANGE,this.handleContentChange),this.editor.off(c.r.PAINT,this.handlePaint),this._ref&&this._ref.current&&this.props.editor._getViewModel()._deleteLeaf(this._ref.current)},n.render=function(){var t=nt.Kw.TEXT;return $().createElement(t,(0,o.b)({},((t={})[l.sq]=!0,t),{contentEditable:!1,ref:this.handleRef,onMouseDown:this.handleMouseDown,style:Object.assign({userSelect:"none"},null!==(t=this.props.style)&&void 0!==t?t:{})}),this.props.children)},(0,o.a)([a.W],e.prototype,"handleContentChange",null),(0,o.a)([a.W],e.prototype,"handlePaint",null),(0,o.a)([a.W],e.prototype,"handleKeyDown",null),(0,o.a)([a.W],e.prototype,"handleRef",null),(0,o.a)([a.W],e.prototype,"handleMouseDown",null),e}(nt.cc);(0,tt.eT)(dt);var ht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}(0,r._)(e,t);var n=e.prototype;return n.componentDidCreate=function(){var t,e;null===(e=(t=this.props).onCreate)||void 0===e||e.call(t)},n.handleRef=function(t){var e,n;null===(n=(e=this.props).onRef)||void 0===n||n.call(e,t),this.setRef(t)},n.render=function(){var t=this.props,e=t.style,n=t.children,r=this.zoneId,o={provides:{zoneId:r},key:r,ref:this.handleRef,style:Object.assign({},e||{outline:"none"},{cursor:this.props.editable?"text":"default"}),"data-zone-id":r,"data-zone-container":"*",className:["data-zone-id-"+r]};return(0,i.az)(i.ZC,o,n)},(0,r.b)([a.W],e.prototype,"handleRef",null),e}(i.wA),ft=function(t){var e,n;function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.setRef=function(e){var n,i;e&&(t.view=e,i=t.zoneId,(i=(n=t.props.editor).getContentState().getZoneState(i))&&n._getViewModel()._setNode(i,e))},t}return e=t,(0,o.c)(i,e),i.prototype.componentWillMount=function(){this.setScrollModule(null)},i.prototype.componentDidMount=function(){var t,e;null!==(t=(e=this.props).onMount)&&void 0!==t&&t.call(e,this.view),null!==(e=this.props.editor.getContentState().getZoneState(this.zoneId))&&void 0!==e&&e.setPlaceholder(this.props.placeholder||""),this.props.defaultContent&&console.log("[ZoneView]: defaultContent 已经废弃，请传入zoneId")},i.prototype.componentDidUpdate=function(t){this.setScrollModule({editor:t.editor,zoneId:t.zoneId,scroller:t.scroller})},i.prototype.setScrollModule=function(t){!function(t,e,n,i){var r;void 0===n&&(n=!0),void 0===i&&(i={});var s=e.editor,a=e.scroller,l=e.zoneId,u=null===(u=null===(r=null===(u=s.getContentState())||void 0===u?void 0:u.getZoneManager)||void 0===r?void 0:r.call(u))||void 0===u?void 0:u.getScrollModuleByZoneId(l);(!t||t.editor!==e.editor||!u||t.scroller!==a||t.zoneId!==l)&&(t=null,void 0===a||!0===a?t=document.scrollingElement||document.body:!1===a?t=null:(a instanceof Element||a instanceof Window)&&(t=a),null!==t?u=new ct(s,t,(0,o.b)((0,o.b)({},i),{getViewPortPadding:s.getViewPortPadding}),l,!1===n?[]:[{type:c.r.SELECTION_CHANGE,overideConfig:{triggerAfterPaint:!0}}]):null!=u&&u.destroy())}(t,{editor:this.props.editor,zoneId:this.props.zoneId,scroller:this.props.scroller},this.props.autoScroll,this.props.scrollerOptions)},i.prototype.componentWillUnmount=function(){var t=this.props.editor,e=t.getContentState().getZoneState(this.zoneId);e&&t._getViewModel()._resetNode(e),this.view&&t._getViewModel()._deleteNode(this.view)},Object.defineProperty(i.prototype,"zoneId",{get:function(){return this.props.zoneId},enumerable:!1,configurable:!0}),n=t=i,(0,o.c)(r,n),r;function r(){return null!==n&&n.apply(this,arguments)||this}}(ht),pt={color:"fontColor",textAlign:"alignHorizontal",textDecoration:"textDecoration"};function vt(t){Object.keys(pt).forEach((function(e){if(t[e]){var n=t[e],i=pt[e];if(delete t[e],"textDecoration"===e){var r=n.includes("underline"),o=n.includes("line-through");r&&(t.underline=!0),o&&(t.lineThrough=!0)}else t[i]=n}}))}function gt(t,e){for(var n={},i=0;i<e.length;i++){var r=e[i],o=t[r];o&&(n[r]=o)}return n}var yt=n("vsh_21917");!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}(0,o.c)(e,t)}((function(){}));var mt,_t,bt=n("vsh_38761"),Et=n("vsh_69811"),St=function(){function t(t){var e=t.wrappers,n=t.content;t=t.key;this.key=t||this.hashKey(n),this.wrappers=e,this.content=n}var e=t.prototype;return e.hashKey=function(t){var e="",n=t.length;return t.forEach((function(t){var i=t.getKey();t=i.length;e+=i.slice(0,Math.max(Math.ceil(8/n),1))+i[Math.floor(t/2)-1]+i.slice(Math.min(Math.ceil(-12/n),-1))})),e},e._refreshKey=function(){this.key=this.hashKey(this.content)},e.compare=function(e){if(!e||this.key!==e.getKey())return t.UNEQUAL;var n=this.content.length===e.content.length;if(n)for(var i=0,r=this.content.length;i<r;i++)if(this.content[i]!==e.content[i]){n=!1;break}return n?t.EQUAL:t.UDPATE},e.isEmpty=function(){return 0===this.content.length},e.getKey=function(){return this.key},e.isInvisible=function(){return this.content.every((function(t){return t._invisible}))},t.EQUAL=bt.A.EQUAL,t.UNEQUAL=bt.A.UNEQUAL,t.UDPATE=bt.A.UPDATE,t}();function wt(t){for(var e=new Map,n=0,i=t.length;n<i;n++){var r=t[n];e.set(r.getKey(),{data:r,index:n})}return e}function Ct(t,e,n,i){return e?e.index<t?{op:mt.MOVE,oldIndex:t,newIndex:n}:e.data.compare(i)===bt.A.EQUAL?{op:null,oldIndex:e.index+1}:{op:mt.UPDATE,oldIndex:e.index,newIndex:n}:{op:mt.INSERT,oldIndex:t,newIndex:n}}function It(t,e){var n,i;try{for(var r=(0,o.e)(t),s=r.next();!s.done;s=r.next()){var a=s.value;if(a._wrapperState){var l=a._wrapperState.getKey();return e.has(l)?void 0:(e.set(l,!0),l)}}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}}(_t=mt=mt||{})[_t.DELETE=-1]="DELETE",_t[_t.DONE=0]="DONE",_t[_t.INSERT=1]="INSERT",_t[_t.UPDATE=2]="UPDATE",_t[_t.MOVE=3]="MOVE";!function(){function t(t){this.props=t}t.prototype.shouldComponentUpdate=function(t){}}();var Tt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}(0,r._)(e,t);var n=e.prototype;return n.shouldComponentUpdate=function(t){var e,n;return t.offset!==this.props.offset||(null===(e=t.op.attributes)||void 0===e?void 0:e.enter)!==(null===(n=this.props.op.attributes)||void 0===n?void 0:n.enter)||!(!this._ref||!this._ref.props[l.nV]||t.op.insert===this._ref.props.content)},n.render=function(){var t,e,n=this,r=this.props,o=r.op,s=r.lineState,a=r.offset,u=((t={content:this.props.op.insert})[l.nV]=!0,t.ref=function(t){t&&n.handleTextViewRef(t,{op:o,start:a,lineState:s})},t);return(null===(e=o.attributes)||void 0===e?void 0:e.enter)&&(u[l.q7]=!0,!s.isTextEmpty()&&this.props.provides.weakWidth&&(u.style={fontSize:"0"})),(0,i.az)(i.xv,u)},e}(i.wA),xt=function(t){var e,n;function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleTextViewRef=function(e,n){e&&(t._ref=e,t.props.editor._getViewModel()._setLeaf(e,n))},t.componentWillUnmount=function(){t._ref&&t.props.editor._getViewModel()._deleteLeaf(t._ref)},t}return e=t,(0,o.c)(i,e),n=t=i,(0,o.c)(r,n),r;function r(){return null!==n&&n.apply(this,arguments)||this}}(Tt);!function(){function t(){}var e=t.prototype;e.componentWillUnmount=function(){},e.componentDidMount=function(){},e.updateRef=function(t){},e.shouldComponentUpdate=function(t,e){},e.addParentWrapper=function(t){return t},e.renderTextView=function(t){return null},e.renderChildView=function(t){return null},e.renderFinalView=function(t,e){return null},e.renderInlineWrapperView=function(t,e,n){return n},e.renderPlaceHolderView=function(t){return null}}();var kt=n("vsh_40289"),Mt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}(0,r._)(e,t);var n=e.prototype;return n.componentDidMount=function(){},n.componentWillUnmount=function(){},n.handleFocusEditor=function(){},n.handleBlurEditor=function(){},n.shouldComponentUpdate=function(t,e){var n=t.lineState,i=t.style;if(e.isFocus!==this.state.isFocus)return!0;var r=this.props.style;return!(0,g.X)(r,i)||!(!n||n===this.state.lineState)&&(this.setState({lineState:n}),!0)},n.isValidElement=function(t){return!0},n.addParentWrapper=function(t){return t||[]},n.renderTextView=function(t){return(0,i.az)(xt,t)},n.renderFinalView=function(t,e){var n,r,o=Object.assign(this.props.isInline?{}:{width:"100%"},t.style||{},(null===(n=this.props)||void 0===n?void 0:n.style)?null===(r=this.props)||void 0===r?void 0:r.style:{});return vt(o),(0,i.az)(i.hk,(0,yt._)({},t,{style:o}),e)},n.getPocketJSX=function(t){var e=t.isPocketWithoutFakeText,n=(0,i.az)(i.xv,{"data-ignore-mutation":!0,"date-fake-text":"","data-ignore-selection":"",content:""}),r=(0,i.az)(i.xv,{"data-ignore-mutation":!0,"date-fake-text":"","data-ignore-selection":"",content:""});return e?n:(0,i.az)(i.ZC,null,n,r)},n.updateRef=function(t){},n.renderChildView=function(t){var e,n=this,o=t.key,s=t.value,a=t.styleProps,u=t.customView,c=s.op,d=s.start,h=s.index,f=s.lineState;a.style&&vt(a.style);var p=(0,r.a)((0,r.a)({},a),((e={})[l.MB]=!0,e));return(0,i.az)(i.ZC,(0,yt._)({key:o,provides:{editor:this.props.editor,leafModel:s}},p,{ref:function(e){if(e){var i={op:c,start:d,index:h,lineState:f};e.__leafModel=i,n.props.editor._getViewModel()._setLeaf(e,i),t.renderContext=null,n._opToLeaf.set(c,e)}else{var r=n._opToLeaf.get(c);r&&(n.props.editor._getViewModel()._deleteLeaf(r),n._opToLeaf.delete(c))}}}),u)},n.renderInlineWrapperView=function(t,e,n){return(0,i.az)(t.type,(0,yt._)({key:e},t.props),n)},n.renderPlaceHolderView=function(t){var e,n=t.lineState,r=((e={selectable:!1})[l.nV]=!0,e.content=this.props.placeholder||"",e.style={fontColor:"#8f959e"},e.lineState=n,e);return(0,i.az)(i.hk,null,(0,i.az)(i.xv,r))},n.handleRef=function(t){if(t){var e=t.parent?this.$context.getElementByEid(t.parent):null;this.updateRef(e)}},n.render=function(){if(!this.state)return null;var t=this.renderView(),e=this.props.isInline?{}:{width:"100%"};return(0,i.az)(i.ZC,{ref:this.handleRef,className:["ace-line"],style:e},t)},(0,r.b)([kt.MR],e.prototype,"handleRef",null),e}(i.ZC),Rt=function(t){var e,n;function i(t){var n=e.call(this,t)||this;return n.mounted=!1,n._opToView=new Map,n._opToLeaf=new WeakMap,n._opViewKeyMap=new Map,n._opSum=0,n.renderView=function(){var t=n.props.editor,e=n.state.lineState,i=e.index,r=n.getFilterStack(i).lineState,s=r._getDelta(),a=[];return e.hasLineMarker()?((e=[]).push.apply(e,(0,o.d)([],(0,o._)(n.renderChildren(r,s.ops.slice(1))),!1)),e=n.renderParent(r,s.ops[0],e),Array.isArray(e)?a.push.apply(a,(0,o.d)([],(0,o._)(e),!1)):a.push(e)):a=n.renderChildren(r,s.ops),s=n.renderCustomLineView(r,a),r={isPocket:!1,isPocketWithoutFakeText:!1,index:i,info:{lineMarker:r.hasLineMarker()?1:0,zone:r.getZoneId()}},t.callAll("acePreWriteDomLineHTML",r),r.isPocket&&a.unshift(n.getPocketJSX({isPocketWithoutFakeText:r.isPocketWithoutFakeText})),n.reset(),s},n.renderChild=function(t,e,i,r){var s,a,l,u=n._opSum,c=n.renderTextView({op:e,lineState:t,editor:n.props.editor,offset:u}),d=(c=(l=n.renderCustomView(t,e,c,i)).view,{renderContext:l=l.renderContext,styleProps:{className:"",style:l.style},key:l.key,value:{op:e,start:u,index:r,lineState:t},customView:c}),h=(t=l.style,c=l.class,l.domAttributes);t&&(d.styleProps.style=t),c&&(d.styleProps.className=c),null!==(c=e.attributes)&&void 0!==c&&c.displayEnter&&(d.styleProps.className+=" not-display-enter"),c=Object.keys(h);try{for(var f=(0,o.e)(c),p=f.next();!p.done;p=f.next()){var v=p.value;d.styleProps[v]=h[v]}}catch(t){s={error:t}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(s)throw s.error}}return n._opSum+=e.insert.length,i.class="",(i=d.key)||(i=JSON.stringify(e.attributes)||"",e=n._opViewKeyMap.has(i)?n._opViewKeyMap.get(i)+1:0,n._opViewKeyMap.set(i,e),d.key=i+=e),n.renderChildView(d)},t=n.props.lineState,n.state={lineState:t,isFocus:n.props.editor.isFocus()},n}return e=t,(0,o.c)(i,e),i.prototype.updateState=function(t,e){this._node?this.setState({lineState:t},e):this.props.editor.error({message:"this._node undefined, zoneId: ".concat(this.state.lineState.getZoneId()),level:l.WV.ERROR})},i.prototype.componentDidMount=function(){var t;null!==(t=e.prototype.componentDidMount)&&void 0!==t&&t.call(this),this.mounted=!0,this.props.editor.callAll("lineDidMount",{lineState:this.state.lineState})},i.prototype.componentDidUpdate=function(t,e){var n=this;this._node&&(this.updateRef(this._node),Promise.resolve().then((function(){!1!==n.props.editor.mounted&&n.props.editor.callAll("lineDidUpdate",{data:{prev:e.lineState,curr:n.state.lineState},isUpdate:!0})})))},i.prototype.componentWillUnmount=function(){var t,e;this.mounted=!1;var n=this.props.editor,i=this.state.lineState,r=i.getZoneId(),s=n.getContentState().getZoneState(r);(r=n._getViewModel())._resetNode(i),r._deleteNode(i);var a=!1;if(s)try{for(var l=(0,o.e)(s),u=l.next();!u.done;u=l.next())if(u.value===i){a=!0;break}}catch(e){t={error:e}}finally{try{u&&!u.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}a||(n.callAll("lineWillUnmount",{lineState:this.state.lineState}),this.clear())},i.prototype.clear=function(){var t=this.props.editor,e=this.state.lineState,n=t._getViewModel(),i=e.getZoneId();(i=t.getContentState().getZoneState(i))&&i.getLineByKey(e.getKey())===e||n._deleteNode(this.state.lineState),this._opToView.clear(),this._opViewKeyMap.clear()},i.prototype.updateRef=function(t){e.prototype.updateRef.call(this,t);var n,i=this.props.editor._getViewModel();t&&(this._node=t,n=this.state.lineState,i._setNode(n,t))},i.prototype.getFilterStack=function(t){var e=this.props.editor,n=(t={lineState:n=this.state.lineState,index:t,callHookFrom:"render"},n.getKey());return e.callAll("_editorLineStateWillRender",t),t.lineState._setKey(n),t},i.prototype.processLocalAttributesAndGetMatchedPlugins=function(t){var e=this,n=new Set;return Object.keys(t).forEach((function(i){""===t[i]||(i=e.props.editor.pluginManager._matchPlugin({attributeKey:i,value:t[i],zoneId:e.state.lineState.getZoneId(),attributes:t}))&&n.add(i)})),(0,D.iI)(Array.from(n),"render")},i.prototype.renderCustomView=function(t,e,n,i){var r,s=this,a=(0,o.b)({},e.attributes||{}),u=this.state.lineState,c={op:e,lineState:t,attributes:a,insert:e.insert,domAttributes:{},children:n,class:i.class||"",style:i.style||{},key:"",index:u.index,zoneId:u.getZoneId()};return e.insert===l.Ed&&null!==(r=e.attributes)&&void 0!==r&&r.enter||this.processLocalAttributesAndGetMatchedPlugins(a).forEach((function(t){if(t.render){try{n=t.render(c)}catch(e){s.props.editor.error({message:"".concat(t.name," plugin render failed! Index: ").concat(u.index),level:l.WV.ERROR,e:e})}c=(0,o.b)((0,o.b)({},c),{children:n})}})),{view:n,renderContext:c}},i.prototype.renderParent=function(t,e,n){return n=this.renderCustomView(t,e,n,{tokenClass:""}).view,this.addParentWrapper(n)},i.prototype.reset=function(){this._opSum=0},i.prototype.shouldRenderPlaceHolder=function(){var t=(n=this.state).lineState,e=n.isFocus,n=this.props.editor.getContentState().getZoneState(t.getZoneId());return e&&0===t.index&&(null==n?void 0:n.isEmpty())&&this.props.editor.isEditable()},i.prototype.renderCustomLineView=function(t,e){var n=this,i=this.props.editor.pluginManager.getPlugins(),r=this.state.lineState,o={};e=i.reduce((function(e,i){if(i.renderLine){var s={lineState:t,children:e,style:o,index:r.index,editable:!0};try{var a=i.renderLine(s);if(a)return a}catch(s){return n.props.editor.error({message:"".concat(i.name," plugin renderLine failed! Index: ").concat(r.index),level:l.WV.ERROR,e:s}),e}}return e}),e);return this.renderFinalView({style:o},e)},i.prototype.normalizeOps=function(t){return t.reduce((function(t,e){var n,i=e.insert;return"string"==typeof i&&i.includes("\n")&&1<i.length?(n=i.split("\n")).forEach((function(i,r){i&&(t.push((0,o.b)((0,o.b)({},e),{insert:i})),r!==n.length-1&&t.push({attributes:(0,o.b)((0,o.b)({},null==e?void 0:e.attributes),{enter:"true"}),insert:l.Ed}))})):"\n"===i?t.push({attributes:(0,o.b)((0,o.b)({},null==e?void 0:e.attributes),{enter:"true"}),insert:l.Ed}):t.push(e),t}),[])},i.prototype.handleDisplayEnter=function(t){var e=this.props.editor.getContentState().schema;!t.some((function(t){return!function(t,e){var n,i,r;void 0===t&&(t={});try{for(var s=(0,o.e)(Object.keys(t)),a=s.next();!a.done;a=s.next()){var l=a.value,u=null===(r=e.get(l))||void 0===r?void 0:r.displayEnter;if("boolean"==typeof u)return u;if("function"==typeof u)return u(t[l])}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return!0}(t.attributes,e)}))||(t=t[t.length-1]).insert===l.Ed&&(t.attributes=(0,o.b)((0,o.b)({},null!==(t=t.attributes)&&void 0!==t?t:{}),{displayEnter:"false"}))},i.prototype.renderChildren=function(t,e){var n=this;e=this.normalizeOps(e),this.handleDisplayEnter(e);var i=[];return this._opToView.clear(),e.forEach((function(e,r){r=n.renderChild(t,e,{class:"",text:""},t.getLineMarker()?r+1:r),n._opToView.set(e,r),i.push(r)})),this._opViewKeyMap.clear(),this.renderInlineWrapper(i,e,t)},i.prototype.renderInlineWrapper=function(t,e,n){for(var i=this,r=e.reduce((function(e,r,s){var a=n.getOps().indexOf(r),l=(0,o.b)({},r.attributes||{}),u=e.length?e[e.length-1]:null,c=i._opToView.get(r);-1!==(c=t.indexOf(c))&&(s=c);c=i.processLocalAttributesAndGetMatchedPlugins(l);var d=[];return c.forEach((function(t){!t.renderInlineWrapper||(t=t.renderInlineWrapper({index:a,attributes:l,lineState:n}))&&i.isValidElement(t)&&d.push(t)})),0===d.length||(r=String(r.insert+JSON.stringify(r.attributes)+s),u&&function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(u.opWrappers,d)&&u.range[1]+1===s?(u.key+=r,u.range[1]=s):e.push({opWrappers:d,key:r,range:[s,s]})),e}),[]),s=r.length;0<=--s;)!function(){var e=(u=r[s]).opWrappers,n=u.key,a=u.range,u=(c=(0,o._)(a,2))[0],c=(a=c[1],t.slice(u,a+1));c=e.reduce((function(t,e){var r;return e.props=Object.assign({},e.props,((r={})[l.lE]="true",r)),i.renderInlineWrapperView(e,n,t)}),c);t.splice(u,a-u+1,c)}();return t},(0,o.a)([a.W],i.prototype,"updateRef",null),n=t=i,(0,o.c)(r,n),r;function r(){return null!==n&&n.apply(this,arguments)||this}}(Mt);!function(){function t(t){this.props=t}var e=t.prototype;e.renderLineView=function(t,e){},e.render=function(){return null}}();var Pt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderLineView=function(t){var n,i=t.getKey(),o={};return t instanceof St&&(o={id:i,ref:function(e){return e&&(t._node=e)}}),e.props.renderItem(t,(0,r.a)((0,r.a)({key:i},o),((n={})[l.PI]=!0,n)))},e}return(0,r._)(e,t),e.prototype.render=function(){var t=this,e=this.props.dataSource.map((function(e){return t.renderLineView(e)}));return this.props.editableInline?(0,i.az)(i.ZC,{style:this.props.style},e):(0,i.az)(i.MG,{style:this.props.style},e)},e}(i.wA),Ot=function(t){var e,n;function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._isMounted=!1,t.keyToNode=new Map,t.keyToData=new Map,t}return e=t,(0,o.c)(i,e),i.prototype.componentDidMount=function(){var t=this;this._isMounted=!0,this.dispatchPaintEvent(),this.props.dataSource.forEach((function(e){var n=e.getKey();t.keyToNode.set(n,e._node),t.keyToData.set(n,e)}))},i.prototype.componentDidUpdate=function(){var t=this,e=this.props.editor;e.getStatus("isPainting")&&(e.setStatus("isPainting",!1),this.dispatchPaintEvent(),this.keyToNode.clear(),this.keyToData.clear(),this.props.dataSource.forEach((function(e){var n=e.getKey();t.keyToNode.set(n,e._node),t.keyToData.set(n,e)})))},i.prototype.componentWillUnmount=function(){this._isMounted=!1,this.keyToNode.clear(),this.keyToData.clear()},i.prototype.dispatchPaintEvent=function(){var t=this;Promise.resolve().then((function(){t._isMounted&&t.props.onDidPaint(t.props.dataSource.map((function(t,e){return{data:t,originIndex:e}})))}))},n=t=i,(0,o.c)(r,n),r;function r(){return null!==n&&n.apply(this,arguments)||this}}(Pt);var Lt,Dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}(0,r._)(e,t);var n=e.prototype;return n.shouldComponentUpdate=function(t){return this.updateStateIfNeed(t),!0},n.render=function(){var t=this.props,e=t.renderContent,n=t.extraProps,o=t.style,s=this.state.data.content,a=this.calcAddLines();return s.map((function(t,s){return(0,i.az)(i.ZC,{style:o},(0,i.az)(i.MG,null,e(t,a[s]?(0,r.a)({},n):n)))}))},e}(i.wA),At=function(t){var e,n;function i(t){var n=e.call(this,t)||this;return n.prevContent=[],n._node=null,n.updateStateIfNeed=function(t){n.state.data.compare(t.data)!==bt.A.EQUAL&&n.setState({data:t.data})},n.calcAddLines=function(){var t=n.state.data.content,e={};return n.prevContent.length&&function(t,e){for(var n=wt(t),i=[],r=0,o=0,s=e.length;o<s;o++){var a=e[o],l=n.get(a.getKey());r=(a=Ct(r,l,o,a)).oldIndex,a.op&&i.push(a),l&&n.delete(l.data.getKey())}return n.forEach((function(t){i.push({op:mt.DELETE,oldIndex:t.index,newIndex:t.index})})),i}(n.prevContent,t).forEach((function(t){t.op===mt.INSERT&&(e[t.newIndex]=!0)})),e},n.state={data:t.data},n}return e=t,(0,o.c)(i,e),i.prototype.updateState=function(t,e){this.prevContent=this.state.data.content,this.setState({data:t},e)},n=t=i,(0,o.c)(r,n),r;function r(){return null!==n&&n.apply(this,arguments)||this}}(Dt),zt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}(0,r._)(e,t);var n=e.prototype;return n.renderLineView=function(t){var e=Object.assign(this.props.isInline?{}:{width:"100%"},t.style||{},gt(this.props.style||{},["alignHorizontal","weakWidth","minWidth"]));return(0,i.az)(Rt,(0,yt._)({provides:{weakWidth:e.weakWidth}},t,{isInline:this.props.isInline,style:e}))},n.renderWrapperView=function(t){return(0,i.az)(At,t)},n.renderListView=function(t){var e=Object.assign({},t.style||{},{width:"auto"},gt(this.props.style||{},["alignHorizontal"]));return(0,i.az)(Ot,(0,yt._)({},t,{editableInline:this.props.editableInline,style:e}))},n.renderTextView=function(t){return(0,i.az)(xt,t)},e}(i.wA),Nt=function(t){var e;function n(t){var n=e.call(this,t)||this;n.wrapperCache={},n.viewRefs={},n.handleContentChange=function(t){var e,i,r,o=t.deltaSet,s=t.previous,a=n.editor;t=n.content.getZoneId();o.deltas[t]&&((a=a.getContentState().getZoneState(t))&&(n.content=a),e=n.formatRenderContent(),i=n.state.dataSource,(t=s.getZoneState(t))&&n.updateZoneViewModel(t),n.task&&(n.task.canceled=!0),r=Promise.resolve().then((function(){r.canceled||(n.editor.setStatus("isPainting",!0),n.setState({dataSource:n.fixRenderContent(e,i)}))})),n.task=r)},n.initRefs=function(t,e){},n.updateItem=function(t,e,i){var r=t.getKey();(r=n.viewRefs[r])&&r.updateState(t,i)},n.handleDidPaint=function(t,e){var i,r,o;void 0===e&&(e={}),!1!==n.editor.mounted&&(i=(o=n.props).editor,r=o.onDidPaint,o=o.zoneId,r&&r(t,e),i.call(c.r.PAINT,{data:t,zoneId:o}),i.selection.getSelection().start.zoneId!==o||i.getStatus("isPerforming")||i.getStatus("preventUpdateDomSelection")||!i.isFocus()||i.selection.updateViewSelection(),n.editor.setStatus("contentChanged",!1),i.call(l.ip))},n.updateZoneViewModel=function(t){var e=n.editor._getViewModel(),i=e.getView(t);e._deleteNode(t),i&&e._setNode(n.content,i)};t=(i=n.props).editor;var i=i.zoneId;return(i=t.getContentState().getZoneState(i))&&(n.content=i),n.editor=t,n.state={dataSource:n.formatRenderContent()},t.on(c.r.CONTENT_CHANGE,n.handleContentChange,{priority:100,zoneId:n.content.getZoneId()}),t.on("_forceRefresh",n.handleRefresh),n}return e=t,(0,o.c)(n,e),n.prototype.handleRefresh=function(t){var e=t.zoneId,n=this.editor;(t=this.content.getZoneId())===e&&((t=n.getContentState().getZoneState(t))&&(this.content=t),this.editor.setStatus("isPainting",!0),this.setState({dataSource:this.formatRenderContent()}))},n.prototype.componentDidUpdate=function(){var t,e,n,i,r=this.state.dataSource,s={};try{for(var a=(0,o.e)(r),l=a.next();!l.done;l=a.next())s[l.value.getKey()]=!0}catch(e){t={error:e}}finally{try{l&&!l.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}try{for(var u=(0,o.e)(Object.keys(this.viewRefs)),c=u.next();!c.done;c=u.next()){var d=c.value;s[d]||delete this.viewRefs[d]}}catch(e){n={error:e}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}},n.prototype.componentWillUnmount=function(){this.editor.off("_forceRefresh",this.handleRefresh),this.editor.off(c.r.CONTENT_CHANGE,this.handleContentChange),this.task&&(this.task.canceled=!0)},n.defaultProps={onDidPaint:function(){return null},height:1/0,onMount:function(){return null}},(0,o.a)([a.W],n.prototype,"handleRefresh",null),n}(zt),Wt=function(t){var e;function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderWrapper=function(e,n){var i=t.editor,r={},o=Object.keys(e.wrappers).sort((function(t,n){return t=e.wrappers[t].plugin,n=e.wrappers[n].plugin,i.pluginManager._indexOf(t)-i.pluginManager._indexOf(n)})).map((function(t){t=(n=e.wrappers[t]).style;var n=n.element;return Object.assign(r,t),n})),s=e.getKey();return t.renderWrapperView({ref:function(e){return t.initRefs(s,e)},data:e,elements:o,style:r,extraProps:n,renderContent:t.renderWrapperContent})},t.renderWrapperContent=function(e,n){return t.renderLineChildren(e,n)},t.renderLineOrWrapper=function(e,n){return e instanceof Et.V||e instanceof St||(t.editor.log("[BaseZoneView][renderLineOrWrapper] error instance",e),t.editor.error({message:"[BaseZoneView][renderLineOrWrapper] BaseZoneView.renderLineOrWrapper error",level:l.WV.FATAL})),e instanceof Et.V?t.renderLineChildren(e,n):t.renderWrapper(e,n)},t.renderLineChildren=function(e,n){return void 0===n&&(n={}),t.renderLineView((0,o.b)((0,o.b)({key:e.getKey(),ref:function(n){return t.initRefs(e.getKey(),n)},editor:t.editor,lineState:e},n),{placeholder:t.props.placeholder||""}))},t.updateItem=function(e,n,i){var r=e.getKey();(r=t.viewRefs[r])&&r.updateState(e,i)},t}return e=t,(0,o.c)(n,e),n.prototype.getWrappers=function(t,e){var n,i;if(!t)return null;var r={};try{for(var s=(0,o.e)(t),a=s.next();!a.done;a=s.next()){var l,u,c,d=(0,o._)(a.value,2),h=d[0],f=d[1],p=h+f,v=this.wrapperCache[p],g=void 0;v?g=v:null===v||(l=this.props.editor.pluginManager._matchPlugin({attributeKey:h,value:f,attributes:t.toMap()}))&&l.renderWrapper&&(g=l),g&&(u={},c=g.renderWrapper({lineState:e,style:u}),r[p]={element:c,style:u,plugin:g},this.wrapperCache[p]=g)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return Object.keys(r).length?r:null},n.prototype.formatRenderContent=function(){for(var t,e=[],n=new Map,i=this,r=0,o=this.content.length();r<o;r++)!function(r,o){var s=i.content.getLine(r),a=i._getLineWrappers(s),l=[];if(a){for(l.push(s);r<o-1;){r++;var u=i.content.getLine(r),c=i._getLineWrappers(u);if(!i.isEqual(a,c)){r--;break}l.push(u)}var d=It(l,n),h=new St({wrappers:a,content:l,key:d});l.forEach((function(t){t._wrapperState=h})),h._node=document.createElement("div"),e.push(h)}else e.push(s);t=r}(r,o),r=t;var s=[],a=new Map;return e.forEach((function(t){var e,n=t.getKey();a.has(n)?((e=a.get(n))&&s.push(e),s.push(t),a.set(n,null)):a.set(n,t)})),s.forEach((function(t){t._refreshKey()})),e},n.prototype._getLineWrappers=function(t){var e;return void 0===t.__wrapper&&(e=t.getLineAttributes(),t.__wrapper=this.getWrappers(e,t)),t.__wrapper},n.prototype.isEqual=function(t,e){var n,i,r,s;if(!t||!e)return!1;var a=Object.keys(t);try{for(var l=(0,o.e)(a),u=l.next();!u.done;u=l.next()){var c=u.value;if((null===(r=t[c])||void 0===r?void 0:r.element)!==(null===(s=e[c])||void 0===s?void 0:s.element))return!1}}catch(t){n={error:t}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}return a.length===Object.keys(e).length},n.prototype.fixRenderContent=function(t,e){var n=wt(e);return t.map((function(t){if(t instanceof St){var e=n.get(t.getKey());if(!e)return t;if(t.compare(e.data)===bt.A.EQUAL)return e.data;t.compare(e.data)===bt.A.UPDATE&&(e.data._node||console.warn("old.data._node undefined",e.data.getKey()),t._node=e.data._node)}return t}))},n.prototype.componentDidUpdate=function(){var t,e,n,i,r=this.state.dataSource,s={};try{for(var a=(0,o.e)(r),l=a.next();!l.done;l=a.next())s[l.value.getKey()]=!0}catch(e){t={error:e}}finally{try{l&&!l.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}try{for(var u=(0,o.e)(Object.keys(this.viewRefs)),c=u.next();!c.done;c=u.next()){var d=c.value;s[d]||delete this.viewRefs[d]}}catch(e){n={error:e}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}},n.prototype.render=function(){var t=this.state.dataSource;return this.renderListView({editor:this.editor,dataSource:t,renderItem:this.renderLineOrWrapper,onDidPaint:this.handleDidPaint,updateItem:this.updateItem})},n.defaultProps={onDidPaint:function(){return null},height:1/0,onMount:function(){return null}},n}(Nt);!function(t){t[t.FRONT=0]="FRONT",t[t.BEHIND=1]="BEHIND"}(Lt=Lt||{});var Bt,Kt=n("vsh_51858"),Zt=n("vsh_70597"),jt=n("vsh_94923"),Ut=function(){function t(){var t=this;this.scrollThresholdOfBoundary=10,this.scrollSpeedDivider=20,this.scrollSpeed={x:null,y:null},this.scrollSmooth=function(){var e,n=t.scrollSpeed,i=t.scrollSpeedDivider,r=t.scrollContainer;null===n.y&&null===n.x||(null!==n.y&&0!==n.y&&(e=n.y/i,r.scrollTop+=Math.ceil(Math.abs(e))*(e/Math.abs(e))),null!==n.x&&0!==n.x&&(e=n.x/i,r.scrollLeft+=Math.ceil(Math.abs(e))*(e/Math.abs(e))),window.requestAnimationFrame(t.scrollSmooth))}}var e=t.prototype;return t.getInstance=function(e){var n=t.instance=t.instance?t.instance:new t;e=(n.scrollContainer=e).getBoundingClientRect();return n.containerRect={top:Math.max(0,e.top),bottom:Math.min(window.innerHeight,e.bottom),left:Math.max(0,e.left),right:Math.min(window.innerWidth,e.right)},t.instance},e.scrollIfNecessary=function(t){var e=(i=this).containerRect,n=i.scrollThresholdOfBoundary,i=i.scrollContainer;t.clientY<e.top+n?this.scrollSpeed.y=i.scrollTop?-Math.abs(e.top-t.clientY):null:t.clientY>e.bottom-n&&(this.scrollSpeed.y=i.scrollHeight-i.scrollTop-i.clientHeight?Math.abs(e.bottom-t.clientY):null),t.clientX<e.left+n?this.scrollSpeed.x=i.scrollLeft?-Math.abs(e.left-t.clientX):null:t.clientX>e.right-n&&(this.scrollSpeed.x=i.scrollWidth-i.scrollLeft-i.clientWidth?Math.abs(e.right-t.clientX):null),window.requestAnimationFrame(this.scrollSmooth)},e.cancelScroll=function(){this.scrollSpeed={x:null,y:null}},t}(),Vt=function(){function t(t){var e=this;this.editor=t,this.hiddenInput=jt.f,this.startModelRange=null,this.handleMousemove=function(t){var n,i,r,o;e.startModelRange&&(e.scrollHelper.scrollIfNecessary(t),n=e.editor,(r=e.calcRangePointWhenMouseEvent(t,"mousemove"))&&((i=e.startModelRange.start).zoneId===(o=r).zoneId?(2===e.mouseEventDetail?(t=e.selectCurrWord(r),o=e.startModelRange.start<=t.start?t.end:(i=e.startModelRange.end,t.start)):3===e.mouseEventDetail&&(r=e.selectCurrParagraph(r),o=e.startModelRange.start<=r.start?r.end:(i=e.startModelRange.end,r.start)),o=new(e.editor.modulesContainer.get(O.h.Range))({start:i,end:o,editor:n}),n.selection.setSelection(o,!0)):e.editor.selection.updateViewSelection()))},this.handleMouseup=function(){e.scrollHelper.cancelScroll(),e.editor.inputModel.focus(),e.resetStatus(),document.removeEventListener("mousemove",e.handleMousemove),document.removeEventListener("mouseup",e.handleMouseup)},this.handleContextmenu=function(){window.setTimeout((function(){jt.f.setToBack()}))},this.handleSelectionChange=function(t){(t=t.current).isCollapsed()&&(e.startModelRange=t)},jt.f.on(G.Ly.CONTEXT_MENU,this.handleContextmenu),this.editor.on(c.r.SELECTION_CHANGE,this.handleSelectionChange),t=this.editor.getScrollContainer(),this.scrollHelper=Ut.getInstance(t)}var e=t.prototype;return e.destroy=function(){jt.f.off(G.Ly.CONTEXT_MENU,this.handleContextmenu),this.editor.off(c.r.SELECTION_CHANGE,this.handleSelectionChange)},e.handleMousedown=function(t){var e,n,i,r,s=t.clientX,a=t.detail,l=t.button,u=t.shiftKey;1!==l&&(e=this.editor,(n=this.calcRangePointWhenMouseEvent(t,"mousedown"))&&(2!==l?(r=null,1===a?r=u&&this.startModelRange?new(this.editor.modulesContainer.get(O.h.Range))({start:this.startModelRange.isBackward?this.startModelRange.end:this.startModelRange.start,end:n,editor:e}):(i=(0,o.b)((0,o.b)({},n),{side:Lt.BEHIND}),l=e.rectModule.getRawCaretRect(n),u=e.rectModule.getRawCaretRect(i),i=Math.abs(l.left-s)<=Math.abs(u.left-s)?n:i,new(this.editor.modulesContainer.get(O.h.Range))({start:i,end:i,editor:e})):2===a?r=this.selectCurrWord(n):3===a&&(r=this.selectCurrParagraph(n)),r&&(e.selection.setSelection(r,!0),this.startModelRange=r,this.mouseEventDetail=a),document.addEventListener("mousemove",this.handleMousemove),document.addEventListener("mouseup",this.handleMouseup),t.preventDefault()):this.handleRightClick(t,n)))},e.handleRightClick=function(t,e){var n=t.clientX,i=t.clientY;t=(r=this.editor).selection.getSelection();(0,Zt.cA)(t,e)||(e=this.selectCurrWord(e),r.selection.setSelection(e,!0));var r=r.selection.getSelection(),o=this.editor.getContentState().getZoneState(r.start.zoneId);if(o){for(var s="",a=r.start,l=r.end,u=a.line;u<=l.line;u++){var c=(h=o.getLine(u)).getModelText(),d=u===a.line?a.offset:h.getLineMarker(),h=u===l.line?l.offset:h.length();s+=c.substring(d,h)}jt.f.updatePosition({top:i-5,left:n-5}),jt.f.setToFront(),jt.f.setTextAndSelectAll(s||" ")}},e.calcRangePointWhenMouseEvent=function(t,e){var n=t.clientX,i=t.clientY,r=N(n,i);return r?(t=r.textNode,n=r.offset,i=this.editor,(r=new Range).setStart(t,n),r.setEnd(t,n),(r=i.selection.toModelRange(r,{side:Lt.FRONT}))?r.start:(console.error("[selection] ".concat(e," return because can not convert view selection to model selection")),null)):(console.error("[selection] ".concat(e," return because can not convert coord to view selection")),null)},e.resetStatus=function(){this.mouseEventDetail=0},e.selectCurrWord=function(t){var e,n,i=(n=this.editor.getContentState().getZoneState(t.zoneId).getLine(t.line)).getModelText(),r=n.getLineMarker(),s=this.hiddenInput.expandWordRange({text:i,offset:t.offset,direction:"right"});return n=(n=Math.max(this.hiddenInput.expandWordRange({text:i,offset:s,direction:"left"}),r))<=t.offset?(e=n,s):(r=Math.max(this.hiddenInput.expandWordRange({text:i,offset:t.offset,direction:"left"}),r),r=this.hiddenInput.expandWordRange({text:i,offset:r,direction:"right"}),e=Math.min(r,t.offset),Math.max(n,t.offset+1)),new(this.editor.modulesContainer.get(O.h.Range))({start:(0,o.b)((0,o.b)({},t),{offset:e}),end:(0,o.b)((0,o.b)({},t),{offset:n}),editor:this.editor})},e.selectCurrParagraph=function(t){var e=(n=this.editor.getContentState().getZoneState(t.zoneId).getLine(t.line)).getLineMarker(),n=n.length()-1;return new(this.editor.modulesContainer.get(O.h.Range))({start:(0,o.b)((0,o.b)({},t),{offset:e}),end:(0,o.b)((0,o.b)({},t),{offset:n}),editor:this.editor})},t}(),Ft=function(){function t(t){var e=t.editor;t=t.range;this.ranges=[],this.prevRanges=[],this.updateViewSelectionTimes=0,this.preViewSelection=null,this.editor=e,t&&(this.ranges.push(t),this.prevRanges.push(t)),this._mouseHandler=new Vt(e),e.on(c.r.FOCUS,this.handleFocus),e.on(c.r.BLUR,this.handleBlur)}var e=t.prototype;return Object.defineProperty(e,"range",{get:function(){return this.ranges[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"prevRange",{get:function(){return this.prevRanges[0]},enumerable:!1,configurable:!0}),e.handleFocus=function(t){this.updateViewSelection()},e.handleBlur=function(t){},e.getRootNodeOfZone=function(t){return t&&(null===(t=this.editor.getContentState().getZoneState(t))||void 0===t?void 0:t.getContainer())||null},e.focus=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var i=null===(i=this.range)||void 0===i?void 0:i.start.zoneId;"boolean"==typeof(t=void 0!==t&&t)?n=e:i=t,!i||!n&&this.hasFocus(i)||this.getRootNodeOfZone(i)&&(this.editor.focus(),this.setSelection(this.ranges,!0))},e.hasFocus=function(t){var e=null!=t?t:null===(e=this.range)||void 0===e?void 0:e.start.zoneId;return!!e&&this.editor.isFocus(e)},e.getSelection=function(t,e){var n=this.range;return"string"==typeof t?n=this.ranges.find((function(e){return e.start.zoneId===t}))||null:e=t,e=e||this.editor.getContentState(),n&&e.getZoneState(n.start.zoneId)?n.clone(e):n},e.getMultipleSelection=function(){var t=this;return this.ranges.map((function(e){return t.editor.getContentState().getZoneState(e.start.zoneId)?e.clone():e}))},e.isZoneInSelection=function(t){for(var e=!1,n=0,i=this.ranges.length;n<i;++n)if(this.ranges[n].start.zoneId===t){e=!0;break}return e},e._calcCompleteModelRange=function(t){var e=this.editor,n=this.editor.modulesContainer.get(O.h.Range),i=null;switch(typeof t.start){case"number":i=new z.L((0,o.b)((0,o.b)({},t),{editor:e})).toRange();break;case"object":i=new n((0,o.b)((0,o.b)({},t),{editor:e}))}return i},e._correctModelRange=function(t){return new(this.editor.modulesContainer.get(O.h.Range))({editor:this.editor,start:this.fixRangePoint(t.start),end:this.fixRangePoint(t.end),isBackward:t.isBackward})},e.fixRangePoint=function(t){var e=this.editor,n=t.zoneId;return(e=e.getContentState().getZoneState(n))?(n=e.length()-1,t.line=Math.max(0,t.line),t.line>n&&(t.line=n,t.offset=e.getLine(n).getModelText().length-1),e=e.getLine(t.line),t.offset=Math.min(e.getModelText().length-1,t.offset),t.offset<=0&&(t.offset=e.hasLineMarker()?1:0),t):t},e._replaceSingleRangeModel=function(t,e){void 0===e&&(e=!1);var n,i=this._calcCompleteModelRange(t);!i||(t=-1===(n=this.ranges.findIndex((function(t){return t.start.zoneId===(null==i?void 0:i.start.zoneId)})))?null:this.ranges[n])&&(this.prevRanges=this.ranges,!e&&Kt.W.isRangeEqual(t,i)||(i=this._correctModelRange(i),(t=this.ranges.slice(0))[n]=i,this.ranges=t))},e._setSelectionModel=function(t,e){var n,i,r=this;void 0===e&&(e=!1);t=Array.isArray(t)?t:[t];var s=[];try{for(var a=(0,o.e)(t),l=a.next();!l.done;l=a.next()){var u=l.value,c=this._calcCompleteModelRange(u);c&&s.push(c)}}catch(t){n={error:t}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}this.prevRanges=this.ranges,!e&&Kt.W.isRangesEqual(this.ranges,s)||(s=s.map((function(t){return r._correctModelRange(t)})),this.ranges=s)},e.setSelection=function(t,e){var n=!1!==e;void 0===e&&(e=!1),this._setSelectionModel(t),this._dispatchEvent(e),n&&this.updateViewSelection(e)},e._dispatchEvent=function(t){var e=this.ranges,n=this.prevRanges;!t&&Kt.W.isRangesEqual(n,e)||this.range&&this.editor.call(c.r.SELECTION_CHANGE,{previousRanges:n,currentRanges:e,previous:this.prevRange,current:this.range,attributes:this.editor.getContentState().getAttributes(this.range.start,this.range.end)})},e.setCursorActive=function(t,e){this.cursor.setActive(t,e=void 0===e||e)},e.setCursorPosition=function(t){this._setCursorPosition(t)},e.isInSamePartOfLine=function(t,e){return t=this.editor.rectModule.getCaretRect(t),e=this.editor.rectModule.getCaretRect(e),(0,Zt.DP)(t,e)},e.isAtLineFirstPart=function(t){var e=this.editor.getContentState().getZoneState(t.zoneId);return!!e&&((e=e.getLine(t.line))?(e={line:t.line,offset:e.getLineMarker(),zoneId:t.zoneId},this.isInSamePartOfLine(t,e)):(console.error("[selection] isAtLineFirstPart error: line illegal"),!1))},e.isAtLineLastPart=function(t){var e=this.editor.getContentState().getZoneState(t.zoneId);return!!e&&((e=e.getLine(t.line))?(e={line:t.line,offset:e.length()-1,zoneId:t.zoneId},this.isInSamePartOfLine(t,e)):(console.error("[selection] isAtLineLastPart error: line illegal"),!1))},e.selectAll=function(t){void 0===t&&(t=y.S);var e,n,i=this.editor.getContentState().getZoneState(t);i&&(e=i.getLine(0),(n=i.getLine(i.length()-1))&&e&&(t=new(this.editor.modulesContainer.get(O.h.Range))({editor:this.editor,start:{line:0,offset:e.hasLineMarker()?1:0,zoneId:t},end:{line:i.length()-1,offset:n.length()-1,zoneId:t}}),this.setSelection(t),this.updateViewSelection()))},e.isSelectingAll=function(t){void 0===t&&(t=y.S);var e=this.getSelection(t);if(!e)return!1;var n=e.start,i=e.end,r=this.editor.getContentState().getZoneState(t);return!!r&&(e=r.length()-1,t=r.getLine(0),!(!(r=r.getLine(e))||!t)&&0===n.line&&n.offset===(t.hasLineMarker()?1:0)&&i.line===e&&i.offset===r.length()-1)},e._fixOffsetOverload=function(t){var e=(0,o.b)({},t),n=t.zoneId,i=t.line,r=t.offset,s=this.editor.getContentState().getZoneState(n);if(!s)return t;var a=s.getLine(i);if(!a)return t;var l=a.hasLineMarker()?1:0;n=a.length()-1;if(r<l)if(0<i){if(--e.line,!(a=s.getLine(e.line)))return t;e.offset=a.length()-1}else e.offset=l;return n<r&&(i<s.length()-1?(e.line+=1,e.offset=null!==(s=s.getLine(e.line))&&void 0!==s&&s.hasLineMarker()?1:0):e.offset=n),e},e.resetDomSelectionFlags=function(){this.preViewSelection=null,this.updateViewSelectionTimes=0},e.checkIsDeadLoop=function(t){var e=this;if(this.preViewSelection!==t||null===t)return this.resetDomSelectionFlags(),!1;if(this.updateViewSelectionTimes++,this.updateViewSelectionTimes>=100){var n="[Selection][_updateDOMSelection] 'update too many times: ".concat(this.updateViewSelectionTimes,"，\n          range:").concat(this.range);return 100===this.updateViewSelectionTimes&&setTimeout((function(){e.resetDomSelectionFlags(),console.warn(n)}),200),!0}return!1},e.destroy=function(){this.editor.off(c.r.FOCUS,this.handleFocus),this.editor.off(c.r.BLUR,this.handleBlur),this._mouseHandler.destroy()},e.toModelRange=function(t,e){return this._toModelRange(t,e)},(0,o.a)([a.W],t.prototype,"handleFocus",null),(0,o.a)([a.W],t.prototype,"handleBlur",null),t}();function Ht(t){return"Text"===(null==t?void 0:t.type.key)}function Xt(t,e){return Object.prototype.hasOwnProperty.call(t.props,e)&&!!t.props[e]}function Yt(t,e,n){if(!t||!t.parent)return null;for(var r=t;r;){if(e.every((function(t){return Xt(r,t)})))return r;if(null==n?void 0:n.every((function(t){return Xt(r,t)})))break;if(!r.parent)break;r=(0,i.ST)(r).getElementByEid(r.parent)}return null}function Gt(t,e){if(!t||!e)return!1;if(!e.parent)return!1;if(t.eid===e.eid)return!0;for(var n=(0,i.ST)(e),r=n.getElementByEid(e.parent);r;){if(r.eid===t.eid)return!0;if(!r.parent)return!1;r=n.getElementByEid(r.parent)}return!1}function qt(t,e,n){if(void 0===n&&(n=1/0),!t)return null;var o=[],s=function(t){var a,l,u;if(o.length!==n){var c=t.children.map((function(e){return(0,i.ST)(t).getElementByEid(e)})),d=function(t){if(!t)return"continue";e.every((function(e){return Xt(t,e)}))&&o.push(t),(null===(u=t.children)||void 0===u?void 0:u.length)&&s(t)};try{for(var h=(0,r.c)(c),f=h.next();!f.done;f=h.next()){d(f.value)}}catch(t){a={error:t}}finally{try{f&&!f.done&&(l=h.return)&&l.call(h)}finally{if(a)throw a.error}}}};return s(t),o.length?o:null}function Qt(t){var e;return t?(null===(e=t.children)||void 0===e?void 0:e.length)?Qt((0,i.ST)(t).getElementByEid(t.children[0])):t:null}function Jt(t){var e;return t?(null===(e=t.children)||void 0===e?void 0:e.length)?Jt((0,i.ST)(t).getElementByEid(t.children[t.children.length-1])):t:null}function $t(t){var e,n;return Ht(t)?(null===(e=t.props.content)||void 0===e?void 0:e.length)||0:(null===(n=t.children)||void 0===n?void 0:n.length)||0}function te(t){var e;return void 0!==(null===(e=null==t?void 0:t.props.provides)||void 0===e?void 0:e[l.eu])||!!le(t)}function ee(t){return!(!t||!Xt(t,l.VI))}function ne(t){return!(!t||!Xt(t,l.q7))}function ie(t){return!(!t||!Xt(t,l.nV)||ne(t)||te(t))}function re(t){return!!de(t)}function oe(t){return t?Yt(t,[l.PI],[l.PI]):null}function se(t,e,n){if(!t)return null;"string"==typeof e&&(e=[e]),"string"==typeof n&&(n=[n]);var i=Yt(t,e,n),r=oe(t);return i&&r&&Gt(r,i)?i:null}function ae(t,e,n){if(!t)return null;var r=oe(t);if(!r)return null;"string"==typeof e&&(e=[e]),"string"==typeof n&&(n=[n]);for(var o=t,s=null,a=(0,i.ST)(t);o&&o!==r&&(e.find((function(t){return Xt(o,t)}))&&(s=o),!n.find((function(t){return Xt(o,t)})));)o=o.parent?a.getElementByEid(o.parent):null;return s}function le(t){return se(t,l.eu,l.MB)}function ue(t){return se(t,l.sq,l.MB)}function ce(t){var e,n,o,s=[],a=null===(e=t.props.provides)||void 0===e?void 0:e.zoneId,u=(0,i.ST)(t),c=[];for(c.push.apply(c,(0,r.d)([],(0,r.e)(t.children||[]),!1));c.length;){var d=c.pop(),h=u.getElementByEid(d);h&&(a&&(null===(n=h.props.provides)||void 0===n?void 0:n.zoneId)!==a||(Xt(h,l.nV)||Xt(h,l.eu)||Xt(h,l.VI)?s.push(h):!(null===(o=h.children)||void 0===o?void 0:o.length)||Xt(h,l.eu)||Xt(h,l.Ks)||c.push.apply(c,(0,r.d)([],(0,r.e)(h.children||[]),!1))))}return s.reverse().filter((function(t){var e;return!Xt(t,l.eu)||(null===(e=t.props[l.eu])||void 0===e?void 0:e.length)}))}function de(t){var e;return t?Xt(t,l.VI)?t:(null===(e=qt(t,[l.VI],1))||void 0===e?void 0:e[0])||null:null}function he(t){return t&&Xt(t,l.eu)?t.props[l.eu]:null}function fe(t){var e;return(null===(e=t.props[l.eu])||void 0===e?void 0:e.length)||0}function pe(t){var e=function(t){var e,n=0;Ht(t)&&(n=(null===(e=t.props.content)||void 0===e?void 0:e.length)||0);return n}(t);if(e>0)return e;for(var n=0;n<t.children.length;n++){var r=(0,i.ST)(t).getElementByEid(t.children[n]);e+=r?pe(r):0}return e}function ve(t,e,n){if(!e||!t)return!1;if(e&&e===t)return!0;if(!t.parent)return!1;for(var r=(0,i.ST)(t),o=t,s=r.getElementByEid(t.parent);s;){var a="begin"===n?0:"end"===n?s.children.length-1:0;if(s.children.indexOf(o.eid)!==a)return!1;if(!s.parent)return!1;if(o=s,(s=r.getElementByEid(s.parent))===e)return!0}return!1}function ge(t,e){var n,i=oe(e);if(i){var o=ce(i),s=o.indexOf(t),a=o.indexOf(e);return s>a&&(a=(n=(0,r.e)([s,a],2))[0],s=n[1]),o.slice(s,a).every((function(t){return ee(t)}))}return!1}function ye(t,e){if(!e)return!1;var n=e.startPoint.node.props.provides,i=e.endPoint.node.props.provides,r=null==n?void 0:n.zoneId,o=null==n?void 0:n.editor,s=null==i?void 0:i.zoneId,a=null==i?void 0:i.editor;return!o||!a||(t!==o||t!==a||(o!==a||(r&&s?r!==s:!(!r&&!s)||!r&&!s)))}function me(t,e,n){void 0===n&&(n=!1);var i=t._getViewModel(),r=i.getModel(e);if(!r){var o=Yt(e,[l.Ks]);if(!o)return null;var s=qt(o,[l.PI]);if(!(null==s?void 0:s.length))return null;var a=i.getModel(o),u=(null==a?void 0:a.getZoneId())||o.props[l.P9];if(!u)return null;if(a||(a=t.getContentState().getZoneState(u)),!a)return null;var c=Array.from(s).indexOf(e),d=a.getLine(c);if(!d)return null;r=d}if(Array.isArray(r)){var h=r[0],f=r[r.length-1];r=n?f:h}return r}function _e(t,e,n){var r=t.children,o=(0,i.ST)(t),s=o.getElementByEid(r[e]),a=e,l=!1,u=!1;if(!s)return null;for(;!(0!==(null==s?void 0:s.children.length)||l&&u);)a>=r.length?(l=!0,a=e-1,n="backward"):a<0?(u=!0,a=e+1,n="forward"):(s=o.getElementByEid(r[e]),a+="forward"===n?1:-1);return s}var be,Ee;(Bt={})[l.VD.Left]=!1,Bt[l.VD.Up]=!1,Bt[l.VD.Right]=!0,Bt[l.VD.Down]=!0;function Se(t,e){return t.node===e.node&&t.offset===e.offset}function we(t,e,n,r){var o,s,a,u,c,d,h,f;if(void 0===r&&(r=!0),ie(e.node))return e;if((f=e.node)&&Xt(f,l.sq)||ue(f)){var p=function(t){return ae(t,l.sq,l.MB)}(e.node);return p?{node:w=null!==(o=Jt(p))&&void 0!==o?o:p,offset:S=$t(w)}:e}var v=oe(e.node);if(!v)return e;var g=ce(v),y=g.findIndex((function(t){return Gt(t,e.node)}));if(-1===y)return e;var m=g[y+1],_=g[y-1],b=e.node,E=e.offset;if(ee(b)&&!te(b))return te(m)?{node:null!==(s=Qt(b))&&void 0!==s?s:b,offset:0}:{node:w=null!==(a=Jt(b))&&void 0!==a?a:b,offset:S=$t(w)};if(ne(b)){if(!_)return e;var S=$t(w=null!==(u=Jt(_))&&void 0!==u?u:_);return ie(_)?{node:w,offset:S}:we(t,{node:w,offset:S},n)}if(te(b)){var w,C=null!==(c=function(t){return ae(t,l.eu,l.MB)}(b))&&void 0!==c?c:b;if((n===Ee.LINE||n===Ee.PARA)&&!(0,i.Ft)(t,C))r=E>=pe(C)/2;if(ee(m)){var I=$t(null!==(d=Jt(m))&&void 0!==d?d:m);return{node:(r=ge(t.node,r?m:_)?!r:r)?m:_,offset:r?I:0}}return{node:w=null!==(h=Jt(C))&&void 0!==h?h:C,offset:S=$t(w)}}return e}function Ce(t){var e,n=t.node;if(te(n))return t;var r=t.offset,o=t.atEnd,s=t.isEdge;if(null==n?void 0:n.children.length){var a=(0,i.ST)(t.node),l=(r=Math.min(r,n.children.length))===n.children.length,u=l?"backward":"forward",c=l?r-1:r;for(n=a.getElementByEid(n.children[c]);null==n?void 0:n.children.length;){n=_e(n,l?n.children.length-1:0,u)}if(!n)return t;if("EmbedDOM"===n.type.key){var d=n.parent&&a.getElementByEid(n.parent);if(d)return{node:d,offset:r,atEnd:o,isEdge:s}}r=l&&((null===(e=n.props.content)||void 0===e?void 0:e.length)||0)}return{node:n,offset:r,atEnd:o,isEdge:s}}function Ie(t,e,n){if(!t.isCollapsed&&!e.isRange&&e.mode===Ee.CHAR){var r=t.isBackward?t.endPoint:t.startPoint;return e.forward&&(r=t.isBackward?t.startPoint:t.endPoint),{startPoint:r,endPoint:r,isBackward:!1,isCollapsed:!1}}var o=n||t,s=(0,i.r6)(t,e);if(!s)return t;if(Se(s.endPoint,t.endPoint))return e.mode!==Ee.LINE?t:(e.mode=Ee.INLINE,Ie(s,e,o));if(ie(s.endPoint.node)){if(ee(o.endPoint.node)||ne(o.endPoint.node)){var a=oe(s.endPoint.node),l=a&&ce(a),u=null==l?void 0:l.findIndex((function(t){return Gt(t,s.endPoint.node)})),c=void 0!==u&&l&&l[u-1];if(0===s.endPoint.offset&&c&&Gt(c,o.endPoint.node))return Ie(s,e,o);var d=void 0!==u&&l&&l[u+1],h=$t(s.endPoint.node);if(s.endPoint.offset===h&&d&&Gt(d,o.endPoint.node))return Ie(s,e,o)}return s}var f=we(o.endPoint,s.endPoint,e.mode,e.forward);if(e.mode===Ee.CHAR&&ee(f.node)){if(f.node===o.endPoint.node)return Ie(s,e,o);if(!($t(o.endPoint.node)!==o.endPoint.offset&&0!==o.endPoint.offset||te(t.endPoint.node)||n))return Ie(s,e,o);if(!Se(f,o.endPoint)&&ee(o.endPoint.node)&&!te(o.endPoint.node)&&(0,i.Ft)(o.endPoint,f.node)&&ge(o.endPoint.node,f.node))return Ie(s,e,o)}return e.mode===Ee.LINE&&ee(f.node)&&f.node===o.endPoint.node?Ie(s,e,o):Object.assign({},s,{endPoint:f,startPoint:e.isRange?s.startPoint:f})}!function(t){t.LEFT="Left",t.UP="Up",t.RIGHT="Right",t.DOWN="Down",t.PAGE_UP="PageUp",t.PAGE_DOWN="PageDown",t.HOME="Home",t.END="End",t.MAC_CTRL_A="MacCtrlA",t.MAC_CTRL_E="MacCtrlE"}(be||(be={})),function(t){t.CHAR="char",t.WORD="word",t.LINE="line",t.INLINE="inline",t.PARA="para",t.DOC="doc"}(Ee||(Ee={}));var Te=function(t){function e(e){var n=e.editor,i=e.range,r=e.context,o=t.call(this,{editor:n,range:i})||this;return o._handleRoadsterSelectionChange=function(){if(!o.editor.getStatus("stopUpdateSelection")){var t=o._getRoadsterRange();if(t&&!o._isUnEditableRange(t))if(ye(o.editor,t))o._updateCaretAndHiddenInputPosition({currentRange:t});else{var e=o._toModelRange(t);e&&o.setSelection(e)}else o.editor.blur()}},o.context=r,o.cursor=X,o}(0,r._)(e,t);var n=e.prototype;return n.updateViewSelection=function(t){var e,n,i=this.range;if(i&&!(this.ranges.length>1)){var r=this._toRoadsterRange(i),o=this._getRoadsterRange();o=function(t){if(!t)return null;var e=t.startPoint.node===t.endPoint.node&&t.startPoint.offset===t.endPoint.offset;return e&&!t.isCollapsed&&(t.isCollapsed=!0),e&&t.isBackward&&(t.isBackward=!1),t}(o);var s=function(t){return!t||null!==t.startPoint.node&&null!==t.endPoint.node&&"number"==typeof t.startPoint.offset&&"number"==typeof t.endPoint.offset}(r);if(s){var a=function(t,e){return t===e||!(!t||!e)&&t.startPoint.node===e.startPoint.node&&t.startPoint.offset===e.startPoint.offset&&t.startPoint.atEnd===e.startPoint.atEnd&&t.endPoint.node===e.endPoint.node&&t.endPoint.offset===e.endPoint.offset&&t.endPoint.atEnd===e.endPoint.atEnd&&t.isBackward===e.isBackward&&t.isCollapsed===e.isCollapsed}(r,o);(t||!ye(this.editor,o)&&!a)&&(null===(n=(e=this.context).setSelection)||void 0===n||n.call(e,r)),this._updateCaretAndHiddenInputPosition({currentRange:r}),this.editor.call(c.r.SELECTION_CHANGE_AND_DOM_UPDATE,{selection:this.range,fromView:!t})}}},n._updateCaretAndHiddenInputPosition=function(t){var e,n,r=t.currentRange;!r&&this.range&&(r=this._toRoadsterRange(this.range));var o=null===(e=this._getRoadsterRange())||void 0===e?void 0:e.isCollapsed;if(this.editor.isFocus()){if(o&&r&&!this._needToHiddenCursor(r)){var s=(0,i.TK)(r),a=t.delayCursorAnimation,l=void 0===a||a;this._setCursorPosition(s,l);var u=null===(n=(0,i.Dx)(r.endPoint.node))||void 0===n?void 0:n.fontColor;this.cursor.applyColor(u)}else this._setCursorPosition(null);this.editor.inputModel.updatePosition()}},n._needToHiddenCursor=function(t){var e=(0,i.Gi)(t.startPoint.node);if(!e)return!1;for(var n=(0,i.TK)(t),r=n.left,o=n.top,s=n.height;e;){var a=(0,i.BC)(e),l=a.left,u=a.width,c=a.top,d=a.height;if(r<l||r>l+u||o>c+d||o+s<c)return!0;if(!e.parent)return!1;var h=this.context.getElementByEid(e.parent);if(!h)return!1;e=(0,i.Gi)(h)}return!1},n.toRoadsterRange=function(t,e){return void 0===e&&(e={ignoreNormalize:!1}),this._toRoadsterRange(t,e)},n._getRoadsterRange=function(){var t,e,n;return null!==(n=null===(e=(t=this.context).getSelection)||void 0===e?void 0:e.call(t))&&void 0!==n?n:null},n._toRoadsterRange=function(t,e){var n;void 0===e&&(e={ignoreNormalize:!1});var i=t.start,o=t.end,s=t.isBackward;t.isCollapsed()&&(s=!1),s&&(i=(n=(0,r.e)([o,i],2))[0],o=n[1]);var a=this._toRoadsterRangePoint(i),l=this._toRoadsterRangePoint(o);if(!a.node||!l.node)return null;if(e.ignoreNormalize)return{startPoint:a,endPoint:l,isBackward:s,isCollapsed:t.isCollapsed()};var u=this._normalizeRoadsterRange(a,l,t);return{startPoint:u.start,endPoint:u.end,isBackward:s,isCollapsed:t.isCollapsed()}},n._toRoadsterRangePoint=function(t){var e,n=t.line,i=t.zoneId,o=t.offset,s=t.side,a=t.isEdge,l=this._getRoadsterLine(i,n);if(!l)return{node:null,offset:0};var u=null===(e=this.editor.getContentState().getZoneState(i))||void 0===e?void 0:e.getLine(n);return u?(0,r.a)((0,r.a)({},this._toRoadsterPoint(l,Math.max(o-((null==u?void 0:u.hasLineMarker())?1:0),0),s)),{atEnd:s===Lt.FRONT||s!==Lt.BEHIND&&void 0,isEdge:a}):{node:null,offset:0}},n._toRoadsterPoint=function(t,e,n){var i,r;if(!t)return{node:t,offset:0};for(var o=ce(t),s=0,a=0;a<o.length;a++){var u=o[a],c=(null===(i=u.props.content)||void 0===i?void 0:i.length)||0;if(!!u.props[l.eu]){var d=u.props[l.eu];c=d?Math.min(d.length,e-s):0}if(!!u.props[l.VI]&&(c=0),!((s+=c)<e))return s===e&&(null===(r=o[a+1])||void 0===r?void 0:r.props[l.VI])?{node:o[a+1],offset:0}:{node:u,offset:Math.max(c+e-s,0)}}return{node:t,offset:0}},n._normalizeRoadsterRange=function(t,e,n){var i,o,s,a;t=Ce(t),e=Ce(e);var u=t.node,c=t.offset,d=e.node,h=e.offset,f=n.start,p=n.end;n.isBackward&&(f=(i=(0,r.e)([p,f],2))[0],p=i[1]);var v=te(u),g=te(d),y=ee(u);if(!v&&!g&&(u&&u===d&&t.offset===e.offset&&(x=u)&&Yt(x,[l.q7],[l.MB]))){var m={node:x,offset:0,isEdge:t.isEdge};return{start:m,end:m}}if(v&&re(u)&&u===d&&f<p)return{start:t,end:e};var _=(null===(o=he(le(d)))||void 0===o?void 0:o.length)||0;if(v&&0===c&&re(u)&&g&&h===_&&re(d))return{start:t,end:e};if(v&&g&&u!==d&&!re(u)&&!re(d)){var b=this._getRoadsterLine(f.zoneId,f.line),E=this._getRoadsterLine(p.zoneId,p.line);return{start:this._amendRoadsterPoint(t,b,1),end:this._amendRoadsterPoint(e,E,1)}}if(n.isCollapsed()&&re(u)&&1===c){var S=oe(u),w=S&&ce(S),C=w?w.indexOf(u):-1;if(w&&C>=0&&te(w[C+1]))return{start:{node:u,offset:0},end:{node:u,offset:0}};var I=this._getRoadsterLine(f.zoneId,f.line);return{start:M=this._amendRoadsterPoint(t,I,1),end:M}}var T=(null===(s=he(le(u)))||void 0===s?void 0:s.length)||0;if(n.isCollapsed()&&v&&c===T){var x,k=this._getRoadsterLine(f.zoneId,f.line);return(x=(M=this._amendRoadsterPoint(t,k,1)).node)&&Yt(x,[l.q7],[l.MB])&&(M.offset=1),{start:M,end:M}}if(n.isCollapsed()&&v&&0===c){k=this._getRoadsterLine(f.zoneId,f.line);return{start:M=this._amendRoadsterPoint(t,k,-1),end:M}}if(v&&g&&u!==d&&n.isBackward){var M;k=this._getRoadsterLine(p.zoneId,p.line);return{start:t,end:M=this._amendRoadsterPoint(e,k,1)}}var R=u&&this.context.getElementByEid(u.parent),P=null==R?void 0:R.children.findIndex((function(t){return t===u.eid}));if(y&&g&&R&&R.children[P+1]===d.eid&&de(d))return{start:(0,r.a)((0,r.a)({},e),{offset:0}),end:e};if(v&&0===c){k=this._getRoadsterLine(f.zoneId,f.line);return{start:this._amendRoadsterPoint(t,k,-1),end:e}}if(g&&0===h){k=this._getRoadsterLine(p.zoneId,p.line);return{start:t,end:this._amendRoadsterPoint(e,k,-1)}}if(v&&c===T&&g&&n.toPosition().len<=((null===(a=he(le(d)))||void 0===a?void 0:a.length)||0))return{start:(0,r.a)((0,r.a)({},e),{offset:0}),end:e};if(v&&c===T){k=this._getRoadsterLine(f.zoneId,f.line);return{start:this._amendRoadsterPoint(t,k,1),end:e}}if(g&&h===_){k=this._getRoadsterLine(p.zoneId,p.line);return{start:t,end:this._amendRoadsterPoint(e,k,1)}}return{start:t,end:e}},n._getRoadsterLine=function(t,e){var n,r=this.editor._getViewModel(),o=null===(n=this.editor.getContentState().getZoneState(t))||void 0===n?void 0:n.getLine(e);if(!o)return null;var s=r.getView(o);if(!s){var a=t===y.S?this.editor.getContainer():(0,i.m5)(["data-zone-id-"+t],this.context.elementTree)[0],l=(0,i.m5)(["ace-line"],a).filter((function(e){return(0,i.ah)(e,["data-zone-id-"+t])===a}));s=l[o.index]}return s},n._amendRoadsterPoint=function(t,e,n){var i,o,s=(t=Ce(t)).node,a=t.atEnd;if(!e||!s)return t;Xt(s,l.nV)||Xt(s,l.eu)||Xt(s,l.VI)||(s=le(s));var u=ce(e),c=u.indexOf(s),d=u[c+n]||s;if(d.props[l.eu]){var h=de(d);return h?{node:h,offset:n>0?0:(null===(i=h.props.content)||void 0===i?void 0:i.length)||0,atEnd:a}:this._amendRoadsterPoint((0,r.a)((0,r.a)({},t),{node:d}),e,1)}return{node:d,offset:n>0?0:(null===(o=d.props.content)||void 0===o?void 0:o.length)||0}},n._calcModelRangeFromRoadster=function(t){var e,n=t.startPoint,i=t.endPoint,o=t.isBackward,a=t.zoneId;if(!n||!i)return this.editor.error({message:"[Selection][_calcModelRangeFromRoadster] startPoint: ".concat(n,", endPoint: ").concat(i),level:s.W.ERROR}),null;if(o&&(n=(e=(0,r.e)([i,n],2))[0],i=e[1]),!a&&n.zoneId!==i.zoneId)return null;if(a&&n.zoneId!==i.zoneId){var l=this.editor.getContentState().getZoneState(a);if(!l)return null;var u=l.length()-1,c=l.getLine(u);if(!c)return null;a===n.zoneId?i={line:u,offset:c.length()-1,zoneId:a,isEdge:i.isEdge}:a===i.zoneId?n={line:0,offset:0,zoneId:a,isEdge:n.isEdge}:(n={line:0,offset:0,zoneId:a,isEdge:n.isEdge},i={line:u,offset:c.length()-1,zoneId:a,isEdge:i.isEdge})}return new(this.editor.modulesContainer.get(O.h.Range))({start:n,end:i,isBackward:o,editor:this.editor})},n._isUnEditableRange=function(t){var e,n,i=t.startPoint.node,r=t.endPoint.node;return void 0===(null===(e=i.props.provides)||void 0===e?void 0:e.zoneId)&&void 0===(null===(n=r.props.provides)||void 0===n?void 0:n.zoneId)},n.toModelRange=function(t,e){return this._toModelRange(t,e)},n._toModelRange=function(t,e){var n;if(void 0===e&&(e={}),!t)return null;var i=t.isCollapsed,r=t.isBackward,o=t.startPoint,s=t.endPoint;if(i&&(null===(n=o.node.props.provides)||void 0===n?void 0:n.editor)!==this.editor)return null;var a=e.curZoneId,l=this._toModelRangePoint(r?s:o,{isBackward:!1,curZoneId:a}),u=this._toModelRangePoint(r?o:s,{isBackward:!0,curZoneId:a});return l&&u?this._calcModelRangeFromRoadster({startPoint:i||r?u:l,endPoint:r?l:u,isBackward:r,zoneId:e.curZoneId}):null},n._toModelRangePoint=function(t,e){var n,i,o,s,a,u=e.isBackward,c=void 0!==u&&u,d=e.curZoneId,h=void 0===d?y.S:d,f=e.shouldJumpFakeText,p=void 0===f||f,v=Ce(t),g=v.node,m=v.offset,_=v.atEnd,b=v.isEdge,E=_?Lt.FRONT:!1===_?Lt.BEHIND:void 0,S=oe(g);if(!g||!S||!me(this.editor,S,c)){if(!h)return null;var w=this.editor.getContentState().getZoneState(h);if(!w)return null;var C=w.length()-1,I=w.getLine(C);return I?c?{line:C,offset:I.length()-1,zoneId:y.S,side:E,isEdge:b}:{line:0,offset:0,zoneId:y.S,side:E,isEdge:b}:null}var T=me(this.editor,S,c);if(!T)return null;var x=T.getZoneId(),k=T.index,M=0,R=le(g);R&&(m=0),(R&&t.offset>0||c)&&(p||(M=(null===(o=null==R?void 0:R.props[l.eu])||void 0===o?void 0:o.length)||0)),!c&&R&&p&&(!ve(g,R,"begin")||ve(g,R,"begin")&&t.offset>0)&&(M=(null===(s=null==R?void 0:R.props[l.eu])||void 0===s?void 0:s.length)||0);c&&R&&p&&(M=!ve(g,R,"end")||ve(g,R,"end")&&(Ht(t.node)&&!function(t,e){return t.props.content.length===e}(t.node,t.offset)||!Ht(t.node)&&0===t.offset)?0:(null===(a=null==R?void 0:R.props[l.eu])||void 0===a?void 0:a.length)||0);var P=ue(g);if(P&&(m=0,M=0,R=P),R||(R=Yt(g,[l.nV],[l.MB])),!R){var O=ce(S),L=O.indexOf(t.node),D=L>-1?O.slice(0,L):[],A=0;try{for(var z=(0,r.c)(D),N=z.next();!N.done;N=z.next()){var W=N.value;te(W)?A+=fe(W):ee(W)||(A+=pe(W))}}catch(t){n={error:t}}finally{try{N&&!N.done&&(i=z.return)&&i.call(z)}finally{if(n)throw n.error}}var B=A+(T.hasLineMarker()?1:0)+M;return{line:k,offset:Math.max(B,0),zoneId:x,side:E,isEdge:b}}R.props[l.q7]&&(m=0);var K=this.editor._getViewModel().getLeafModel(R);if(!K)return null;var Z=(K.start||0)+m+M+(T.hasLineMarker()?1:0);return{line:k,offset:Math.max(Z,0),zoneId:x,side:E,isEdge:b}},n.handleMovementKey=function(t){var e,n=t.evt;if(n.preventDefault(),"keydown"===n.type){var i=function(t){var e,n,i=t.shiftKey,r=t.metaKey,o=t.altKey,s=t.keyCode,a=t.ctrlKey;return u.Xh.isMac&&a&&!i?{key:((e={})[l.VD.A]=be.MAC_CTRL_A,e[l.VD.E]=be.MAC_CTRL_E,e[l.VD.F]=be.RIGHT,e[l.VD.B]=be.LEFT,e[l.VD.P]=be.UP,e[l.VD.N]=be.DOWN,e)[s]||null,shiftKey:i,metaKey:r,altKey:o,ctrlKey:a}:{key:((n={})[l.VD.Left]=be.LEFT,n[l.VD.Up]=be.UP,n[l.VD.Right]=be.RIGHT,n[l.VD.Down]=be.DOWN,n[l.VD.PageUp]=be.PAGE_UP,n[l.VD.PageDown]=be.PAGE_DOWN,n[l.VD.Home]=be.HOME,n[l.VD.End]=be.END,n)[s]||null,shiftKey:i,metaKey:r,altKey:o,ctrlKey:a}}(n),r=i.shiftKey,o=i.key,s=be.LEFT,a=be.UP,c=be.RIGHT,d=be.DOWN,h=be.PAGE_UP,f=be.PAGE_DOWN,p=be.HOME,v=be.END;if(-1!==[s,a,c,d,be.MAC_CTRL_A,be.MAC_CTRL_E,p,v,h,f].indexOf(o)&&!this.editor.getStatus("stopUpdateSelection")){var g=this._getRoadsterRange(),y=function(t,e){var n=t.metaKey,i=t.altKey,r=t.shiftKey,o=t.ctrlKey,s=t.key,a=be.UP,l=be.DOWN,u=be.LEFT,c=be.RIGHT,d=be.HOME,h=be.END,f=be.MAC_CTRL_A,p=be.MAC_CTRL_E,v=be.PAGE_UP,g=be.PAGE_DOWN,y=Ee.CHAR,m=Ee.WORD,_=Ee.LINE,b=Ee.INLINE,E=Ee.PARA,S=Ee.DOC;if([d,h].includes(s))return{mode:b,isRange:e,forward:s===h};if([f,p].includes(s))return{mode:E,isRange:e,forward:s===p};if(n&&[a,l].includes(s)||[v,g].includes(s))return{mode:S,isRange:e,forward:[l,g].includes(s)};var w=[c,l].includes(s);return n||r&&o||![u,c].includes(s)?!n&&[a,l].includes(s)?{mode:_,isRange:e,forward:w}:(n||r&&o)&&[u,c].includes(s)?{mode:b,isRange:e,forward:w}:i&&[u,c].includes(s)?{mode:m,isRange:e,forward:w}:null:{mode:y,isRange:e,forward:w}}(i,r);if(g&&y){var m=Ie(g,y),_=this._toModelRange(m);!_||this.range&&Kt.W.isRangeEqual(_,this.range)||(this.setSelection(_,!0),null===(e=this.editor.scrollModule)||void 0===e||e.scrollIntoViewport(_.end),n.preventDefault())}}}},n._setCursorPosition=function(t,e){if(void 0===e&&(e=!0),t&&this.editor.isEditable()){var n=this.context.container;n&&n!==this.cursor.getScroller()&&this.cursor.setScroller(n);var i=this.context.getScrollStatus(),r=i.scrollTop,o=i.scrollLeft;this.cursor.setPosition({top:t.top+r-.1*t.height,left:t.left+o,height:1.2*t.height}),this.cursor.setActive(!0,e)}else this.cursor.setActive(!1)},n.getElementRange=function(t,e){var n,i;if(!t)return null;e||(e={start:0,end:(null===(n=t.props["data-fake-text"])||void 0===n?void 0:n.length)||(null===(i=t.props.content)||void 0===i?void 0:i.length)||t.children.length});var r=e.start,o=e.end;return this._toModelRange({startPoint:{node:t,offset:r},endPoint:{node:t,offset:o},isBackward:!1,isCollapsed:!1})},n.isSelectionInEditor=function(t){var e,n=this.editor.editorUtils,i=this._getRoadsterRange();if(!i)return!1;var r=t?null===(e=this.editor.getContentState().getZoneState(t))||void 0===e?void 0:e._node:this.editor.getContainer(),o=i.startPoint.node,s=i.endPoint.node;return n.contains(r,o)&&n.contains(r,s)},n.contains=function(t,e){return Gt(t,e)},n.getNormalizedNextRange=function(t,e){return Ie(t,e)},e}(Ft),xe=n("vsh_82662"),ke=function(){function t(t){t=t.editor,this.cache=new Map,this.name="rect",this.editor=t}var e=t.prototype;return e.getCaretRect=function(t,e){return void 0===e&&(e=y.S),this.getPositionRect(t,e)},e.getRawCaretRect=function(t){var e=t.line,n=t.offset,i=t.zoneId,r=(t=void 0===(r=t.side)?Lt.FRONT:r,this.editor.rectModule._getRawRect({start:{line:e,offset:n-1,zoneId:i},end:{line:e,offset:n,zoneId:i}},{ignoreNormalize:!1}));return t===Lt.FRONT?(0,o.b)((0,o.b)({},r),{left:r.right,width:0}):(i=this.editor.rectModule._getRawRect({start:{line:e,offset:n,zoneId:i},end:{line:e,offset:n+1,zoneId:i}},{ignoreNormalize:!1}),.1<r.right-i.left?(0,o.b)((0,o.b)({},i),{right:i.left,width:0}):(0,o.b)((0,o.b)({},r),{left:r.right,width:0}))},e.getLineRect=function(t,e){return void 0===e&&(e=y.S),this.getPositionRect((0,o.b)((0,o.b)({},t),{offset:void 0}),e)},e.getZoneRect=function(t,e){return void 0===e&&(e=y.S),this.getPositionRect({zoneId:t},e)},e.clearCache=function(){this.cache.clear()},e.clearZoneRect=function(t){var e=this,n=[];this.cache.forEach((function(e,i){i.startsWith(t)&&n.push(i)})),n.forEach((function(t){return e.cache.delete(t)}))},t}();function Me(t){return{left:t.left,top:t.top,bottom:t.top+t.height,right:t.left+t.width,width:t.width,height:t.height}}var Re=function(t){function e(e){var n=e.editor,i=e.context,r=t.call(this,{editor:n})||this;return r.context=i,r}(0,r._)(e,t);var n=e.prototype;return n.getRangeRect=function(t,e){void 0===e&&(e=y.S);var n=this.editor.getContentState().getZoneState(e),o=this._getRawRect(t,{ignoreNormalize:!1});if(!(null==n?void 0:n._node))return this.editor.error({message:"zoneState._node undefined, zoneId: ".concat(null==n?void 0:n.getZoneId()),level:l.WV.ERROR}),o;var s=Me((0,i.Dz)(n._node));return(0,r.a)((0,r.a)({},o),(0,xe.s8)(o,s))},n.getElementRect=function(t){return Me((0,i.Dz)(t))},n._getRawRect=function(t,e){var n,r=this.editor.modulesContainer.get(O.h.Range);n="zoneId"in t?new r({editor:this.editor,start:t,end:t}):"toPosition"in t?t:new r({editor:this.editor,start:t.start,end:t.end});var o=this.editor.getContentState().getZoneState(n.start.zoneId);if(!o)return console.warn("point zoneId is invalid!"),{left:0,right:0,top:0,bottom:0,width:0,height:0};(0,xe.xR)(o,n.start),n.start!==n.end&&(0,xe.xR)(o,n.end);var s=this.editor.selection.toRoadsterRange(n,{ignoreNormalize:e.ignoreNormalize});if(!s)return console.warn("to can find roadster range"),{left:0,right:0,top:0,bottom:0,width:0,height:0};var a,l=s.startPoint,u=s.endPoint,c=this.getRectContainer(l.node,u.node);return 0===(a=c?(0,i.Dz)(c):(0,i.Dz)(s)).height&&0===a.left&&0===a.top&&0===a.width&&s.startPoint.node&&(a=(0,i.Dz)(l.node)),Me(a)},n.getRawLineRect=function(t){var e,n=this.editor.getContentState().getZoneState(t.zoneId);if(!n)return console.warn("point zoneId is invalid!"),{left:0,right:0,top:0,bottom:0,width:0,height:0};(0,xe.xR)(n,t);var r=null===(e=n.getLine(t.line))||void 0===e?void 0:e._node;if(!r)return{left:0,right:0,top:0,bottom:0,width:0,height:0};var o=(0,i.Dz)(r);return o?Me(o):{left:0,right:0,top:0,bottom:0,width:0,height:0}},n.getPositionRect=function(t,e){var n;void 0===e&&(e=y.S);var o=this.editor.getContentState(),s=o.getZoneState(t.zoneId);if(!s)return console.warn("point zoneId is invalid!"),{left:0,right:0,top:0,bottom:0,width:0,height:0};(0,xe.xR)(s,t);var a=this.cache.get((0,xe.ah)(t,e));if(a)return a;var u=void 0===t.line,c=void 0!==t.line&&void 0===t.offset,d=void 0!==t.line&&void 0!==t.offset,h={left:0,right:0,top:0,bottom:0,width:0,height:0},f={left:0,right:0,top:0,bottom:0,width:0,height:0},p=null===(n=o.getZoneState(e))||void 0===n?void 0:n._node;if(!p)return this.editor.error({message:"relativeZoneNode undefined, relativeZone: ".concat(e),level:l.WV.ERROR}),h;if(u){if(!s._node)return this.editor.error({message:"zoneState._node undefined, zoneId: ".concat(t.zoneId),level:l.WV.ERROR}),h;h=Me((0,i.Dz)(s._node)),f=Me((0,i.Dz)(p))}else c?(h=this.getRawLineRect(t),f=Me((0,i.Dz)(p))):d&&(h=this.getRawCaretRect(t),f=Me((0,i.Dz)(p)));if(u&&t.zoneId===e)return h;var v=(0,r.a)((0,r.a)({},h),(0,xe.s8)(h,f));return this.cache.set((0,xe.ah)(t,e),v),v},n.getEditorRect=function(){var t=(0,i.Dz)(this.editor.getContainer()),e=this.context.canvas;if(!e)return{left:0,right:0,top:0,bottom:0,width:0,height:0};var n=e.getBoundingClientRect();return(0,r.a)((0,r.a)({},t),{left:t.left+n.left,top:t.top+n.top})},n._getEditorRectRelativeContainer=function(){var t=(0,i.Dz)(this.editor.getContainer()),e=this.context.getScrollStatus(),n=e.scrollTop,o=e.scrollLeft;return(0,r.a)((0,r.a)({},t),{left:t.left+o,top:t.top+n})},n._getSelectionRect=function(){var t=this.editor.selection.getSelection(),e=this.editor.selection.toRoadsterRange(t);if(!e)return null;var n=(0,i.Dz)(e),o=this.context.getScrollStatus(),s=o.scrollTop,a=o.scrollLeft;return(0,r.a)((0,r.a)({},n),{top:n.top+s,left:n.left+a})},n.getRectContainer=function(t,e){return t.parent&&t.parent===e.parent&&Yt(t,[l.Pk])},e}(ke),Pe=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.editableElem=null,e.scroller=window,e.removeResizeEvent=function(){},e}(0,r._)(e,t);var n=e.prototype;return n.onMount=function(){var t=this.editor;this.props;t.editorUtils=new Q;var e=t.getContentState().getZoneState(y.S);if(null==e?void 0:e.length()){var n=e.getLine(0).getLineMarker(),i=new z.L({start:n,len:0,zoneId:y.S,editor:t});t.selection=new Te({editor:t,range:i.toRange(),context:this.$context})}else t.selection=new Te({editor:t,context:this.$context});t.rectModule=new Re({editor:t,context:this.$context});var r=t.modulesContainer.get(O.h.InputModel);t.inputModel=new r(t,this.$context.container)},n.handleRef=function(t){this.editor.init({element:t})},n.handleRoadsterResize=function(){var t=this;this.$context.once(i.FP.LAYOUT,(function(){t.editor.isFocus()&&t.editor.selection.updateViewSelection()}))},n.handleLayout=function(){this.editor.setRect(),this.editor.selection._updateCaretAndHiddenInputPosition({delayCursorAnimation:!1})},n.bind=function(){this.removeResizeEvent=function(t,e){if(!t)return function(){};if(window.ResizeObserver){var n=new window.ResizeObserver(e);return n.observe(t),function(){n.disconnect()}}var i=document.createElement("iframe");i.setAttribute("style","\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      top: -1000%;\n      left: -1000%;\n      user-select: none;\n      visibility: hidden;\n    "),i.addEventListener("resize",e);var r=t.parentElement;return r.appendChild(i),function(){r.removeChild(i),i.removeEventListener("resize",e)}}(this.$context.container||null,this.editor._handleResizeEvent),this.$context.on(i.FP.LAYOUT,this.handleLayout),this.$context.on(i.FP.RESIZE,this.handleRoadsterResize),this.$context.on(i.FP.SELECTION_CHANGE,this.handleRoadsterSelectionChange,{priority:10}),this.$context.on(c.r.PAINT,this.handlePaint)},n.unbind=function(){this.removeResizeEvent(),this.$context.off(i.FP.LAYOUT,this.handleLayout),this.$context.off(i.FP.RESIZE,this.handleRoadsterResize),this.$context.off(i.FP.SELECTION_CHANGE,this.handleRoadsterSelectionChange),this.$context.off(c.r.PAINT,this.handlePaint)},n.handleRoadsterSelectionChange=function(){this.editor.selection._handleRoadsterSelectionChange()},n.handleRoadsterMouseDown=function(t){var e=this.props.isFocusAllArea;t.target&&(e||(0,i.ah)(t.target,[l.r0]))&&this.editor.focus(),this.editor._handleMouseDown(t.nativeEvent)},n.handlePaint=function(){this.editor.call(c.r.PAINT)},n.render=function(){var t,e,n=this.editor,o=this.props,s=o.style,a=o.placeholder,l=o.isInline,u=o.children,c=o.autoScroll,d=o.editable,h=o.copyable,f=y.S,p=this.getScroller(),v={};try{for(var g=(0,r.c)(this.editor._listenEvents),m=g.next();!m.done;m=g.next()){var _=m.value;G.aW.includes(_)||q.includes(_)||(v[_]=this.handleEvent)}}catch(e){t={error:e}}finally{try{m&&!m.done&&(e=g.return)&&e.call(g)}finally{if(t)throw t.error}}return v.mousedown=this.handleRoadsterMouseDown,v.mouseup=this.editor._handleMouseUp,v.touchstart=this.editor._handleTouchStart,v.touchend=this.editor._handleTouchEnd,v.click=this.editor._handleClickEvent,vt(s||{}),(0,i.az)(ft,{provides:{editor:n,zoneId:f},on:v,zoneId:f,style:Object.assign({},s),editor:n,onCreate:this.onMount,onRef:this.handleRef,scroller:p,autoScroll:c,editable:d,copyable:h},null!=u?u:(0,i.az)(Wt,{isInline:l,placeholder:a,zoneId:f,style:Object.assign({},s),editor:n}))},(0,r.b)([a.W],e.prototype,"handleRoadsterResize",null),(0,r.b)([a.W],e.prototype,"handleLayout",null),(0,r.b)([a.W],e.prototype,"handleRoadsterSelectionChange",null),(0,r.b)([a.W],e.prototype,"handleRoadsterMouseDown",null),(0,r.b)([a.W],e.prototype,"handlePaint",null),e}(i.wA),Oe=function(t){var e;function n(t){var n,i=e.call(this,t)||this;return i.editableElem=null,i.scroller=document.body,i.handleEvent=function(t){var e=i.editor;e._correctCompositionIfNecessary(t),e[W.PF[t.type]](t)},i.handleSelectionChange=function(){var t=i.editor.selection.getSelection();i.editor.getContentState().setActiveZone(t.start.zoneId)},i.setScrollRef=function(t){i.scroller=t},i.handleEditorError=function(t){var e,n;null!==(n=(e=i.props).onError)&&void 0!==n&&n.call(e,t)},i.delegator=null!==(n=t.eventDelegator)&&void 0!==n?n:f,t.editor?(i.editor=t.editor,t.copyable&&(i.editor.copyable=t.copyable),t.editable&&i.editor.setEditable(t.editable)):i.editor=new F((0,o.b)((0,o.b)({},i.props),{initData:t.initData,eventDelegator:i.delegator})),i}return e=t,(0,o.c)(n,e),n.prototype.handleRef=function(t){e.prototype.handleRef.call(this,t),this.editableElem=t},n.prototype.onMount=function(){var t,n=this.editor,i=this.props;e.prototype.onMount.call(this),n.setMounted(!0),n.callAll("editorDidMount"),this.editor.getRootContainer()&&this.editor.setRect(),this.bind(),null!==(t=i.onInit)&&void 0!==t&&t.call(i,n),null!==(t=i._onInitData)&&void 0!==t&&t.call(i,n),i.cursorColor?X.setDefaultColor(i.cursorColor):X.setDefaultColor("#000")},n.prototype.bind=function(){e.prototype.bind.call(this);var t=this.editor;t.on(c.r.SELECTION_CHANGE,this.handleSelectionChange),t.on(c.r.ERROR,this.handleEditorError),t.on(c.r.KEYDOWN,this._handleShortcuts),t.on(c.r.RECT_CHANGE,this._handleEditorRectChange),t.on(c.r.SCROLL,this._handleEditorScroll)},n.prototype._handleShortcuts=function(t){this._maybeSelectAll(t)},n.prototype._maybeSelectAll=function(t){var e=t.keyCode,n=t.shiftKey,i=t.metaKey,r=t.altKey,o=t.ctrlKey;n||r||(u.Xh.isMac||u.Xh.isIPad?i:o)&&e===l.VD.A&&(e=this.editor.selection.getSelection().start.zoneId,this.editor.selection.selectAll(e),t.preventDefault())},n.prototype._handleEditorRectChange=function(){this.editor.rectModule.clearCache(),this.editor.setRect()},n.prototype._handleEditorScroll=function(){this.editor.rectModule.clearCache()},n.prototype.getScroller=function(){return("object"==typeof this.props.scroller?this.props:this).scroller},n.prototype.unbind=function(){var t=this.editor;e.prototype.unbind.call(this),t.off(c.r.SELECTION_CHANGE,this.handleSelectionChange),t.off(c.r.ERROR,this.handleEditorError),t.off(c.r.KEYDOWN,this._handleShortcuts),t.off(c.r.RECT_CHANGE,this._handleEditorRectChange),t.off(c.r.SCROLL,this._handleEditorScroll)},n.prototype.componentDidUpdate=function(t){var e=t.editable,n=void 0===(i=t.copyable)||i,i=void 0===(i=(t=this.props).editable)||i;t=void 0===(t=t.copyable)||t;i!==(void 0===e||e)&&this.editor.setEditable(i),t!==n&&(this.editor.copyable=t)},n.prototype.componentWillUnmount=function(){var t=this.editor;this.unbind(),t._getViewModel().destroy(),t.destroy()},n.prototype._setPlaceHolder=function(t){this.editor._setPlaceholder(t)},n.prototype.componentDidCatch=function(t){this.editor.error({e:t,level:s.W.FATAL,message:t.message})},(0,o.a)([a.W],n.prototype,"handleRef",null),(0,o.a)([a.W],n.prototype,"onMount",null),(0,o.a)([a.W],n.prototype,"_handleShortcuts",null),(0,o.a)([a.W],n.prototype,"_handleEditorRectChange",null),(0,o.a)([a.W],n.prototype,"_handleEditorScroll",null),n}(Pe)},vsh_22328:function(t,e,n){"use strict";n.d(e,{L:function(){return r}});var i=n("vsh_28099");function r(t){var e,n,r=[];try{for(var o=(0,i._)(Object.entries(t)),s=o.next();!s.done;s=o.next()){var a=(0,i.a)(s.value,2),l=a[0],u=a[1];r.push([l,u])}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}},vsh_40351:function(t,e,n){"use strict";n.d(e,{A:function(){return r}});var i=n("vsh_28099");function r(t){var e,n,r={};try{for(var o=(0,i._)(t),s=o.next();!s.done;s=o.next()){var a=s.value;r[a[0]]=a[1]}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}},vsh_98650:function(t,e,n){"use strict";function i(t,e,n){var i=null==n?void 0:n.value;return"function"!=typeof i&&console.error("Only methods can be decorated with @Bind. <".concat(e,"> is not a method!")),{configurable:!0,get:function(){if(this===t.prototype||this.hasOwnProperty(e)||"function"!=typeof i)return i;var n=i.bind(this);return Object.defineProperty(this,e,{value:n,configurable:!0,writable:!0}),n}}}n.d(e,{W:function(){return i}})},vsh_52948:function(t,e,n){"use strict";var i;function r(t){return function(e){return function(n,i,r){var o=r.value;r.value=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var r=this;try{return o.apply(r,n)}catch(n){t?t.call(r,{e:n,level:e,message:n.message}):console.error(n)}}}}}n.d(e,{W:function(){return i},K:function(){return r}}),function(t){t[t.FATAL=0]="FATAL",t[t.ERROR=1]="ERROR"}(i||(i={}))},vsh_18817:function(t,e,n){"use strict";n.d(e,{P:function(){return i}});var i="".concat("clientside","-")},vsh_94150:function(t,e,n){"use strict";n.d(e,{S:function(){return i}});var i="0"},vsh_44897:function(t,e,n){"use strict";n.d(e,{D:function(){return r}});var i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function r(t){void 0===t&&(t=20);for(var e="",n=0;n<t;n++){var r=Math.floor(Math.random()*i.length);e+=i[r]}return e}},vsh_82572:function(t,e,n){"use strict";n.d(e,{h:function(){return r}});var i=Object.prototype.toString;function r(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":i.call(t)}},vsh_97321:function(t,e,n){"use strict";n.d(e,{X:function(){return u}});var i=n("vsh_82572"),r=n("vsh_58699"),o=Symbol.prototype.valueOf;function s(t,e){return t===e||t!=t&&e!=e}function a(t){return null==t}function l(t,e,n,u){if(t===e)return!0;if(a(t)||a(e)||!(0,r.y)(t)&&!(0,r.y)(e)&&"function"!=typeof t)return s(t,e);var c=(0,i.h)(t),d=(0,i.h)(e);if(c!==d)return!1;var h=n.indexOf(t);if(h===u.indexOf(e)&&h>=0)return!0;if(n.push(t),u.push(e),("[object Array]"===c?t.length:Object.keys(t).length)!==("[object Array]"===d?e.length:Object.keys(e).length))return!1;if("[object Array]"===c){for(var f=0;f<t.length;f++)if(!l(t[f],e[f],n.slice(),u.slice()))return!1;return!0}if("[object Object]"===c){for(var p in t)if(t.hasOwnProperty(p)&&!1===l(t[p],e[p],n.slice(),u.slice()))return!1;return!0}return"[object Function]"===c?t.toString()===e.toString():["[object Number]","[object Boolean]","[object Date]"].includes(c)?s(+t,+e):"[object String]"===c?"".concat(t)==="".concat(e):!("[object Symbol]"!==c||!o)&&o.call(t)===o.call(e)}function u(t,e){return l(t,e,[],[])}},vsh_58699:function(t,e,n){"use strict";function i(t){return"object"==typeof t&&null!==t}n.d(e,{y:function(){return i}})},vsh_15808:function(t,e,n){"use strict";function i(t){return t.replace(/\r\n/g,"\n").replace(/\r/g,"\n")}n.d(e,{$:function(){return i}})},vsh_97698:function(t,e,n){"use strict";function i(t,e,n){var i,r,o,s,a,l,u=0,c=!1,d=!1,h=!0,f=!e&&0!==e&&"function"==typeof window.requestAnimationFrame;if("function"!=typeof t)throw new TypeError("Expected a function");function p(e){var n=i,o=r;return i=r=void 0,u=e,s=t.apply(o,n)}function v(t,e){return f?(window.cancelAnimationFrame(a),window.requestAnimationFrame(t)):setTimeout(t,e)}function g(t){return u=t,a=v(m,e),c?p(t):s}function y(t){var n=t-l;return void 0===l||n>=e||n<0||d&&t-u>=o}function m(){var t=Date.now();if(y(t))return _(t);a=v(m,function(t){var n=t-u,i=e-(t-l);return d?Math.min(i,o-n):i}(t))}function _(t){return a=void 0,h&&i?p(t):(i=r=void 0,s)}function b(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=Date.now(),u=y(o);if(i=t,r=this,l=o,u){if(void 0===a)return g(l);if(d)return a=v(m,e),p(l)}return void 0===a&&(a=v(m,e)),s}return e=+e||0,"object"==typeof n&&(c=!!n.leading,o=(d="maxWait"in n)?Math.max(+n.maxWait||0,e):o,h="trailing"in n?!!n.trailing:h),b.cancel=function(){void 0!==a&&function(t){if(f)return window.cancelAnimationFrame(t);clearTimeout(t)}(a),u=0,i=l=r=a=void 0},b.flush=function(){return void 0===a?s:_(Date.now())},b.pending=function(){return void 0!==a},b}function r(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return"object"==typeof n&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),i(t,e,{leading:r,trailing:o,maxWait:e})}n.d(e,{P:function(){return r}})},vsh_28099:function(t,e,n){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function i(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function r(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function o(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}n.d(e,{_:function(){return i},a:function(){return r},b:function(){return o}})},vsh_80395:function(t,e,n){"use strict";n.d(e,{r:function(){return h}});var i=n("vsh_84965"),r=(n("vsh_72862"),n("vsh_15516")),o=n("vsh_34482"),s=n("vsh_40229"),a=n("vsh_97731"),l=n("vsh_1707"),u=[/[\b]/g,new RegExp(String.fromCharCode(8203),"g")];function c(t){var e=t;return u.forEach((function(t){return e=e.replace(t,"")})),e}function d(t){return t.replace(/\r/g," ").replace(/\xa0/g," ").replace(/\t/g," ".repeat(8))}var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="TextNodeDeserializer",e}return(0,i.c)(e,t),e.prototype.deserialize=function(t){var e=t.node,n=t.deltaSet,i=t.zoneId,s=t.text,u=t.types;if(u.includes("text/html")){if((0,a.y1)(e)){var h=null!==(t=e.nodeValue)&&void 0!==t?t:"",f="",p=0,v=!1;if(0===h.trim().length&&"body"===(null===(t=e.parentElement)||void 0===t?void 0:t.tagName.toLowerCase()))return n.concat(new o.I({zoneId:i}));for(var g=e.parentNode;g;){if(g instanceof HTMLElement){var y=g.tagName,m=g.style;if("pre"===y.toLowerCase()){v=!0;break}if(m.whiteSpace){v=m.whiteSpace.startsWith("pre");break}}g=g.parentNode}e=new r.D;for(var _,b,E=new o.I({zoneId:i});0<h.length;)v?(_=h.includes("\n"),p=(b=h.split("\n",1)[0]).length+1,f=h.substring(p),E.insert(d(c(h=b))),h=f,_&&E.insertEnter()):(f="",h=(h=h.replace(/\r\n/g," ").replace(/[\r\n]/g," ")).replace(/\s{2,}/g,(function(t){return t.replace(/[^\u00a0]+/g," ")})),E.insert(d(c(h))),h=f);return e.concat(E)}}else if(u.includes("text/plain")&&s)return(new r.D).concat((new o.I).insert(d((0,l.$)(c(s)))));return n},e}(s.S)},vsh_95082:function(t,e,n){"use strict";var i,r;n.d(e,{T:function(){return i}}),(r=i=i||{}).LEAF="leaf",r.LINE="line",r.ROOT="root"},vsh_93919:function(t,e,n){"use strict";n.d(e,{Xh:function(){return A},vu:function(){return a},WZ:function(){return s}});var i=window.User&&window.User.userAgent||navigator.userAgent||"";function r(t){return(t=i.match(t))&&1<t.length&&t[1]||""}function o(){if(function(){var t=navigator.userAgent;return 0<t.indexOf("iPhone")||0<t.indexOf("iPad")||0<t.indexOf("iPhone")}()){var t=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/);return t?{major:+t[1],minor:+t[2]}:null}return null}function s(){var t=o();return!!t&&t.major<12}function a(){var t=navigator.userAgent.match(/Chrome\/([\d.]+)/i);return t&&t[1]?t[1]:null}var l,u,c,d=r(/(ipod|iphone|ipad)/i).toLowerCase(),h=/windows phone/i.test(i),f=/nexus\s*[0-6]\s*/i.test(i),p=/like android/i.test(i),v=!h&&/windows/i.test(i),g=/chrome|crios|crmo/i.test(i),y=/firefox|iceweasel|fxios/i.test(i),m=/safari|applewebkit/i.test(i)&&!g&&!y,_=(c=/edg([ea]|ios)\/(\d+(\.\d+)?)/i,(c=i.match(c))&&1<c.length&&c[2]||""),b=!_&&h||/msie|trident/i.test(i),E=/silk/i.test(i),S=!d&&!E&&/macintosh/i.test(i),w=!h&&d,C=/Firefox/i.test(i),I=/iPad/i.test(i)||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints,T=h&&_||/edg([ea]|ios)/i.test(i),x=/Edge/i.test(i),k=/tablet/i.test(i)&&!/tablet pc/i.test(i),M=!p&&-1<i.indexOf("Android")||-1<i.indexOf("Adr"),R=!k&&/[^-]mobi/i.test(i)||"iphone"===d||"ipod"===d||M||f,P=/feishu/i.test(i)||/lark/i.test(i),O=!!i.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),L=/Docs/i.test(i),D=S||O,A={modernIE:!1,isAndroid:M,lark:P,isIOS:O,android:M,windows:v,firefox:y,safari:m,msie:b,isMac:S,ios:w,isFF:C,isIPad:I,msedge:T,chrome:g,isEdge:x,oldIE:!1,mobile:R,isBytedanceApp:P||L,isIOSBelow12:s(),getIOSVersion:o,isMacOSX:D,isChromeBefore86:function(){var t=a();return t&&parseInt(t)<=86}()};b&&(l="",h&&!_?l=r(/iemobile\/(\d+(\.\d+)?)/i):/msie|trident/i.test(i)&&(l=r(/(?:msie |rv:)(\d+(\.\d+)?)/i)),u=parseInt(l,10),A.oldIE=u<11,A.modernIE=11<=u)},vsh_90166:function(t,e,n){"use strict";n.d(e,{r0:function(){return E},Pk:function(){return _},ip:function(){return S},q7:function(){return d},WV:function(){return b},eu:function(){return p},lE:function(){return a},VD:function(){return i},MB:function(){return l},PI:function(){return u},e0:function(){return f},nV:function(){return c},cH:function(){return h},sq:function(){return m},VI:function(){return o},T6:function(){return s},Ks:function(){return g},P9:function(){return v},Ed:function(){return y}});var i,r,o="data-zero-space",s="​",a="data-inline-wrapper",l="data-leaf",u="data-node",c="data-string",d="data-enter",h="editor-kit",f="data-ssr",p="data-fake-text",v="data-zone-id",g="data-zone-container",y=s,m="data-void",_="data-rect-container";(r=i=i||{})[r.BackSpace=8]="BackSpace",r[r.Tab=9]="Tab",r[r.Clear=12]="Clear",r[r.Enter=13]="Enter",r[r.Shift=16]="Shift",r[r.Ctrl=17]="Ctrl",r[r.Alt=18]="Alt",r[r.CapsLock=20]="CapsLock",r[r.Esc=27]="Esc",r[r.Space=32]="Space",r[r.PageUp=33]="PageUp",r[r.PageDown=34]="PageDown",r[r.End=35]="End",r[r.Home=36]="Home",r[r.Left=37]="Left",r[r.Up=38]="Up",r[r.Right=39]="Right",r[r.Down=40]="Down",r[r.Insert=45]="Insert",r[r.Delete=46]="Delete",r[r.Digit0=48]="Digit0",r[r.Digit9=57]="Digit9",r[r.A=65]="A",r[r.B=66]="B",r[r.C=67]="C",r[r.D=68]="D",r[r.E=69]="E",r[r.F=70]="F",r[r.G=71]="G",r[r.H=72]="H",r[r.I=73]="I",r[r.J=74]="J",r[r.K=75]="K",r[r.L=76]="L",r[r.M=77]="M",r[r.N=78]="N",r[r.O=79]="O",r[r.P=80]="P",r[r.Q=81]="Q",r[r.R=82]="R",r[r.S=83]="S",r[r.T=84]="T",r[r.U=85]="U",r[r.V=86]="V",r[r.W=87]="W",r[r.X=88]="X",r[r.Y=89]="Y",r[r.Z=90]="Z",r[r.Meta=91]="Meta",r[r.RightMeta=92]="RightMeta",r[r.BracketRightKeyDown=93]="BracketRightKeyDown",r[r.Caret=94]="Caret",r[r.Numpad0=96]="Numpad0",r[r.Numpad9=105]="Numpad9",r[r.NumpadDot=110]="NumpadDot",r[r.F11=122]="F11",r[r.Semicolon=186]="Semicolon",r[r.Plus=187]="Plus",r[r.Minus=189]="Minus",r[r.Dot=190]="Dot",r[r.Grave=192]="Grave",r[r.Bracket=219]="Bracket",r[r.Quot=222]="Quot",r[r.Asterisk=106]="Asterisk",r[r.Slash=111]="Slash",r[r["/"]=191]="/",r[r["\\"]=220]="\\",r[r.Ime=229]="Ime";var b,E="ace-line",S="dirtyDomWithoutChangeset";!function(t){t[t.FATAL=0]="FATAL",t[t.ERROR=1]="ERROR"}(b=b||{})},vsh_634:function(t,e,n){"use strict";n.d(e,{cc:function(){return p},Kw:function(){return i},jn:function(){return h},Or:function(){return f}});var i,r,o=n("vsh_84965"),s=n("vsh_78224"),a=n("vsh_98125"),l=n.n(a),u=l().createContext(null),c=n("vsh_24719"),d=n("vsh_33378");(r=i=i||{}).IMG="img",r.TEXT="span",r.VIEW="div";var h=function(){function t(){}return t.prototype.componentDidMount=function(){},t}();function f(t){var e;function n(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=e.apply(this,(0,o.d)([],(0,o._)(t),!1))||this;return i.option={},i._events={},i._selected=!1,i._ref=l().createRef(),i._prevSel=null,i._handleEditorSelectionChange=function(){if(i.option.selectEventEnabled){var t,e,n,r=i.editor.selection.getSelection(),o=!i._prevSel&&r.isCollapsed()||(null===(t=i._prevSel)||void 0===t?void 0:t.isCollapsed())&&r.isCollapsed();if(i._prevSel=r,!o){try{e=(0,c.Ve)(i._ref.current,i.editor)}catch(t){}e&&(t=r.start,o=r.end,r=e.start,e=e.end,(o=t.zoneId===r.zoneId&&t<=r&&e<=o)&&!i._selected?(n=i._events.select,i._selected=!0,null!=n&&n.call(n)):!o&&i._selected&&(n=i._events.deselect,i._selected=!1,null!=n&&n.call(n)))}}},i.editor=t[0].provides.editor,i}return e=t,(0,o.c)(n,e),n.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this),this.updateEventCb(),this._bindEditorEvents()},n.prototype.componentDidUpdate=function(t){this.updateEventCb()},n.prototype.componentWillUnmount=function(){this.editor.off(s.r.SELECTION_CHANGE_AND_DOM_UPDATE,this._handleEditorSelectionChange)},n.prototype.updateEventCb=function(){var t=this;this._events=Object.keys(this.props).filter((function(t){return t.startsWith("on")})).reduce((function(e,n){return e[(0,c.Le)(n)]=t.props[n],e}),{})},n.prototype._bindEditorEvents=function(){var t=this;this.option.selectEventEnabled&&c.ZG.find((function(e){return t._events[e]}))&&this.editor.on(s.r.SELECTION_CHANGE_AND_DOM_UPDATE,this._handleEditorSelectionChange)},n.prototype._triggerEventCallback=function(t,e){var n=this._events[t.type],i=(0,c.Br)(t);n&&(c.Dg.includes((0,c.J$)(e))&&(t=(0,c.Ve)(t.currentTarget,this.editor),i.evtTargetSelection=t),n.call(n,i))},n.prototype._handleSynthesisEvents=function(t){this._triggerEventCallback(t,t.nativeEvent)},(0,o.a)([d.W],n.prototype,"_bindEditorEvents",null),(0,o.a)([d.W],n.prototype,"_triggerEventCallback",null),(0,o.a)([d.W],n.prototype,"_handleSynthesisEvents",null),n}var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.editor=e.context,e.option={},e._events={},e._selected=!1,e._ref=l().createRef(),e._prevSel=null,e}(0,o.c)(e,t);var n=e.prototype;return n.componentDidMount=function(){this.updateEventCb(),this.editor=this.context,this._bindEditorEvents()},n.componentDidUpdate=function(t){this.updateEventCb()},n.componentWillUnmount=function(){this.editor.off(s.r.SELECTION_CHANGE_AND_DOM_UPDATE,this._handleEditorSelectionChange)},n.updateEventCb=function(){var t=this;this._events=Object.keys(this.props).filter((function(t){return t.startsWith("on")})).reduce((function(e,n){return e[(0,c.Le)(n)]=t.props[n],e}),{})},n._bindEditorEvents=function(){var t=this;this.option.selectEventEnabled&&c.ZG.find((function(e){return t._events[e]}))&&this.editor.on(s.r.SELECTION_CHANGE_AND_DOM_UPDATE,this._handleEditorSelectionChange)},n._handleEditorSelectionChange=function(){if(this.option.selectEventEnabled){var t,e,n,i,r=null;try{r=(0,c.Ve)(this._ref.current,this.editor)}catch(t){}r&&(n=!(e=this.editor.selection.getSelection(r.start.zoneId))||!this._prevSel&&e.isCollapsed()||(null===(t=this._prevSel)||void 0===t?void 0:t.isCollapsed())&&e.isCollapsed(),this._prevSel=e,n||(t=e.start,n=e.end,e=r.start,r=r.end,(n=t.zoneId===e.zoneId&&t<=e&&r<=n)&&!this._selected?(i=this._events.select,this._selected=!0,null!=i&&i.call(i)):!n&&this._selected&&(i=this._events.deselect,this._selected=!1,null!=i&&i.call(i))))}},n._triggerEventCallback=function(t,e){var n=this._events[t.type],i=(0,c.Br)(t);n&&(c.Dg.includes((0,c.J$)(e))&&(t=(0,c.Ve)(t.currentTarget,this.editor),i.evtTargetSelection=t),n.call(n,i))},n._handleSynthesisEvents=function(t){this._triggerEventCallback(t,t.nativeEvent)},n.render=function(){var t=this,e=this.tagName,n=Object.keys(this.props).reduce((function(e,n){return n.startsWith("on")?e[n]=c.eb.includes((0,c.Le)(n))?void 0:t._handleSynthesisEvents:e[n]=t.props[n],e}),{});return l().createElement(e,(0,o.b)({ref:this._ref},n),this.props.children)},e.contextType=u,(0,o.a)([d.W],e.prototype,"_bindEditorEvents",null),(0,o.a)([d.W],e.prototype,"_handleEditorSelectionChange",null),(0,o.a)([d.W],e.prototype,"_triggerEventCallback",null),(0,o.a)([d.W],e.prototype,"_handleSynthesisEvents",null),e}(l().PureComponent)},vsh_24719:function(t,e,n){"use strict";n.d(e,{eb:function(){return bt},Dg:function(){return Et},Br:function(){return yt},Ve:function(){return gt},J$:function(){return vt},Le:function(){return pt},ZG:function(){return mt}});var i=n("vsh_84965"),r=n("vsh_97509"),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.eventTypes=new Map,e.extractEvents=function(t){return"change"===t.type?new r.O(t,t.target):null},e}return(0,i.c)(e,t),e}((function(){})),s=new o,a=n("vsh_46266");var l="animationend",u="animationiteration",c="animationstart",d="blur",h="click",f="compositionend",p="compositionstart",v="compositionupdate",g="contextmenu",y="copy",m="dblclick",_="auxclick",b="drag",E="dragend",S="dragenter",w="dragexit",C="dragleave",I="dragover",T="dragstart",x="drop",k="focus",M="gotpointercapture",R="keydown",P="keypress",O="keyup",L="lostpointercapture",D="mousedown",A="mousemove",z="mouseout",N="mouseover",W="mouseup",B="paste",K="pointercancel",Z="pointerdown",j="pointermove",U="pointerout",V="pointerover",F="pointerup",H="scroll",X="touchcancel",Y="touchend",G="touchmove",q="touchstart",Q="transitionend",J="wheel",$=new function(){var t=this;this.eventTypes=new Map,this.extractEvents=function(e){return t.eventTypes.get(e.type)?new a.U(e,e.target):null},[z,N].forEach((function(e){return t.eventTypes.set(e,!0)}))},tt=n("vsh_70988"),et=n("vsh_41802"),nt=n("vsh_32275"),it=n("vsh_30778"),rt=n("vsh_43110"),ot=n("vsh_31138"),st=n("vsh_10907"),at=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.deltaX=0,i.deltaY=0,i.deltaZ=0,i.deltaMode=0,(0,ot.u)(i,st.TT,e,n),i}return(0,i.c)(e,t),e}(a.U),lt=function(t){function e(e,n){var i=t.call(this,e,n)||this;return(0,ot.u)(i,st.a6,e,n),i}return(0,i.c)(e,t),e}(r.O),ut=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.propertyName="",i.elapsedTime=0,i.pseudoElement="",(0,ot.u)(i,st.lI,e,n),i}return(0,i.c)(e,t),e}(r.O),ct=[d,"cancel",h,"close",g,y,"cut",_,m,E,T,x,k,"input","invalid",R,P,O,D,W,B,"pause","play",K,Z,F,"ratechange","reset","seeked","submit",X,Y,q,"volumechange",p,v,f],dt=[b,S,w,C,I,A,z,N,j,U,V,H,"toggle",G,J],ht=["abort",l,u,c,"canplay","canplaythrough","durationchange","emptied","encrypted","ended","error",M,"load","loadeddata","loadedmetadata","loadstart",L,"playing","progress","seeking","stalled","suspend","timeupdate",Q,"waiting"],ft=[new function(){var t=this;this.eventTypes=new Map,this.extractEvents=function(e){var n;if(!t.eventTypes.get(e.type))return null;switch(e.type){case P:case R:case O:n=it.$;break;case d:case k:n=rt.Y;break;case h:case _:case m:case D:case A:case W:case z:case N:case g:n=a.U;break;case b:case E:case S:case w:case C:case I:case T:case x:console.error("view组件暂不支持拖拽事件, 事件类型:",e.type),n=r.O;break;case X:case Y:case G:case q:console.error("view组件暂不支持touch事件, 事件类型:",e.type),n=r.O;break;case l:case u:case c:n=lt;break;case Q:n=ut;break;case H:n=tt.R;break;case J:n=at;break;case y:case"cut":case B:n=et.y;break;case M:case L:case K:case Z:case j:case U:case V:case F:console.error("view组件暂不支持pointer事件, 事件类型:",e.type),n=r.O;break;case p:case f:case v:n=nt.h;break;default:n=r.O}return new n(e,e.target)},ct.concat(dt).concat(ht).forEach((function(e){return t.eventTypes.set(e,!0)}))},$,s];function pt(t){return t.slice(2).toLowerCase()}function vt(t){var e=/^\[object (\S+)\]/i;t=t.toString().toLocaleLowerCase();return e.test(t)?e.exec(t)[1]:(console.error("can not get event classification"),"")}function gt(t,e){return t?e.selection.getElementRange(t):null}function yt(t){var e=function(t){for(var e=null,n=0;n<ft.length;n++){var i=ft[n].extractEvents(t);if(i){e=i;break}}return e||(console.warn("正在使用未被支持的合成事件"),e=new r.O(t,t.target)),e}(t.nativeEvent),n=e.preventDefault,i=e.stopPropagation;return e.preventDefault=function(){n.call(e),t.preventDefault()},e.stopPropagation=function(){i.call(e),t.stopPropagation()},e.currentTarget=t.currentTarget,e.target=t.target,e}var mt=["select","deselect"],_t=(0,i.d)((0,i.d)([],(0,i._)(mt),!1),(0,i._)(["enterviewport","leaveviewport"]),!1),bt=[].concat(_t),Et=["focusevent","mouseevent","touchevent","pointerevent"]},vsh_51240:function(t,e,n){"use strict";n.d(e,{C:function(){return r},P:function(){return i}});var i={click:"_handleClickEvent",copy:"_handleCopy",cut:"_handleCut",paste:"_handlePaste",drop:"_handleDrag",dragenter:"_handleDrag",dragover:"_handleDrag",dragleave:"_handleDrag",focus:"_handleFocusEvent",blur:"_handleFocusEvent"},r=["compositionstart","compositionupdate","compositionend","copy","cut","paste","keydown","keypress","keyup","beforeinput","input","drop","dragenter","dragover","dragleave","resize","compositionstart","compositionupdate","compositionend","focus","blur"]},vsh_34072:function(t,e,n){"use strict";function i(){return!0}function r(){return!1}function o(t){return"function"==typeof t&&"number"!==t.nodeType}n.d(e,{mf:function(){return o},ar:function(){return r},cI:function(){return i}})},vsh_57589:function(t,e,n){"use strict";n.d(e,{D:function(){return o}});var i=n("vsh_84965"),r=n("vsh_31138"),o=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.stopEvent=function(){},i.preventEvent=function(){},(0,r.u)(i,{},e,n),i}return(0,i.c)(e,t),e}(n("vsh_97509").O)},vsh_41802:function(t,e,n){"use strict";n.d(e,{y:function(){return s}});var i=n("vsh_84965"),r=n("vsh_31138"),o=n("vsh_10907"),s=function(t){function e(e,n){var i=t.call(this,e,n)||this;return(0,r.u)(i,o.QA,e,n),i}return(0,i.c)(e,t),e}(n("vsh_57589").D)},vsh_32275:function(t,e,n){"use strict";n.d(e,{h:function(){return s}});var i=n("vsh_84965"),r=n("vsh_31138"),o=n("vsh_10907"),s=function(t){function e(e,n){var i=t.call(this,e,n)||this;return(0,r.u)(i,o.g8,e,n),i}return(0,i.c)(e,t),e}(n("vsh_97509").O)},vsh_97509:function(t,e,n){"use strict";n.d(e,{O:function(){return a}});var i=n("vsh_84965"),r=n("vsh_31138"),o=n("vsh_34072"),s=n("vsh_10907"),a=function(t){function e(e,n){var i=t.call(this,e,n)||this;return(0,r.u)(i,{},e,n),i}return(0,i.c)(e,t),e}(function(){function t(t,e){this.nativeEvent=t,this.type="",(0,r.u)(this,s.TS,t,e),t=null!==t.defaultPrevented&&void 0!==t.defaultPrevented?t.defaultPrevented:!1===t.returnValue,this.isDefaultPrevented=t?o.cI:o.ar,this.isPropagationStopped=o.ar}var e=t.prototype;return e.preventDefault=function(){this.defaultPrevented=!0,this.nativeEvent.preventDefault(),this.isDefaultPrevented=o.cI},e.stopPropagation=function(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=o.cI},t}())},vsh_43110:function(t,e,n){"use strict";n.d(e,{Y:function(){return s}});var i=n("vsh_84965"),r=n("vsh_31138"),o=n("vsh_10907"),s=function(t){function e(e,n){var i=t.call(this,e,n)||this;return(0,r.u)(i,o.Is,e,n),i}return(0,i.c)(e,t),e}(n("vsh_70988").R)},vsh_30778:function(t,e,n){"use strict";n.d(e,{$:function(){return s}});var i=n("vsh_84965"),r=n("vsh_31138"),o=n("vsh_10907"),s=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.key="",i.location=0,i.ctrlKey=!1,i.shiftKey=!1,i.altKey=!1,i.metaKey=!1,i.repeat=!1,i.locale="",i.charCode=0,i.keyCode=0,i.which=function(){return 0},(0,r.u)(i,o.Nf,e,n),i}return(0,i.c)(e,t),e}(n("vsh_57589").D)},vsh_46266:function(t,e,n){"use strict";n.d(e,{U:function(){return s}});var i=n("vsh_84965"),r=n("vsh_31138"),o=n("vsh_10907"),s=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.screenX=0,i.screenY=0,i.clientX=0,i.clientY=0,i.pageX=0,i.pageY=0,i.ctrlKey=!1,i.shiftKey=!1,i.altKey=!1,i.metaKey=!1,i.getModifierState=function(){return!1},i.button=0,i.buttons=0,i.relatedTarget=null,i.movementX=0,i.movementY=0,(0,r.u)(i,o.Ay,e,n),i}return(0,i.c)(e,t),e}(n("vsh_70988").R)},vsh_70988:function(t,e,n){"use strict";n.d(e,{R:function(){return s}});var i=n("vsh_84965"),r=n("vsh_31138"),o=n("vsh_10907"),s=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.view=null,i.detail=0,(0,r.u)(i,o.D3,e,n),i}return(0,i.c)(e,t),e}(n("vsh_97509").O)},vsh_10907:function(t,e,n){"use strict";n.d(e,{D3:function(){return a},a6:function(){return s},TS:function(){return r},QA:function(){return g},g8:function(){return _},Y:function(){return f},Is:function(){return y},cd:function(){return m},Nf:function(){return v},Ay:function(){return h},lI:function(){return o},TT:function(){return p}});var i=n("vsh_31138"),r={type:null,target:null,currentTarget:null,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},o={propertyName:null,elapsedTime:null,pseudoElement:null},s={animationName:null,elapsedTime:null,pseudoElement:null},a={view:null,detail:null},l=0,u=0,c=!1,d=!1,h={screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:null,button:null,buttons:null,relatedTarget:null,movementX:function(t){if("movementX"in t)return t.movementX;var e=l;return l=t.screenX,c?"mousemove"===t.type?t.screenX-e:0:(c=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=u;return u=t.screenY,d?"mousemove"===t.type?t.screenY-e:0:(d=!0,0)}},f={dataTransfer:null},p={deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null},v={key:null,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:null,charCode:function(t){return"keypress"===t.type?(0,i.H)(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?(0,i.H)(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}},g={clipboardData:function(t){return("clipboardData"in t?t:window).clipboardData},data:{}},y={relatedTarget:null},m={data:null,dataTransfer:null,inputType:null},_={data:null}},vsh_31138:function(t,e,n){"use strict";n.d(e,{u:function(){return o},H:function(){return r}});var i=n("vsh_34072");function r(t){var e,n=t.keyCode;return"charCode"in t?0===(e=t.charCode)&&13===n&&(e=13):e=n,32<=(e=10===e?13:e)||13===e?e:0}function o(t,e,n,r){Object.keys(e).forEach((function(o){var s=e[o];(0,i.mf)(s)?t[o]=s(n):t[o]="target"===o?r:n[o]}))}},vsh_37621:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var i=function(){function t(){this._listenersMap={},this._listenersParamsMap={}}var e=t.prototype;return e.on=function(t,e,n){this._addEventListener(t,e,!1,n)},e.once=function(t,e,n){this._addEventListener(t,e,!0,n)},e.off=function(t,e){this._removeEventListener(t,e)},e.removeEventListener=function(t,e){this._removeEventListener(t,e)},e.trigger=function(t,e){return this._triggerEvent(t,e)},e.reset=function(){this._listenersMap={},this._listenersParamsMap={}},e.removeListener=function(t,e){this._removeEventListener(t,e)},e.getListeners=function(t){return Array.from(this._listenersMap[t]||[])},e._addEventListener=function(t,e,n,i){var r;void 0===n&&(n=!1),void 0===i&&(i=1e3),e||console.warn("bind event with invalid cb, event: ".concat(t)),this._listenersMap[t]||(this._listenersMap[t]=[]),this._listenersParamsMap[t]||(this._listenersParamsMap[t]=new WeakMap),this._listenersMap[t][i]||(this._listenersMap[t][i]=[]),this._listenersParamsMap[t].has(e)||void 0!==(r=null===(r=this._listenersMap[t][i])||void 0===r?void 0:r.length)&&(r={listener:e,isOnce:n,index:r,priority:i},null!==(i=this._listenersMap[t][i])&&void 0!==i&&i.push(r),this._listenersParamsMap[t].set(e,r))},e._removeEventListener=function(t,e){var n=this._listenersMap[t]||[],i=null===(i=this._listenersParamsMap[t])||void 0===i?void 0:i.get(e);null!==(t=this._listenersParamsMap[t])&&void 0!==t&&t.delete(e),i&&(e=i.index,i=i.priority,-1<e&&(null===(i=n[i])||void 0===i||delete i[e]))},e._triggerEvent=function(t,e,n){var i=this;void 0===n&&(n=!1);var r,o,s=!1,a=!1,l=[],u=(e=void 0===e?[]:e).find((function(t){return t instanceof Event}));return u&&(r=u.stopImmediatePropagation,o=u.preventDefault,u.stopImmediatePropagation=function(){r.apply(u),s=!0},u.preventDefault=function(){o.apply(u),a=!0}),(this._listenersMap[t]||[]).slice(0).forEach((function(r){if(r)for(var o=0;o<r.length&&!s;o++)if(r[o]){var a=r[o],u=a.listener;if(a.isOnce&&i._removeEventListener(t,u),n)try{u.apply(u,e)}catch(r){l.push(r)}else u.apply(u,e)}})),{shouldStop:s,shouldPrevent:a,errors:l}},t}()},vsh_78224:function(t,e,n){"use strict";var i,r;n.d(e,{r:function(){return i}}),(r=i=i||{}).DID_PASTE="didPaste",r.RESIZE="resize",r.RECT_CHANGE="rectchange",r.SELECTION_CHANGE="selectionchange",r.SELECTION_CHANGE_AND_DOM_UPDATE="editorUpdateDomSelection",r.CONTENT_WILL_CHANGE="contentWillChange",r.CONTENT_CHANGE="contentchange",r.EDITABLE_CHANGE="editablechange",r.PAINT="paint",r.COPY="copy",r.CUT="cut",r.PASTE="paste",r.WILL_DELETE_FROM_CUT="willDeleteFromCut",r.INPUT="input",r.BEFORE_INPUT="beforeinput",r.KEYDOWN="keydown",r.KEYPRESS="keypress",r.KEYUP="keyup",r.EXEC_COMMAND="execCommand",r.ERROR="error",r.DELETE_KEY="keyDelete",r.FOCUS="focus",r.BLUR="blur",r.SCROLL_END="scrollend",r.SCROLL="scroll",r.KEYBAORDCHANGE="keyboardchange",r.COMPOSITION_END="compositionend",r.COMPOSITION_START="compositionstart",r.COMPOSITION_UPDATE="compositionupdate"},vsh_66495:function(t,e,n){"use strict";n.d(e,{f:function(){return l}});var i=n("vsh_84965"),r=n("vsh_93919"),o=n("vsh_37621"),s=n("vsh_21259"),a=n("vsh_33378"),l=new(function(){function t(t){var e=this;this.options=t=void 0===t?{}:t,this._em=new o.Z,this._rect={left:0,top:0},this._canceling=!1,this.container=document.body,this.handleContextMenu=function(t){var n=e.focusEditor||e.lastFocusEditor;if(n&&(!e.container||t.target===e.container)){if(r.Xh.mobile)return e._input.focus(),void t.preventDefault();e._input.style.top="".concat(t.offsetY-1,"px"),e._input.style.left="".concat(t.offsetX-1,"px"),e._input.style.zIndex="999",e._input.style.height="5px";var i,o=(i=n.selection.getSelection()).start;t=i.end;(i=n.getContentState().getZoneState(o.zoneId))&&(e._input.focus(),o=i.slice(o,t).getModelText(),e._input.textContent=o||" ",(t=new Range).setStart(e._input,0),t.setEnd(e._input.childNodes[0],(o||" ").length),null!==(o=window.getSelection())&&void 0!==o&&o.removeAllRanges(),null!==(o=window.getSelection())&&void 0!==o&&o.addRange(t),setTimeout((function(){null!=n&&n.inputModel.updatePosition(),e._input.style.zIndex="-2",e._input.style.height="2px",e._input.textContent=""})))}},this.initInputElement(),this.bindEvents()}var e=t.prototype;return Object.defineProperty(e,"content",{get:function(){return this._input.textContent||""},enumerable:!1,configurable:!0}),e.initInputElement=function(){var t,e,n={position:"absolute",width:"50px",height:"2px",left:"0px",top:"0px",overflow:"hidden",opacity:"0",background:"transparent",color:"transparent",outline:"none",border:"none","font-size":"1px","z-index":"-2","caret-color":"transparent","white-space":"pre-wrap","-webkit-user-select":"text","-moz-user-select":"text","-ms-user-select":"text","user-select":"text"};r.Xh.android&&(n.position="absolute",n.top="100px",n.left="-1200px"),r.Xh.isIPad&&(n["caret-color"]="auto"),r.Xh.isIPad&&(n["caret-color"]="auto"),Object.assign(n,this.options.style||{}),r.Xh.ios&&r.Xh.mobile&&!r.Xh.isIPad&&r.Xh.chrome?this._input=document.createElement("input"):(this._input=document.createElement("div"),this._input.contentEditable="true");try{for(var o=(0,i.e)(Object.entries(n)),s=o.next();!s.done;s=o.next()){var a=(0,i._)(s.value,2),l=a[0],u=a[1];this._input.style[l]=u}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}this.container.appendChild(this._input)},e.setContainer=function(t){var e;null!==(e=this.container)&&void 0!==e&&e.removeEventListener("contextmenu",this.handleContextMenu),this.container!==t&&(this.container=t,this.container.appendChild(this._input)),t.addEventListener("contextmenu",this.handleContextMenu)},e.getContainer=function(){return this.container},e.getFocusEditor=function(){return this.focusEditor},e.getLastFocusEditor=function(){return this.lastFocusEditor},e.bindEvents=function(){var t,e;try{for(var n=(0,i.e)(s.aW),r=n.next();!r.done;r=n.next()){var o=r.value;this._input.addEventListener(o,this.handler)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},e.unbindEvents=function(){var t,e;try{for(var n=(0,i.e)(s.aW),r=n.next();!r.done;r=n.next()){var o=r.value;this._input.removeEventListener(o,this.handler)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},e.handler=function(t){this._canceling||this._em.trigger(t.type,[t])},e.isFocus=function(t){var e=document.activeElement===this._input;return t?e&&this.focusEditor===t:e},Object.defineProperty(e,"contentEditable",{set:function(t){this._input.contentEditable=String(t)},enumerable:!1,configurable:!0}),e.on=function(t,e,n){this._em.on(t,e,n)},e.off=function(t,e){this._em.off(t,e)},e.updatePosition=function(t){var e;t.left===this._rect.left&&t.top===this._rect.top||r.Xh.mobile||(null===(e=this.focusEditor)||void 0===e?void 0:e.getScrollContainer())&&(this._rect=t,t=(e=this._rect).left,e=e.top,this._input.style.left="".concat(t,"px"),this._input.style.top="".concat(e,"px"))},e.expandWordRange=function(t){var e=t.text,n=t.offset,i=t.direction;return 0===e.length?n:(t=window.getSelection())&&t.modify?(this._input.textContent="".concat(e,"1"),(e=document.createRange()).setStart(this._input.firstChild,n),e.setEnd(this._input.firstChild,n),t.removeAllRanges(),t.addRange(e),t.modify("move",i,"word"),t=t.anchorOffset,this.clear(),t):n},e.setTextAndSelectAll=function(t){var e,n=window.getSelection();n&&(this._input.textContent=t,(e=document.createRange()).setStart(this._input.firstChild,0),e.setEnd(this._input.firstChild,t.length),n.removeAllRanges(),n.addRange(e))},e.setToFront=function(){this._input.style.zIndex="99999",this._input.style.position="fixed"},e.setToBack=function(){this._input.style.zIndex="-2",this._input.style.position="absolute"},e.focus=function(t){var e,n;null!=t&&t.focusEditor||!t||(t.focusEditor=this.focusEditor),null!=t&&t.focusEditor&&this.focusEditor!==(null==t?void 0:t.focusEditor)&&(this.setContainer(t.focusEditor.inputModel.getInputContainer()),null!==(n=this.focusEditor)&&void 0!==n&&n.blur(),this.focusEditor=t.focusEditor,this.lastFocusEditor=this.focusEditor),!0!==(null==t?void 0:t.force)&&document.activeElement===this._input||((e=window.getSelection())&&(n=document.createRange(),e.removeAllRanges(),n.selectNodeContents(this._input),n.collapse(!1),e.addRange(n),e.addRange(n)),this._input.focus(t))},e.blur=function(t){this.focusEditor===(null==t?void 0:t.blurEditor)&&(this.focusEditor=void 0,r.Xh.isIOS&&r.Xh.safari&&!r.Xh.isIPad&&this._input.blur(),null!==(t=window.getSelection())&&void 0!==t&&t.removeAllRanges())},e.clear=function(){this._input.textContent=""},e.cancelComposing=function(){this._canceling=!0,this.clear(),this.blur(),this.focus({force:!0}),this._canceling=!1},e.destroy=function(){var t;this.unbindEvents(),null!==(t=this._input.parentNode)&&void 0!==t&&t.removeChild(this._input)},e.changeStyle=function(t){t?this._input.style.removeProperty("transform"):this._input.style.transform="scale(0, 0.01)"},(0,i.a)([a.W],t.prototype,"handler",null),t}())},vsh_49359:function(t,e,n){"use strict";n.d(e,{g:function(){return S}});var i=n("vsh_84965"),r=(n("vsh_72862"),n("vsh_34482")),o=n("vsh_90166"),s=n("vsh_93919"),a=n("vsh_78224"),l=n("vsh_32275"),u=n("vsh_30778"),c=n("vsh_31138"),d=n("vsh_10907"),h=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.inputType="",(0,c.u)(i,d.cd,e,n),i}return(0,i.c)(e,t),e}(n("vsh_57589").D),f=n("vsh_41013"),p=n("vsh_21259"),v=n("vsh_66495"),g=n("vsh_31834"),y=n("vsh_15516"),m=function(t){var e=t.evt,n=void 0===(d=t.isBackward)||d,i=void 0===(s=t.charToDeleteIfNotAtLineStartOrEnd)?1:s,o=t.editor;if(o.triggerEditorEvent(a.r.DELETE_KEY,{e:e,isBackward:n}),e.defaultPrevented)return null;var s,l=o.getContentState().getActiveZone(),u=l.getZoneId(),c=(h=(f=o.selection.getSelection()).start).line,d=h.offset,h=(t=(s=f.toPosition()).start,s.len),f={evt:e,deltaSet:(new y.D).compose(new r.I({zoneId:u})),editor:o};if(n&&o.pluginManager.call("editorWillDoDeleteKey",f),o.callAll("aceDoDeleteKey",{editor:o,evt:e,caretLine:o.selection.getSelection().start.line}),s=[],h?(h=new r.I({zoneId:u}).retain(t).delete(h),h=f.deltaSet.compose(h),o.getContentState().apply(h,{type:p.kK.DeleteRange}),s=[!0]):n&&(d={editor:o,evt:e,lineMarker:null===(l=l.getLine(c))||void 0===l?void 0:l.hasLineMarker(),zoneId:u,theLine:c,col:d},s=o.callAll("editorDoDeleteKey",d)),s.includes(!0))return o.callAll("editorAfterDoDeleteKey",{editor:o,theLine:c,evt:e}),null;var v=!1;return f.deltaSet.forEach((function(t){0<t.ops.length&&(v=!0)})),v?f.deltaSet:(o=function(t){var e=t.isBackward,n=void 0===(u=t.charToDeleteIfNotAtLineStartOrEnd)?1:u,i=(d=t.editor).selection.getSelection(),o=d.getContentState(),s=(h=i.start).offset,a=h.zoneId,l=i.toPosition().start,u=new r.I({zoneId:a});if(t=i.start.line,h=null===(d=o.getZoneState(a))||void 0===d?void 0:d.getLine(t)){o=Number(h.hasLineMarker()),a=i.start.offset===o;var c,d=h.length()-i.start.offset==1,h=(i=h.nextSibling(),h.getModelText());return!i&&d&&!e||a&&e&&0===t?null:(e?a?u.retain(l-1-o).delete(o+1):(c="function"==typeof n?n({lineText:h,offset:s,lineMarker:o}):n,u.retain(l-c).delete(c)):d?(i=Number(i.hasLineMarker()),u.retain(l).delete(1+i)):(c="function"==typeof n?n({lineText:h,offset:s,lineMarker:o}):n,u.retain(l).delete(c)),u)}}({isBackward:n,charToDeleteIfNotAtLineStartOrEnd:i,editor:o}),o?f.deltaSet.compose(o):null)};var _=n("vsh_52016"),b=n("vsh_33378"),E="​​",S=function(){function t(t,e){var n=this;this.editor=t,this._inputContainer=e,this._hiddenInput=v.f,this._isComposing=!1,this._compositionStartEditorRange=null,this._additionText="",this.recordQueue=[],this._compositionStartBrowserOffset=void 0,this._mergeInputRecord=function(){for(var t=n.recordQueue.length-1,e=t-1;0<=e&&0<=t;){var i=n.recordQueue[t],r=n.recordQueue[e];i.type===r.type&&p.MU.includes(i.type)?(n.editor.undoModule.mergeRecords(r,i),e=(t=e)-1):e=(t=e-1)-1}n.recordQueue=[]},this._mergeInputRecordThrottle=(0,_.P)(this._mergeInputRecord,p.mT,{leading:!1}),this.bindEvents()}var e=t.prototype;return Object.defineProperty(e,"isComposing",{get:function(){return this._isComposing},set:function(t){this._isComposing&&!t&&this.reset(),this._isComposing=t,this.editor.setStatus("isComposing",t)},enumerable:!1,configurable:!0}),e.bindEvents=function(){var t,e;try{for(var n=(0,i.e)(p.aW),r=n.next();!r.done;r=n.next()){var o=r.value;this.editor._listenEvents.includes(o)&&this._hiddenInput.on(o,this.eventHandler)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.editor.on(a.r.SELECTION_CHANGE_AND_DOM_UPDATE,this.handleViewSelectionChange),this.editor.on(a.r.CONTENT_CHANGE,this.handleContentChange,0),this._inputContainer.addEventListener("scroll",this.handleScroll)},e.unbindEvents=function(){var t,e;try{for(var n=(0,i.e)(p.aW),r=n.next();!r.done;r=n.next()){var o=r.value;this.editor._listenEvents.includes(o)&&this._hiddenInput.off(o,this.eventHandler)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.editor.off(a.r.SELECTION_CHANGE_AND_DOM_UPDATE,this.handleViewSelectionChange),this.editor.off(a.r.CONTENT_CHANGE,this.handleContentChange),this._inputContainer.removeEventListener("scroll",this.handleScroll)},e.handleScroll=function(){this._inputContainer.scrollLeft=0,this._inputContainer.scrollTop=0},e.eventHandler=function(t){var e=this.editor;if(this._hiddenInput.getFocusEditor()===e&&t instanceof FocusEvent&&"blur"===t.type&&this.editor.blur(),this._hiddenInput.getLastFocusEditor()===e&&t instanceof FocusEvent&&"focus"===t.type&&this.editor.focus(),e.isFocus()){if(t instanceof KeyboardEvent){if(e.isInEmbed())return;var n=new u.$(t,t.target);if(e.triggerEditorEvent(t.type,n).shouldPrevent)return;"keydown"===t.type&&(this.handleKeyDown(t),e.callAll("editorKeyDown",{evt:t}),(0,g.YO)(t)&&!t.defaultPrevented&&e.selection.handleMovementKey({evt:n}))}if(t instanceof InputEvent){var i=new h(t,t.target);if(e.triggerEditorEvent(t.type,i).shouldPrevent)return;switch(t.type){case"beforeinput":this.handleBeforeInput(t);break;case"input":this.handleInput(t)}}if(t instanceof CompositionEvent){if(i=new l.h(t,t.target),e.triggerEditorEvent(t.type,i).shouldPrevent)return;switch(t.type){case"compositionstart":this.handleCompositionStart(t);break;case"compositionupdate":this.handleCompositionUpdate(t);break;case"compositionend":this.handleCompositionEnd(t)}}if(t instanceof ClipboardEvent)switch(t.type){case"copy":this.editor._handleCopy(t);break;case"paste":this.editor._handlePaste(t);break;case"cut":this.editor._handleCut(t)}t instanceof FocusEvent&&"focus"===t.type&&this.editor._handleFocusEvent(t)}},e.handleBeforeInput=function(t){void 0!==t.isComposing&&(this.isComposing=t.isComposing,this._compositionStartBrowserOffset=t.isComposing?this._compositionStartBrowserOffset:void 0),s.Xh.safari&&"insertText"===t.inputType&&this.isComposing&&(this.isComposing=!1,this._compositionStartBrowserOffset=void 0),this.resolveQuickTyping(t),this.applyInputChange(t.data,t.inputType,this.isComposing?{composingUnderlineStatus:"true"}:void 0),this.isComposing||this._mergeInputRecordThrottle()},e.handleInput=function(t){this.isComposing||this.reset()},e.handleCompositionStart=function(t){this.isComposing=!0;var e=(i=this.editor.selection.getSelection()).start,n=i.isBackward,i=this.editor.modulesContainer.get(f.h.Range);this._compositionStartEditorRange=new i({start:e,end:e,isBackward:n,editor:this.editor}),this._compositionStartBrowserOffset=this.browserSelectionLength},e.handleCompositionUpdate=function(t){this.isComposing=!0},e.handleCompositionEnd=function(t){var e=(o=this.editor.selection.getSelection().toPosition()).start,n=o.len,i=o.zoneId,o=new r.I({zoneId:i});null!==this._compositionStartEditorRange&&(n=e-(i=this._compositionStartEditorRange.toPosition().start)+n,e=i),o.retain(e).retain(n,{composingUnderlineStatus:""}),this.isComposing=!1,this.editor.getContentState().apply(o,{type:p.kK.FlushInput}),this._mergeInputRecord(),this._compositionStartBrowserOffset=void 0},e.handleViewSelectionChange=function(t){t.fromView,t=t.selection,!this.isComposing&&s.Xh.isIPad&&(null!=t&&t.isCollapsed()?v.f.clear():v.f.setTextAndSelectAll(E)),this.updatePosition(),this.editor.isFocus()&&this._hiddenInput.setContainer(this._inputContainer)},e.handleKeyDown=function(t){var e,n,i=t.keyCode,a=t.ctrlKey,l=t.metaKey,u=t.altKey,c=this.editor,d=p.kK.KeyEvent;(0,g.Wl)(t)||!this.editor.isEditable()||this.editor.getStatus("isComposing")||(e=!1,n=null,i===o.VD.Enter?(function(t){var e,n=t.evt,i=t.editor,o=(e=i.getContentState()).getActiveZone().getZoneId(),s=(l=i.selection.getSelection()).start.line,a=l.toPosition(),l=(t=a.start,a.len);(e=null===(a=e.getZoneState(o))||void 0===a?void 0:a.getLine(s))&&(a=e.getLineAttributes().toMap(),e={evt:n,delta:new r.I({zoneId:o}),editor:i},i.callAll("doReturnKey",{}),i.pluginManager.call("editorWillDoReturnKey",e),o=new r.I({zoneId:o}),e.delta.ops.length?o=o.compose(e.delta):o.retain(t).delete(l).insertEnter().insertLineMarker(a),i.getContentState().apply(o,{type:p.kK.Return}),i.callAll("editorAfterDoReturnKey",{theLine:s}),n.preventDefault())}({evt:t,editor:c}),this._mergeInputRecordThrottle(),e=!0):i===o.VD.BackSpace&&(a||l)?(n=m({evt:t,isBackward:!0,charToDeleteIfNotAtLineStartOrEnd:g.KO,editor:c}),d=p.kK.DeleteToLineStart,e=!0):i===o.VD.Delete&&(a||l)||a&&i===o.VD.K&&(s.Xh.isMac||s.Xh.isIOS)?(n=m({evt:t,isBackward:!1,charToDeleteIfNotAtLineStartOrEnd:g.bi,editor:c}),d=p.kK.DeleteToLineEnd,e=!0):i===o.VD.BackSpace&&u?(n=m({evt:t,isBackward:!0,charToDeleteIfNotAtLineStartOrEnd:g.z4,editor:c}),d=p.kK.DeleteEntireWordBackward,e=!0):i===o.VD.Delete&&u?(n=m({evt:t,isBackward:!1,charToDeleteIfNotAtLineStartOrEnd:g.Cv,editor:c}),d=p.kK.DeleteEntireWordForward,e=!0):i===o.VD.BackSpace||a&&i===o.VD.H&&(s.Xh.isMac||s.Xh.isIOS)?(n=m({evt:t,isBackward:!0,charToDeleteIfNotAtLineStartOrEnd:g.FM,editor:c}),d=p.kK.DeleteBackward,e=!0):i===o.VD.Delete||a&&i===o.VD.D&&(s.Xh.isMac||s.Xh.isIOS)?(n=m({evt:t,isBackward:!1,charToDeleteIfNotAtLineStartOrEnd:g.R7,editor:c}),d=p.kK.DeleteForward,e=!0):s.Xh.isIPad&&s.Xh.safari&&(i===o.VD.C&&l?(this.editor.focus(),v.f.setTextAndSelectAll(E)):i===o.VD.X&&l&&this.editor.focus()),e&&t.preventDefault(),n&&(this.editor.getContentState().apply(n,{type:d}),this._mergeInputRecordThrottle()))},e.resolveQuickTyping=function(t){var e,n,r,o;this.isComposing||(r=t.inputType).startsWith("delete")||r.startsWith("deleteBy")||(e=this.getBrowserRange())&&!e.collapsed&&(n=this._hiddenInput.content.length-e.startOffset,t=(o=this.editor.selection.getSelection()).start,r=o.isBackward,o=this.editor.modulesContainer.get(f.h.Range),this._compositionStartEditorRange=new o({start:(0,i.b)((0,i.b)({},t),{offset:t.offset-n}),end:(0,i.b)((0,i.b)({},t),{offset:t.offset-n}),isBackward:r,editor:this.editor}),this._additionText=this._hiddenInput.content.slice(e.endOffset))},e.applyInputChange=function(t,e,n){var o=this;if((null!==t||["deleteCompositionText","deleteContentBackward"].includes(e))&&void 0!==t&&this.editor.isEditable()){var a=(0,g.cB)(this.editor),l=n?(0,i.b)((0,i.b)({},a),n):a,u=this.editor.selection.getSelection(),c=u.toPosition();e=new r.I({zoneId:c.zoneId}),n=c.start,a=c.len;null!==this._compositionStartEditorRange&&(a=n-(h=this._compositionStartEditorRange.toPosition().start)+a,n=h);var d,h=(null!=t?t:"")+this._additionText;return s.Xh.mobile?(a||(t=this.getBrowserRange())&&(n-=a=t.endOffset-t.startOffset,this._compositionStartEditorRange&&((d=this._compositionStartEditorRange.start).offset-=a,t=this.editor.modulesContainer.get(f.h.Range),this._compositionStartEditorRange=new t({start:d,end:d,isBackward:!1,editor:this.editor}))),e.retain(n).delete(a).insert(h,l),void this.editor.getContentState().apply(e,{type:p.kK.FlushInput})):this._isComposing?(a=this.browserSelectionLength-(null!==(d=this._compositionStartBrowserOffset)&&void 0!==d?d:0),e.retain(n).delete(c.len+a).insert(h,l),this.editor.getContentState().apply(e,{type:p.kK.FlushInput}),void(u.isCollapsed()&&requestAnimationFrame((function(){var t,e,n,r;void 0!==o._compositionStartBrowserOffset&&(t=(null!==(n=null===(e=o._compositionStartEditorRange)||void 0===e?void 0:e.start.offset)&&void 0!==n?n:0)+o.browserSelectionLength-(null!==(r=o._compositionStartBrowserOffset)&&void 0!==r?r:0),e=u.start,n=u.end,r=u.isBackward,o.editor.selection.setSelection({end:(0,i.b)((0,i.b)({},n),{offset:t,isEdge:!0}),start:(0,i.b)((0,i.b)({},e),{offset:t,isEdge:!0}),isBackward:r}))})))):(e.retain(n).delete(a).insert(h,l),void this.editor.getContentState().apply(e,{type:p.kK.FlushInput}))}},e.getBrowserRange=function(){var t=window.getSelection();return null!=t&&t.rangeCount?t.getRangeAt(0):null},Object.defineProperty(e,"browserSelectionLength",{get:function(){var t,e=this.getBrowserRange(),n=null==e?void 0:e.toString();return s.Xh.isIPad&&s.Xh.safari&&n===E&&(null==e?void 0:e.endOffset)===E.length||null===(t=null==e?void 0:e.endOffset)||void 0===t?0:t},enumerable:!1,configurable:!0}),e.updatePosition=function(){var t,e,n,i,r;s.Xh.mobile||(r=(t=this.editor.selection.getSelection()).start,n=t.end,e=t.isBackward,t=(i=this.editor.rectModule.getCaretRect(e?n:r)).top,e=i.left,n=i.height,this.editor.isFocus()&&(i=(r=this.editor.rectModule._getEditorRectRelativeContainer()).top,r=r.left,this._hiddenInput.updatePosition({top:t+n+i-2,left:e+r})))},e.reset=function(){null!==this._compositionStartEditorRange&&(this._compositionStartEditorRange=null,this._additionText="",this._hiddenInput.clear())},e.focusAndClearHiddenInput=function(){this._hiddenInput.isFocus(this.editor)||(this._hiddenInput.focus({focusEditor:this.editor,force:!0}),this._hiddenInput.clear())},e.handleContentChange=function(){var t=this.editor.getContentState().contentApplyRuntime;this.recordQueue.push(t.currentRuntime)},e.hasFocus=function(){return this._hiddenInput.isFocus(this.editor)},e.focus=function(){this.focusAndClearHiddenInput()},e.blur=function(){this._hiddenInput.blur({blurEditor:this.editor})},e.destroy=function(){this.unbindEvents()},e.getInputContainer=function(){return this._inputContainer},e.changeHiddentInputStyle=function(t){return this._hiddenInput.changeStyle(t)},e.setContentEditable=function(t){this._hiddenInput.contentEditable=t},(0,i.a)([b.W],t.prototype,"handleScroll",null),(0,i.a)([b.W],t.prototype,"eventHandler",null),(0,i.a)([b.W],t.prototype,"handleBeforeInput",null),(0,i.a)([b.W],t.prototype,"handleInput",null),(0,i.a)([b.W],t.prototype,"handleCompositionStart",null),(0,i.a)([b.W],t.prototype,"handleCompositionUpdate",null),(0,i.a)([b.W],t.prototype,"handleCompositionEnd",null),(0,i.a)([b.W],t.prototype,"handleViewSelectionChange",null),(0,i.a)([b.W,function(t,e,n){var i=n.value;return n.value=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.editor.undoModule.batchedUndo((function(){i.apply(t,e)}))},n}],t.prototype,"handleKeyDown",null),(0,i.a)([b.W],t.prototype,"applyInputChange",null),(0,i.a)([b.W],t.prototype,"updatePosition",null),(0,i.a)([b.W],t.prototype,"reset",null),(0,i.a)([b.W],t.prototype,"handleContentChange",null),t}()},vsh_21259:function(t,e,n){"use strict";n.d(e,{kK:function(){return r},mT:function(){return u},Uk:function(){return c},Ly:function(){return a},aW:function(){return d},MU:function(){return l}});var i,r,o,s=n("vsh_90166");(o=r=r||{}).FlushInput="flushInput",o.Composition="composition",o.DeleteForward="deleteForward",o.DeleteBackward="deleteBackward",o.DeleteToLineStart="deleteToLineStart",o.DeleteToLineEnd="deleteToLineEnd",o.DeleteEntireWordBackward="deleteEntireWordBackward",o.DeleteEntireWordForward="deleteEntireWordForward",o.DeleteRange="deleteRange",o.Return="doReturnKey",o.KeyEvent="handleKeyEvent";var a,l=[r.FlushInput,r.DeleteForward,r.DeleteBackward,r.Return,r.Composition],u=1e3;(i={})[s.VD.Enter]="_handleReturnKey",i[s.VD.Delete]="_handleDeleteKey",i[s.VD.BackSpace]="_handleDeleteKey";var c=/[\u0030-\u0039\u0041-\u005A\u0061-\u007A\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF\u0100-\u1FFF\u3040-\u9FFF\uF900-\uFDFF\uFE70-\uFEFE\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFDC]/;!function(t){t.KEYDOWN="keydown",t.KEYPRESS="keypress",t.KEYUP="keyup",t.INPUT="input",t.BEFORE_INPUT="beforeinput",t.COMPOSITION_START="compositionstart",t.COMPOSITION_UPDATE="compositionupdate",t.COMPOSITION_END="compositionend",t.COPY="copy",t.CUT="cut",t.PASTE="paste",t.FOCUS="focus",t.BLUR="blur",t.CONTEXT_MENU="contextmenu"}(a=a||{});var d=Object.values(a)},vsh_31834:function(t,e,n){"use strict";n.d(e,{FM:function(){return T},bi:function(){return M},KO:function(){return k},z4:function(){return R},Cv:function(){return P},R7:function(){return x},cB:function(){return L},Wl:function(){return C},YO:function(){return D}});var i=n("vsh_84965"),r=n("vsh_90166"),o=n("vsh_93919");var s=RegExp("[".concat("\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\u1ab0-\\u1aff\\u1dc0-\\u1dff\\ufe0e\\ufe0f","]"));var a="\\ud800-\\udfff",l="[".concat(a,"]"),u="[".concat("\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\u1ab0-\\u1aff\\u1dc0-\\u1dff","]"),c="\\ud83c[\\udffb-\\udfff]",d="(?:".concat(u,"|").concat(c,")"),h="[^".concat(a,"]"),f="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",v="".concat(d,"?"),g="[".concat("\\ufe0e\\ufe0f","]?"),y=g+v+"(?:".concat("\\u200d","(?:").concat([h,f,p].join("|"),")").concat(g+v,")*"),m="".concat(h).concat(u,"?"),_="(?:".concat([m,u,f,p,l].join("|"),")"),b=RegExp("".concat(c,"(?=").concat(c,")|").concat(_+y),"g");function E(t){return function(t){return s.test(t)}(t)?function(t){return t.match(b)||[]}(t):t.split("")}var S,w=n("vsh_21259"),C=function(t){var e=t.keyCode;t=t.ctrlKey;return[r.VD.Left,r.VD.Right,r.VD.Up,r.VD.Down].includes(e)||o.Xh.isMac&&t&&e===r.VD.B||o.Xh.isMac&&t&&e===r.VD.F},I=function(t){return w.Uk.test(t)},T=function(t){var e=t.offset;return function(t){return t.length<2?t.length:(t=E(t))[t.length-1].length}((t=t.lineText).slice(0,e))},x=function(t){var e=t.offset;return function(t){return(t.length<2?t:E(t)[0]).length}((t=t.lineText).slice(e))},k=function(t){var e=t.lineMarker;return t.offset-e},M=function(t){var e=t.offset;return t.lineText.length-1-e},R=function(t){var e=t.lineMarker,n=t.offset,i=t.lineText;if(1<(t=T(t)))return t;for(var r=n-1;e<r&&I(i[r-1]);)r--;return n-r},P=function(t){var e=t.offset,n=t.lineText;if(1<(t=x(t)))return t;for(var i=e+1;i<n.length-1&&I(n[i]);)i++;return i-e},O=(S=null,function(t){var e,n;if(S)return S;var r=t.getContentState().schema,o=[];try{for(var s=(0,i.e)(Object.keys(r.schemas)),a=s.next();!a.done;a=s.next()){var l=a.value;r.schemas[l].mark&&o.push(l)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return o.length?S=new RegExp(o.join("|")):null});function L(t,e){var n,r,o=e||O(t),s=t.getContentState(),a=t._getInlineAttributesOfPreviousPosition(),l=(e=t.selection.getSelection().toPosition(),e=s.getInlineStyleOverride(e),{});try{for(var u=(0,i.e)(a),c=u.next();!c.done;c=u.next()){var d=(0,i._)(c.value,2),h=d[0],f=d[1];if(null!=o&&o.test(h)){var p=t.getContentState().schema.get(h);if(p&&!1===p.tailInherit&&t._getInlineAttributesOfNextPosition().toMap()[h]!==f)continue;l[h]=f}}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return(0,i.b)((0,i.b)({},l),e)}var D=function(t){var e=t.keyCode;t=t.ctrlKey;return[r.VD.Left,r.VD.Right,r.VD.Up,r.VD.Down,r.VD.Home,r.VD.End,r.VD.PageUp,r.VD.PageDown].includes(e)||o.Xh.isMacOSX&&t&&[r.VD.A,r.VD.E,r.VD.F,r.VD.B,r.VD.P,r.VD.N].includes(e)}},vsh_23654:function(t,e,n){"use strict";var i,r;n.d(e,{A:function(){return i}}),(r=i=i||{})[r.EQUAL=0]="EQUAL",r[r.UNEQUAL=1]="UNEQUAL",r[r.UPDATE=2]="UPDATE"},vsh_4850:function(t,e,n){"use strict";n.d(e,{M:function(){return w}});var i=n("vsh_84965"),r=n("vsh_38160"),o=(n("vsh_72862"),n("vsh_93862")),s=n("vsh_34482"),a=n("vsh_41013"),l=n("vsh_15516"),u=n("vsh_90166"),c=n("vsh_65498");function d(t,e,n){if(void 0===n&&(n={}),!t)throw"object"==(0,c.Z)(n)&&Object.keys(n).length&&(n=Object.entries(n).map((function(t){t=(e=(0,i._)(t,2))[0];var e=e[1];return"".concat(t,": ").concat(e)})).join(", "),console.log("[oops debug]: ".concat(n))),e="Failed assertion: ".concat(e),new Error(e)}var h=n("vsh_33378"),f=n("vsh_71265");function p(t){var e;throw null!==(e=t.e)&&void 0!==e?e:new Error(t.message)}var v=function(){function t(){this.handleError=p,this.numToAttrib={},this.attribToNum={},this.nextNum=0,this.dirty=!1}var e=t.prototype;return e.putAttrib=function(t,e){var n=[String(t[0]||""),String(t[1]||"")];return(t=String(n))in this.attribToNum?this.attribToNum[t]:e?-1:(e=this.nextNum++,this.attribToNum[t]=e,this.numToAttrib[e]=n,this.dirty=!0,e)},e.getAttrib=function(t){return(t=this.numToAttrib[t])&&[t[0],t[1]]},e.updateAttrib=function(t,e){var n,i=this.getAttrib(t);i&&(n=String(i),i=String(e),null!=this.attribToNum[n]&&delete this.attribToNum[n],this.attribToNum[i]=t,this.numToAttrib[t]=e)},e.getAttribKey=function(t){return(t=this.numToAttrib[t])?t[0]:""},e.getAttribValue=function(t){return(t=this.numToAttrib[t])?t[1]:""},e.getAttribNum=function(t){return"string"!=typeof t&&(t=String(t)),this.attribToNum[t]},e.eachAttrib=function(t){for(var e in this.numToAttrib)this.numToAttrib.hasOwnProperty(e)&&t((e=this.numToAttrib[e])[0],e[1])},e.toJsonable=function(){var t,e,n={};for(t in this.numToAttrib)this.numToAttrib.hasOwnProperty(t)&&(e=this.numToAttrib[t],n[t]=[e[0],e[1]]);return{numToAttrib:n,nextNum:this.nextNum}},e.fromJsonable=function(t){for(var e in this.numToAttrib={},this.nextNum=t.nextNum,this.attribToNum={},t.numToAttrib){var n;t.numToAttrib.hasOwnProperty(e)&&(n=t.numToAttrib[e],this.attribToNum[String(n)]=Number(e),this.numToAttrib[e]=[n[0],n[1]])}try{this.checkConsistent()}catch(t){this.handleError({e:t,message:"[attribute-pool][fromJsonable] check consistent fail",level:u.WV.FATAL})}return this.dirty=!0,this},e.toJsonableNoCloning=function(){return{numToAttrib:this.numToAttrib,nextNum:this.nextNum}},e.fromJsonableNoCloning=function(t){for(var e in this.numToAttrib=t.numToAttrib,this.nextNum=t.nextNum,this.attribToNum={},this.numToAttrib)this.numToAttrib.hasOwnProperty(e)&&(this.attribToNum[String(this.numToAttrib[e])]=Number(e));try{this.checkConsistent()}catch(t){this.handleError({e:t,message:"[attribute-pool][fromJsonableNoCloning] check consistent fail",level:u.WV.FATAL})}return this},e.copy=function(){var e,n,i,r=new t;for(e in this.numToAttrib)this.numToAttrib.hasOwnProperty(e)&&(n=this.numToAttrib[e],r.numToAttrib[e]=[n[0],n[1]]);for(i in this.attribToNum)this.attribToNum.hasOwnProperty(i)&&(r.attribToNum[i]=this.attribToNum[i]);return r.nextNum=this.nextNum,r},e.checkConsistent=function(){for(var t=0;t<this.nextNum;t++)d(t in this.numToAttrib,"AttribPool: "+t+" is not in this.numToAttrib");var e,n,i,r={};for(e in this.numToAttrib)this.numToAttrib.hasOwnProperty(e)&&(d(0<=Number(e)&&Number(e)<this.nextNum,"AttribPool: "+e+" is not in range [0,"+this.nextNum+"]"),n=this.numToAttrib[e],d("[object Array]"===Object.prototype.toString.call(n),"AttribPool: attrib should be an array"),d(2===n.length,"AttribPool: attrib length should be 2"),d("string"==typeof n[0],"AttribPool: key should be string"),d("string"==typeof n[1],"AttribPool: value should be string"),d(!(String(n)in r),"AttribPool: attrib was already seen"),r[String(n)]=!0,d(this.attribToNum[String(n)]===Number(e),"AttribPool: attribToNum does not match"));for(i in this.attribToNum)this.attribToNum.hasOwnProperty(i)&&d(i in r,"AttribPool: attr was not seen")},e.setAttributes=function(t){var e=this,n=[];t instanceof l.D?t.forEach((function(t){t.forEach((function(t){t.attributes&&e.setAttributes(t.attributes)}))})):t instanceof Array||(n=(0,f.L)(t)),n.forEach((function(t){return e.putAttrib(t)}))},e.setOnErrorCb=function(t){this.handleError=t},e.resetOnErrorCb=function(){this.handleError=p},e.clear=function(){this.numToAttrib={},this.attribToNum={},this.nextNum=0,this.dirty=!1},(0,i.a)([h.W],t.prototype,"toJsonable",null),(0,i.a)([h.W],t.prototype,"fromJsonable",null),(0,i.a)([h.W],t.prototype,"checkConsistent",null),t}(),g=n("vsh_89828"),y=n("vsh_62145"),m=n("vsh_93928"),_=n("vsh_22432");var b=function(){function t(){this.runtimeStack=[]}var e=t.prototype;return Object.defineProperty(e,"atRuntime",{get:function(){return!!this.runtimeStack.length},enumerable:!1,configurable:!0}),Object.defineProperty(e,"atDeepRuntime",{get:function(){return 1<this.runtimeStack.length},enumerable:!1,configurable:!0}),Object.defineProperty(e,"currentRuntime",{get:function(){return this.runtimeStack[this.runtimeStack.length-1]},enumerable:!1,configurable:!0}),e.start=function(t){var e=(0,g.zs)(6);this.runtimeStack.push({id:e,type:t})},e.stop=function(){return this.runtimeStack.pop()},t}(),E=function(){function t(t){var e=this,n=t.deltaSet,i=t.schema;t=t.modulesContainer;this.content=new Map,this._changeCbk=function(){},this.activeZoneId=m.S,this.storeAttributes={},this._getInternalZoneEntities=function(t,e,n){return[]},this.contentApplyRuntime=new b,this.schema=null!=i?i:new y.V({}),this._attributes=new v,this.modulesContainer=t,null!=n&&n.forEach((function(t){var n=e.modulesContainer.get(a.h.ZoneState);e.content.set(t.zoneId,new n(t.zoneId,t)),t.forEach((function(t){t.attributes&&e._attributes.setAttributes(t.attributes)}))}))}var e=t.prototype;return e.create=function(e){return new t(e)},e.getContent=function(){return this.content},e.setActiveZone=function(t){this.getZoneState(t)&&(this.activeZoneId=t)},e.getActiveZone=function(){return this.getZoneState(this.activeZoneId)},e[Symbol.iterator]=function(){return this.content.values()},e.getEntities=function(t,e){var n=[];if(t instanceof Array){var r=this.getZoneState(m.S);n.push.apply(n,(0,i.d)([],(0,i._)(r.getEntities(t,e,this._getInternalZoneEntities)),!1))}else{t instanceof Function&&(e=t,t={start:{line:0,offset:0,zoneId:"0"},end:{line:o=(r=this.getZoneState(m.S)).length()-1,offset:r.getLine(o).length(),zoneId:"0"}});var o=t.start.zoneId;if(!(o=this.getZoneState(o)))return[];n.push.apply(n,(0,i.d)([],(0,i._)(o.getEntities(t,e,this._getInternalZoneEntities)),!1))}return n},e._logIfInvalidDelta=function(t){try{throw new Error("invalid delta")}catch(e){console.log(t,e.stack)}},e.apply=function(t,e){return t=this.applyToContentState(t,e=void 0===e?{}:e),this.triggerChangeCbk((0,i.b)((0,i.b)({},t),{options:e}))},e.applyToContentState=function(t,e){var n,i=this;void 0===e&&(e={}),this._willApplyCbk&&this._willApplyCbk(),this.contentApplyRuntime.start(e.type||"editEvent");t=(0,l.o)(t)?t:new l.D(((r={})[t.zoneId]=t,r));var r=this._clone(!1,t);if(t.forEach((function(t){t.forEach((function(t){"string"==typeof t.insert&&t.insert.includes(u.T6)&&i._logIfInvalidDelta("invalid delta: insert a zero space")}))})),e.isRemote||!1===e.normalize||(t=(0,g.qW)(this,this.schema,t)),this._willChangeCbk)try{t=this._willChangeCbk({current:this,next:this,deltaSet:t,options:e})}catch(t){null!==(n=this._errorCbk)&&void 0!==n&&n.call(this,{e:t,message:"[contentState][apply] call _willChangeCbk error",level:_.W.ERROR})}var o={};try{t.forEach((function(t){var e,n=t.zoneId,r=i.getZoneState(n);r?(e=r.apply(t,(function(t,e,r){var s={start:t,deletes:e,inserts:r};o[n]?o[n].push(s):o[n]=[s],(0,g.s7)(r)?i._onZoneMutate(n,t,e,r):null!==(e=i._errorCbk)&&void 0!==e&&e.call(i,{message:"[contentState][apply] 数据异常: ".concat(r),level:_.W.FATAL})})),i.content.set(n,e),t instanceof s.I&&i._followInlineStyleOverride(t)):(r=i.addZone(n,t),o[n]=[{start:0,deletes:[],inserts:r.lines}])}))}catch(t){null!==(n=this._errorCbk)&&void 0!==n&&n.call(this,{message:"[contentState][apply] error",level:_.W.FATAL,e:t})}return{changes:this._fixChanges(o),previous:r,deltaSet:t}},e.triggerChangeCbk=function(t){var e=t.changes,n=t.previous,i=t.deltaSet;t=t.options;try{this._changeCbk&&this._changeCbk({previous:n,current:this,deltaSet:i,changes:e,options:t})}catch(e){null!==(t=this._errorCbk)&&void 0!==t&&t.call(this,{e:e,message:"[contentState][apply] call _changeCbk error",level:_.W.ERROR})}return this.contentApplyRuntime.stop()},e._fixChanges=function(t){var e,n,r={};try{for(var o=(0,i.e)(Object.keys(t)),s=o.next();!s.done;s=o.next())!function(e){var n=t[e],i=0;r[e]=n.map((function(t){var e=t.start,n=t.deletes;t=t.inserts,e={start:e+i,deletes:n,inserts:t};return i+=n.length-t.length,e}))}(s.value)}catch(n){e={error:n}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},e._onZoneMutate=function(t,e,n,i){this._onMutateCbk&&this._onMutateCbk(t,e,n,i)},e._clone=function(t,e){var n,r,o=this,s=new Map;if(t||!e)try{for(var a=(0,i.e)(this.content),l=a.next();!l.done;l=a.next()){var u=(0,i._)(l.value,2),c=u[0],d=u[1];s.set(c,d.clone())}}catch(t){n={error:t}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}else s=new Map(this.content),e.forEach((function(t,e){var n=o.content.get(e);n&&s.set(e,n.clone())}));return t=t?this._attributes.toJsonable():this._attributes,(t=this.create({apool:t,schema:this.schema,modulesContainer:this.modulesContainer})).content=s,t._changeCbk=this._changeCbk,t._willChangeCbk=this._willChangeCbk,t},e.onChange=function(t){this._changeCbk=t},e.onWillChange=function(t){this._willChangeCbk=t},e._onMutate=function(t){this._onMutateCbk=t},e._onRefresh=function(t){this._refreshCbk=t},e._onError=function(t){this._errorCbk=t,this._attributes.setOnErrorCb(t)},e._onWillApply=function(t){this._willApplyCbk=t},e.getAttributes=function(t,e){var n=t.zoneId;return(n=this.getZoneState(n))?n.getAttributes(t,e):(0,g.vA)()},e.getLineAttributes=function(t,e){return(e=null===(t=this.getZoneState(t))||void 0===t?void 0:t.getLine(e))?e.getLineAttributes():(0,g.vA)()},e.getZoneState=function(t){return this.content.get(t)},e._dangerouslyReplaceAttribute=function(t,e,n,r){var o,s,a,l;try{for(var u=(0,i.e)(this),c=u.next();!c.done;c=u.next()){var d=c.value;try{for(var h=(a=void 0,(0,i.e)(d)),f=h.next();!f.done;f=h.next())f.value._getDelta().forEach((function(i){var o;(null===(o=i.attributes)||void 0===o?void 0:o[t])===e&&(delete i.attributes[t],i.attributes[n]=r)}))}catch(s){a={error:s}}finally{try{f&&!f.done&&(l=h.return)&&l.call(h)}finally{if(a)throw a.error}}}}catch(s){o={error:s}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}},e.setAttributes=function(t,e,n){var r,o,a,u,c,d,h;void 0===n&&(n={internalZonesIncluded:!0});var f,p=(y=t.start).zoneId,v=y.offset,g=y.line,y=(b=t.end).zoneId,m=b.offset,b=b.line;if(p===y){var E=this.rangeToPosition(t);if(null!==E)if(v!==m||g!==b){if(0!==E.len){var S,w={},C=this.getEntities(t),I=(f=function(t){return t.start.zoneId},C.reduce((function(t,e){var n=f(e);return t[n]||(t[n]=[]),t[n].push(e),t}),{}));for(S in I)if((n.internalZonesIncluded||p===S)&&I.hasOwnProperty(S)){var T=new s.I({zoneId:S}),x=I[S];S===p&&T.retain(E.start);try{for(var k=(u=void 0,(0,i.e)(x.entries())),M=k.next();!M.done;M=k.next()){var R,P,O,L=(0,i._)(M.value,2),D=L[0],A=L[1];(null===(h=A.attributes)||void 0===h||!h.lmkr||n.withLineMarker)&&("\n"!==A.text||n.withEnter)?(R=A.text.endsWith("\n")&&!n.withEnter?1:0,P=A.start.offset,O=A.end.offset,0===D&&(P=v),D===C.length-1&&0!==m&&(R=m===A.end.offset?R:0,O=m),T.retain(O-P-R,e).retain(R)):T.retain(1)}}catch(t){u={error:t}}finally{try{M&&!M.done&&(c=k.return)&&c.call(k)}finally{if(u)throw u.error}}w[S]=T}return t=new l.D(w),this.apply(t,(0,i.b)({type:"setAttributes"},n))}try{for(var z=(0,i.e)(Object.entries(e)),N=z.next();!N.done;N=z.next()){var W=(0,i._)(N.value,2),B=W[0],K=W[1];this._setInlineStyleOverride(E,B,K)}}catch(t){o={error:t}}finally{try{N&&!N.done&&(a=z.return)&&a.call(z)}finally{if(o)throw o.error}}}else try{for(var Z=(0,i.e)(Object.keys(e)),j=Z.next();!j.done;j=Z.next()){var U=j.value;this._setInlineStyleOverride(E,U,e[U])}}catch(t){d={error:t}}finally{try{j&&!j.done&&(r=Z.return)&&r.call(Z)}finally{if(d)throw d.error}}}else null!==(d=this._errorCbk)&&void 0!==d&&d.call(this,{message:"[ContentState][setAttributes] start zoneId: ".concat(p," not equal to end zoneId: ").concat(y),level:_.W.ERROR})},e.setLineAttributes=function(t,e,n,r){void 0===r&&(r={});var o=null===(o=this.content.get(t))||void 0===o?void 0:o.getLine(e);if(o&&null!==(e=this.rangePointToOffset({line:e,offset:0,zoneId:t})))return(t=new s.I({zoneId:t})).retain(e),o.hasLineMarker()?t.retain(1,n):t.insertLineMarker(n),this.apply(t,(0,i.b)({type:"setLineAttributes"},r))},e.hasLineMarker=function(t){var e=t.line;t=t.zoneId;return!(null===(e=null===(t=this.content.get(t))||void 0===t?void 0:t.getLine(e))||void 0===e||!e.hasLineMarker())},e.isLineStart=function(t){return this.hasLineMarker(t)?1===t.offset:0===t.offset},e.deleteText=function(t,e){void 0===e&&(e={});var n=this.rangeToPosition(t);if(null!==n){var r=n.start,o=n.len,a=n.zoneId;if(t=this.getZoneState(a))return n=t.getContent().length(),t=o,n-1<=r+o&&(t=n-r-1,console.warn("auto correct when delete too many texts",o,n)),t=new s.I({zoneId:a}).retain(r).delete(t),this.apply(t,(0,i.b)({type:"deleteText"},e))}},e.getInsertTextDelta=function(t,e,n,i){return void 0===i&&(i={}),new s.I({zoneId:t.zoneId}).retain(e).insert(n,i)},e.insertText=function(t,e,n,r){void 0===n&&(n={}),void 0===r&&(r={});var o=this.rangePointToOffset(t);if(null!==o)return n=this.getInsertTextDelta(t,o,e,n),this.apply(n,(0,i.b)({type:"insertText"},r))},e.getReplaceTextDelta=function(t){var e=t.pos,n=t.text,i=t.attributes,r=e.start;t=e.len,e=e.zoneId;return new s.I({zoneId:e}).retain(r).delete(t).insert(n,i)},e.replaceText=function(t,e,n,r){void 0===n&&(n={}),void 0===r&&(r={});var o=this.rangeToPosition(t);if(null!==o)return n=this.getReplaceTextDelta({sel:t,pos:o,text:e,attributes:n}),this.apply(n,(0,i.b)({type:"replaceText"},r))},e.rangeToPosition=function(t){var e=t.start,n=t.end;t=this.rangePointToOffset(e),n=this.rangePointToOffset(n);return null===t||null===n?null:{start:t,len:n-t,zoneId:e.zoneId}},e.rangePointToOffset=function(t){var e=t.zoneId,n=t.line;t=t.offset;return(e=this.getZoneState(e))?e.pointToOffset({line:n,offset:t}):null},e._setInlineStyleOverride=function(t,e,n){var i=t.zoneId;t=t.start;(i=this.storeAttributes[i]=this.storeAttributes[i]||{})[t]=i[t]||{},i[t][e]=n},e.getInlineStyleOverride=function(t,e){if(t){var n=t.zoneId,i=t.start;return e?null===(t=null===(t=this.storeAttributes[n])||void 0===t?void 0:t[i])||void 0===t?void 0:t[e]:(null===(n=this.storeAttributes[n])||void 0===n?void 0:n[i])||{}}return this.storeAttributes},e._clearInlineStyleOverride=function(t){var e;t?(e=t.zoneId,t=t.start,this.storeAttributes[e]&&delete this.storeAttributes[e][t]):this.storeAttributes={}},e._followInlineStyleOverride=function(t){var e,n,r,o,s,a,l,u,c,d,h=this.getInlineStyleOverride()[t.zoneId];if(h){var f=0;try{for(var p=(0,i.e)(t.ops),v=p.next();!v.done;v=p.next()){var g=v.value;if(f+=null!==(d=null!==(u=null!==(l=g.retain)&&void 0!==l?l:g.delete)&&void 0!==u?u:null===(c=g.insert)||void 0===c?void 0:c.length)&&void 0!==d?d:0,g.delete)try{for(var y=(r=void 0,(0,i.e)(Object.keys(h))),m=y.next();!m.done;m=y.next()){var _=m.value;(w=Number(_))<=f&&f-g.delete<w&&delete h[_]}}catch(t){r={error:t}}finally{try{m&&!m.done&&(o=y.return)&&o.call(y)}finally{if(r)throw r.error}}}}catch(t){e={error:t}}finally{try{v&&!v.done&&(n=p.return)&&n.call(p)}finally{if(e)throw e.error}}try{for(var b=(0,i.e)(Object.entries(h)),E=b.next();!E.done;E=b.next()){var S=(0,i._)(E.value,2),w=S[0],C=S[1],I=t.transform(Number(w));I!==Number(w)&&(h[I]=C,delete h[w])}}catch(t){s={error:t}}finally{try{E&&!E.done&&(a=b.return)&&a.call(b)}finally{if(s)throw s.error}}}},e._forceRefresh=function(t,e){var n=this.getZoneState(t);if(n){for(var i=0;i<e.length;i++){var r=e[i],o=n.getLine(r),s=o.clone();s._refreshKey(),o._node&&o._node instanceof HTMLElement&&(s._node=o._node.cloneNode(!0)),n._splice(r,1,[s])}this._refreshCbk&&this._refreshCbk({zoneId:t,lineArr:e})}},e.toDeltaSet=function(t,e){var n,r;void 0===t&&(t=!1),void 0===e&&(e=!1);var o=new l.D;try{for(var s=(0,i.e)(this.content.entries()),a=s.next();!a.done;a=s.next()){var u=(0,i._)(a.value,2),c=u[0],d=u[1];o.add(c,d.getContent(t,e))}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o},e.isEmpty=function(){var t=this.getZoneState(m.S);return!t||!(1<t.length())&&t.getLine(0).isEmpty()},e.setContent=function(t,e){var n;void 0===e&&(e={});var o=new l.D,s=t instanceof l.D?t:new l.D(((n={})[t.zoneId]=t,n));this.getContent().forEach((function(t,e){var n=t.getType()===r.Ak.Content;(u=(0,l.y)({zoneId:e,zoneType:t.getType()})).delete(t.getModelText().length-(n?1:0));t=u;var a,u=(t=s.get(e)?u.concat(s.get(e)):t).ops.length-1;n&&null!==(a=t.ops[u])&&void 0!==a&&a.insert&&(a=t.ops[u].insert).endsWith("\n")&&(u=t.ops.pop(),(a=a.slice(0,-1))&&t.insert(a,(0,i.b)({},null==u?void 0:u.attributes))),o.add(e,t)})),s.forEach((function(t){o.get(t.zoneId)||o.add(t.zoneId,t)})),this.apply(o,e)},e.clear=function(){this._attributes.clear(),this._clearInlineStyleOverride()},e._clearListener=function(){this._changeCbk=function(){},this._errorCbk=void 0,this._willApplyCbk=void 0,this._willChangeCbk=void 0,this._refreshCbk=void 0,this._onMutateCbk=void 0,this._attributes.resetOnErrorCb()},t}(),S=function(){function t(t){this.LINE_STATE_TO_ZONE_ID=new Map,this.ZONE_ID_TO_LINE_STATE=new Map,this.ZONE_ID_TO_SCROLL_MODULE=new Map,this.zoneAttrs=[],this.zoneRules=new Map,this.contentState=t,this.registerZoneRule("zoneId",(function(t){return[t]}))}var e=t.prototype;return e.registerScrollModule=function(t,e){this.ZONE_ID_TO_SCROLL_MODULE.set(t,e)},e.getAllScrollModules=function(){return(0,i.d)([],(0,i._)(this.ZONE_ID_TO_SCROLL_MODULE.values()),!1)},e.getScrollModuleByZoneId=function(t){return this.ZONE_ID_TO_SCROLL_MODULE.get(t)},e.removeScrollModule=function(t){this.ZONE_ID_TO_SCROLL_MODULE.delete(t)},Object.defineProperty(e,"zoneIdMap",{get:function(){return this.ZONE_ID_TO_LINE_STATE},enumerable:!1,configurable:!0}),e.init=function(){var t=this;this.contentState.getEntities((function(e){return t.zoneAttrs.includes(e)})).forEach((function(e){var n=e.start,i=e.attributes,r=null===(e=t.contentState.getZoneState(n.zoneId))||void 0===e?void 0:e.getLine(n.line);t.zoneAttrs.forEach((function(e){var n;!i[e]||(n=t.zoneRules.get(e))&&r&&n(i[e]).forEach((function(e){t.update(e,r)}))}))}))},e.registerZoneRule=function(t,e){this.zoneRules.set(t,e),this.zoneAttrs.push(t)},e.update=function(t,e){var n=this.ZONE_ID_TO_LINE_STATE.get(t);!n||n===e||(i=this.LINE_STATE_TO_ZONE_ID.get(n))&&delete i[t];var i=this.LINE_STATE_TO_ZONE_ID.get(e)||{};i[t]=!0,this.LINE_STATE_TO_ZONE_ID.set(e,i),this.ZONE_ID_TO_LINE_STATE.set(t,e),(t=this.contentState.getZoneState(t))&&t._setParent(e)},e.removeZoneId=function(t){var e,n=this.ZONE_ID_TO_LINE_STATE.get(t);!n||(e=this.LINE_STATE_TO_ZONE_ID.get(n))&&(delete e[t],Object.keys(e).length||this.LINE_STATE_TO_ZONE_ID.delete(n)),this.ZONE_ID_TO_LINE_STATE.delete(t)},e.removeLineState=function(t){var e=this;(t=this.LINE_STATE_TO_ZONE_ID.get(t))&&Object.keys(t).forEach((function(t){e.ZONE_ID_TO_LINE_STATE.delete(t)}))},e.updateLineState=function(t,e){var n=this,i=this.LINE_STATE_TO_ZONE_ID.get(t);i&&(this.LINE_STATE_TO_ZONE_ID.delete(t),this.LINE_STATE_TO_ZONE_ID.set(e,i),Object.keys(i).forEach((function(t){(t=n.contentState.getZoneState(t))&&t._setParent(e)})))},e.getZoneIdsByAttributes=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=(n=(r=(0,i._)(n,2))[0],r[1]);if(n=this.zoneRules.get(n))return n(r)}return[]},e._detectZoneChange=function(t){function e(t){return t=t.getAttributes(),r.getZoneIdsByAttributes(t)}var n,r=this,o=[],s=this;for(n in t)!function(n){var a,l;t.hasOwnProperty(n)&&(a=t[n],(l=s.ZONE_ID_TO_LINE_STATE.get(n))&&n!==m.S&&e(l).forEach((function(t){r.update(t,l)})),a.forEach((function(t){t.inserts.forEach((function(t){var n=e(t);o.push.apply(o,(0,i.d)([],(0,i._)(n),!1)),n.forEach((function(e){r.update(e,t)}))}))})))}(n);for(n in t)t.hasOwnProperty(n)&&t[n].forEach((function(t){t.deletes.forEach((function(t){(t=r.LINE_STATE_TO_ZONE_ID.get(t))&&Object.keys(t).forEach((function(t){r.removeZoneId(t)}))}))}))},e.getAncestorZones=function(t){for(var e,n=[t],i=t;i;)(i=null===(e=this.ZONE_ID_TO_LINE_STATE.get(i))||void 0===e?void 0:e.getZoneId())&&n.push(i);return n},t}(),w=function(t){function e(e){var n=t.call(this,e)||this;return n._getInternalZoneEntities=function(t,e,r){void 0===e&&(e=[]);var o=[];return n._zoneManager.getZoneIdsByAttributes(t).reduce((function(t,o){return t.push.apply(t,(0,i.d)([],(0,i._)(n._getZoneStateEntities(o,e,r)),!1)),t}),o),o},n._getZoneStateEntities=function(t,e,r){var o=n.getZoneState(t),l=[];return o||(o=new s.I({zoneId:t}).insertEnter(),o=new(n.modulesContainer.get(a.h.ZoneState))(t,o)),l.push.apply(l,(0,i.d)([],(0,i._)(o.getEntities(e,r)),!1)),l},n._zoneManager=new S(n),n}(0,i.c)(e,t);var n=e.prototype;return n.init=function(){this._zoneManager.init()},n.create=function(t){return new e(t)},n.getZoneManager=function(){return this._zoneManager},n._clone=function(e,n){return(n=t.prototype._clone.call(this,e,n))._zoneManager.zoneAttrs=Array.from(this._zoneManager.zoneAttrs),n._zoneManager.zoneRules=new Map(this._zoneManager.zoneRules),n},n.addZone=function(t,e,n){var i;return this.content.get(t)?(null!==(i=this._errorCbk)&&void 0!==i&&i.call(this,{message:"[ContentState][addZone] zoneId:".concat(t," existed"),level:_.W.ERROR}),null):(e=e||new s.I({zoneId:t}).insertEnter(),e=new(this.modulesContainer.get(a.h.ZoneState))(e.zoneId,e),this.content.set(t,e),n&&this._zoneManager.update(t,n),e)},n.removeZone=function(t){this._zoneManager.removeZoneId(t);var e=this.getZoneState(t);e&&(e=new s.I({zoneId:t}).delete(e.totalWidth()-1),this.apply(e),this.content.delete(t))},n.apply=function(t,e){return t=this.applyToContentState(t,e=void 0===e?{}:e),this._zoneManager._detectZoneChange(t.changes),this.triggerChangeCbk((0,i.b)((0,i.b)({},t),{options:e}))},n.slice=function(t,n){var r,o=this,s=t.zoneId,a=n.zoneId;if(s!==a)return null!==(r=this._errorCbk)&&void 0!==r&&r.call(this,{message:"[contentState][slice] start zoneId: ".concat(s," not equal to end zoneId: ").concat(a),level:_.W.ERROR}),null;if(!(a=this.content.get(s)))return null;var l=new e({apool:this._attributes.toJsonable(),schema:this.schema,modulesContainer:this.modulesContainer});n=a.slice(t,n);return l.content.set(s,n),"0"===s&&n.getEntities([["aceTable",void 0]]).forEach((function(t){t=(e=(0,i._)(t.attributes.aceTable.split(" "),2))[0];var e=e[1];l.content.set(t,o.getZoneState(t)),l.content.set(e,o.getZoneState(e));e=(t=o._getRowColIds(t,e)).rowIds;var n=t.colIds;e.forEach((function(t){n.forEach((function(e){e="x".concat(t,"x").concat(e),l.content.set(e,o.getZoneState(e))}))}))})),l._zoneManager.init(),l},n.getReplaceTextDelta=function(t){var e=t.sel,n=t.pos,i=t.text,r=t.attributes,o=n.start;t=n.len,n=n.zoneId,t=new s.I({zoneId:n}).retain(o).delete(t);return this.assertPointAfterLineMarker(e.start),this.addLineMarkerAfterEnter({text:i,attributes:r,delta:t}),t},n.getInsertTextDelta=function(t,e,n,i){return void 0===i&&(i={}),e=new s.I({zoneId:t.zoneId}).retain(e),this.assertPointAfterLineMarker(t),this.addLineMarkerAfterEnter({text:n,attributes:i,delta:e}),e},n.addLineMarkerAfterEnter=function(t){var e=t.text,n=t.attributes,i=t.delta,o=e.split(r.K5);return o.forEach((function(t,e){o[e+1]?i.insert(t,n).insertEnter(n).insertLineMarker(n):i.insert(t,n)})),i},n.assertPointAfterLineMarker=function(t){if(this.hasLineMarker(t)&&0===t.offset)throw new Error("Cannot insertText at the offset 0 of line,  because there is a lineMarker")},n._getRowColIds=function(t,e){var n,r,s,a;t=this.getZoneState(t),e=this.getZoneState(e);if(!t||!e)return{rowIds:[],colIds:[]};t=t.getLine(0),e=e.getLine(0);var l=[],u=[];if(!t||!e)return{rowIds:l,colIds:u};try{for(var c=(0,i.e)(t),d=c.next();!d.done;d=c.next()){var h=d.value;(v=(0,o.J)(h))&&l.push(v)}}catch(t){n={error:t}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}try{for(var f=(0,i.e)(e),p=f.next();!p.done;p=f.next()){var v;h=p.value;(v=(0,o.J)(h))&&u.push(v)}}catch(t){s={error:t}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(s)throw s.error}}return{rowIds:l,colIds:u}},e}(E)},vsh_51404:function(t,e,n){"use strict";n.d(e,{V:function(){return c}});var i=n("vsh_65498"),r=n("vsh_84965"),o=(n("vsh_72862"),n("vsh_15516")),s=n("vsh_89828"),a=n("vsh_23654"),l=n("vsh_71265"),u=n("vsh_59280"),c=function(){function t(t,e,n){var i,a=this;this.key="",this.parent=null,this._node=null,this._keepKey=!1,this._invisible=!1,this._index=0,this._offsetStart=0,this._offsetEnd=0,this._zoneId="",this._length=0,this._modelText="",this._lmkr=0,this.content=t,n||(this.parent=e,this._zoneId=e.getZoneId(),this._modelText=this.content.ops.map((function(t){return(0,o.d)(t)?t.insert:" "})).join(""),this._length=this._modelText.length,e=(0,s.vA)(),this.hasLineMarker()&&(this._lmkr=1,e.push.apply(e,(0,r.d)([],(0,r._)((0,l.L)(this._getOps()[0].attributes)),!1))),this._lineAttributes=e,this._lineAttributes.toMap=function(){return i=i||(0,u.A)(a._lineAttributes),(0,r.b)({},i)},this.key=(0,s.zs)(6))}var e=t.prototype;return Object.defineProperty(e,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),e.isInvisible=function(){return this._invisible},e.isEndOfLine=function(t){return this._length===t+1},e.compose=function(e){return(e=new t(this.content.compose(e,!1),this.parent))._index=this._index,e},e.clone=function(){var e=new t(null,null,!0);return e.content=this.content,e._zoneId=this._zoneId,e._modelText=this._modelText,e._length=this._length,e._lmkr=this._lmkr,e._lineAttributes=this._lineAttributes,e.key=this.key,e._offsetStart=this._offsetStart,e._offsetEnd=this._offsetEnd,e._index=this._index,e.parent=this.parent,e},e.slice=function(e,n){var r=[],s=0;return this.content.forEach((function(t){var a,l,u;null!=t&&t.insert&&"object"!=(0,i.Z)(t.insert)&&(a=(0,o.a)(t),s<=n&&e<=s+a&&(l=Math.max(0,e-s))<(u=Math.min(a,n-s))&&r.push({insert:null==t?void 0:t.insert.slice(l,u),attributes:t.attributes}),s+=a)})),new t(this.content.create({ops:r}),this.parent)},e.getZoneId=function(){return this._zoneId},e.getKey=function(){return this.key},e.getText=function(){var t=this.content.ops.map((function(t){return(0,o.d)(t)?t.insert:"*"})).join("");return this.hasLineMarker()?t.slice(1):t},e.getLineMarker=function(){return this._lmkr},e.getModelText=function(){return this._modelText},e.length=function(){return this._length},e.getOps=function(){return this._getOps()},e._getDelta=function(){return this.content},e._getOps=function(){return this.content.ops},e._setKey=function(t){this.key=t},e._setIndex=function(t){this._index=t},e._setOffset=function(t,e){this._offsetStart=t,this._offsetEnd=e},e._refreshKey=function(){this.key=(0,s.zs)(6)},e.getAttributes=function(t,e){var n,o,a,l;void 0===t&&(t=0),void 0===e&&(e=this.getModelText().length);var u=0,c=(0,s.vA)();try{for(var d=(0,r.e)(this),h=d.next();!h.done;h=d.next()){var f=h.value;if(null!=f&&f.insert&&"object"!=(0,i.Z)(f.insert)){var p=f.insert.length,v=f.attributes;if(u+p<=t||e<=u||!v)u+=p;else{try{for(var g=(a=void 0,(0,r.e)(Object.entries(v))),y=g.next();!y.done;y=g.next()){var m=(0,r._)(y.value,2),_=m[0],b=m[1];c.push([_,b])}}catch(t){a={error:t}}finally{try{y&&!y.done&&(l=g.return)&&l.call(g)}finally{if(a)throw a.error}}u+=p}}}}catch(t){n={error:t}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}return c},e.getEntities=function(t,e,n){var i,r=0,o=this.length();return t instanceof Array?i=t:(r=t.start,(o=t.end)===r&&0<o&&r--),this._getEntities({attributes:i,start:r,end:o,matcher:e,getInternalZoneEntities:n})},e._getEntities=function(t){var e,n,o,s,a,l,u,c,d=t.attributes,h=t.start,f=t.end,p=t.allMatch,v=void 0!==p&&p,g=t.matcher,y=t.getInternalZoneEntities,m=[],_=0,b=this._index;try{for(var E=(0,r.e)(this),S=E.next();!S.done;S=E.next()){var w=S.value;if(w.insert&&"object"!=(0,i.Z)(w.insert)){var C=w.insert.length;if(_+C<=h||f<=_)_+=C;else{var I=!1,T=!0,x=w.attributes;if(x&&Object.keys(x).length||(T=!(x={})),g)try{for(var k=(o=void 0,(0,r.e)(Object.entries(x))),M=k.next();!M.done;M=k.next()){var R=(0,r._)(M.value,2);g(D=R[0],A=R[1])?I=!0:T=!1}}catch(t){o={error:t}}finally{try{M&&!M.done&&(s=k.return)&&s.call(k)}finally{if(o)throw o.error}}else if(null!=d&&d.length)try{for(var P=(a=void 0,(0,r.e)(Object.entries(x))),O=P.next();!O.done;O=P.next()){var L=(0,r._)(O.value,2),D=L[0],A=L[1];try{for(var z=(u=void 0,(0,r.e)(d)),N=z.next();!N.done;N=z.next()){var W=N.value,B=void 0!==W[1];W[0]!==D||B&&String(W[1])!==String(A)?T=!1:I=!0}}catch(t){u={error:t}}finally{try{N&&!N.done&&(c=z.return)&&c.call(z)}finally{if(u)throw u.error}}}}catch(t){a={error:t}}finally{try{O&&!O.done&&(l=P.return)&&l.call(P)}finally{if(a)throw a.error}}else T=!0;(I&&!v||T)&&m.push({start:{line:b,offset:Math.max(_,h),zoneId:this._zoneId},end:{line:b,offset:Math.min(_+C,f),zoneId:this._zoneId},text:w.insert.slice(Math.max(h-_,0),f-_),attributes:x}),_+=C;var K=null==y?void 0:y(Object.entries(x),d,g);K&&m.push.apply(m,(0,r.d)([],(0,r._)(K),!1))}}}}catch(t){e={error:t}}finally{try{S&&!S.done&&(n=E.return)&&n.call(E)}finally{if(e)throw e.error}}return m},e.getLineAttributes=function(){return this._lineAttributes},e.getOffset=function(){return{start:this._offsetStart,end:this._offsetEnd}},e.forEach=function(t){return this._getOps().forEach(t)},e[Symbol.iterator]=function(){return this._getOps().values()},e.hasLineMarker=function(){var t;return!(null===(t=null===(t=this._getOps()[0])||void 0===t?void 0:t.attributes)||void 0===t||!t.lmkr)},e.isEmpty=function(){var t=this.hasLineMarker()?1:0;return this.length()-t==1&&this._lineAttributes.length<=1||0===this.length()},e.isTextEmpty=function(){var t=this.hasLineMarker()?1:0;return this.length()-t==1||0===this.length()},e.previousSibling=function(){return this.parent.getLine(this._index-1)},e.nextSibling=function(){return this.parent.getLine(this._index+1)},e.compare=function(e){if(e===this)return t.EQAUL;if(e&&e.getKey()===this.getKey()){for(var n=this.getOps(),i=e.getOps(),r=0,o=i.length;r<o;r++)if(i[r]!==n[r])return t.UPDATE;return t.EQAUL}return t.UNEQUAL},t.EQAUL=a.A.EQUAL,t.UNEQUAL=a.A.UNEQUAL,t.UPDATE=a.A.UPDATE,t}()},vsh_89828:function(t,e,n){"use strict";n.d(e,{ky:function(){return S},zs:function(){return g},vA:function(){return v},qF:function(){return k},qW:function(){return P},s7:function(){return O}});var i,r,o=n("vsh_84965"),s=n("vsh_38160"),a=(n("vsh_72862"),n("vsh_15516")),l=n("vsh_93862"),u=n("vsh_34482"),c=n("vsh_34072");(r=i=i||{}).inline="inline",r.block="block";var d,h,f=n("vsh_59280"),p="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function v(){var t=[];return t.toMap=function(){return(0,f.A)(this)},t}function g(t){void 0===t&&(t=20);for(var e="",n=0;n<t;n++){var i=Math.floor(Math.random()*p.length);e+=p[i]}return e}function y(t,e,n){var i=(e=t.offsetToPoint(e)).line,r=e.offset,o=(n=t.offsetToPoint(n)).line,s=n.offset,a="";if(i===o)return t.getLine(i).getModelText().slice(r,s);for(var l=i;l<=o;l++){var u=t.getLine(l).getModelText();a+=l===i?u.slice(r):l===o?u.slice(0,s):u}return a}function m(t,e,n){return e=t.offsetToPoint(e),n=t.offsetToPoint(n),t.getEntities({start:e,end:n})}(h=d=d||{})[h.BLOCK=0]="BLOCK",h[h.LMKR=1]="LMKR",h[h.TEXT=2]="TEXT";var _=function(t,e){return S(t.attributes,e)?d.BLOCK:(0,l.e)(t)?d.LMKR:d.TEXT},b=[[c.cI,c.cI,function(t,e){return!e.startsWith("\n")}],[c.ar,c.cI,c.ar],[function(t){return!t.endsWith("\n")},function(t){return!t.endsWith("\n")},c.ar]];function E(t,e,n,i,r){var l=t.ops[n],u=t.ops[e];if(u){var c=(0,a.f)(u);return c===s.HP.INSERT?(0,b[_(u,r)][_(l,r)])(u.insert,l.insert):c!==s.HP.RETAIN?E(t,e-1,n,i,r):(t=t.ops.slice(0,e+1).filter((function(t){return(0,a.f)(t)!==s.HP.INSERT})).reduce((function(t,e){return t+(0,a.a)(e)}),0),e=(0,o._)(m(i,t-1,t),1)[0],t=y(i,t-1,t),e=_({insert:t,attributes:e.attributes},r),(0,b[e][_(l,r)])(t,l.insert))}return!1}function S(t,e){return void 0===t&&(t={}),Object.keys(t).some((function(n){var r=null===(r=e.get(n))||void 0===r?void 0:r.display;return"string"==typeof r?r===i.block:"function"==typeof r&&r(t[n])===i.block}))}function w(t,e,n,i,r){var l=t.ops[e],u=t.ops[n];if(!u){if(!i)return!1;var c=t.ops.slice().filter((function(t){return(0,a.f)(t)!==s.HP.INSERT})).reduce((function(t,e){return t+(0,a.a)(e)}),0),d=(0,o._)(m(i,c,c+1),1)[0],h=y(i,c,c+1);c=_({insert:h,attributes:d.attributes},r);return(0,b[_(l,r)][c])(l.insert,h)}if((d=(0,a.f)(u))===s.HP.INSERT)return(0,b[_(l,r)][_(u,r)])(l.insert,u.insert);if(d!==s.HP.RETAIN)return d===s.HP.DELETE&&w(t,e,n+1,i,r);t=t.ops.slice(0,n).filter((function(t){return(0,a.f)(t)!==s.HP.INSERT})).reduce((function(t,e){return t+(0,a.a)(e)}),0),n=(0,o._)(m(i,t,t+1),1)[0],h=y(i,t,t+1),c=_({insert:h,attributes:n.attributes},r);return(0,b[_(l,r)][c])(l.insert,h)}function C(t,e,n,i,r){var l=t.ops[e],u=t.ops[n];if(!l.attributes||!S(l.attributes,r))return function(t,e,n,i){for(var r=!1,l=e+1;l<t.ops.length;){var u=(0,a.f)(t.ops[l]);if(u===s.HP.INSERT)return!1;if(u===s.HP.RETAIN)break;u===s.HP.DELETE&&(r=!0),l++}if(!r)return!1;var c=t.ops.slice(0,e+1).filter((function(t){return(0,a.f)(t)!==s.HP.INSERT})).reduce((function(t,e){return(0,a.a)(e)+t}),0),d=(0,o._)(m(n,c-1,c),1)[0],h=S(d.attributes,i),f=t.ops.slice(0,l).filter((function(t){return(0,a.f)(t)!==s.HP.INSERT})).reduce((function(t,e){return(0,a.a)(e)+t}),0);i=S((e=(0,o._)(m(n,f,f+1),1)[0]).attributes,i);return h?!y(n,f,f+1).startsWith("\n"):i?!d.attributes.lmkr&&!y(n,c-1,c).endsWith("\n"):!(!d.attributes.lmkr||!e.attributes.lmkr)}(t,e,i,r);if(!u)return"\n"!==y(i,c=t.ops.filter((function(t){return(0,a.f)(t)!==s.HP.INSERT})).reduce((function(t,e){return t+(0,a.a)(e)}),0),c+1);if((l=(0,a.f)(u))!==s.HP.INSERT)return l!==s.HP.RETAIN?C(t,e,n+1,i,r):"\n"!==y(i,c=t.ops.slice(0,n).filter((function(t){return(0,a.f)(t)!==s.HP.INSERT})).reduce((function(t,e){return t+(0,a.a)(e)}),0),c+1);var c;u=u.insert.startsWith("\n"),e=y(i,(e=t.ops.slice(0,e+1).filter((function(t){return(0,a.f)(t)!==s.HP.INSERT})).reduce((function(t,e){return t+(0,a.a)(e)}),0))-1,e).endsWith("\n");return!u&&!e}function I(t,e,n){return n.reduce((function(n,i){if(!(i instanceof u.I))return n.concat(i);var r=t.getZoneState(i.zoneId);if(!r&&i.ops.some((function(t){return!t.insert})))throw new Error("attempt to apply new ZoneDelta which is invalid");var l=!1,c=i.reduce((function(t,n,u){var c=(0,a.f)(n);return c===s.HP.DELETE?(t.push(n),t):c===s.HP.RETAIN?(l=!1,function(t,e,n,i,r){var l=t.ops[n];if(!l.attributes||!S(l.attributes,r))return!1;if(e=function(t){return t.ops[t.ops.length-1]}(e),!e)return!1;if((0,a.f)(e)===s.HP.INSERT)return!e.insert.endsWith("\n");for(var u=t.ops.slice(0,n).filter((function(t){return(0,a.f)(t)!==s.HP.INSERT}));u[u.length-1]&&(0,a.f)(u[u.length-1])===s.HP.DELETE;)u.pop();return 0!==u.length&&(n=u.reduce((function(t,e){return t+(0,a.a)(e)}),0),"\n"!==y(i,n-1,n)&&!(0,o._)(m(i,n-1,n),1)[0].attributes.lmkr)}(i,t,u,r,e)&&t.insertEnter(),t.push(n),C(i,u,u+1,r,e)&&t.insertEnter(),t):(!l&&E(i,u-1,u,r,e)&&t.insertEnter(),t.push(n),(u=w(i,u,u+1,r,e))&&t.insertEnter(),l=u,t)}),i.create({zoneId:i.zoneId}));return n.concat(c)}),new a.D)}function T(t,e,n,i){var r=Object.keys(t).reduce((function(r,o){return o===e||function(e,i){if(i instanceof RegExp){if(e.match(i))return!0}else if(i(e,t[e],n))return!0;return!1}(o,i)?r[o]=t[o]:r[o]="",r}),{});return t.lmkr&&(r.lmkr=t.lmkr),r}function x(t,e){var n=(0,o.b)({},t);return Object.keys(t).forEach((function(i){t[i]&&!e[i]&&delete n[i]})),n}function k(t,e){if(e)return Object.keys(e).filter((function(t){return e[t]})).find((function(e){var n;return(null===(n=t.get(e))||void 0===n?void 0:n.attributes)||(null===(e=t.get(e))||void 0===e?void 0:e.lineAttributes)}))}function M(t,e,n){if(e>=t.ops.length)throw new Error("getOpOffsetInDocumentWithCache index overstep");for(var i=e,r=0;0<=i;){if(n.has(i)){r+=n.get(i);break}var o=t.ops[i];(0,a.f)(o)!==s.HP.INSERT&&(r+=(0,a.a)(o)),i--}return r}function R(t,e,n){return n.reduce((function(n,i){if(!(i instanceof u.I))return n.concat(i);var r=t.getZoneState(i.zoneId);if(!r&&i.ops.some((function(t){return!t.insert})))throw new Error("attempt to apply new ZoneDelta which is invalid");var l=new Map,c=i.reduce((function(t,n,u){var c=(0,a.f)(n);if(c===s.HP.DELETE||!n.attributes)return t.push(n);var d,h,f=M(i,u-1,l);if(l.set(u-1,f),c===s.HP.RETAIN&&(d=f+(0,a.a)(n),(h=function(t,e,n){for(var i,r,s=[],l=t.offsetToPoint(e).line,u=t.getLine(l)._offsetStart,c=l;c<t.length();c++){var d=t.getLine(c).getOps();try{for(var h=(i=void 0,(0,o.e)(d)),f=h.next();!f.done;f=h.next()){var p,v,g=f.value,y=(0,a.a)(g);if(n<=u)return s;u<=n&&e<u+y&&(p=Math.max(e-u,0),v=Math.min(y,n-u),s.push({insert:g.insert.slice(p,v),attributes:g.attributes})),u+=y}}catch(t){i={error:t}}finally{try{f&&!f.done&&(r=h.return)&&r.call(h)}finally{if(i)throw i.error}}}return s}(r,f,d)).forEach((function(c,f){var p,v,g=(0,o.b)((0,o.b)({},c.attributes),n.attributes),y=k(e,g);if(y&&c.attributes&&null!==(p=e.get(y))&&void 0!==p&&p.attributes&&(C=e.get(y).attributes,g=T(g,y,c.attributes[y],C)),null!=g&&g.lmkr){var _=void 0;if(f<h.length-1)_=h[f+1].attributes;else{for(var b=!1,E=u+1;E<i.ops.length;){var S=i.ops[E];if((0,a.f)(S)!==s.HP.DELETE){var w;b=!0;_=(0,a.f)(S)===s.HP.INSERT?S.attributes:(w=M(i,u,l),l.set(u,w),w=(0,o._)(m(r,w,w+1),1)[0],(0,o.b)((0,o.b)({},w.attributes),S.attributes));break}E++}b||(_=(0,o._)(m(r,d,d+1),1)[0].attributes)}var C=k(e,_);return C?((I=e.get(C).lineAttributes)&&(g=T(g,C,_[C],I)),t.retain(c.insert.length,x(n.attributes,g))):t.retain(c.insert.length,x(n.attributes,g))}if(y){var I=e.get(y).lineAttributes;if(0<=f)return t.retain(c.insert.length,x(n.attributes,g));for(var R=t.ops.length-1,P=void 0;0<=R;){var O=(0,a.f)(t.ops[R]);if(O!==s.HP.DELETE){P=O;break}R++}return R<0||(f=t.ops[R],P===s.HP.INSERT&&null!==(v=f.attributes)&&void 0!==v&&v.lmkr?I&&(t.ops[R]={insert:f.insert,attributes:T(f.attributes,y,c.attributes[y],I)}):P===s.HP.RETAIN&&f.attributes),t.retain(c.insert.length,x(n.attributes,g))}return t.retain(c.insert.length,x(n.attributes,g))}))),c!==s.HP.INSERT)return t;var p=n.attributes,v=k(e,p);if(v&&null!==(g=e.get(v))&&void 0!==g&&g.attributes&&(p=T(p,v,p[v],e.get(v).attributes)),n.attributes.lmkr){for(var g,y=void 0,_=!1,b=u+1;b<i.ops.length;){var E=i.ops[b];if((0,a.f)(E)!==s.HP.DELETE){_=!0,y=E.attributes;break}b++}_?(c=i.ops[b],(g=(0,a.f)(c))===s.HP.INSERT&&c.attributes&&(y=c.attributes),g===s.HP.RETAIN&&!c.attributes&&r&&(y=(w=(0,o._)(m(r,f,f+1),1)[0]).attributes)):r&&(y=(w=(0,o._)(m(r,f,f+1),1)[0]).attributes),!y||(S=k(e,y))&&(C=e.get(S).lineAttributes)&&(p=T(p,S,y[S],C))}else if(v){for(var S,w,C=e.get(v).lineAttributes,I=t.ops.slice(),R=I.length-1;0<=R;){var P=I[R],O=(0,a.f)(P);if(O===s.HP.RETAIN)break;if(O===s.HP.INSERT&&P.insert&&P.insert.includes("\n")){R=-1;break}R--}0<=R&&!I[R].attributes&&C&&r&&(P=I[R],S=I.slice(0,R+1).filter((function(t){return(0,a.f)(t)!==s.HP.INSERT})).reduce((function(t,e){return t+(0,a.a)(e)}),0),(w=(0,o._)(m(r,S-1,S),1)[0]).attributes.lmkr&&(v=T(w.attributes,v,n.attributes[v],C),C=1<P.retain?[{retain:P.retain-1},{retain:1,attributes:v}]:[{retain:1,attributes:v}],(v=t.ops).splice.apply(v,(0,o.d)([R,1],(0,o._)(C),!1))))}return t.insert(n.insert,p)}),new u.I({zoneId:i.zoneId}));return n.concat(c)}),new a.D)}function P(t,e,n){return R(t,e,I(t,e,n))}function O(t){return!t.some((function(t){return t._getOps().map((function(t){return"string"==typeof t.insert?t.insert:" "})).join("")!==t.getModelText()}))}},vsh_66480:function(t,e,n){"use strict";n.d(e,{i:function(){return _}});var i=n("vsh_84965"),r=(n("vsh_72862"),n("vsh_15516")),o=n("vsh_89828"),s=n("vsh_51404"),a=n("vsh_34482"),l=n("vsh_52531"),u=function(){function t(t){this.curLine=0,this.curCol=0,this.originLine=0,this.originCol=0,this.mutateStart=0,this.mutateDeleteCount=0,this.mutateInsert=[],this.isInMutate=!1,this.mutatee=t}var e=t.prototype;return e.insert=function(t,e){var n,r,o,u,c,d,h,f,p,v,g=this;t&&(n=t,this.isInMutate||this.enter(),this.mutatee.length()-1<this.originLine&&this.putCurLineInMutate(),-1<n.indexOf("\n")?(c=n.split("\n"),this.isCurLineInMutate()?(r=this.mutateInsert.length-1,(o=this.mutateInsert[r])._keepKey&&o!==this.mutatee.get(this.originLine)&&(o._keepKey=!1,o._refreshKey()),t=c.shift(),f=c.pop(),void 0!==t&&(v=(new a.I).retain(this.curCol).insert(t,e).insertEnter(e),u=o.slice(0,this.curCol).compose(v),this.curCol&&u._setKey(o.getKey()),this.curLine++,this.mutateInsert[r]=u),c.length&&(h=c.map((function(t){return new s.V((new a.I).insert(t,e).insertEnter(e),o.parent)})),(u=this.mutateInsert).push.apply(u,(0,i.d)([],(0,i._)(h),!1)),this.curLine+=c.length),void 0!==f&&(v=(new a.I).insert(f,e),d=o.slice(this.curCol,o.length()).compose(v),f?this.mutateInsert.push(d):(c=this.mutatee.get(this.originLine))&&d.length()===c.length()&&(0,l.X)(d._getOps(),c._getOps())?this.mutateInsert.push(c):d.length()&&this.mutateInsert.push(d),this.curCol=f.length)):(d=(p=this.splitTextLines(n)).length,h=p.map((function(t){return new s.V((new a.I).insert(t,e),g.mutatee.get(0).parent)})),p[d-1].includes("\n")||(f=this.mutatee.get(this.originLine))&&(h[d-1]=f.compose(h[d-1]._getDelta()),this.curCol=p[d-1].length,this.curLine--,this.mutateDeleteCount+=1),(d=this.mutateInsert).push.apply(d,(0,i.d)([],(0,i._)(h),!1)),this.curLine+=p.length)):(p=this.putCurLineInMutate(),v=(new a.I).retain(this.curCol).insert(n,e),(v=this.mutateInsert[p].compose(v))._setKey(this.mutateInsert[p].getKey()),v._keepKey=!0,this.mutateInsert[p]=v,this.curCol+=n.length))},e.retain=function(t,e){if(t){var n=(i=this.getLineAndCol(t)).line,i=i.col;if(n>this.originLine)return this.retainLines(n-this.originLine,e),void(i&&this.retainChars(i,e));t&&this.retainChars(t,e)}},e.retainChars=function(t,e){var n,i;e&&(this.isInMutate||this.enter()),this.isInMutate&&(this.putCurLineInMutate(),n=this.mutateInsert.length-1,i=this.mutateInsert[n],e=(new a.I).retain(this.curCol).retain(t,e),this.mutateInsert[n]=new s.V(i._getDelta().compose(e,!1),i.parent),this.mutateInsert[n]._setKey(i.getKey())),this.curCol+=t,this.originCol+=t},e.delete=function(t){if(t){var e=(n=this.getLineAndCol(t)).line,n=n.col;if(e>this.originLine)return this.deleteLines(e-this.originLine),void(n&&this.deleteChars(n));t&&this.deleteChars(t)}},e.close=function(){this.leave()},e.getLineAndCol=function(t){for(var e=0,n=this.originLine,i=this.originCol,r=this.mutatee.length(),o=n;o<r;o++){var s=this.mutatee.get(o).length();if(e<=t+i&&t+i<e+s)return{line:o,col:t-e+i};e+=s}return e===t+i?{line:r,col:0}:(console.warn("can not find the correct line and col"),{line:-1,col:-1})},e.deleteLines=function(t){var e,n,i;this.isInMutate||this.enter(),this.isCurLineInMutate()?0===this.curCol?(this.mutateDeleteCount+=t-1,this.originLine+=t,this.mutateInsert.pop()):(i=this.nextKLinesObject(t-1),this.mutateDeleteCount+=t,this.originLine+=t,e=this.mutateInsert.length-1,n=this.mutateInsert[e],(i=i.compose(n.slice(0,this.curCol)._getDelta()))._setKey(n.getKey()),this.mutateInsert[e]=i):(this.originLine+=t,this.mutateDeleteCount+=t),this.originCol=0},e.deleteChars=function(t){this.isInMutate||this.enter();var e=this.putCurLineInMutate(),n=this.mutateInsert[e],i=(new a.I).retain(this.curCol).delete(t);(i=n.compose(i))._setKey(n.getKey()),this.mutateInsert[e]=i,this.originCol+=t},e.nextKLinesObject=function(t){var e=this.mutateStart+this.mutateDeleteCount;return this.mutatee.get(e+t)},e.retainLines=function(t,e){if(e){var n,i,r;this.curCol&&(r=this.curCol,this.curCol=0,this.isInMutate||this.enter(),this.putCurLineInMutate(),n=this.mutateInsert.length-1,i=this.mutateInsert[n],r=(new a.I).retain(r).retain(i.length()-r,e),this.mutateInsert[n]=new s.V(i._getDelta().compose(r,!1),i.parent),this.mutateInsert[n]._setKey(i.getKey()),this.originLine++,this.curLine++,t--),this.curCol=0,this.isInMutate||this.enter();for(var o=0;o<t;o++)this.curLine++,this.originLine++,this.putCurLineInMutate(e);this.originCol=0}else this.curLine+=t,this.originLine+=t,this.curCol=0,this.originCol=0,this.isInMutate&&this.leave()},e.putCurLineInMutate=function(t){var e,n=this.mutatee.get(this.mutateStart+this.mutateDeleteCount);return t&&n&&(e=(new a.I).retain(n.length(),t),(e=new s.V(n._getDelta().compose(e,!1),n.parent))._setKey(n.getKey()),n=e),!this.isCurLineInMutate()&&n?(this.mutateInsert.push(n),this.mutateDeleteCount++):t&&n&&(this.mutateInsert[this.mutateInsert.length-1]=n),this.curLine-this.mutateStart},e.enter=function(){this.isInMutate=!0,this.mutateStart=this.curLine,this.mutateDeleteCount=0,this.mutateInsert=[],this.originLine=this.curLine,0<this.curCol&&this.putCurLineInMutate()},e.leave=function(){var t=this.mutateInsert.length;(0<this.mutateDeleteCount||0<t)&&(this.removeLastLineIfNecessary(),this.mutatee.splice(this.mutateStart,this.mutateDeleteCount,this.mutateInsert)),this.mutateStart=this.curLine,this.originLine=this.curLine,this.mutateDeleteCount=0,this.mutateInsert=[]},e.removeLastLineIfNecessary=function(){var t;this.mutateInsert.length&&(t=this.mutateInsert.length-1,this.mutateInsert[t]._getOps().length||this.mutateInsert.splice(t))},e.splitTextLines=function(t){return t.match(/[^\n]*(?:\n|[^\n]$)/g)},e.isCurLineInMutate=function(){return this.curLine-this.mutateStart<this.mutateInsert.length},t}(),c=n("vsh_1707"),d=function(){function t(t,e){var n=this;this.lines=[],this.parent=null,this._node=null,this.placeholder="",this._allText="",this.linesWidth=[],this.zoneId=t,this._content=e.create({zoneId:t,ops:e.ops}),this.lines=[],this._content.eachLine((function(t){t=new s.V(t,n),n.lines.push(t),n._allText+=t.getModelText(),n.linesWidth.push(t.length())})),this._updateLineStateInfos(),this.type=e.zoneType}var e=t.prototype;return t.register=function(e,n){t.mutators[e]=n},e._updateLineStateInfos=function(){var t=this,e=0;this.lines.forEach((function(n,i){var r=e+n.length();n._setOffset(e,r),n._setIndex(i),n.parent=t,e=r}))},Object.defineProperty(e,"allText",{get:function(){return console.warn("zoneState.allText是过时API，请换成zoneState.getModelText"),this._allText},enumerable:!1,configurable:!0}),e.getContainer=function(){return this._node},e.getModelText=function(){return this._allText},e._updateAllText=function(t,e,n){var r=[];n.forEach((function(t){r.push(t.length())})),(o=this.linesWidth).splice.apply(o,(0,i.d)([t,e.length],(0,i._)(r),!1));var o=this.linesWidth.slice(0,t).reduce((function(t,e){return t+e}),0);t=n.reduce((function(t,e){return t+e.getModelText()}),""),n=e.reduce((function(t,e){return t+e.getModelText()}),""),e=n.length;n!==t&&(e=this._allText.slice(o+e),this._allText=this._allText.slice(0,o)+t+e)},e.getType=function(){return this.type},e.slice=function(t,e){for(var n=t.line,i=t.offset,r=e.line,o=e.offset,s=this.cloneEmptyState(),a=n;a<=r;a++){var l=this.lines[a],u=void 0;u=n===r?l.slice(i,o):a===n?l.slice(i,l.length()):a===r?l.slice(0,o):l.slice(0,l.length());s._content=s._content.concat(u._getDelta()),s._allText+=u.getModelText(),s.linesWidth.push(u.length()),s._node=this._node,s.lines.push(u)}return s._updateLineStateInfos(),s},e._splice=function(t,e,n){var r;(r=this.lines).splice.apply(r,(0,i.d)([t,e],(0,i._)(n),!1))},e.clone=function(){var t=this.cloneEmptyState();t._allText=this._allText;for(var e=0,n=this.lines.length;e<n;e++)t.lines.push(this.lines[e].clone());return t},e.getLine=function(t){return this.lines[t]||null},e.getLineIndexOfKey=function(t){for(var e=0,n=this.lines.length;e<n;e++)if(t===this.lines[e].getKey())return e;return-1},e.getLineByKey=function(t){var e,n;try{for(var r=(0,i.e)(this.lines),o=r.next();!o.done;o=r.next()){var s=o.value;if(t===s.getKey())return s}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null},e.getEntities=function(t,e,n){var r=[];if(t instanceof Array)for(var o=0;o<this.length();o++)(s=this.getLine(o))&&r.push.apply(r,(0,i.d)([],(0,i._)(s.getEntities(t,e,n)),!1));else{t instanceof Function&&(e=t,t={start:{line:0,offset:0},end:{line:u=this.length()-1,offset:this.getLine(u).length()}});var s,a,l,u,c=(u=t.start).line,d=u.offset,h=(u=t.end).line,f=u.offset;for(o=c;o<=h;o++)(s=this.getLine(o))&&(a=o===c?d:0,l=o===h?f:s.length(),r.push.apply(r,(0,i.d)([],(0,i._)(s.getEntities({start:a,end:l},e,n)),!1)))}return r},e.getAttributes=function(t,e){e=this.getEntities({start:t,end:e},void 0,this._getInternalZoneEntities);var n,r,s,a,l=(0,o.vA)();if(!e||!e.length)return l;try{for(var u=(0,i.e)(e),c=u.next();!c.done;c=u.next()){var d=c.value.attributes;if(d)try{for(var h=(s=void 0,(0,i.e)(Object.entries(d))),f=h.next();!f.done;f=h.next()){var p=(0,i._)(f.value,2),v=p[0],g=p[1];l.push([v,String(g)])}}catch(t){s={error:t}}finally{try{f&&!f.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return l},e.length=function(){return this.lines.length},e.getZoneId=function(){return this._content.zoneId},Object.defineProperty(e,"content",{get:function(){return this._getContent()},enumerable:!1,configurable:!0}),e._getContent=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var n=(o=this._content).zoneId,o=o.zoneType,s=this._content.create({zoneId:n,zoneType:o,ops:[]});return this.lines.forEach((function(n,o){var a=(n=n._getOps()).length;n.forEach((function(n,l){var u,c;t&&(0,r.d)(n)&&(0===l&&0!==o||l===a-1)?s.insert(n.insert,n.attributes):e?(l=(0,i.b)({},n),(u=n.attributes)&&(c={},Object.keys(u).forEach((function(t){t.startsWith("clientside-")||(c[t]=u[t])})),l.attributes=c),s.ops.push(l)):s.ops.push(n)}))})),s},e.getContent=function(t,e){return this._getContent(t=void 0!==t&&t,e=void 0!==e&&e)},e.isEmpty=function(){var t;return!(1!==this.length()||null===(t=this.getLine(0))||void 0===t||!t.isEmpty())},e.apply=function(e,n){var r=this,o=this.lines.slice(0),s=e.zoneType,a=t.mutators[s];if(!a)throw new Error("can not find zoneType of ".concat(s,", you need call ZoneState.register(").concat(s,") before apply"));var l=this.cloneEmptyState();l._allText=this._allText,l.linesWidth=(0,i.d)([],(0,i._)(this.linesWidth),!1);var u=new a({getParent:function(){return r},getZoneId:function(){return r.getZoneId()},getZoneType:function(){return s},splice:function(t,e,r){var s=o.slice(t,t+e);o.splice.apply(o,(0,i.d)([t,e],(0,i._)(r),!1)),l._updateAllText(t,s,r),n(t,s,r)},length:function(){return o.length},get:function(t){return o[t]},map:function(t){return o.map((function(e,n,i){return t(e,n,i)}))}});return e.forEach((function(t){t.delete?u.delete(t.delete):t.retain?u.retain(t.retain,t.attributes):t.insert&&("string"==typeof t.insert&&(t.insert=(0,c.$)(t.insert)),u.insert(t.insert,t.attributes))})),u.close(),l.lines=o,l._node=this._node,l._updateLineStateInfos(),l.parent=this.parent,l},e.cloneEmptyState=function(){var e=this._content.create({zoneType:this.type,zoneId:this.zoneId});return(e=new t(this.getZoneId(),e)).type=this.type,e.zoneId=this.zoneId,e._node=this._node,e.placeholder=this.placeholder,e},e[Symbol.iterator]=function(){return this.lines.values()},e.setPlaceholder=function(t){this.placeholder=t},e._setLine=function(t,e){this.lines[t]=e},e._setParent=function(t){this.parent=t},e._getZoneDelta=function(){return this.content},e._indexOf=function(t){return t?t.index:0},e.pointToOffset=function(t){var e=t.line;t=t.offset;return(e=this.getLine(e))?e._offsetStart+t:null},e.offsetToPoint=function(t){var e=h(t,0,this.lines.length,this.lines),n=this.zoneId;if(null===e)return{zoneId:n,line:0,offset:0};var i=this.lines[e];return t===i._offsetEnd&&e!==this.lines.length-1?{zoneId:n,line:e+1,offset:0}:{zoneId:n,line:e,offset:t-i._offsetStart}},e.totalWidth=function(){return this.lines.reduce((function(t,e){return t+e.length()}),0)},t.mutators={},t}();function h(t,e,n,i){var r=Math.floor((e+n)/2);return n<e||!i.length||t>i[i.length-1]._offsetEnd||t<0?null:t>=i[r]._offsetStart&&t<=i[r]._offsetEnd?r:t>i[r]._offsetEnd?h(t,r,n,i):t<i[r]._offsetStart?h(t,e,r,i):null}d.register("Z",u);var f=n("vsh_75385"),p=n("vsh_38160"),v=function(t){function e(e){var n=t.call(this)||this;n.ops=[];var i=e.zoneId,r=e.ops,o=e.zoneType;return n.zoneId=i,n.zoneType=o,r&&r.length>0&&(n.ops=r),n}(0,f.d)(e,t);var n=e.prototype;return n.insert=function(e,n){if(!e)return this;var i={id:e};return t.prototype.insert.call(this,i,n,!1)},n.create=function(t){return t.zoneType=t.zoneType||this.zoneType,new e(t)},e}(r.x),g=function(t){function e(e){return t.call(this,(0,f._)({zoneType:p.Ak.Row},e))||this}return(0,f.d)(e,t),e}(v),y=function(t){function e(e){return t.call(this,(0,f._)({zoneType:p.Ak.Column},e))||this}return(0,f.d)(e,t),e}(v);r.x.registerCreator(p.Ak.Row,g),r.x.registerCreator(p.Ak.Column,y);var m=function(){function t(t){this.mutateStart=0,this.mutatee=t}var e=t.prototype;return e.insert=function(t,e){var n=t;t=(t=this.mutatee.get(0))||new s.V(this.createDelta(),this.mutatee.getParent()),e=this.createDelta().retain(this.mutateStart).insert(n.id,e),e=t.compose(e);this.mutatee.splice(0,1,[e]),this.mutateStart+=(0,r.a)({insert:n})},e.retain=function(t,e){e&&(e=this.createDelta().retain(this.mutateStart).retain(t,e),e=this.mutatee.get(0).compose(e),this.mutatee.splice(0,1,[e])),this.mutateStart+=t},e.delete=function(t){var e=this.createDelta();t=this.mutatee.get(0).compose(e.retain(this.mutateStart).delete(t));this.mutatee.splice(0,1,[t])},e.createDelta=function(){var t=this.mutatee.getZoneType(),e=this.mutatee.getZoneId();return new("R"===t?g:y)({zoneId:e})},e.close=function(){},t}(),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.c)(e,t),e}(d);_.register("R",m),_.register("C",m)},vsh_41013:function(t,e,n){"use strict";var i,r;n.d(e,{h:function(){return i}}),(r=i=i||{}).Range="Range",r.ZoneState="ZoneState",r.ContentState="ContentState",r.UndoModule="UndoModule",r.InputModel="InputModel"},vsh_12196:function(t,e,n){"use strict";n.d(e,{zq:function(){return l},$l:function(){return a},j0:function(){return d}});var i=n("vsh_84965"),r=n("vsh_78224"),o=n("vsh_18776"),s=n("vsh_33378"),a="undo",l="redo",u=function(t){var e=t.id,n=t.type,i=t.deltaSet;t=t.selection;this.id=e,this.type=n,this.deltaSet=i,this.selection=t};function c(){}c.prototype=Object.create(Array.prototype,{clear:{value:function(){this.splice(0,this.length)}},getNthFromTop:{value:function(t){return null!==(t=this[this.length-1-(t=void 0===t?0:t)])&&void 0!==t?t:null}},getNthFromBottom:{value:function(t){return null!==(t=this[t=void 0===t?0:t])&&void 0!==t?t:null}}}),c.prototype.constructor=c;var d=function(){function t(t){this.name="undoModule",this.uuid=(0,o.D)(6),this.undoDispatcher=null,this.undoStack=new c,this.redoStack=new c,this.batchedUndoCursors=[],this.didRecord=!1,this.selectionBeforeApply=null,this.editor=t,this.bindEvents(),this.registerCommands()}var e=t.prototype;return e.registerCommands=function(){var t=this,e=this.editor;e.registerCommand(a,(function(){t.undo()})),e.registerCommand(l,(function(){t.redo()}))},e.bindEvents=function(){this.editor.on(r.r.CONTENT_WILL_CHANGE,this.handleContentWillChange),this.editor.on(r.r.CONTENT_CHANGE,this.handleContentChange),this.editor.on(r.r.INPUT,this.handleInputEvent,100)},e.unbindEvents=function(){this.editor.off(r.r.CONTENT_WILL_CHANGE,this.handleContentWillChange),this.editor.off(r.r.CONTENT_CHANGE,this.handleContentChange),this.editor.off(r.r.INPUT,this.handleInputEvent)},e.handleInputEvent=function(t){var e=!1;"historyUndo"===t.nativeEvent.inputType?(this.undo(),e=!0):"historyRedo"===t.nativeEvent.inputType&&(this.redo(),e=!0),e&&(t.preventDefault(),t.stopEvent())},e.isApplyByMyself=function(){var t=this.editor.getContentState().contentApplyRuntime;return!!t.atRuntime&&(t=t.runtimeStack[0].type,[a,l].includes(t))},Object.defineProperty(e,"inBatching",{get:function(){return 0<this.batchedUndoCursors.length},enumerable:!1,configurable:!0}),e.handleContentWillChange=function(){this.selectionBeforeApply=this.editor.selection.getSelection()},e.handleContentChange=function(t){var e=t.previous,n=t.deltaSet,r=(t=(r=t.options).nonundoable,r.type);if(this.isApplyByMyself())return(r=(r===a?this.redoStack:this.undoStack).getNthFromTop(0))?void(r.selection=this.selectionBeforeApply):void 0;t?this.recordNonUndoable(n):(t=this.editor.getContentState().contentApplyRuntime,this.record(n,e.toDeltaSet(),(0,i.b)((0,i.b)({},t.currentRuntime),{selection:this.selectionBeforeApply})))},e.startBatchedUndo=function(){this.inBatching&&this.consumeBatchedUndo(this.batchedUndoCursors[this.batchedUndoCursors.length-1]);var t=this.undoStack.getNthFromTop(0);this.batchedUndoCursors.push((null==t?void 0:t.id)||null)},e.closeBatchedUndo=function(){var t;this.inBatching&&(t=this.batchedUndoCursors.pop(),this.consumeBatchedUndo(t),this.inBatching&&(this.batchedUndoCursors.pop(),this.startBatchedUndo()))},e.consumeBatchedUndo=function(t){var e=(0,i._)(t?this.getRecordEntryByID(t):[-1],1)[0];void 0!==e&&((t=this.undoStack.slice(e+1)).length&&this.didRecord&&(this.didRecord=!1,null!==(e=this.undoDispatcher)&&void 0!==e&&e.do(this.uuid)),1<t.length&&this.mergeRecords.apply(this,(0,i.d)([],(0,i._)(t),!1)))},e.record=function(t,e,n){var i=n.id,r=n.type;n=n.selection,e=t.invert(e);this.undoStack.push(new u({id:i,type:r,deltaSet:e,selection:n})),this.redoStack.clear(),this.inBatching?this.didRecord=!0:null!==(n=this.undoDispatcher)&&void 0!==n&&n.do(this.uuid)},e.recordNonUndoable=function(t){this.transform(this.undoStack,t),this.transform(this.redoStack,t)},e.transform=function(t,e){for(var n=t.length-1;0<=n;n--){var i=t[n].deltaSet;t[n].deltaSet=e.transform(i),e=i.transform(e)}},e.conversion=function(t,e,n){var r;t.length&&(r=t.pop(),t=this.editor.getContentState().toDeltaSet(),t=r.deltaSet.invert(t),e.push(new u((0,i.b)((0,i.b)({},r),{deltaSet:t}))),this.editor.getContentState().apply(r.deltaSet,n),this.editor.selection.setSelection(r.selection,!1))},e.performUndo=function(){this.conversion(this.undoStack,this.redoStack,{type:"undo"})},e.performRedo=function(){this.conversion(this.redoStack,this.undoStack,{type:"redo"})},e.getRecordEntryByID=function(t){var e,n;try{for(var r=(0,i.e)(this.undoStack.entries()),o=r.next();!o.done;o=r.next()){var s=(0,i._)(o.value,2),a=s[0],l=s[1];if(l.id===t)return[a,l]}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return[]},e._mergeRecord=function(t,e){var n=t.id,r=t.type,o=e.id,s=(t=(0,i._)(this.getRecordEntryByID(n),2))[0];e=t[1],o=(t=(0,i._)(this.getRecordEntryByID(o),2))[0],t=t[1];if(e&&t&&void 0!==s&&void 0!==o){var a=t.deltaSet;t=e.deltaSet;if(s<o)for(var l=o-1;s<l;l--)a=this.undoStack.getNthFromBottom(l).deltaSet.transform(a);else for(l=o+1;l<s;l++)a=this.undoStack.getNthFromBottom(l).deltaSet.transform(a);t=a.compose(t),this.undoStack.splice(s,1,new u({id:n,type:r,deltaSet:t,selection:e.selection})),this.undoStack.splice(o,1)}},e.batchedUndo=function(t){this.startBatchedUndo(),t(),this.closeBatchedUndo()},e.setUndoDispatcher=function(t,e){this.undoDispatcher=t,null!=e&&e.id&&(this.uuid=null==e?void 0:e.id),this.undoDispatcher.register((0,i.b)({id:this.uuid,undo:this.performUndo,redo:this.performRedo},e))},e.undo=function(){this.undoDispatcher?this.undoDispatcher.undo():this.performUndo()},e.redo=function(){this.undoDispatcher?this.undoDispatcher.redo():this.performRedo()},e.mergeRecords=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{for(var n=t.length-1;0<n;n--)this._mergeRecord(t[n-1],t[n])}catch(t){this.editor.log("mergeRecords failed",t.stack)}},Object.defineProperty(e,"undoable",{get:function(){return 0<this.undoStack.length},enumerable:!1,configurable:!0}),Object.defineProperty(e,"redoable",{get:function(){return 0<this.redoStack.length},enumerable:!1,configurable:!0}),e.markNonundoable=function(t){var e=(0,i._)(this.getRecordEntryByID(t.id),1)[0];void 0!==e&&(t=(0,i._)(this.undoStack.splice(e,1),1)[0].deltaSet.invert(this.editor.getContentState().toDeltaSet()),this.transform(this.undoStack.slice(0,e),t))},e.getNthUndoRecordFromTop=function(t){return this.undoStack.getNthFromTop(t=void 0===t?0:t)},e.getNthUndoRecordFromBottom=function(t){return this.undoStack.getNthFromBottom(t=void 0===t?0:t)},e.getNthRedoRecordFromTop=function(t){return this.redoStack.getNthFromTop(t=void 0===t?0:t)},e.getNthredoRecordFromBottom=function(t){return this.redoStack.getNthFromBottom(t=void 0===t?0:t)},e.clearUndoStack=function(){this.undoStack.clear()},e.clearRedoStack=function(){this.redoStack.clear()},e.clear=function(){this.clearRedoStack(),this.clearUndoStack()},e.destroy=function(){var t;this.unbindEvents(),null!==(t=this.undoDispatcher)&&void 0!==t&&t.unregister(this.uuid)},(0,i.a)([s.W],t.prototype,"handleInputEvent",null),(0,i.a)([s.W],t.prototype,"handleContentWillChange",null),(0,i.a)([s.W],t.prototype,"handleContentChange",null),(0,i.a)([s.W],t.prototype,"performUndo",null),(0,i.a)([s.W],t.prototype,"performRedo",null),(0,i.a)([s.W],t.prototype,"batchedUndo",null),t}()},vsh_40229:function(t,e,n){"use strict";n.d(e,{S:function(){return i}});var i=function(){function t(){}var e=t.prototype;return e.match=function(t,e){return!1},e.renderLine=function(t){return t.children},e.render=function(t){return t.children},e.serialize=function(t){return t},e.deserialize=function(t){return t.deltaSet},t}()},vsh_57916:function(t,e,n){"use strict";n.d(e,{Q$:function(){return d},gv:function(){return a},iI:function(){return l}});var i=n("vsh_84965"),r=(n("vsh_72862"),n("vsh_90166")),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="composingUnderlineStatus",e}(0,i.c)(e,t);var n=e.prototype;return n.match=function(t){return t===e.KEY},n.render=function(t){var e=t.children;t=t.style;return Object.assign(t,{textDecoration:"underline"}),e},e.KEY="composingUnderlineStatus",e}(n("vsh_40229").S),s="priority";function a(t){return function(e,n,i){return e["".concat(n,"_").concat(s)]=t,i}}function l(t,e){return(0,i.d)([],(0,i._)(t),!1).sort((function(t,n){return u(t,e)-u(n,e)}))}function u(t,e){return"number"==typeof t["".concat(e,"_").concat(s)]?t["".concat(e,"_").concat(s)]:1e3}var c=function(){return[]},d=function(){function t(t,e){var n=this;this._plugins=[],this._matchCache=new Map,this._indexMap=new Map,this._pluginsWithPriorityMapCache=new Map,this._pluginConstructorSet=new Set,this._zoneToPlugins=new Map,this._init=function(){var t=n.editor;return n._registerPlugin(t).concat([new o]).forEach((function(t){n.register(t)})),n._pluginsWithPriorityMapCache.clear(),n._plugins},this._registerPlugin=null!=e?e:c,this.editor=t}var e=t.prototype;return e.setPluginToZoneMap=function(t,e){var n=null!==(n=this._zoneToPlugins.get(e=void 0===e?"all":e))&&void 0!==n?n:new Set;n.add(t),this._zoneToPlugins.set(e,n)},e.resetPluginToZoneMap=function(t){t?this._zoneToPlugins.delete(t):this._zoneToPlugins=new Map},e.isPluginInZone=function(t,e){return(null===(e=this._zoneToPlugins.get(e))||void 0===e?void 0:e.has(t.constructor))||(null===(e=this._zoneToPlugins.get("all"))||void 0===e?void 0:e.has(t.constructor))},e.register=function(t,e){if(Array.isArray(t)){var n=(r=(0,i._)(t,2))[0],r=r[1];if(this.setPluginToZoneMap(n,e),this._pluginConstructorSet.has(n))return;t=new n(r)}else if(n=t.constructor,this.setPluginToZoneMap(n,e),this._pluginConstructorSet.has(n))return;this.process(t,this._plugins.length)},e.process=function(t,e){this._pluginsWithPriorityMapCache.clear(),this._plugins.push(t),this._indexMap.set(t,e),this._pluginConstructorSet.add(t.constructor)},e.call=function(t,e,n,i){var o=this;return void 0===n&&(n=function(t,e){return t}),this.getPluginsWithPriority(t,i).reduce((function(e,i){var s=i[t];if(s&&"function"==typeof s){try{return n(e,s.call(i,e))}catch(e){i="Warning: call hook failed. hook: ".concat(t,". plugin: ").concat(i.name),o.editor.error({e:e,level:r.WV.ERROR,message:i})}return e}return e}),e)},e.getPluginsWithPriority=function(t,e){var n=this,i=[];return this._pluginsWithPriorityMapCache.has(t)?i=this._pluginsWithPriorityMapCache.get(t):(i=l(this._plugins,t),this._pluginsWithPriorityMapCache.set(t,i)),e?i.filter((function(t){return n.isPluginInZone(t,e)})):i},e.getPlugins=function(t){var e=this;return t?this._plugins.filter((function(n){return e.isPluginInZone(n,t)})):this._plugins},e._matchPlugin=function(t){var e,n,o,s=t.attributeKey,a=t.value,l=t.zoneId,u=t.attributes,c=s+a,d=this._matchCache.get(c);if(!d)try{for(var h=(0,i.e)(this._plugins),f=h.next();!f.done;f=h.next()){var p=f.value;try{if(null!==(o=p.match)&&void 0!==o&&o.call(p,s,a,u)){this._matchCache.set(c,p),d=p;break}}catch(t){var v="Warning: call hook failed. hook: match. plugin: ".concat(p.name);this.editor.error({e:t,level:r.WV.ERROR,message:v})}}}catch(t){e={error:t}}finally{try{f&&!f.done&&(n=h.return)&&n.call(h)}finally{if(e)throw e.error}}return!d||l&&!this.isPluginInZone(d,l)?null:d},e.getPlugin=function(t,e){var n,r;try{for(var o=(0,i.e)(this._plugins),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.name===t)return!e||this.isPluginInZone(a,e)?a:null}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return null},e._indexOf=function(t){return null!==(t=this._indexMap.get(t))&&void 0!==t?t:-1},e.destroy=function(){this.call("destroy",{}),this._plugins=[],this._registerPlugin=null,this._matchCache.clear(),this._indexMap.clear(),this._pluginsWithPriorityMapCache.clear(),this._pluginConstructorSet.clear(),this._zoneToPlugins.clear()},t}()},vsh_27877:function(t,e,n){"use strict";function i(t,e){return{left:t.left-e.left,right:(t.right||0)-e.left,top:t.top-e.top,bottom:(t.bottom||0)-e.top}}function r(t,e){var n;void 0!==e.line&&(n=t.length()-1,e.line=Math.max(Math.min(n,e.line),0),void 0!==e.offset&&(t=t.getLine(e.line).getModelText().length-1,e.offset=Math.max(Math.min(t,e.offset),0)))}function o(t,e){return[t.zoneId,t.line,t.offset,e].filter((function(t){return void 0!==t})).join("-")}function s(t,e){return t.top<=e.top&&t.bottom>=e.bottom||e.top<=t.top&&e.bottom>=t.bottom}function a(t,e){return t.top<e.bottom&&t.bottom>e.bottom||t.top<e.top&&t.bottom>e.top}n.d(e,{xR:function(){return r},ah:function(){return o},jF:function(){return s},GR:function(){return a},s8:function(){return i}})},vsh_62145:function(t,e,n){"use strict";n.d(e,{V:function(){return r}});var i=n("vsh_84965"),r=function(){function t(t){this.schemas=t}return t.prototype.get=function(t){var e,n;try{for(var r=(0,i.e)(Object.keys(this.schemas)),o=r.next();!o.done;o=r.next()){var s=o.value;if(new RegExp(s).test(t))return this.schemas[s]}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t}()},vsh_68996:function(t,e,n){"use strict";n.d(e,{W:function(){return u}});var i=n("vsh_84965"),r=n("vsh_90166"),o=n("vsh_41013"),s=n("vsh_63387"),a=n("vsh_93928"),l=function(){function t(t){var e=t.line,n=t.offset,i=t.position,r=void 0===(o=t.zoneId)?a.S:o,o=t.side;t=t.isEdge;this._position=0,this.line=e,this.offset=n,this.zoneId=r,this.side=o,this.isEdge=t,Object.defineProperty(this,"_position",{enumerable:!1,value:i})}return t.prototype[Symbol.toPrimitive]=function(t){return"number"===t?this._position:JSON.stringify({line:this.line,offset:this.offset,zoneId:this.zoneId})},t}(),u=function(){function t(t){var e=t.editor,n=t.start,i=t.end,r=void 0!==(r=t.isBackward)&&r;t=t.state;this.editor=e,n=this.createRangePoint(n,!1,t),t=(i=this.createRangePoint(i,!1,t))<n,this.start=t?i:n,this.end=t?n:i,this.isBackward=t||r,Object.defineProperties(this,{editor:{enumerable:!1},_start:{enumerable:!1},_end:{enumerable:!1},start:{enumerable:!0,get:function(){return this._start},set:function(t){this._start=t}},end:{enumerable:!0,get:function(){return this._end},set:function(t){this._end=t}}})}var e=t.prototype;return t.isRange=function(e){return e instanceof t},t.isPointEqual=function(t,e){var n=t.line,i=t.offset,r=t.zoneId,o=t.isEdge,s=t.side,a=e.line,l=e.offset,u=e.zoneId;t=e.isEdge,e=e.side;return n===a&&i===l&&r===u&&o===t&&s===e},t.isPointEqualIgnoreSide=function(t,e){var n=t.line,i=t.offset,r=t.zoneId,o=e.line;t=e.offset,e=e.zoneId;return n===o&&i===t&&r===e},t.isRangeEqual=function(e,n){var i=e.start,r=e.end;e=n.start,n=n.end;return t.isPointEqual(i,e)&&t.isPointEqual(r,n)},t.isRangesEqual=function(t,e){if(t.length!==e.length)return!1;for(var n=0,i=t.length;n<i;n++){var r=t[n],o=e[n];if(!o)return!1;if(!this.isRangeEqual(r,o))return!1}return!0},t.isPointLargerThan=function(t,e){var n=t.line,i=t.offset,r=t.zoneId,o=e.line;t=e.offset;return r===e.zoneId&&(o<n||n===o&&t<i)},Object.defineProperty(e,"start",{get:function(){return this._start},set:function(t){this._start=this.createRangePoint(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"end",{get:function(){return this._end},set:function(t){this._end=this.createRangePoint(t)},enumerable:!1,configurable:!0}),e.create=function(e){return new t(e)},e.createRangePoint=function(t,e,n){return!(e=void 0!==e&&e)&&t instanceof l?t:(e=n||this.editor.getContentState(),n=null,"rangePointToOffset"in e?n=e.rangePointToOffset(t):"pointToOffset"in e&&(n=e.pointToOffset(t)),null===n?(this.editor.error({message:"point: ".concat(t," can't parse to position"),level:r.WV.ERROR}),new l((0,i.b)((0,i.b)({},t),{position:-1}))):new l((0,i.b)((0,i.b)({},t),{position:n})))},e.toPosition=function(t){var e=t||this.editor.getContentState(),n=null;t=null;return"rangePointToOffset"in e?(n=e.rangePointToOffset(this.start),t=e.rangePointToOffset(this.end)):"pointToOffset"in e&&(n=e.pointToOffset(this.start),t=e.pointToOffset(this.end)),null===n||null===t?(this.editor.error({message:"startOffset: ".concat(n,", endOffset: ").concat(t),level:r.WV.ERROR}),new s.L({editor:this.editor,start:-1,len:0,zoneId:this.start.zoneId,isBackward:this.isBackward})):new s.L({editor:this.editor,start:n,len:t-n,zoneId:this.start.zoneId,isBackward:this.isBackward,isEdge:this._end.isEdge})},e.isCollapsed=function(){return t.isPointEqualIgnoreSide(this.start,this.end)},e.clone=function(t){return new(this.editor.modulesContainer.get(o.h.Range))({editor:this.editor,start:this.createRangePoint(this.start,!0,t),end:this.createRangePoint(this.end,!0,t),isBackward:this.isBackward})},e.toString=function(){return JSON.stringify(this)},t}()},vsh_63387:function(t,e,n){"use strict";n.d(e,{L:function(){return s}});var i=n("vsh_84965"),r=n("vsh_41013"),o=n("vsh_93928"),s=function(){function t(t){var e=t.start,n=t.len,i=void 0===(s=t.zoneId)?o.S:s,r=void 0!==(a=t.isBackward)&&a,s=t.side,a=t.editor;t=t.isEdge;this.start=e,this.len=n,this.zoneId=i,this.isBackward=r,this.side=s,this.editor=a,this.isEdge=t,Object.defineProperty(this,"editor",{enumerable:!1})}var e=t.prototype;return t.isPosition=function(e){return e instanceof t},e.toRange=function(t){var e,n=(e=this).editor,o=e.start,s=e.len,a=e.zoneId,l=e.isBackward,u=e.side,c=e.isEdge;t=(e=(t||n.getContentState()).getZoneState(a)).offsetToPoint(o),s=e.offsetToPoint(o+s);return new(this.editor.modulesContainer.get(r.h.Range))({editor:n,start:(0,i.b)((0,i.b)({},t),{zoneId:a,side:u,isEdge:c}),end:(0,i.b)((0,i.b)({},s),{zoneId:a,side:u,isEdge:c}),isBackward:l})},e.isCollapsed=function(){return 0===this.len},t}()},vsh_71944:function(t,e,n){"use strict";n.d(e,{e:function(){return s}});var i=n("vsh_84965"),r=n("vsh_68996"),o=n("vsh_93928"),s=function(t){function e(n){var i=n.editor,r=n.start,o=n.end,s=void 0!==(a=n.isBackward)&&a,a=(n=r,o);return r.zoneId!==o.zoneId&&(n=(o=e.fixToCommonZone(i,r,o)).start,a=o.end),t.call(this,{editor:i,start:n,end:a,isBackward:s})||this}(0,i.c)(e,t);var n=e.prototype;return e.fixToCommonZone=function(t,e,n){var r=e.zoneId,s=n.zoneId;if(r===s)return{start:e,end:n};var a=t.getContentState().getZoneManager(),l=t.getContentState(),u=(t=a.getAncestorZones(r),a.getAncestorZones(s));return(a=t.find((function(t){return u.includes(t)})))?(a!==r&&(t=t[t.indexOf(a)-1],(t=null===(t=l.getZoneState(t))||void 0===t?void 0:t.parent)&&(e=(0,i.b)((0,i.b)({},e),{zoneId:a,line:t.index,offset:null!=t&&t.hasLineMarker()?1:0}))),a!==s&&(s=u[u.indexOf(a)-1],(s=null===(s=l.getZoneState(s))||void 0===s?void 0:s.parent)&&(n=(0,i.b)((0,i.b)({},n),{zoneId:a,line:s.index,offset:s.hasLineMarker()?1:0}))),{start:e,end:n}):{start:(0,i.b)((0,i.b)({},e),{zoneId:o.S}),end:(0,i.b)((0,i.b)({},n),{zoneId:o.S})}},n.clone=function(t){return new e({editor:this.editor,start:this.createRangePoint(this.start,!0,t),end:this.createRangePoint(this.end,!0,t),isBackward:this.isBackward})},e}(r.W)},vsh_97731:function(t,e,n){"use strict";n.d(e,{y1:function(){return r},DP:function(){return o},cA:function(){return s}});var i=n("vsh_27877"),r=function(t){return function(t){return t instanceof Node}(t)&&t.nodeType===Node.TEXT_NODE};function o(t,e){return(0,i.jF)(t,e)||(0,i.GR)(t,e)}function s(t,e){var n=t.start,i=t.end;return!(t.isCollapsed()||n.zoneId!==t.end.zoneId||n.zoneId!==e.zoneId||e.line<n.line||e.line>i.line||e.line===n.line&&e.offset<n.offset||e.line===i.line&&e.offset>i.offset)}},vsh_84965:function(t,e,n){"use strict";n.d(e,{_:function(){return d},a:function(){return a},b:function(){return s},c:function(){return o},d:function(){return h},e:function(){return c},f:function(){return l},g:function(){return u}});var i=n("vsh_65498"),r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function a(t,e,n,r){var o,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==("undefined"==typeof Reflect?"undefined":(0,i.Z)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var l=t.length-1;0<=l;l--)(o=t[l])&&(a=(s<3?o(a):3<s?o(e,n,a):o(e,n))||a);return 3<s&&a&&Object.defineProperty(e,n,a),a}function l(t,e,n,i){return new(n=n||Promise)((function(r,o){function s(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))}function u(t,e){var n,i,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,(s=r?[2&s[0],r.value]:s)[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=0<(r=o.trys).length&&r[r.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function c(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&i>=t.length?void 0:t)&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function h(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||((i=i||Array.prototype.slice.call(e,0,r))[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}},vsh_9829:function(t,e,n){"use strict";n.d(e,{a:function(){return x},d:function(){return k}});var i=n("vsh_84965"),r=(n("vsh_72862"),n("vsh_15516")),o=n("vsh_93862"),s=n("vsh_34482"),a=n("vsh_95082"),l="application/x-editor-kit-fragment",u="application/x-editor-kit-business-key",c={underline:"u",bold:"b",blockquote:"blockquote",italic:"i",strikethrough:"s"},d="COPY_WITHOUT_PERMISSION",h="data-multiple-line-wrap",f="data-line",p=n("vsh_93919");var v=function(){function t(){}var e=t.prototype;return e.getData=function(t,e){return t.getData(e)},e.setData=function(t,e,n){return t.setData(e,n)},e.getTypes=function(t){return t.types},t}(),g=function(){function t(t){void 0===t&&(t=new v),this.proxyClipboard=t}var e=t.prototype;return e.getTypes=function(t){return this.proxyClipboard.getTypes(t)},e.getData=function(t,e){return void 0===e&&(e="text/html"),p.Xh.modernIE?this.proxyClipboard.getData(t,"text"):this.proxyClipboard.getData(t,e)},e.setData=function(t,e){var n=e.text,i=e.html;(n||i)&&(e=null===(e=null===(e=null===(e=window.lark)||void 0===e?void 0:e.biz)||void 0===e?void 0:e.clipboard)||void 0===e?void 0:e.setContent,p.Xh.modernIE?this.proxyClipboard.setData(t,"text",i):this.proxyClipboard instanceof v&&e&&((0,p.WZ)()||p.Xh.isBytedanceApp&&p.Xh.isIPad||p.Xh.isAndroid&&i.length&&!n.length)?function(t,e){window.lark.biz.clipboard.setContent({text:t,html:e})}(n,i):(this.proxyClipboard.setData(t,"text/html",i),this.proxyClipboard.setData(t,"text/plain",n)))},e.setDataWithoutEvent=function(t){var e=this,n=document.createElement("textarea");document.body.appendChild(n),document.addEventListener("copy",(function n(i){i.preventDefault(),i.stopImmediatePropagation&&i.stopImmediatePropagation();var r=t.html,o=t.text;document.createElement("div").innerHTML=r,i=i.clipboardData||window.clipboardData,p.Xh.modernIE?e.proxyClipboard.setData(i,"text",r):(e.proxyClipboard.setData(i,"text/html",r),e.proxyClipboard.setData(i,"text/plain",o)),t.customCopyDatas&&e.setCustomData(i,t.customCopyDatas),document.removeEventListener("copy",n)})),n.style.opacity="0",n.value=" ",p.Xh.mobile&&(n.readOnly=!0);var i=window.scrollX,r=window.scrollY;n.focus({preventScroll:!0}),n.select(),p.Xh.isAndroid&&window.scrollTo(i,r),p.Xh.lark&&p.Xh.isIOS?window.lark.biz.navigation.handleCopyMenuClick():document.execCommand("copy"),document.body.removeChild(n)},e.setCustomData=function(t,e){var n,i,r=this;t&&t.setData&&(p.Xh.isAndroid?(n=this.proxyClipboard.getData(t,"text/html"),i="",e.forEach((function(t){var e=t.key;t=t.data;i+='<span id="custom-clipboard-data-'.concat(e,'" data-custom-clipboard="').concat(encodeURIComponent(t),'"></span>')})),this.proxyClipboard.setData(t,"text/html",n+i)):e.forEach((function(e){r.proxyClipboard.setData(t,e.key,e.data)})))},e.getCustomData=function(t,e){if(!t||!t.setData)return"";if(p.Xh.isAndroid){var n=this.proxyClipboard.getData(t,"text/html");n=(new DOMParser).parseFromString(n,"text/html").getElementById("custom-clipboard-data-".concat(e));return decodeURIComponent((null==n?void 0:n.getAttribute("data-custom-clipboard"))||"")}return this.proxyClipboard.getData(t,e)},t}();var y=n("vsh_78224"),m=n("vsh_41802");var _=n("vsh_41013"),b=n("vsh_51404"),E=n("vsh_33378"),S=n("vsh_22432"),w=n("vsh_93928"),C=function(){function t(t){this.pasteTimes=0,this.fromBusinessKey="",this.editor=t}var e=t.prototype;return t.isBlob=function(t){var e=t.types,n=t.files,i=1===e.length&&n&&n.length;t=2===e.length&&e.includes("text/plain")&&e.includes("Files"),n=2===e.length&&e.includes("text/html")&&e.includes("Files"),e=p.Xh.safari&&e.includes("Files")&&e.includes("text/uri-list");return i||t||n||e},e.callHook=function(t,e,n){var r=!1;(n=void 0===n?{}:n).canPrevent&&(e.preventDefault=function(){r=!0}),n.pickKey&&(o=function(t,e){return e&&(t[n.pickKey]=e),t});var o=this.editor.pluginManager.call(t,e,o);return(0,i.b)((0,i.b)({},o),{defaultPrevented:r})},e.onPaste=function(e){var n=e.clipboardData;if(n){var o=this.editor,s=new m.y(e,e.target),a=null,c=this.editor.clipboard.dataHelper,d=c.getCustomData(n,l);this.fromBusinessKey=c.getCustomData(n,u);var h,f=/data-editor-unique-id="([0-9a-zA-Z]+)"/;d?(a=function(t){try{return JSON.parse(t)}catch(t){console.error("Warning: JSON parse failed. ".concat(t.message))}}(d))&&(h=a.editorUniqueId):c.getTypes(n).includes("text/html")&&f.test(c.getData(n,"text/html"))&&(h=f.exec(c.getData(n,"text/html"))[1]),(f=this.fromBusinessKey&&this.fromBusinessKey===o.businessKey)||o.log('[Paste][onPaste] Copy from different business "'.concat(this.fromBusinessKey,'"')),!(f=f||o.clipboard.canInternalPasteWhitelist.includes(this.fromBusinessKey))&&this.fromBusinessKey&&console.warn('if want to accept the internal clipboard data from "'.concat(this.fromBusinessKey,'",\n        you can config it into the editor.canInternalPasteWhitelist ').concat(o.clipboard.canInternalPasteWhitelist)),this.updatePasteInfo(h);try{this.editor.triggerEditorEvent(y.r.PASTE,s)}catch(e){o.error({e:e,message:"[Paste][onPaste][Warning] call paste event failed.",level:S.W.ERROR})}if(!s.isDefaultPrevented()){if(n={text:c.getData(n,"text/plain"),types:c.getTypes(n),files:t.isBlob(n)?n.files:void 0,fromBusinessKey:this.fromBusinessKey},a&&f){var p=a.deltas;return this.applyPaste(e,new r.D(p),(0,i.b)((0,i.b)({},n),{isInternalPaste:!0}))}a=(f=this.normalizeClipboardData(e)).node,p=f.defaultPrevented,f=f.clipboardHasElement,p||(f=this.deserialize((0,i.b)({node:a},n),f),o.log("[Paste][onPaste] paste node is:",a),this.applyPaste(e,f,(0,i.b)((0,i.b)({},n),{isInternalPaste:!1})))}}},e.updatePasteInfo=function(t){t===this.editor.editorUniqueId?this.pasteTimes++:(this.editor.clipboard.from=null,this.pasteTimes=0)},e.getPasteInfo=function(){return{pasteFrom:this.editor.clipboard.from,pasteTimes:this.pasteTimes}},e.normalizeClipboardData=function(t){var e,n=(s=t.clipboardData).types,i=s.files,r=(e=this.editor.clipboard.dataHelper).getData(t.clipboardData,"text/html"),o=e.getData(t.clipboardData,"text/plain"),s=r;r=!!(e=(new DOMParser).parseFromString(s,"text/html").body).firstElementChild;return P(e),i={UNSAFE_HTML:s,node:e,text:o,files:i},t=this.callHook("UNSAFE_editorNormalizePasteNode",{types:n,data:i,event:t},{canPrevent:!0}),{node:i.node,defaultPrevented:t.defaultPrevented,clipboardHasElement:r}},e.applyPaste=function(t,e,n){t.stopImmediatePropagation(),t.preventDefault();var o,a=this.editor,l=a.selection.getSelection(),u=(o=l.start).zoneId,c=o.line;if(o=null===(h=a.getContentState().getZoneState(u))||void 0===h?void 0:h.getLine(c)){var d,h=Object.keys(e.deltas);h[0]!==w.S&&1===h.length&&(d=e.get(h[0]),e=e.replace(h[0],d.create((0,i.b)((0,i.b)({},d),{zoneId:w.S})))),e.get(w.S)||((d=function(t){var e=null;return Object.keys(t.deltas).forEach((function(n){var i;(n=t.get(n))instanceof s.I&&!e&&(i=!1,n.forEach((function(t){(null===(t=t.attributes)||void 0===t?void 0:t.zoneId)&&!e&&(i=!0)})),i&&(e=n.zoneId))})),e}(e))?(f=e.get(d),e=e.replace(d,f.create((0,i.b)((0,i.b)({},f),{zoneId:w.S})))):console.warn("can not find container zone when paste, debug info:",Object.keys(e.deltas).join("|")));var f=e.get(w.S);u!==w.S&&f&&e.replace(w.S,new s.I({zoneId:u,ops:f.ops}));var p=e.get(u);if(function(t,e){for(var n="",i=t.ops.length-1;0<=i&&n.length<e.length;--i){var r=t.ops[i];if("string"!=typeof r.insert)break;n=r.insert+n}return n.slice(-1*e.length)===e}(p,"\n")&&(f=p.reduce((function(t,e,n){return n===p.ops.length-1&&e.insert?t.insert(e.insert.slice(0,-1),e.attributes):t.push(e)}),new s.I({zoneId:u})),e.replace(u,f)),t={deltaSet:e,zoneId:u,lineState:o,event:t,isInternalPaste:n.isInternalPaste},!this.callHook("editorWillPaste",t,{canPrevent:!0,pickKey:"deltaSet"}).defaultPrevented){t=function(t,e,n){var o=(u=t.toPosition()).start,a=u.len,l=u.zoneId;if(!e.hasLineMarker())return(new r.D).concat(new s.I({zoneId:l}).retain(o).delete(a)).concat(n);var u=!(null===(c=null===(u=null===(c=n.get(l))||void 0===c?void 0:c.ops[0])||void 0===u?void 0:u.attributes)||void 0===c||!c.lmkr),c=e.hasLineMarker()&&1===t.start.offset;if(u&&c){var d=new s.I({zoneId:l}),h=(c=e.slice(0,t.start.offset))._getOps().slice(1);return t=n.reduce((function(t,n){if(n.zoneId!==l||!(n instanceof s.I))return t.concat(n);var r=e._getOps()[0].attributes;return d.insertLineMarker((0,i.b)((0,i.b)({},r),n.ops[0].attributes)),h.forEach((function(t){return d.push(t)})),n.ops.slice(1).forEach((function(t){return d.push(t)})),t.concat(d)}),new r.D),c=new s.I({zoneId:l}).retain(o-c.length()).delete(a+c.length()),(new r.D).concat(c).concat(t)}return(new r.D).concat(new s.I({zoneId:l}).retain(o).delete(a)).concat(n)}(l,o,t.deltaSet),a.log("[Paste][applyPaste] paste apply delta:",t),a.getContentState().apply(t,{type:"applyPaste"});try{a.call(y.r.DID_PASTE,{deltaSet:t,UNSAFE_text:n.text,isInternalPaste:n.isInternalPaste})}catch(t){a.error({e:t,level:S.W.ERROR,message:"[Paste][applyPaste] ".concat(t.message)})}}}else a.error({message:"[Paste][applyPaste][Warning] can't get lineState! zone: ".concat(u," line: ").concat(c),level:S.W.ERROR})},e.deserialize=function(t,e){var n=t.node,i=t.html,o=t.text;return"files"in t&&t.files?this.handleBlob(t.files,t.types):n&&(n.hasChildNodes()||e)?this.traverse(n,o):(i=(i=i&&function(t){var e="<([^>\\/]+)>",n="<\\/([^>]+)>",i=new RegExp("".concat(e,"\\n+").concat(e),"g");e=new RegExp("".concat(n,"\\n+").concat(e),"g"),n=new RegExp("".concat(n,"\\n+").concat(n),"g");return t.replace(i,"<$1><$2>").replace(e,"</$1><$2>").replace(n,"</$1></$2>")}(i))?(new DOMParser).parseFromString(i,"text/html"):null,null!=i&&i.body&&i.body.hasChildNodes()?(P(i.body),this.traverse(i.body,o)):o?this.handleText(o):(new r.D).concat(new s.I))},e.traverse=function(t,e){var n=this;if(!t.childNodes.length){var i=(new r.D).concat(new s.I);return this.callHook("deserialize",{node:t,zoneId:w.S,deltaSet:i,types:["text/html"],fromBusinessKey:this.fromBusinessKey,text:e},{pickKey:"deltaSet"}).deltaSet}return i=Array.from(t.childNodes).reduce((function(t,i){return n.traverse(i,e).compose(t,!0,!1)}),new r.D),this.callHook("deserialize",{node:t,zoneId:w.S,deltaSet:i,types:["text/html"],fromBusinessKey:this.fromBusinessKey,text:e},{pickKey:"deltaSet"}).deltaSet},e.handleText=function(t){var e=(new r.D).compose(new s.I);return this.callHook("deserialize",{text:t,zoneId:w.S,deltaSet:e,types:["text/plain"],fromBusinessKey:this.fromBusinessKey},{pickKey:"deltaSet"}).deltaSet},e.handleBlob=function(t,e){var n=(new r.D).compose(new s.I);return this.callHook("deserialize",{files:t,zoneId:w.S,deltaSet:n,types:e,fromBusinessKey:this.fromBusinessKey},{pickKey:"deltaSet"}).deltaSet},t}(),I=function(){function t(t){this.editor=t}var e=t.prototype;return e.onCopy=function(t,e){var n=this.editor;return n.copyable?this._onCopy(t,e):(n.call(d),t.preventDefault(),void t.stopImmediatePropagation())},e.onCut=function(t,e){var n=this.editor;return n.copyable?n.isEditable()?this._onCopy(t,e,!0):void 0:(n.call(d),t.preventDefault(),void t.stopImmediatePropagation())},e.slice=function(t){var e=this.editor,n=t.start,i=t.end;t=e.getContentState().getZoneState(n.zoneId),e=new r.D;return t&&t&&n.zoneId===i.zoneId?(i=new s.I({zoneId:n.zoneId,ops:D(t,n,i)}),e.add(n.zoneId,i),e):e},e.fixSelectionWithLmkr=function(t){if(t.isCollapsed())return t;var e=(i=t.start).zoneId,n=i.line,i=i.offset;return(n=null===(n=null==(e=this.editor.getContentState().getZoneState(e))?void 0:e.getLine(n))||void 0===n?void 0:n.getLineMarker())&&i===n&&(t.start.offset-=n),t},e._onCopy=function(t,e,n){void 0===n&&(n=!1);var o=this.editor;e=e||this.fixSelectionWithLmkr(o.selection.getSelection());var s,a,c,d,h,f=[];this.editor.pluginManager.call("shouldPreventCopy",{e:t,html:""},(function(t,e){return f.push(e),t})),f.includes(!0)||(p.Xh.isAndroid&&o.isEditable()&&o.selection.updateViewSelection(),h=new m.y(t,t.target),o.triggerEditorEvent(t.type,h),h.isDefaultPrevented()||(t.preventDefault(),t.stopImmediatePropagation(),s={deltaSet:this.slice(e),range:e,customCopyDatas:[]},this.callPluginsWillSerialize(s),a={zoneId:(e=s.range).start.zoneId,deltaSet:s.deltaSet,node:null,customCopyDatas:s.customCopyDatas},o.clipboard.from=n?y.r.CUT:y.r.COPY,o.clipboard.resetPasteTimes(),this.serialize(a),c=function(t){return Array.from(t.childNodes).reduce((function(t,e){return t+A(e)}),"").slice(0,-1)}(a.node),p.Xh.windows&&(c=c.replace(/\n/g,"\r\n")),h=(0,i.b)((0,i.b)({},a),{text:c}),this.callPluginsDidSerialize(h),s=h.node,a=h.customCopyDatas,c=h.text,d=h.deltaSet,h=t.clipboardData||window.clipboardData,t=o.clipboard.dataHelper,s&&0<s.childElementCount&&t.setData(h,{text:c,html:O(R(s))}),0!==a.length&&t.setCustomData(h,a),(0,r.q)(d)||(t.setCustomData(h,[{key:l,data:JSON.stringify({deltas:d.deltas,editorUniqueId:this.editor.editorUniqueId})}]),t.setCustomData(h,[{key:u,data:o.businessKey}])),!0===n&&(o.triggerEditorEvent(y.r.WILL_DELETE_FROM_CUT).shouldPrevent||(e=(n=e||o.selection.getSelection()).start,n=n.end,o.getContentState().deleteText({start:e,end:n},{type:"handleCut"})))))},e.serialize=function(t){var e=this,n=t.deltaSet,s=t.zoneId,l=n.get(s);if(!l)return console.warn("[copy]: zoneDelta  miss, zoneId: "+s),t;var u=document.createDocumentFragment();return l.eachLine((function(n,i,c){var d=document.createDocumentFragment(),h=e.editor.modulesContainer.get(_.h.ZoneState);h=e.editor.getContentState().getZoneState(s)||new h(s,n),h={lineState:new b.V(n,h),index:c,callHookFrom:"serialize"};e.editor.callAll("_editorLineStateWillRender",h),h.lineState.getOps().forEach((function(i){var s;(0,r.d)(i)&&!(0,o.e)(i)&&(s=i.insert.replace(/\n/g,"")||"",s=document.createTextNode(s),i=e.callPluginsSerialize(Object.assign(t,{type:a.T.LEAF,node:s,op:i,lineDelta:n})),d.appendChild(i.node))})),(h=document.createElement("div")).style.whiteSpace="pre-wrap",i=e.callPluginsSerialize(Object.assign(t,{type:a.T.LINE,node:d,lineNode:h,lineAttributes:i,lineDelta:n})),h.appendChild(i.node),h.dataset.zoneId=l.zoneId,h.dataset.lineIndex=String(c),h.setAttribute(f,"true"),h.style.whiteSpace="pre",u.appendChild(h)})),n=this.callPluginsSerialize(function(t,e){var n,r,o=t.type,s=t.node,l=t.lineAttributes,u=e.tagAttribute,d=e.wrapNodesInfo;l=l&&l[u],u=e.wrapTag||c[u]||l;if(o===a.T.LINE&&l&&(s instanceof Element||((l=document.createElement("div")).appendChild(s),s=l),u&&!d&&(d=[{tag:u}]),s.setAttribute(h,JSON.stringify((0,i.d)((0,i.d)([],(0,i._)(d),!1),(0,i._)(M(s)),!1)))),o===a.T.ROOT){var p=[];o=Array.from(s.querySelectorAll("[".concat(f,"]")));try{for(var v=(0,i.e)(o),g=v.next();!g.done;g=v.next())!function(t){var e=t.querySelectorAll("[".concat(h,"]"))[0];if(!e)return p=[];var n=M(e);if(n.length){e.removeAttribute(h);var r=[],o=document.createElement(n[0].tag);n.reduce((function(t,s,a){var l,u,c,d=s.tag,h=s.style,f=s.attributes,v=(s=s.split,document.createElement(d));if(h)try{for(var g=(l=void 0,(0,i.e)(Object.entries(h))),y=g.next();!y.done;y=g.next()){var m=(0,i._)(y.value,2),_=m[0],b=m[1];v.style[_]=b}}catch(t){l={error:t}}finally{try{y&&!y.done&&(u=g.return)&&u.call(g)}finally{if(l)throw l.error}}if(f)try{for(var E=(C=void 0,(0,i.e)(Object.entries(f))),S=E.next();!S.done;S=E.next()){var w=(0,i._)(S.value,2);_=w[0],b=w[1];v.setAttribute(_,b)}}catch(t){C={error:t}}finally{try{S&&!S.done&&(c=E.return)&&c.call(E)}finally{if(C)throw C.error}}var C=p[a];return!s&&C&&C.tagName.toLowerCase()===d.toLowerCase()?!(v=C).getAttribute("start")&&null!=f&&f.start&&v.setAttribute("start",f.start):p=[],r.push(v),0===a?o=v:t.appendChild(v),a===n.length-1&&v.appendChild(e),v}),o),p=r,t.parentNode.insertBefore(o,t),t.hasChildNodes()||t.parentNode.removeChild(t)}}(g.value)}catch(t){n={error:t}}finally{try{g&&!g.done&&(r=v.return)&&r.call(v)}finally{if(n)throw n.error}}}return Object.assign(t,{node:s})}(Object.assign(t,{type:a.T.ROOT,node:u}),{tagAttribute:""})),Object.assign(t,{node:n.node})},e.callPluginsSerialize=function(t){return this.editor.pluginManager.call("serialize",t,(function(e){return t=e})),t},e.callPluginsWillSerialize=function(t){return this.editor.pluginManager.call("editorWillCopy",t)},e.callPluginsDidSerialize=function(t){return this.editor.pluginManager.call("editorWillSetClipboard",t)},(0,i.a)([E.W],t.prototype,"onCopy",null),(0,i.a)([E.W],t.prototype,"onCut",null),(0,i.a)([E.W],t.prototype,"slice",null),t}(),T=(0,S.K)((function(t){this.editor.error(t)}))(S.W.ERROR),x=function(){function t(t,e){this.from=null,this.canInternalPasteWhitelist=[],this.editor=t,this.dataHelper=new g(e),this.pasteModule=new C(t),this.copyModule=new I(t)}var e=t.prototype;return e.deserialize=function(t,e){return this.pasteModule.deserialize(t,e)},e.serialize=function(t){return this.copyModule.serialize(t)},e.onCopy=function(t){return this.copyModule.onCopy(t)},e.onPaste=function(t){this.pasteModule.onPaste(t)},e.slice=function(t){return this.copyModule.slice(t)},e.onCut=function(t){return this.copyModule.onCut(t)},e.resetPasteTimes=function(){this.pasteModule.pasteTimes=0},e.getPasteInfo=function(){return this.pasteModule.getPasteInfo()},e.setCanInternalPasteWhitelist=function(t){this.canInternalPasteWhitelist=t},e.setDataToClipboard=function(t){var e=t.data,n=t.type;e&&e.html&&(t=(0,i.b)((0,i.b)({},e),{type:n}),this.editor.callAll("beforeSetDataToClipboard",t),this.from=n,this.resetPasteTimes(),this.dataHelper.setDataWithoutEvent(Object.assign({},e,{html:this.addUniqueIdIntoHTML(t.html)})))},e.copyRange=function(t){this.handleCopyOrCutRange(t,"copy")},e.cutRange=function(t){this.handleCopyOrCutRange(t,"cut")},e.getClipboardDataFromSelectedContent=function(t){var e=new DataTransfer,n=t.toPosition(),i=n.start,o=n.len;if(t=null===(t=this.editor.getContentState().getZoneState(n.zoneId))||void 0===t?void 0:t.getContent()){i=t.slice(i,i+o),(o=new r.D).add(i);i=document.createTextNode("");var s=this.editor.clipboard.serialize({zoneId:n.zoneId,deltaSet:o,node:i,customCopyDatas:[]});if(s.node instanceof DocumentFragment){for(var a=document.createElement("div"),l=0;l<s.node.children.length;l++){var u=s.node.children.item(l);u&&a.appendChild(u)}e.setData("text/html",a.innerHTML),e.setData("text/plain",a.textContent||"")}}return e},e.copyOrCutListener=function(t,e,n){if(this.editor){switch(t.stopPropagation(),t.stopImmediatePropagation(),n){case"copy":this.copyModule.onCopy(t,e);break;case"cut":this.copyModule.onCut(t,e)}t.preventDefault()}},e.handleCopyOrCutRangeBySyncClipboard=function(t,e){var n=this.getClipboardDataFromSelectedContent(t),i=new ClipboardEvent(e,{clipboardData:n});if(this.copyOrCutListener(i,t,e),i.clipboardData)try{var r={},o=["text/html","text/plain"];i.clipboardData.types.filter((function(t){return o.includes(t)})).forEach((function(t){var e;(e=(e=null===(e=i.clipboardData)||void 0===e?void 0:e.getData(t))&&new Blob([e],{type:t}))&&(r[t]=e)})),navigator.clipboard.write([new ClipboardItem(r)])}catch(t){navigator.clipboard.writeText(i.clipboardData.getData("text/plain"))}},e.handleCopyOrCutRangeByExecCommand=function(t,e){function n(n){i.copyOrCutListener(n,t,e)}var i=this,r=this.editor,o=document.createElement("textarea");(r=p.Xh.isIPad?r.getScrollContainer():document.body)&&((r=r instanceof Window?document.body:r).appendChild(o),o.addEventListener(e,n),o.style.position="fixed",o.style.left="-10000000px",o.value=" ",o.focus(),o.select(),document.execCommand(e),o.removeEventListener(e,n),r.removeChild(o))},e.handleCopyOrCutRange=function(t,e){p.Xh.mobile?this.handleCopyOrCutRangeBySyncClipboard(t,e):this.handleCopyOrCutRangeByExecCommand(t,e)},e.addUniqueIdIntoHTML=function(t){return t?((t=$((new DOMParser).parseFromString(t,"text/html").body)).children().first().attr("data-editor-unique-id",this.editor.editorUniqueId),t.html()):t},(0,i.a)([T],t.prototype,"deserialize",null),(0,i.a)([T],t.prototype,"serialize",null),(0,i.a)([T],t.prototype,"onCopy",null),(0,i.a)([T],t.prototype,"onPaste",null),(0,i.a)([T],t.prototype,"onCut",null),(0,i.a)([T],t.prototype,"setDataToClipboard",null),(0,i.a)([T],t.prototype,"copyRange",null),(0,i.a)([T],t.prototype,"cutRange",null),(0,i.a)([T],t.prototype,"getClipboardDataFromSelectedContent",null),(0,i.a)([T],t.prototype,"handleCopyOrCutRangeBySyncClipboard",null),t}();function k(t,e,n,o){void 0===o&&(o=!0);var s=new r.D;return t.forEach((function(t,r){s=r===e?(r=t.create({zoneId:r}),r=t.reduce((function(t,e){var r;if(!e.insert||null!==(r=e.attributes)&&void 0!==r&&r.lmkr)return t.push(e);var s=o?(0,i.b)((0,i.b)({},e.attributes),n):(0,i.b)((0,i.b)({},n),e.attributes);if("string"!=typeof e.insert)t.insert(e.insert.id,s);else for(var a=e.insert;0<a.length;){var l=a.includes("\n"),u=a.split("\n",1)[0],c=a.substring(u.length+1);t.insert(a=u,s),a=c,l&&t.insertEnter(e.attributes)}return t}),r),s.concat(r)):s.concat(t)})),s}function M(t){var e=[];try{e=JSON.parse(t.getAttribute(h)||"[]")}catch(t){e=[]}return e}function R(t){var e=document.createElement("div");return e.appendChild(t),e.innerHTML}function P(t){try{Array.from(t.querySelectorAll("style")).forEach((function(e){var n,i;e.textContent&&/\}?(\S+)\s*{[\s\S]*?white-space\s*:\s*pre[\s\S]*?}/.test(e.textContent)&&(!(n=/\}?(\S+)\s*{[\s\S]*?white-space\s*:\s*pre[\s\S]*?}/.exec(e.textContent.replace(/<!--[\s\S]*?-->/,"")))||(e=/white-space\s*:\s*pre.*?(?=;| |})/.exec(n[0]))&&(i=e[0].split(":")[1],Array.from(t.querySelectorAll(n[1])).forEach((function(t){t instanceof HTMLElement&&(t.style.whiteSpace=i.trim())}))))}))}catch(n){console.error(n)}var e,n=[".".concat("ignore-collect"),".ignore-dom","style","script"];Array.from(t.querySelectorAll(n.join(","))).forEach((function(t){t.innerHTML=""})),e=t,Array.from(e.childNodes).forEach((function(t){var e;t.nodeType!==Node.TEXT_NODE&&t.nodeType!==Node.ELEMENT_NODE&&null!==(e=t.parentNode)&&void 0!==e&&e.removeChild(t)}))}function O(t){return t.replace(/<(?:img|iframe)[^>]*(data-no-request-)src=[^>]*>/g,(function(t,e){return t.replace(e,"")}))}var L=function(t,e,n){var o=[],s=0;return t.getOps().forEach((function(t){var a,l,u;null!=t&&t.insert&&"string"==typeof t.insert&&(a=(0,r.a)(t),s<=n&&e<=s+a&&(l=Math.max(0,e-s))<(u=Math.min(a,n-s))&&o.push({insert:t.insert.slice(l,u),attributes:(0,i.b)({},t.attributes)}),s+=a)})),o},D=function(t,e,n){for(var r=[],o=Math.max(0,e.line),s=Math.min(n.line,t.length()-1),a=o;a<=s;a++){var l=t.getLine(a);e.line===s?r.push.apply(r,(0,i.d)([],(0,i._)(L(l,e.offset,n.offset)),!1)):a===o?r.push.apply(r,(0,i.d)([],(0,i._)(L(l,e.offset,l.length())),!1)):a===s?r.push.apply(r,(0,i.d)([],(0,i._)(L(l,0,n.offset)),!1)):r.push.apply(r,(0,i.d)([],(0,i._)(L(l,0,l.length())),!1))}return r};function A(t){if(t instanceof Text)return t.textContent;if(!(t instanceof Element))return"";var e="";return t.childNodes.forEach((function(t){e+=A(t)})),t.getAttribute(f)&&(e+="\n"),e}},vsh_42693:function(t,e,n){"use strict";n.d(e,{cA:function(){return U}});var i=n("vsh_65498"),r=n("vsh_38172"),o=(n("vsh_72862"),n("vsh_53006")),s=n("vsh_37190"),a=function(t){function e(e){var n=t.call(this)||this;n.ops=[];var i=e.zoneId,r=e.ops,o=e.zoneType;return n.zoneId=i,n.zoneType=o,r&&r.length>0&&(n.ops=r),n}(0,s.d)(e,t);var n=e.prototype;return n.insert=function(e,n){if(!e)return this;var i={id:e};return t.prototype.insert.call(this,i,n,!1)},n.create=function(t){return t.zoneType=t.zoneType||this.zoneType,new e(t)},e}(o.w),l=function(t){function e(e){return t.call(this,(0,s._)({zoneType:r.Ak.Row},e))||this}return(0,s.d)(e,t),e}(a),u=function(t){function e(e){return t.call(this,(0,s._)({zoneType:r.Ak.Column},e))||this}return(0,s.d)(e,t),e}(a);o.w.registerCreator(r.Ak.Row,l),o.w.registerCreator(r.Ak.Column,u);var c="rs",d="cs";function h(t){return 0===t.indexOf(c)&&34===t.length}var f=n("vsh_89935");
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var p=function(t,e){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},p(t,e)};function v(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}var g=function(t){function e(e,n){void 0===n&&(n=!1);var i=t.call(this,e)||this;return i.silence=n,i}return function(t,e){function n(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error);function y(t,e,n,r){if(void 0===n&&(n=!1),void 0===r&&(r={}),!t){if("object"===(0,i.Z)(r)&&Object.keys(r).length){var o=Object.entries(r).map((function(t){var e=v(t,2);return e[0]+": "+e[1]})).join(", ");console.log("oops debug: "+o)}throw new g("Failed assertion: "+e,n)}}var m=function(){function t(){var t=this;this.toJsonable=function(){var e={};for(var n in t.numToAttrib)if(t.numToAttrib.hasOwnProperty(n)){var i=t.numToAttrib[n];e[n]=[i[0],i[1]]}return{numToAttrib:e,nextNum:t.nextNum,attribToNum:t.attribToNum}},this.fromJsonable=function(e){for(var n in t.numToAttrib={},t.nextNum=e.nextNum,t.attribToNum={},e.numToAttrib)if(e.numToAttrib.hasOwnProperty(n)){var i=e.numToAttrib[n];t.attribToNum[String(i)]=Number(n),t.numToAttrib[n]=[i[0],i[1]]}try{t.checkConsistent()}catch(e){t.handleError(e)}return t.dirty=!0,t},this.checkConsistent=function(){for(var e=0;e<t.nextNum;e++)y(e in t.numToAttrib,"AttribPool: "+e+" is not in this.numToAttrib");var n={};for(var i in t.numToAttrib)if(t.numToAttrib.hasOwnProperty(i)){y(Number(i)>=0&&Number(i)<t.nextNum,"AttribPool: "+i+" is not in range [0,"+t.nextNum+"]");var r=t.numToAttrib[i];y("[object Array]"===Object.prototype.toString.call(r),"AttribPool: attrib should be an array"),y(2===r.length,"AttribPool: attrib length should be 2"),y("string"==typeof r[0],"AttribPool: key should be string"),y("string"==typeof r[1],"AttribPool: value should be string"),y(!(String(r)in n),"AttribPool: attrib was already seen"),n[String(r)]=!0,y(t.attribToNum[String(r)]===Number(i),"AttribPool: attribToNum does not match")}for(var o in t.attribToNum)t.attribToNum.hasOwnProperty(o)&&y(o in n,"AttribPool: attr was not seen")},this.numToAttrib={},this.attribToNum={},this.nextNum=0,this.dirty=!1}return t.prototype.putAttrib=function(t,e){var n=[String(t[0]||""),String(t[1]||"")],i=String(n);if(i in this.attribToNum)return this.attribToNum[i];if(e)return-1;var r=this.nextNum++;return this.attribToNum[i]=r,this.numToAttrib[r]=n,this.dirty=!0,r},t.prototype.getAttrib=function(t){var e=this.numToAttrib[t];return e?[e[0],e[1]]:e},t.prototype.updateAttrib=function(t,e){var n=this.getAttrib(t);if(n){var i=String(n),r=String(e),o=this.attribToNum[i];null!=o&&delete this.attribToNum[i],this.attribToNum[r]=t,this.numToAttrib[t]=e}},t.prototype.getAttribKey=function(t){var e=this.numToAttrib[t];return e?e[0]:""},t.prototype.getAttribValue=function(t){var e=this.numToAttrib[t];return e?e[1]:""},t.prototype.getAttribNum=function(t){var e=t;return"string"!=typeof e&&(e=String(e)),this.attribToNum[e]},t.prototype.eachAttrib=function(t){for(var e in this.numToAttrib)if(this.numToAttrib.hasOwnProperty(e)){var n=this.numToAttrib[e];t(n[0],n[1])}},t.prototype.toJsonableNoCloning=function(){return{numToAttrib:this.numToAttrib,nextNum:this.nextNum}},t.prototype.fromJsonableNoCloning=function(t){for(var e in this.numToAttrib=t.numToAttrib,this.nextNum=t.nextNum,this.attribToNum={},this.numToAttrib)this.numToAttrib.hasOwnProperty(e)&&(this.attribToNum[String(this.numToAttrib[e])]=Number(e));try{this.checkConsistent()}catch(t){this.handleError(t)}return this},t.prototype.handleError=function(t){throw t},t.prototype.copy=function(){var e=new t;for(var n in this.numToAttrib)if(this.numToAttrib.hasOwnProperty(n)){var i=this.numToAttrib[n];e.numToAttrib[n]=[i[0],i[1]]}for(var r in this.attribToNum)this.attribToNum.hasOwnProperty(r)&&(e.attribToNum[r]=this.attribToNum[r]);return e.nextNum=this.nextNum,e},t}();function _(t){return{opcode:t||"",chars:0,lines:0,attribs:"",getAttribute:function(t,e){return function(t,e,n){for(var i=function(t){for(var e=36,n=[],i=!1,r=!1,o=0,s=0;s<t.length;s++){var a=t.charCodeAt(s);if(i||r)if(a>=48&&a<=57)o*=e,o+=a-48;else if(a>=97&&a<=122)o*=e,o+=a-97+10;else if(a>=65&&a<=90)o*=e,o+=a-65+10;else{if(!i){s+=o,o=0,r=!1;continue}n.push(o),o=0,i=!1}switch(a){case 42:i=!0;break;case 36:return n;case 35:r=!0}}return i&&n.push(o),n}(t),r=i.length-1;r>=0;r--){var o=i[r];if(n.getAttribKey(o)===e)return n.getAttribValue(o)}return""}(this.attribs,t,e)}}}function b(t){t.opcode="",t.chars=0,t.lines=0,t.attribs=""}function E(t,e){e.opcode=t.opcode,e.chars=t.chars,e.lines=t.lines,e.attribs=t.attribs}var S=function(){function t(t,e){void 0===e&&(e=0),this.opStr=t,this.index=e,this.op=_()}return t.prototype.hasNext=function(){return this.index<this.opStr.length},t.prototype.next=function(t){var e=t||this.op;if(this.index!==this.opStr.length){e.lines=0;for(var n=void 0,i=this.index;this.index<this.opStr.length;){var r=this.opStr.charCodeAt(this.index);if(124===r){for(n=this.index,this.index++;this.index<this.opStr.length;){if(43===(o=this.opStr.charCodeAt(this.index))||45===o||61===o){e.opcode=this.opStr.charAt(this.index);break}o>=48&&o<=57?(e.lines*=36,e.lines+=o-48):o>=97&&o<=122&&(e.lines*=36,e.lines+=o-97+10),this.index++}break}if(43===r||45===r||61===r){n=this.index,e.opcode=this.opStr.charAt(this.index);break}this.index++}for(e.attribs=this.opStr.substring(i,n),e.chars=0,this.index++;this.index<this.opStr.length;){var o;if((o=this.opStr.charCodeAt(this.index))>=48&&o<=57)e.chars*=36,e.chars+=o-48;else{if(!(o>=97&&o<=122))break;e.chars*=36,e.chars+=o-97+10}this.index++}return e}return b(e),e},t}();function w(t,e,n,r){if(void 0===n&&(n=!1),void 0===r&&(r={}),!t){if("object"===(0,i.Z)(r)&&Object.keys(r).length){var o=Object.entries(r).map((function(t){var e=v(t,2);return e[0]+": "+e[1]})).join(", ");console.log("oops debug: "+o)}throw new g("Failed assertion: "+e,n)}}function C(t,e){return void 0===e&&(e=0),function(t,e){void 0===e&&(e=0);return new S(t||"",e)}(t||"",e)}function I(t){return t.toString(36).toLowerCase()}function T(t){return parseInt(t,36)}var x=/\*([0-9a-z]+)/g;function k(t,e,n){if(!e)return"";if("string"==typeof e)return e;if(n&&e&&e.length){e.length>1&&(e=e.slice()).sort();for(var i=[],r=0;r<e.length;r++){var o=e[r];("="===t||"+"===t&&o[1])&&i.push("*"+I(n.putAttrib(o)))}return i.join("")}return""}function M(){var t,e=(t=[],{append:function(e){t.push(e.attribs),e.lines&&t.push("|",I(e.lines)),t.push(e.opcode),t.push(I(e.chars))},toString:function(){return t.join("")},clear:function(){t.length=0}}),n=_(),i=0;function r(t){n.opcode&&(t&&"="===n.opcode&&!n.attribs||(e.append(n),i&&(n.chars=i,n.lines=0,e.append(n),i=0)),n.opcode="")}return{append:function(t){t.chars>0&&(n.opcode===t.opcode&&n.attribs===t.attribs?t.lines>0?(n.chars+=i+t.chars,n.lines+=t.lines,i=0):0===n.lines?n.chars+=t.chars:i+=t.chars:(r(),E(t,n)))},toString:function(){return r(),e.toString()},clear:function(){e.clear(),b(n)},endDocument:function(){r(!0)}}}function R(){return function(){var t=[];function e(){return t.join("")}return{append:function(e){t.push(String(e))},toString:e,toResult:e}}()}function P(){var t=M(),e=M(),n=M(),i=R(),r="",o=0;function s(){i.append(n.toString()),n.clear()}function a(){i.append(t.toString()),t.clear(),i.append(e.toString()),e.clear()}function l(i){i.opcode&&i.chars&&("-"===i.opcode?("="===r&&s(),t.append(i),o-=i.chars):"+"===i.opcode?("="===r&&s(),e.append(i),o+=i.chars):"="===i.opcode&&("="!==r&&a(),n.append(i)),r=i.opcode)}return{append:l,toString:function(){return a(),s(),i.toString()},clear:function(){t.clear(),e.clear(),n.clear(),o=0},endDocument:function(){n.endDocument()},appendOpWithText:function(t,e,n,i){var r=_(t);r.attribs=k(t,n,i);var o=e.lastIndexOf("\n");o<0?(r.chars=e.length,r.lines=0,l(r)):(r.chars=o+1,r.lines=e.match(/\n/g).length,l(r),r.chars=e.length-(o+1),r.lines=0,l(r))},getLengthChange:function(){return o}}}var O=function(t){return"string"==typeof t?function(t){var e=0,n=t.split("\n").length-1;function i(t){y(t<=r(),"!(n <= remaining())",!1,{n:t,remaining:r()})}function r(){return t.length-e}return{take:function(r){i(r);var o=t.substr(e,r);return n-=o.split("\n").length-1,e+=r,o},skip:function(t){i(t),e+=t},remaining:r,peek:function(n){return i(n),t.substr(e,n)},newlines:function(){return n}}}(t):function(t){function e(t){w(t<=i(),"!(n <= remaining())",!1,{n:t,remaining:i()})}var n=0;function i(){return t.length-n}return{take:function(i){e(i);var r=t.slice(n,n+i);return n+=i,r},skip:function(t){e(t),n+=t},remaining:i,peek:function(i){return e(i),t.slice(n,n+i)}}}(t)};function L(t,e,n,i){var r,o;if(!t&&n)return e;if(!e)return t;var s=[];t.replace(/\*([0-9a-z]+)/g,(function(t,e){return s.push(i.getAttrib(T(e))),""})),e.replace(/\*([0-9a-z]+)/g,(function(t,e){for(var r=i.getAttrib(T(e)),o=!1,a=0;a<s.length;a++){var l=s[a];if(l[0]===r[0]){r[1]||n?l[1]=r[1]:s.splice(a,1),o=!0;break}}return o||!r[1]&&!n||s.push(r),""})),s.sort();var a=R();try{for(var l=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(s),u=l.next();!u.done;u=l.next()){var c=u.value;a.append("*"),a.append(I(i.putAttrib(c)))}}catch(t){r={error:t}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}return a.toString()}function D(t){return y(t,"itemType should be defined"),"Z"===t?R():function(){var t=[];function e(){return t}return{append:function(e){t=t.concat(e)},toList:e,toResult:e}}()}function A(t){return function(t){for(var e={},n=0;n<t.length;){var i=/^(Z|ZR|ZC)([0-9a-z]*):([0-9a-z]+)([><])([0-9a-z]+)|/.exec(t.substring(n));if(!i||!i[0])throw new g("Changeset: Not a changeset: "+t+" at position "+n);var r=i[1].charAt(i[1].length-1),o=""===i[2]?"0":i[2];if(o in e){for(var s in e)e.hasOwnProperty(s)&&"Z"===e[s].itemType&&(e[s].charBank="obfuscated "+e[s].charBank.length);y(!1,"zoneIds should be unique",!1,{zoneId:o,cssObj:JSON.stringify(e)})}"0"===o&&y("Z"===r,"itemType must be Z");var a=T(i[3]),l=a+(">"===i[4]?1:-1)*T(i[5]),u=n+i[0].length,c=t.indexOf("$",n),d=t.indexOf("#",n),h=d>=0&&c>=0&&d<c,f=t.length;c>=0&&(f=c),h&&(f=d);var p=c>=0?c+1:t.length,v=h?p+T(t.substring(d+1,c)):t.length;e[o]={itemType:r,oldLen:a,newLen:l,ops:t.substring(u,f),charBank:t.substring(p,v)},"Z"!==r&&(y(-1===e[o].ops.indexOf("|"),"ops must has |"),e[o].charBank=""===e[o].charBank?[]:e[o].charBank.split("|")),n=v}return e}(t)}function z(t){for(var e="",n=Object.keys(t).sort(),i=0;i<n.length;i++){var r=n[i];if(w("string"==typeof r,"pack: zoneId must be string"),w(""!==r,"pack: zoneId cannot be empty string"),0!==i&&n[i]===n[i-1]){for(var o in t)t.hasOwnProperty(o)&&"Z"===t[o].itemType&&(t[o].charBank="obfuscated "+t[o].charBank.length);w(!1,"pack: zoneIds must be distinct zoneIds",!1,{zoneIds:n,csMap:JSON.stringify(t)})}var s=t[r];!function(t,n,i,r,o,s,a){w("Z"===t||"R"===t||"C"===t,"itemType error"),"Z"!==t&&(o=o.join("|")),"Z"!==t&&w(-1===r.indexOf("|"),"ops |");var l=i-n,u=l>=0?">"+I(l):"<"+I(-l);e+=("Z"!==t?"Z":"")+t+("0"===a?"":a)+":"+I(n)+u+r,s||(e+="#"+I(o.length)),e+="$"+o}(s.itemType,s.oldLen,s.newLen,s.ops,s.charBank,i===n.length-1,r)}return e}function N(t,e,n){void 0===e&&(e="Z"),void 0===n&&(n="0"),e=e||"Z";var i=P(),r=_(),o=D(e),s={keepOverOp:function(t){s.keep(t.chars,t.lines)},keepOverOpWithNewAttributes:function(t,e,n){s.keep(t.chars,t.lines,e,n)},keepOverOpWithoutAttribute:function(t,e,n){s.keep(t.chars,t.lines,[[e,""]],n)},keep:function(t,e,n,o){return r.opcode="=",r.attribs=n&&k("=",n,o)||"",r.chars=t,r.lines=e||0,i.append(r),s},keepText:function(t,e,n){return i.appendOpWithText("=",t,e,n),s},insert:function(t,n,r){return"Z"===e?i.appendOpWithText("+",t,n,r):i.append({opcode:"+",chars:t.length,attribs:n,lines:0}),o.append(t),s},remove:function(t,e){return r.opcode="-",r.attribs="",r.chars=t,r.lines=e||0,i.append(r),s},removeText:function(t){i.appendOpWithText("-",t)},insertAText:function(t){if("\n"!==t.text.charAt(t.text.length-1))throw new g("insertAText: text must end in newline");return function(t,e){for(var n=C(t.attribs),i=_();n.hasNext();)if(n.next(i),n.hasNext())e.append(i);else if(i.lines<=1)i.lines=0,i.chars--,i.chars&&e.append(i);else{var r=t.text.lastIndexOf("\n",t.text.length-2)+1,o=t.text.length-r-1;i.lines--,i.chars-=o+1,e.append(i),i.lines=0,i.chars=o,i.chars&&e.append(i)}}(t,i),o.append(t.text.slice(0,-1)),s},toChangeset:function(){if(!n)throw new g("Changeset: zoneId should be non-trivial");var t={};return t[n]=s.toUnpacked(),z(t)},toString:function(){if(!n)throw new g("Changeset: zoneId should be non-trivial");var t={};return t[n]=s.toUnpacked(),z(t)},toUnpacked:function(){i.endDocument();var n=t+i.getLengthChange();return{itemType:e,oldLen:t,newLen:n,ops:i.toString(),charBank:o.toResult()}}};return s}function W(t,e,n){return void 0===e&&(e="Z"),void 0===n&&(n="0"),N(t,e,n)}function B(t,e,n,i){function r(t,e,r){if(!e)return r;if(!r)return e;var o=e.oldLen;y(e.newLen===r.oldLen,"mismatched composition");var s=r.newLen,a=O(e.charBank),l=O(r.charBank),u=D(e.itemType),c=function(t,e,n,i,r){for(var o=C(t,e),s=C(n,i),a=P(),l=_(),u=_(),c=_();l.opcode||o.hasNext()||u.opcode||s.hasNext();)!l.opcode&&o.hasNext()&&o.next(l),!u.opcode&&s.hasNext()&&s.next(u),r(l,u,c),c.opcode&&(a.append(c),c.opcode="");return a.endDocument(),a.toString()}(e.ops,0,r.ops,0,(function(t,e,r){var o=t.opcode,s=e.opcode;"+"===o&&"-"===s&&a.skip(Math.min(t.chars,e.chars)),function(t,e,n,i,r){if(void 0===r&&(r=!1),"-"===t.opcode)E(t,n),t.opcode="";else if(t.opcode)switch(e.opcode){case"-":e.chars<=t.chars?("="===t.opcode&&(n.opcode="-",n.chars=e.chars,n.lines=e.lines,n.attribs=r?e.attribs:""),t.chars-=e.chars,t.lines-=e.lines,e.opcode="",t.chars||(t.opcode="")):("="===t.opcode&&(n.opcode="-",n.chars=t.chars,n.lines=t.lines,n.attribs=r?e.attribs:""),e.chars-=t.chars,e.lines-=t.lines,t.opcode="");break;case"+":E(e,n),e.opcode="";break;case"=":e.chars<=t.chars?(n.opcode=t.opcode,n.chars=e.chars,n.lines=e.lines,n.attribs=L(t.attribs,e.attribs,"="===t.opcode,i),e.opcode="",t.chars-=e.chars,t.lines-=e.lines,t.chars||(t.opcode="")):(n.opcode=t.opcode,n.chars=t.chars,n.lines=t.lines,n.attribs=L(t.attribs,e.attribs,"="===t.opcode,i),t.opcode="",e.chars-=t.chars,e.lines-=t.lines);break;case"":E(t,n),t.opcode=""}else E(e,n),e.opcode=""}(t,e,r,n,i),"+"===r.opcode&&("+"===s?u.append(l.take(r.chars)):u.append(a.take(r.chars)))})),d=u.toResult();return{itemType:e.itemType,oldLen:o,newLen:s,ops:c,charBank:d}}void 0===i&&(i=!1);var o,s={};for(var a in t)t.hasOwnProperty(a)&&(e[a]&&y(t[a].itemType===e[a].itemType,"cs1 and cs2 itemType error"),null!==(o=r(0,t[a],e[a]||null))&&(s[a]=o));for(var a in e)e.hasOwnProperty(a)&&(a in t||null!==(o=r(0,null,e[a]))&&(s[a]=o));return s}function K(t,e,n,i){return void 0===i&&(i=!1),function(t,e,n,i){void 0===i&&(i=!1);return z(B(A(t),A(e),n,i))}(t,e,n,i)}var Z=m,j="clientside-";function U(t,e){for(var n=t.attribs,i=t.cols,r=t.rows,s=t.text,a=G(e),l=new o.D({}),u=Object.keys(n),c=0;c<u.length;c++){var d=u[c],h=Y(d,n[d],(null==i?void 0:i[d])||(null==r?void 0:r[d])||s[d],a);l.add(d,h)}return l}function V(t,e,n){t.forEach((function(t){t.attributes&&Object.entries(t.attributes).forEach((function(t){(null==n?void 0:n.filterLocalAttributes)&&t[0].startsWith(j)||e.putAttrib(t)}))}))}function F(t){if(t){var e={};return Object.keys(t).forEach((function(n){n.startsWith(j)||(e[n]=t[n])})),e}}var H=function(){function t(t,e,n,i,o){void 0===n&&(n="\n"),this.zoneId=t,this.repText=n,this.apool=i,this.options=o,this.pointer=0,this.builder=this.createBuilder(),this.zoneType=e.zoneType||r.Ak.Content,this.zoneId=e.zoneId||r.Ru,this.deltaOps=e.ops,V(this.deltaOps,i,o)}var e=t.prototype;return e.getChangeset=function(){var t;if(this.pointer=0,this.deltaOps){var e=this.deltaOps.length;if(this.builder){for(var n=0;n<e;n++){var i=this.deltaOps[n],r=(0,o.f)(i);if(!r)return;var s=i.attributes;(null===(t=this.options)||void 0===t?void 0:t.filterLocalAttributes)&&(s=F(i.attributes)),this.opTransform(r,i[r],s)}return this.builder.toString()}}},e.createBuilder=function(){return W(this.repText.length,this.zoneType,this.zoneId)},e.opTransform=function(t,e,n){switch(t){case r.HP.INSERT:this.insert(e,n);break;case r.HP.RETAIN:this.retain(e,n);break;case r.HP.DELETE:this.delete(e)}},e.insert=function(t,e){void 0===e&&(e={});var n=Object.entries(e);this.builder.insert(t,n,this.apool)},e.retain=function(t,e){void 0===e&&(e={});var n=Object.entries(e),i=this.repText.slice(this.pointer,this.pointer+t);if(i.length!==t)throw new Error("The content of the operation does not exist");var r=i.match(/\n/g),o=r&&r.length,s=i.lastIndexOf("\n");if(s>-1&&s!==i.length-1){var a=t-s-1;this.builder.keep(t-a,o,n,this.apool),this.builder.keep(a,0,n,this.apool)}else this.builder.keep(t,o,n,this.apool);this.pointer+=t},e.delete=function(t){var e=this.repText.slice(this.pointer,this.pointer+t);if(e.length!==t)throw new Error("The deleted content does not exist");var n=e.match(/\n/g),i=n&&n.length,r=e.lastIndexOf("\n");if(r>-1&&r!==e.length-1){var o=t-r-1;this.builder.remove(t-o,i||0),this.builder.remove(o,0)}else this.builder.remove(t,i||0);this.pointer+=t},t}(),X=function(){function t(t,e,n,i,r){this.zoneId=t,this.delta=e,this.apool=n,this.vectorIds=i,this.options=r,this.charBank=[],this.isForRow=h(t),this.zoneObj={},this.oldLen=this.vectorIds.length,this.assembler=P(),this.pointer=this.oldLen,V(e.ops,n,r)}var e=t.prototype;return e.getChangeset=function(){for(var t,e=this.delta.ops.length,n=0;n<e;n++){var i=this.delta.ops[n],r=(0,o.f)(i);if(!r)return;var s=i[r].id||i[r],a=i.attributes;(null===(t=this.options)||void 0===t?void 0:t.filterLocalAttributes)&&(a=F(i.attributes)),this.opTransform(r,s,a)}return this.toChangeset()},e.opTransform=function(t,e,n){switch(t){case r.HP.INSERT:this.insert(e,n);break;case r.HP.RETAIN:this.retain(e,n);break;case r.HP.DELETE:this.delete(e)}},e.insert=function(t,e){void 0===e&&(e={});var n=k("=",Object.entries(e),this.apool);this.charBank.push(t),this.pointer+=1,this.append(n)},e.append=function(t){this.assembler.append({opcode:"+",attribs:t,lines:0,chars:1})},e.delete=function(t){this.assembler.append({opcode:"-",attribs:"",lines:0,chars:t}),this.pointer-=t},e.retain=function(t,e){void 0===e&&(e={});var n=k("=",Object.entries(e),this.apool);this.assembler.append({opcode:"=",attribs:n,lines:0,chars:t})},e.toChangeset=function(){return this.zoneObj[this.zoneId]={itemType:this.isForRow?r.Ak.Row:r.Ak.Column,oldLen:this.oldLen,newLen:this.pointer,ops:this.assembler.toString(),charBank:this.charBank},z(this.zoneObj)},t}();function Y(t,e,n,i){for(var o,s=h(t)||0===(o=t).indexOf(d)&&34===o.length,l=s?r.Zf[t.substr(0,2)]:r.Zf.content,u=[],c=null,p=C(e),v=0,g=function(){var t=p.next(),e={},r=t.attribs,o=t.chars,s=t.opcode;if(r&&function(t,e){var n=t.indexOf("$");n<0&&(n=t.length);for(var i=t.substring(0,n).match(x)||[],r=0;r<i.length;r++)e(T(i[r].substring(1)))}(r,(function(t){e[i.getAttribKey(t)]=i.getAttribValue(t)})),"+"===s)if(Array.isArray(n))n.slice(v,v+o).forEach((function(t){var n={insert:{id:t}};Object.keys(e).length&&(n.attributes=e),u.push(n),v+=1}));else{var a=n.substr(v,o),l={insert:a};Object.keys(e).length&&(l.attributes=e),c&&l.attributes&&function(t,e){if(t&&e){var n=Object.keys(t),i=Object.keys(e);return n.length===i.length&&n.every((function(n){return t[n]===e[n]}))}return t===e}(l.attributes,c.attributes)?c.insert+=l.insert:(u.push(l),c=l),v+=a.length}};p.hasNext();)g();return s?new a({zoneId:t,zoneType:l,ops:u}):new f.I({zoneId:t,ops:u})}function G(t){return void 0!==t.putAttrib?t:(new Z).fromJsonable(t)}!function(){function t(t){this.props=t,this.zoneCs=[];var e=this.props,n=e.deltaSet,i=e.apool,r=e.texts,o=e.vectorReps;this.deltaSet=n,this.apool=G(i),this.texts=r,this.vectorReps=o}var e=t.prototype;e.parseDeltaSet=function(){for(var t,e=Object.keys(this.deltaSet.deltas),n=Object.values(this.deltaSet.deltas),i=0;i<e.length;i++){var o=e[i],s=n[i][r.AS],a=n[i],l=void 0;if(s===r.Ak.Content){var u=this.texts&&this.texts[o];l=new H(o,a,u,this.apool,this.props.options)}else{var c=(null===(t=this.vectorReps)||void 0===t?void 0:t[o])||[];l=new X(o,a,this.apool,c,this.props.options)}this.zoneCs.push(l.getChangeset())}},e.toChangeset=function(){var t=this;return this.deltaSet?(this.parseDeltaSet(),this.zoneCs.length?this.zoneCs.reduce((function(e,n){return K(e,n,t.apool)})):""):""}}()},vsh_75385:function(t,e,n){"use strict";n.d(e,{_:function(){return s},a:function(){return a},b:function(){return l},c:function(){return u},d:function(){return o},i:function(){return h},s:function(){return c},t:function(){return d}});var i=n("vsh_65498"),r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return s=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},s.apply(this,arguments)};function a(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function u(t,e,n){void 0===t&&(t={}),void 0===e&&(e={}),"object"!==(0,i.Z)(t)&&(t={}),"object"!==(0,i.Z)(e)&&(e={});var r=s({},e);for(var o in n||(r=Object.keys(r).reduce((function(t,e){return null!==r[e]&&""!==r[e]&&(t[e]=r[e]),t}),{})),t)void 0!==t[o]&&void 0===e[o]&&(r[o]=t[o]);return Object.keys(r).length>0?r:void 0}function c(t,e){return void 0===e&&(e=!0),Object.keys(t).reduce((function(n,i){return!1!==e||t[i]?(n[i]="string"==typeof t[i]?t[i]:String(t[i]),n):n}),{})}function d(t,e,n){if(void 0===t&&(t={}),void 0===e&&(e={}),void 0===n&&(n=!1),"object"!==(0,i.Z)(t))return e;if("object"===(0,i.Z)(e)){if(!n)return e;var r=Object.keys(e).reduce((function(n,i){return void 0===t[i]&&(n[i]=e[i]),n}),{});return Object.keys(r).length>0?r:void 0}}function h(t,e){void 0===t&&(t={}),void 0===e&&(e={}),t=t||{};var n=Object.keys(e).reduce((function(n,i){return e[i]!==t[i]&&void 0!==t[i]&&(n[i]=e[i]),n}),{});return Object.keys(t).reduce((function(n,i){return t[i]!==e[i]&&void 0===e[i]&&(n[i]=""),n}),n)}},vsh_15516:function(t,e,n){"use strict";n.d(e,{D:function(){return g},a:function(){return u},d:function(){return f},f:function(){return v},o:function(){return m},p:function(){return _},q:function(){return b},x:function(){return E},y:function(){return S}});var i=n("vsh_65498"),r=n("vsh_75385"),o=n("vsh_38160"),s=(n("vsh_72862"),n("vsh_52531")),a=function(){function t(t){this.ops=t,this.index=0,this.offset=0}var e=t.prototype;return e.hasNext=function(){return this.peekLength()<1/0},e.next=function(t){t||(t=1/0);var e=this.ops[this.index];if(e){var n=this.offset,i=u(e);if(t>=i-n?(t=i-n,this.index+=1,this.offset=0):this.offset+=t,c(e))return{delete:t};var r={};return e.attributes&&(r.attributes=e.attributes),d(e)?r.retain=t:f(e)?r.insert=e.insert.substr(n,t):r.insert=e.insert,r}return{retain:1/0}},e.peek=function(){return this.ops[this.index]},e.peekLength=function(){return this.ops[this.index]?u(this.ops[this.index])-this.offset:1/0},e.peekType=function(){return this.ops[this.index]?v(this.ops[this.index]):o.HP.RETAIN},e.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var t=this.offset,e=this.index,n=this.next(),i=this.ops.slice(this.index);return this.offset=t,this.index=e,[n].concat(i)}return[]},t}();function l(t){return new a(t)}function u(t){if(c(t))return t.delete;if(d(t))return t.retain;if(f(t))return t.insert.length;if(p(t))return 1;throw new Error("op is unknown")}function c(t){return"number"==typeof(null==t?void 0:t.delete)}function d(t){return"number"==typeof(null==t?void 0:t.retain)}function h(t){return f(t)||p(t)}function f(t){return"string"==typeof(null==t?void 0:t.insert)}function p(t){return"object"===(0,i.Z)(null==t?void 0:t.insert)}function v(t){if(c(t))return o.HP.DELETE;if(d(t))return o.HP.RETAIN;if(h(t))return o.HP.INSERT;throw new Error("op is unknown")}var g=function(){function t(t,e){void 0===t&&(t={}),e=null!=e?e:Object.keys(t).some((function(e){return t[e]instanceof E})),this._deltas=e?t:Object.keys(t).reduce((function(e,n){return e[n]=S(t[n]),e}),{})}var e=t.prototype;return Object.defineProperty(e,"deltas",{get:function(){return this._deltas},enumerable:!1,configurable:!0}),e.get=function(t){return this._deltas[t]},e.compose=function(t,e,n){return void 0===e&&(e=!0),void 0===n&&(n=!0),this._call("compose",t,{keepEmptyAttributes:e,immutable:n})},e.concat=function(t){return this._call("concat",t)},e.invert=function(e){var n=new t;if(y(e))n=(new t).add(e.zoneId,e);else{if(!m(e))throw Error("DeltaSet invert data is wrong");n=e}return this.reduce((function(t,e){var i=n.get(e.zoneId)||e.create({zoneId:e.zoneId}),r=e.invert(i);return t.compose(r)}),new t)},e.transform=function(e,n){var i=this;if(void 0===n&&(n=!1),y(e))return e.zoneId in this.deltas?this.deltas[e.zoneId].transform(e,n):e;if(m(e))return new t(e.reduce((function(t,e){return t[e.zoneId]=i.transform(e,n),t}),{}));throw Error("DeltaSet call data is wrong")},e.delete=function(t){return delete this._deltas[t],this},e.add=function(t,e){if(y(t)){var n=t.zoneId;this._deltas[n]=t}else{if(!e)return console.error("DeltaSet add delta error, delta is undefined"),this;n=t;if(e.zoneId!==n)return console.error("DeltaSet add delta error, zoneId is not match"),this;this._deltas[n]=e}return this},e.replace=function(t,e){return this.delete(t).add(e.zoneId,e),this},e._call=function(e,n,i){if(y(n))return this._callDeltaFunc(e,n,i);if(m(n)){var r=new t(this.deltas);return n.forEach((function(t){r=r._callDeltaFunc(e,t,i)})),r}throw Error("DeltaSet call: data: ".concat(n," is not Delta or DeltaSet"))},e._callDeltaFunc=function(e,n,i){var o=Object.assign({keepEmptyAttributes:!0,immutable:!0},i),s=n.zoneId,a=o.immutable?(0,r._)({},this.deltas):this.deltas;if(this.deltas[s])a[s]=this.deltas[s][e](n,o.keepEmptyAttributes);else{var l=n.zoneType;a[s]=n.create({zoneId:s,zoneType:l})[e](n,o.keepEmptyAttributes)}return new t(a,!0)},e.reduce=function(t,e){var n=this;return Object.keys(this._deltas).map((function(t){return n._deltas[t]})).reduce(t,e)},e.forEach=function(t){var e,n;try{for(var i=(0,r.a)(Object.entries(this._deltas)),o=i.next();!o.done;o=i.next()){var s=(0,r.b)(o.value,2),a=s[0];t(s[1],a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t}();function y(t){return Object.values(o.Ak).includes(t.zoneType)}function m(t){return void 0!==t.deltas}function _(t){var e;return!t||0===(null===(e=null==t?void 0:t.ops)||void 0===e?void 0:e.length)}function b(t){if(!t)return!0;var e=t.deltas,n=Object.keys(e);return 0===n.length||!n.some((function(t){return!_(e[t])}))}var E=function(){function t(){this.ops=[]}var e=t.prototype;return t.registerCreator=function(e,n){t.creators.set(e,n)},t.getCreator=function(e){return t.creators.get(e)},e.insert=function(t,e,n){if(void 0===n&&(n=!0),"string"==typeof t&&0===t.length)return this;var o={insert:t};return null!=e&&"object"===(0,i.Z)(e)&&Object.keys(e).length>0&&(o.attributes=(0,r.s)(e,n)),this.push(o)},e.delete=function(t){return t<=0?this:this.push({delete:t})},e.retain=function(t,e){if(t<=0)return this;var n={retain:t};return null!=e&&"object"===(0,i.Z)(e)&&Object.keys(e).length>0&&(n.attributes=(0,r.s)(e)),this.push(n)},e.forEach=function(t){this.ops.forEach(t)},e.eachLine=function(t,e){void 0===e&&(e=o.K5);for(var n,i=l(this.ops),r=0,s={},a=[];i.hasNext();){if(i.peekType()!==o.HP.INSERT)return;var c=i.peek();(n=c).insert===o.F5&&n.attributes&&n.attributes.lmkr&&(s=c.attributes||{});var d=u(c)-i.peekLength(),h="string"==typeof c.insert?c.insert.indexOf(e,d)-d:-1;if(h<0)a.push(i.next());else{if(a.push(i.next(h+1)),!1===t(this.create({zoneId:this.zoneId,ops:a}),s,r))return;a=[],s={},r+=1}}var f=this.create({zoneId:this.zoneId,ops:a});f.length()>0&&t(f,s,r)},e.push=function(t){if(c(t)&&t.delete<=0)return console.warn("delete op is wrong"),this;if(d(t)&&t.retain<=0)return console.warn("retain op is wrong"),this;if(f(t)&&0===t.insert.length)return console.warn("insert op is wrong"),this;var e=this.ops.length,n=this.ops[e-1];if(t=function(t){var e=(0,r._)({},t);return t.attributes&&(e.attributes=(0,r._)({},t.attributes)),e}(t),"object"===(0,i.Z)(n)){if(c(t)&&c(n))return this.ops[e-1]={delete:n.delete+t.delete},this;if((0,s.X)(t.attributes,n.attributes)){if(f(t)&&f(n))return this.ops[e-1]={insert:n.insert+t.insert},"object"===(0,i.Z)(t.attributes)&&(this.ops[e-1].attributes=t.attributes),this;if(d(t)&&d(n))return this.ops[e-1]={retain:n.retain+t.retain},"object"===(0,i.Z)(t.attributes)&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this},e.compose=function(t,e){if(void 0===e&&(e=!0),!1===e){var n=t.zoneId,i=t.zoneType;t=t.reduce((function(t,n){return n.insert&&n.attributes&&(n.attributes=(0,r.s)(n.attributes,e)),t.push(n),t}),this.create({zoneId:n,zoneType:i}))}var a=l(this.ops),u=l(t.ops),h=[],p=u.peek();if(null!=p&&d(p)&&null==p.attributes){for(var v=p.retain;a.peekType()===o.HP.INSERT&&a.peekLength()<=v;)v-=a.peekLength(),h.push(a.next());p.retain-v>0&&u.next(p.retain-v)}for(var g=this.create({zoneId:this.zoneId,zoneType:this.zoneType,ops:h});a.hasNext()||u.hasNext();)if(u.peekType()===o.HP.INSERT)g.push(u.next());else if(a.peekType()===o.HP.DELETE)g.push(a.next());else{var y=Math.min(a.peekLength(),u.peekLength()),m=a.next(y),_=u.next(y);if(c(_)&&f(m));else if(c(_)&&d(m))g.push(_);else if(d(_)){var b={};d(m)?b.retain=y:b.insert=m.insert;var E=(0,r.c)(m.attributes,_.attributes,e);if(E&&(b.attributes=E),g.push(b),!u.hasNext()&&(0,s.X)(g.ops[g.ops.length-1],b)){var S=this.create({zoneId:this.zoneId,zoneType:this.zoneType,ops:a.rest()});return g.concat(S).chop()}}}return g.chop()},e.concat=function(t){var e=this.create({zoneId:this.zoneId,zoneType:this.zoneType,ops:this.ops.slice()});return t.ops.length>0&&(e.push(t.ops[0]),e.ops=e.ops.concat(t.ops.slice(1))),e},e.length=function(){return this.reduce((function(t,e){return t+u(e)}),0)},e.reduce=function(t,e){return this.ops.reduce(t,e)},e.chop=function(){var t=this.ops[this.ops.length-1];return t&&t.retain&&!t.attributes&&this.ops.pop(),this},e.transform=function(t,e){if(void 0===e&&(e=!1),e=!!e,"number"==typeof t)return this.transformPosition(t,e);for(var n=t,i=l(this.ops),s=l(n.ops),a=this.create({zoneId:this.zoneId,zoneType:this.zoneType});i.hasNext()||s.hasNext();)if(i.peekType()!==o.HP.INSERT||!e&&s.peekType()===o.HP.INSERT)if(s.peekType()===o.HP.INSERT)a.push(s.next());else{var d=Math.min(i.peekLength(),s.peekLength()),h=i.next(d),f=s.next(d);if(c(h))continue;c(f)?a.push(f):a.retain(d,(0,r.t)(h.attributes,f.attributes,e))}else a.retain(u(i.next()));return a.chop()},e.transformPosition=function(t,e){void 0===e&&(e=!1),e=!!e;for(var n=l(this.ops),i=0;n.hasNext()&&i<=t;){var r=n.peekLength(),o=n.peekType();n.next(),"delete"!==o?("insert"===o&&(i<t||!e)&&(t+=r),i+=r):t-=Math.min(r,t-i)}return t},e.slice=function(t,e){void 0===t&&(t=0),void 0===e&&(e=1/0);for(var n=[],i=l(this.ops),r=0;r<e&&i.hasNext();){var o=void 0;r<t?o=i.next(t-r):(o=i.next(e-r),n.push(o)),r+=u(o)}return this.create({zoneId:this.zoneId,zoneType:this.zoneType,ops:n})},e.invert=function(t){var e=this.create({zoneId:this.zoneId,zoneType:this.zoneType});return this.reduce((function(n,i){if(h(i))e.delete(u(i));else{if(d(i)&&!i.attributes)return e.retain(i.retain),n+i.retain;if(c(i)||d(i)&&i.attributes){var o=i.delete||i.retain;return t.slice(n,n+o).forEach((function(t){c(i)?e.push(t):d(i)&&i.attributes&&e.retain(u(t),(0,r.i)(i.attributes,t.attributes))})),n+o}}return n}),0),e.chop()},t.creators=new Map,t}();function S(t){var e=E.getCreator(t.zoneType);return e||console.error("DeltaCreator undefiend",t.zoneType),new e(t)}},vsh_38160:function(t,e,n){"use strict";var i,r;n.d(e,{K5:function(){return o},F5:function(){return s},HP:function(){return i},Ak:function(){return r}}),function(t){t.DELETE="delete",t.RETAIN="retain",t.INSERT="insert"}(i||(i={})),function(t){t.Content="Z",t.Row="R",t.Column="C"}(r||(r={}));var o="\n",s="*";r.Content,r.Row,r.Column},vsh_93862:function(t,e,n){"use strict";n.d(e,{J:function(){return s},e:function(){return o}});var i=n("vsh_65498"),r=n("vsh_38160");function o(t){return Boolean(t.insert===r.F5&&t.attributes&&t.attributes.lmkr)}function s(t){return"object"===(0,i.Z)(t.insert)&&t.insert.id}},vsh_34482:function(t,e,n){"use strict";n.d(e,{I:function(){return s}});var i=n("vsh_75385"),r=n("vsh_38160"),o=(n("vsh_72862"),n("vsh_15516")),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}(0,i.d)(e,t);var n=e.prototype;return n.create=function(t){return t.zoneType=t.zoneType||this.zoneType,new e(t)},n.insert=function(e,n,i){return void 0===i&&(i=!0),t.prototype.insert.call(this,e,n,!1)},n.insertLineMarker=function(t){void 0===t&&(t={});var e=Object.assign({lmkr:1},t);return this.insert(r.F5,e),this},n.insertEnterAndLineMarker=function(t){this.insert(r.K5,t&&t.enterAttributes?t.enterAttributes:{});var e=Object.assign({lmkr:1},t&&t.lineAttributes?t.lineAttributes:{});return this.insert(r.F5,e),this},e}(function(t){function e(e){void 0===e&&(e={});var n=t.call(this)||this;n.ops=[];var i=e.zoneId,o=e.ops;return n.zoneId=i||"0",n.zoneType=r.Ak.Content,o&&o.length>0&&(n.ops=o),n}(0,i.d)(e,t);var n=e.prototype;return n.create=function(t){return t.zoneType=t.zoneType||this.zoneType,new e(t)},n.insertEnter=function(t){return void 0===t&&(t={}),this.insert(r.K5,t),this},n.insertEnterAndLineMarker=function(t){return this},n.insertLineMarker=function(t){return this},e}(o.x));o.x.registerCreator(r.Ak.Content,s)},vsh_37190:function(t,e,n){"use strict";n.d(e,{_:function(){return s},a:function(){return a},b:function(){return l},c:function(){return u},d:function(){return o},i:function(){return h},s:function(){return c},t:function(){return d}});var i=n("vsh_65498"),r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function o(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return s=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},s.apply(this,arguments)};function a(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function u(t,e,n){void 0===t&&(t={}),void 0===e&&(e={}),"object"!==(0,i.Z)(t)&&(t={}),"object"!==(0,i.Z)(e)&&(e={});var r=s({},e);for(var o in n||(r=Object.keys(r).reduce((function(t,e){return null!==r[e]&&""!==r[e]&&(t[e]=r[e]),t}),{})),t)void 0!==t[o]&&void 0===e[o]&&(r[o]=t[o]);return Object.keys(r).length>0?r:void 0}function c(t,e){return void 0===e&&(e=!0),Object.keys(t).reduce((function(n,i){return!1!==e||t[i]?(n[i]="string"==typeof t[i]?t[i]:String(t[i]),n):n}),{})}function d(t,e,n){if(void 0===t&&(t={}),void 0===e&&(e={}),void 0===n&&(n=!1),"object"!==(0,i.Z)(t))return e;if("object"===(0,i.Z)(e)){if(!n)return e;var r=Object.keys(e).reduce((function(n,i){return void 0===t[i]&&(n[i]=e[i]),n}),{});return Object.keys(r).length>0?r:void 0}}function h(t,e){void 0===t&&(t={}),void 0===e&&(e={}),t=t||{};var n=Object.keys(e).reduce((function(n,i){return e[i]!==t[i]&&void 0!==t[i]&&(n[i]=e[i]),n}),{});return Object.keys(t).reduce((function(n,i){return t[i]!==e[i]&&void 0===e[i]&&(n[i]=""),n}),n)}},vsh_53006:function(t,e,n){"use strict";n.d(e,{D:function(){return w},f:function(){return S},w:function(){return T}});var i=n("vsh_65498"),r=n("vsh_37190"),o=n("vsh_38172"),s=(n("vsh_72862"),Object.prototype.toString);function a(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":s.call(t)}function l(t){return"object"===(0,i.Z)(t)&&null!==t}var u=Symbol.prototype.valueOf;function c(t,e){return t===e||t!=t&&e!=e}function d(t){return null==t}function h(t,e,n,i){if(t===e)return!0;if(d(t)||d(e)||!l(t)&&!l(e)&&"function"!=typeof t)return c(t,e);var r=a(t),o=a(e);if(r!==o)return!1;var s=n.indexOf(t);if(s===i.indexOf(e)&&s>=0)return!0;if(n.push(t),i.push(e),("[object Array]"===r?t.length:Object.keys(t).length)!==("[object Array]"===o?e.length:Object.keys(e).length))return!1;if("[object Array]"===r){for(var f=0;f<t.length;f++)if(!h(t[f],e[f],n.slice(),i.slice()))return!1;return!0}if("[object Object]"===r){for(var p in t)if(t.hasOwnProperty(p)&&!1===h(t[p],e[p],n.slice(),i.slice()))return!1;return!0}return"[object Function]"===r?t.toString()===e.toString():["[object Number]","[object Boolean]","[object Date]"].includes(r)?c(+t,+e):"[object String]"===r?""+t==""+e:!("[object Symbol]"!==r||!u)&&u.call(t)===u.call(e)}function f(t,e){return h(t,e,[],[])}var p=function(){function t(t){this.ops=t,this.index=0,this.offset=0}var e=t.prototype;return e.hasNext=function(){return this.peekLength()<1/0},e.next=function(t){t||(t=1/0);var e=this.ops[this.index];if(e){var n=this.offset,i=g(e);if(t>=i-n?(t=i-n,this.index+=1,this.offset=0):this.offset+=t,y(e))return{delete:t};var r={};return e.attributes&&(r.attributes=e.attributes),m(e)?r.retain=t:b(e)?r.insert=e.insert.substr(n,t):r.insert=e.insert,r}return{retain:1/0}},e.peek=function(){return this.ops[this.index]},e.peekLength=function(){return this.ops[this.index]?g(this.ops[this.index])-this.offset:1/0},e.peekType=function(){return this.ops[this.index]?S(this.ops[this.index]):o.HP.RETAIN},e.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var t=this.offset,e=this.index,n=this.next(),i=this.ops.slice(this.index);return this.offset=t,this.index=e,[n].concat(i)}return[]},t}();function v(t){return new p(t)}function g(t){if(y(t))return t.delete;if(m(t))return t.retain;if(b(t))return t.insert.length;if(E(t))return 1;throw new Error("op is unknown")}function y(t){return"number"==typeof(null==t?void 0:t.delete)}function m(t){return"number"==typeof(null==t?void 0:t.retain)}function _(t){return b(t)||E(t)}function b(t){return"string"==typeof(null==t?void 0:t.insert)}function E(t){return"object"===(0,i.Z)(null==t?void 0:t.insert)}function S(t){if(y(t))return o.HP.DELETE;if(m(t))return o.HP.RETAIN;if(_(t))return o.HP.INSERT;throw new Error("op is unknown")}var w=function(){function t(t,e){void 0===t&&(t={}),e=null!=e?e:Object.keys(t).some((function(e){return t[e]instanceof T})),this._deltas=e?t:Object.keys(t).reduce((function(e,n){return e[n]=function(t){var e=T.getCreator(t.zoneType);e||console.error("DeltaCreator undefiend",t.zoneType);return new e(t)}(t[n]),e}),{})}var e=t.prototype;return Object.defineProperty(e,"deltas",{get:function(){return this._deltas},enumerable:!1,configurable:!0}),e.get=function(t){return this._deltas[t]},e.compose=function(t,e,n){return void 0===e&&(e=!0),void 0===n&&(n=!0),this._call("compose",t,{keepEmptyAttributes:e,immutable:n})},e.concat=function(t){return this._call("concat",t)},e.invert=function(e){var n=new t;if(C(e))n=(new t).add(e.zoneId,e);else{if(!I(e))throw Error("DeltaSet invert data is wrong");n=e}return this.reduce((function(t,e){var i=n.get(e.zoneId)||e.create({zoneId:e.zoneId}),r=e.invert(i);return t.compose(r)}),new t)},e.transform=function(e,n){var i=this;if(void 0===n&&(n=!1),C(e))return e.zoneId in this.deltas?this.deltas[e.zoneId].transform(e,n):e;if(I(e))return new t(e.reduce((function(t,e){return t[e.zoneId]=i.transform(e,n),t}),{}));throw Error("DeltaSet call data is wrong")},e.delete=function(t){return delete this._deltas[t],this},e.add=function(t,e){if(C(t)){var n=t.zoneId;this._deltas[n]=t}else{if(!e)return console.error("DeltaSet add delta error, delta is undefined"),this;n=t;if(e.zoneId!==n)return console.error("DeltaSet add delta error, zoneId is not match"),this;this._deltas[n]=e}return this},e.replace=function(t,e){return this.delete(t).add(e.zoneId,e),this},e._call=function(e,n,i){if(C(n))return this._callDeltaFunc(e,n,i);if(I(n)){var r=new t(this.deltas);return n.forEach((function(t){r=r._callDeltaFunc(e,t,i)})),r}throw Error("DeltaSet call: data: "+n+" is not Delta or DeltaSet")},e._callDeltaFunc=function(e,n,i){var o=Object.assign({keepEmptyAttributes:!0,immutable:!0},i),s=n.zoneId,a=o.immutable?(0,r._)({},this.deltas):this.deltas;if(this.deltas[s])a[s]=this.deltas[s][e](n,o.keepEmptyAttributes);else{var l=n.zoneType;a[s]=n.create({zoneId:s,zoneType:l})[e](n,o.keepEmptyAttributes)}return new t(a,!0)},e.reduce=function(t,e){var n=this;return Object.keys(this._deltas).map((function(t){return n._deltas[t]})).reduce(t,e)},e.forEach=function(t){var e,n;try{for(var i=(0,r.a)(Object.entries(this._deltas)),o=i.next();!o.done;o=i.next()){var s=(0,r.b)(o.value,2),a=s[0];t(s[1],a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t}();function C(t){return Object.values(o.Ak).includes(t.zoneType)}function I(t){return void 0!==t.deltas}var T=function(){function t(){this.ops=[]}var e=t.prototype;return t.registerCreator=function(e,n){t.creators.set(e,n)},t.getCreator=function(e){return t.creators.get(e)},e.insert=function(t,e,n){if(void 0===n&&(n=!0),"string"==typeof t&&0===t.length)return this;var o={insert:t};return null!=e&&"object"===(0,i.Z)(e)&&Object.keys(e).length>0&&(o.attributes=(0,r.s)(e,n)),this.push(o)},e.delete=function(t){return t<=0?this:this.push({delete:t})},e.retain=function(t,e){if(t<=0)return this;var n={retain:t};return null!=e&&"object"===(0,i.Z)(e)&&Object.keys(e).length>0&&(n.attributes=(0,r.s)(e)),this.push(n)},e.forEach=function(t){this.ops.forEach(t)},e.eachLine=function(t,e){void 0===e&&(e=o.K5);for(var n,i=v(this.ops),r=0,s={},a=[];i.hasNext();){if(i.peekType()!==o.HP.INSERT)return;var l=i.peek();(n=l).insert===o.F5&&n.attributes&&n.attributes.lmkr&&(s=l.attributes||{});var u=g(l)-i.peekLength(),c="string"==typeof l.insert?l.insert.indexOf(e,u)-u:-1;if(c<0)a.push(i.next());else{if(a.push(i.next(c+1)),!1===t(this.create({zoneId:this.zoneId,ops:a}),s,r))return;a=[],s={},r+=1}}var d=this.create({zoneId:this.zoneId,ops:a});d.length()>0&&t(d,s,r)},e.push=function(t){if(y(t)&&t.delete<=0)return console.warn("delete op is wrong"),this;if(m(t)&&t.retain<=0)return console.warn("retain op is wrong"),this;if(b(t)&&0===t.insert.length)return console.warn("insert op is wrong"),this;var e=this.ops.length,n=this.ops[e-1];if(t=function(t){var e=(0,r._)({},t);return t.attributes&&(e.attributes=(0,r._)({},t.attributes)),e}(t),"object"===(0,i.Z)(n)){if(y(t)&&y(n))return this.ops[e-1]={delete:n.delete+t.delete},this;if(f(t.attributes,n.attributes)){if(b(t)&&b(n))return this.ops[e-1]={insert:n.insert+t.insert},"object"===(0,i.Z)(t.attributes)&&(this.ops[e-1].attributes=t.attributes),this;if(m(t)&&m(n))return this.ops[e-1]={retain:n.retain+t.retain},"object"===(0,i.Z)(t.attributes)&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this},e.compose=function(t,e){if(void 0===e&&(e=!0),!1===e){var n=t.zoneId,i=t.zoneType;t=t.reduce((function(t,n){return n.insert&&n.attributes&&(n.attributes=(0,r.s)(n.attributes,e)),t.push(n),t}),this.create({zoneId:n,zoneType:i}))}var s=v(this.ops),a=v(t.ops),l=[],u=a.peek();if(null!=u&&m(u)&&null==u.attributes){for(var c=u.retain;s.peekType()===o.HP.INSERT&&s.peekLength()<=c;)c-=s.peekLength(),l.push(s.next());u.retain-c>0&&a.next(u.retain-c)}for(var d=this.create({zoneId:this.zoneId,zoneType:this.zoneType,ops:l});s.hasNext()||a.hasNext();)if(a.peekType()===o.HP.INSERT)d.push(a.next());else if(s.peekType()===o.HP.DELETE)d.push(s.next());else{var h=Math.min(s.peekLength(),a.peekLength()),p=s.next(h),g=a.next(h);if(y(g)&&b(p));else if(y(g)&&m(p))d.push(g);else if(m(g)){var _={};m(p)?_.retain=h:_.insert=p.insert;var E=(0,r.c)(p.attributes,g.attributes,e);if(E&&(_.attributes=E),d.push(_),!a.hasNext()&&f(d.ops[d.ops.length-1],_)){var S=this.create({zoneId:this.zoneId,zoneType:this.zoneType,ops:s.rest()});return d.concat(S).chop()}}}return d.chop()},e.concat=function(t){var e=this.create({zoneId:this.zoneId,zoneType:this.zoneType,ops:this.ops.slice()});return t.ops.length>0&&(e.push(t.ops[0]),e.ops=e.ops.concat(t.ops.slice(1))),e},e.length=function(){return this.reduce((function(t,e){return t+g(e)}),0)},e.reduce=function(t,e){return this.ops.reduce(t,e)},e.chop=function(){var t=this.ops[this.ops.length-1];return t&&t.retain&&!t.attributes&&this.ops.pop(),this},e.transform=function(t,e){if(void 0===e&&(e=!1),e=!!e,"number"==typeof t)return this.transformPosition(t,e);for(var n=t,i=v(this.ops),s=v(n.ops),a=this.create({zoneId:this.zoneId,zoneType:this.zoneType});i.hasNext()||s.hasNext();)if(i.peekType()!==o.HP.INSERT||!e&&s.peekType()===o.HP.INSERT)if(s.peekType()===o.HP.INSERT)a.push(s.next());else{var l=Math.min(i.peekLength(),s.peekLength()),u=i.next(l),c=s.next(l);if(y(u))continue;y(c)?a.push(c):a.retain(l,(0,r.t)(u.attributes,c.attributes,e))}else a.retain(g(i.next()));return a.chop()},e.transformPosition=function(t,e){void 0===e&&(e=!1),e=!!e;for(var n=v(this.ops),i=0;n.hasNext()&&i<=t;){var r=n.peekLength(),o=n.peekType();n.next(),"delete"!==o?("insert"===o&&(i<t||!e)&&(t+=r),i+=r):t-=Math.min(r,t-i)}return t},e.slice=function(t,e){void 0===t&&(t=0),void 0===e&&(e=1/0);for(var n=[],i=v(this.ops),r=0;r<e&&i.hasNext();){var o=void 0;r<t?o=i.next(t-r):(o=i.next(e-r),n.push(o)),r+=g(o)}return this.create({zoneId:this.zoneId,zoneType:this.zoneType,ops:n})},e.invert=function(t){var e=this.create({zoneId:this.zoneId,zoneType:this.zoneType});return this.reduce((function(n,i){if(_(i))e.delete(g(i));else{if(m(i)&&!i.attributes)return e.retain(i.retain),n+i.retain;if(y(i)||m(i)&&i.attributes){var o=i.delete||i.retain;return t.slice(n,n+o).forEach((function(t){y(i)?e.push(t):m(i)&&i.attributes&&e.retain(g(t),(0,r.i)(i.attributes,t.attributes))})),n+o}}return n}),0),e.chop()},t.creators=new Map,t}()},vsh_38172:function(t,e,n){"use strict";var i,r;n.d(e,{K5:function(){return o},F5:function(){return s},HP:function(){return i},Ru:function(){return l},AS:function(){return u},Zf:function(){return a},Ak:function(){return r}}),function(t){t.DELETE="delete",t.RETAIN="retain",t.INSERT="insert"}(i||(i={})),function(t){t.Content="Z",t.Row="R",t.Column="C"}(r||(r={}));var o="\n",s="*",a={content:r.Content,rs:r.Row,cs:r.Column},l="0",u="zoneType"},vsh_89935:function(t,e,n){"use strict";n.d(e,{I:function(){return s}});var i=n("vsh_37190"),r=n("vsh_38172"),o=(n("vsh_72862"),n("vsh_53006")),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}(0,i.d)(e,t);var n=e.prototype;return n.create=function(t){return t.zoneType=t.zoneType||this.zoneType,new e(t)},n.insert=function(e,n){return t.prototype.insert.call(this,e,n,!1)},n.insertLineMarker=function(t){void 0===t&&(t={});var e=Object.assign({lmkr:1},t);return this.insert(r.F5,e),this},n.insertEnterAndLineMarker=function(t){this.insert(r.K5,t&&t.enterAttributes?t.enterAttributes:{});var e=Object.assign({lmkr:1},t&&t.lineAttributes?t.lineAttributes:{});return this.insert(r.F5,e),this},e}(function(t){function e(e){void 0===e&&(e={});var n=t.call(this)||this;n.ops=[];var i=e.zoneId,o=e.ops;return n.zoneId=i||"0",n.zoneType=r.Ak.Content,o&&o.length>0&&(n.ops=o),n}(0,i.d)(e,t);var n=e.prototype;return n.create=function(t){return t.zoneType=t.zoneType||this.zoneType,new e(t)},n.insertEnter=function(t){return void 0===t&&(t={}),this.insert(r.K5,t),this},n.insertEnterAndLineMarker=function(t){return this},n.insertLineMarker=function(t){return this},e}(o.w));o.w.registerCreator(r.Ak.Content,s)},vsh_62553:function(t,e,n){"use strict";n.d(e,{Q:function(){return s}});var i=n("vsh_34170"),r=(n("vsh_72862"),n("vsh_40229")),o=n("vsh_95082"),s=(n("vsh_98125"),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.b)(e,t),e.prototype.serialize=function(t){var e,n,i=t.lineDelta;return t.type===o.T.LEAF&&"\n"===(null===(e=t.op)||void 0===e?void 0:e.insert)&&(2===(null==i?void 0:i.length())&&(null===(n=i.ops[0].attributes)||void 0===n?void 0:n.lmkr)||1===(null==i?void 0:i.length()))&&(t.node=document.createElement("br")),t},e}(r.S))},vsh_31703:function(t,e,n){"use strict";n.d(e,{vx:function(){return P}});var i,r=n("vsh_34170"),o=n("vsh_98125"),s=n.n(o),a=(n("vsh_72862"),n("vsh_34482")),l=n("vsh_40229"),u=n("vsh_95082"),c=n("vsh_78224"),d=n("vsh_9829"),h=n("vsh_24719"),f=n("vsh_71944"),p=n("vsh_49814"),v=(n("vsh_37833"),n("vsh_40289")),g=n("vsh_23856"),y=(n("vsh_94596"),n("vsh_9452")),m=n("vsh_78898"),_=n.n(m),b=n("vsh_21411"),E=n("vsh_61417"),S=n("vsh_44442");function w(t,e){var n=t.boxRect,r=t.relativeRect,o=t.anchorRect,s=r.left,a=r.top,l=r.height,u=r.width,c=o,d=c.top,h=c.left,f=c.right,p=c.bottom,v=c.width,g=c.height,y={top:d-a,left:h-s,right:f-s,bottom:p-a,width:v,height:g},m={top:Math.min(d,y.top),left:Math.min(h,y.left),right:u-y.left-v,bottom:l-y.top-g,width:v,height:g};return e===i.BC?function(t){var e,n=t.absRect,i=t.boxRect,r=t.anchorRect,o=t.remainRect,s=n.left,a=n.top,l=i.width,u=i.height,c=r.width,d=r.height,h=o.right,f=o.left,p=o.bottom,v=o.top;e=f+c/2>=l/2&&h+c/2>=l/2?{left:s+c/2-l/2,top:0}:h+c/2>=l?{left:s,top:0}:f+c/2>=l?{left:Math.min(s+c+h-l,s),top:0}:{left:0,top:a+d};e.top=p>=u?a+d:v>=u?a-u:a-u*Math.abs(v)/(Math.abs(p)+Math.abs(v));return e}({absRect:y,boxRect:n,anchorRect:o,remainRect:m}):{top:0,left:0}}!function(t){t.BC="BC"}(i||(i={}));var C;!function(t){t[t.TYPE_HOVER=0]="TYPE_HOVER",t[t.TYPE_MODIFY_LINK=1]="TYPE_MODIFY_LINK",t[t.TYPE_MODIFY_ALL=2]="TYPE_MODIFY_ALL",t[t.TYPE_CREATE=3]="TYPE_CREATE"}(C||(C={}));var I=function(t){function e(e){var n=t.call(this,e)||this;n.container=null,n.boxElem=null,n.linkInputElem=null,n.textInputElem=null,n.raf=0,n.handleClickModify=function(){n.setState({type:2},(function(){n.updatePosition(),n.updateFocus()})),n.props.onClickModify&&n.props.onClickModify(n.props.data)},n.handleDelete=function(){n.props.onClickDelete(n.props.data)},n.handleKeyDown=function(t){if(13===t.keyCode){var e=n.state,i=e.text,r=e.link;t.preventDefault(),t.stopPropagation(),n.props.onSubmit({text:i,link:r})}else 27===t.keyCode&&(t.preventDefault(),t.stopPropagation(),n.props.onEsc())},n.handleTextChange=function(t){n.setState({text:t.target.value})},n.handleLinkChange=function(t){n.setState({link:t.target.value})};var i=e.data,r=e.type,o=i.text,s=i.link;return n.state={type:r,text:o,link:s,style:{left:-1e3,top:0}},n}(0,r.b)(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this;this.updatePosition(),this.raf=requestAnimationFrame((function(){t.updateFocus()}))},n.componentWillUnmount=function(){cancelAnimationFrame(this.raf)},n.updatePosition=function(){this.setState({style:this.getPosition()})},n.updateFocus=function(){var t,e,n=this.state.type;3===n?null===(t=this.textInputElem)||void 0===t||t.focus():1!==n&&2!==n||null===(e=this.linkInputElem)||void 0===e||e.focus()},n.getPosition=function(){var t,e,n;return w({boxRect:this.boxElem.getBoundingClientRect(),relativeRect:null===(n=null===(e=null===(t=this.container)||void 0===t?void 0:t.parentElement)||void 0===e?void 0:e.parentElement)||void 0===n?void 0:n.getBoundingClientRect(),anchorRect:this.props.anchorRect},i.BC)},n.renderHoverUI=function(){var t=this,e=this.props.data.link,n=this.props.editable;return s().createElement("div",{ref:function(e){return t.boxElem=e},className:"link-modify-popup layout-row"},s().createElement("div",{className:"link-popup__input-group"},s().createElement("div",{className:"link-row"},s().createElement("span",{className:"link-modify-text"},e),n&&s().createElement("button",{onClick:this.handleClickModify,className:"link-modify-submit"},s().createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s().createElement("path",{d:"m17.57 7.244-.006-.006.37-.37a1 1 0 0 0 .001-1.412l-3.434-3.453-.002-.002a1 1 0 0 0-1.414 0l-.705.706.01.01L2 13.186V17a1 1 0 0 0 1 1h3.814L17.57 7.244Zm-3.273.389-2.015-2.015 1.487-1.515 2.023 2.034-1.495 1.496Zm-3.415-.587 2.002 2.002-6.913 6.92h-.004l-1.934-1.935v-.003l6.849-6.984ZM3 20a1 1 0 1 0 0 2h18a1 1 0 1 0 0-2H3Z",fill:"#2B2F36"}))),n&&s().createElement("button",{onClick:this.handleDelete,className:"link-modify-delete"},s().createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s().createElement("path",{d:"m10.652 19.131 1.815-2.42 1.429 1.428-1.644 2.192a5.037 5.037 0 1 1-7.963-6.168l1.43-1.788a1 1 0 0 1 1.562 1.25l-1.43 1.787a3.037 3.037 0 1 0 4.8 3.719Zm4.455-2.61-1.45-1.45-1.161-1.16c0-.001 0 0 0 0L8.073 9.486 2.707 4.121a1 1 0 1 1 1.414-1.414l16.97 16.97a1 1 0 1 1-1.414 1.415l-4.57-4.57ZM13.348 4.869 11.532 7.29l-1.428-1.429 1.644-2.192a5.037 5.037 0 1 1 7.962 6.168l-1.43 1.788a1 1 0 1 1-1.561-1.25l1.43-1.787a3.037 3.037 0 1 0-4.801-3.719Z",fill:"#2B2F36"}))))))},n.renderModfiyUI=function(){var t,e,n=this,i=this.props.i18n,r=!!(null===(e=null===(t=this.props.data.entity)||void 0===t?void 0:t.attributes)||void 0===e?void 0:e.image),o=this.state.type,a=i["hyperlink.text"],l=i["hyperlink.link"],u=i["hyperlink.determine"],c=i["hyperlink.add-link"],d=i["hyperlink.enter-text"];return s().createElement("div",{ref:function(t){return n.boxElem=t},className:"link-popup layout-row"},s().createElement("svg",{className:"link-popup__triangle",width:"20px",height:"20px",viewBox:"271 193 224 132",version:"1.1",xmlns:"http://www.w3.org/2000/svg"}),s().createElement("div",{className:"link-popup__input-group"},(2===o||3===o)&&!r&&s().createElement("div",{className:"link-row"},s().createElement("span",{className:"link-row-text"},a),s().createElement("input",{ref:function(t){return n.textInputElem=t},type:"text",spellCheck:!1,placeholder:d,value:this.state.text,onKeyDown:this.handleKeyDown,onChange:this.handleTextChange,className:"link-row-input text-input"})),s().createElement("div",{className:"link-row"},s().createElement("span",{className:"link-row-text"},l),s().createElement("input",{ref:function(t){return n.linkInputElem=t},onKeyDown:this.handleKeyDown,type:"text",spellCheck:!1,className:"link-row-input link-input",value:this.state.link,onChange:this.handleLinkChange,placeholder:c}),s().createElement("button",{onClick:function(){return n.props.onSubmit({text:n.state.text,link:n.state.link})},className:"link-submit",disabled:!this.props.onValidLink(this.state.link)},u))))},n.render=function(){var t=this,e=this.state,n=e.type,i=e.style;return s().createElement("div",{ref:function(e){return t.container=e},style:(0,r.g)({position:"absolute",zIndex:999},i)},0===n&&this.renderHoverUI(),0!==n&&this.renderModfiyUI())},e.HYPERLINK_WIDTH=392,e.TYPE_HOVER=0,e.TYPE_MODIFY_LINK=1,e.TYPE_MODIFY_ALL=2,e.TYPE_CREATE=3,e}(o.Component);var T=n("vsh_18776"),x="".concat("clientside","-"),k="".concat(x).concat("link_background"),M="".concat(x,"link_mark"),R="hyperlink",P=function(t){function e(n){var i=t.call(this)||this;return i.props=n,i.name="HyperLinks",i.inlineWrapperCache=null,i.mouseEnterTimer=0,i.show=!1,i.popupMountNode=null,i.closePopupTimer=0,i.linkOperations=[],i.currentSelection=null,i.preventNextClick=!1,i.handleKeydown=function(){var t=i.editor.selection.getSelection(),n=i.editor.getContentState().getActiveZone();0!==t.start.offset&&t.start.offset!==n.getLine(t.start.line).getLineMarker()||!t.isCollapsed()||i.editor.toggleAttribute(e.KEY,"")},i.handleContentChange=function(t){if(i.currentSelection){var e=i.currentSelection.range.start.zoneId,n=t.deltaSet.get(e);if(!n)return;var r=i.currentSelection.position,o=i.editor.transformPosition(n,r);o!==r&&(i.currentSelection={range:o.toRange(),position:o})}},i.completeURLProtocolWithCustom=function(t){return p.Z.completeURLProtocol(t,i.getCustomProtocols())},i.handlePopUpMouseEnter=function(){i.closePopupTimer&&clearTimeout(i.closePopupTimer)},i.handleDocumentClick=function(t){var e,n=t.target;!document.body.contains(n)||(null===(e=i.popupMountNode)||void 0===e?void 0:e.contains(n))||n.closest('[adit-key="hyperlink"]')||i.preventNextClick||i.closePopup(),i.preventNextClick=!1},i.handleMouseUp=function(t){var e,n=t.target;(null===(e=i.popupMountNode)||void 0===e?void 0:e.contains(n))&&(i.preventNextClick=!0)},i.handleMouseLeave=function(t){i.props.onMouseLeave?i.props.onMouseLeave(t,i.editor):(i.mouseEnterTimer&&clearTimeout(i.mouseEnterTimer),i.popupType===C.TYPE_HOVER&&(i.closePopupTimer=setTimeout((function(){i.closePopup()}),e.closeDuration)))},i.handleMouseEnter=function(t){if(i.props.onMouseEnter)i.props.onMouseEnter(t,i.editor);else{var e=i.editor,n=t.target,r=i.editor.editorUtils.closest(n,"[outer-u-container]");r&&(n=r),i.closePopupTimer&&clearTimeout(i.closePopupTimer),i.mouseEnterTimer=window.setTimeout((function(){var t,r=n&&(0,h.Ve)(n,i.editor);if(r){var o=e.getContentState().getEntities(r);o.length>1&&(o=[{start:o[0].start,end:o[o.length-1].end,text:o.map((function(t){return t.text})).join(""),attributes:o[0].attributes}]);var s=o[0],a="",l="";if(s.attributes.hyperlink){var u=JSON.parse(s.attributes.hyperlink);a=s.text,l=u.href}else{var c=r.start,d=r.end,f=null===(t=e.getContentState().getZoneState(c.zoneId))||void 0===t?void 0:t.getLine(c.line);if(!f)return void console.error("Hyperlinks handleMouseEnterUrl zone ".concat(c.zoneId," line ").concat(c.line," not exist"));l=a=f.getModelText().slice(c.offset,d.offset)}i.currentSelection={range:r,position:r.toPosition()};var p=e.rectModule.getRangeRect({start:s.start,end:s.end}),v=i.relativeRectToScreen(p);i.unmountPopup(),i.openPopup({range:r,anchorRect:v,data:{text:a,link:i.completeURLProtocolWithCustom(l),entity:s},type:I.TYPE_HOVER})}}),500)}},i.handleClick=function(t){if(i.show&&i.popupType!==C.TYPE_HOVER)t.preventDefault();else{var e=t.target,n=i.editor.editorUtils.closest(e,"[data-href]"),r=i.editor.editorUtils.getAttribute(n,"data-href");if(i.props.onClick)i.props.onClick(t,r);else{t.preventDefault();var o=i.editor.editorUtils.closest(t.target,"[href]"),s=o&&i.editor.editorUtils.getAttribute(o,"href");if(!s)return;window.open(i.completeURLProtocolWithCustom(s),"_blank","noopener,noreferrer")}}},i.editor=n.editor,i.register(),p.Z.addExtraProtocols(i.getCustomProtocols()),i.editor.on("keydown",i.handleKeydown),i.editor.on(c.r.CONTENT_CHANGE,i.handleContentChange),i}(0,r.b)(e,t);var n=e.prototype;return n.editorDidMount=function(){var t;this.popupMountNode=document.createElement("div"),this.popupMountNode.setAttribute("id","@editor-kit-hyperlink-container-".concat(Math.random())),this.popupMountNode.classList.add("adit-popup-container"),this.popupMountNode.style.position="relative",this.popupMountNode.style.top="0px",this.popupMountNode.style.left="0px",(null==(t=this.props.getPopupContainer?this.props.getPopupContainer():document.body)?void 0:t.firstChild)?t.insertBefore(this.popupMountNode,t.firstChild):t.append(this.popupMountNode),document.addEventListener("click",this.handleDocumentClick),document.addEventListener("mouseup",this.handleMouseUp),this.popupMountNode.addEventListener("mouseenter",this.handlePopUpMouseEnter)},n.match=function(t){return t===e.KEY||t===b.in||t===k||t.startsWith("url-")||t.startsWith("url:")},n.renderInlineWrapper=function(t){var n,i,r=t.index,o=t.attributes,s=t.lineState,a=e.KEY;if(!o[a])return null;var l=r-1,u=null;if(l>=0){var c=null===(n=s.getOps()[l].attributes)||void 0===n?void 0:n[a];if(c){var d=JSON.parse(c);u=null!==(i=null==d?void 0:d.linkId)&&void 0!==i?i:null}}var h=JSON.parse(o[a]).linkId;if(this.inlineWrapperCache&&h===u)return this.inlineWrapperCache;var f=(0,g.azq)(S.x,{"outer-u-container":!0});return this.inlineWrapperCache=f,f},n.getUrl=function(t){var n=t[b.in],i=t[e.KEY],r="",o="";if(i){var s=JSON.parse(i);r=s.href,o=s.linkId}else r=n;return{href:r,linkId:o}},n.render=function(t){var e,n=t.attributes,i=t.children,r=n[b.in];n[k]&&(i=(0,g.azq)(S.x,{style:{backgroundColor:y.iw}},i));var o=this.getUrl(n),s=o.href,a=o.linkId;if(s){p.Z.getRegex(this.getCustomProtocols()).test(s)||(s="");var l=this.completeURLProtocolWithCustom(s),u=!r&&!p.Z.isValidLink(l.trim(),null===(e=this.props)||void 0===e?void 0:e.customLinkRegexp),c=l;if(u)try{c=decodeURIComponent(l)}catch(t){}return(0,g.azq)(E.r,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onClick:this.handleClick,"data-href":s,href:c,"data-id":a||b.in,alwayHasUnderline:this.props.alwayHasUnderline,linkColor:this.props.linkColor},i)}return i},n._editorLineStateWillRender=function(t){var e=t.lineState,n=new a.I({zoneId:e.getZoneId()}),i=this.getCustomLinkRegexp(p.Z.LINK_REG);(0,b.Z7)(e,n,i),n.ops.length&&(t.lineState=e.compose(n))},n.destroy=function(){var t,e;this.closePopup(),document.removeEventListener("click",this.handleDocumentClick),document.removeEventListener("mouseup",this.handleMouseUp),this.popupMountNode&&this.popupMountNode.removeEventListener("mouseenter",this.handlePopUpMouseEnter),this.mouseEnterTimer&&clearTimeout(this.mouseEnterTimer),null===(e=null===(t=this.popupMountNode)||void 0===t?void 0:t.parentElement)||void 0===e||e.removeChild(this.popupMountNode),this.popupMountNode=null},n.getCustomProtocols=function(){return this.props.customProtocols||[]},n.getCustomLinkRegexp=function(t){return this.props.customLinkRegexp?this.props.customLinkRegexp:t},n.register=function(){var t=this,n=this.editor;n.registerCommand(e.KEY,(function(){var e=n.selection.getSelection();e&&(t.currentSelection={range:e,position:e.toPosition()},e.isCollapsed()?t.handleHyperLinkCommand(e):n.once(c.r.PAINT,(function(){t.handleHyperLinkCommand(e)})),t.addLocalIdToRange(e))}))},n.handleHyperLinkCommand=function(t){var e=this,n=this.editor;if(this.show)this.removeLinkBackColor(),this.closePopup();else{var i=t.isCollapsed(),r=n.rectModule.getCaretRect(t.start);this.openPopup({anchorRect:this.relativeRectToScreen(r),data:{text:"",link:""},range:t,type:i?I.TYPE_CREATE:I.TYPE_MODIFY_LINK}),i||requestAnimationFrame((function(){e.addLinkBackColor()}))}},n.openPopup=function(t){var e=t.anchorRect,n=t.data,i=t.type;this.show=!0,this.popupType=i,function(t,e){_().render(s().createElement(I,t),e)}({type:i,i18n:this.props.i18n,anchorRect:e,editable:this.editor.isEditable(),data:n,onSubmit:this.handleSave,onClickDelete:this.handleClickDelete,onClickModify:this.handleClickModify,onValidLink:this.handleValidLink,onEsc:this.closePopup},this.popupMountNode)},n.closePopup=function(){var t=this;this.show&&(this.removeLinkBackColor(),this.unmountPopup()),this.show=!1,this.currentSelection=null,this.removeLocalIdToRange();var e=this.linkOperations.filter(Boolean);if(this.linkOperations=[],e.length>1){var n=e.pop();e.reduceRight((function(e,n){return t.editor.undoModule.mergeRecords(n,e),n}),n)}},n.unmountPopup=function(){var t;this.popupMountNode&&(t=this.popupMountNode,_().unmountComponentAtNode(t))},n.relativeRectToScreen=function(t){var e=this.editor.getRect("0"),n=t.left,i=t.top,r=t.bottom,o=t.right,s=t.width,a=t.height;return{left:e.left+n,top:Math.max(e.top+i,40),right:e.left+o,bottom:e.top+r,width:s,height:a}},n.handleValidLink=function(t){var e;return p.Z.isValidLink(t.trim(),null===(e=this.props)||void 0===e?void 0:e.customLinkRegexp)},n.handleSave=function(t){var e=t.text,n=t.link;n=n.trim(),(0,b.b2)(n)&&(n=""),n&&this.doInsertLink(n,e),this.closePopup()},n.handleClickDelete=function(t){var n,i=this.editor,o=t.entity.attributes,s=(0,r.f)(i.getContentState().getEntities([[e.KEY,o[e.KEY]]]),1)[0];s&&this.addLocalIdToRange(s),i.getContentState().setAttributes(this.selection,((n={})[e.KEY]="",n.removeLink="true",n),{type:R}),this.closePopup()},n.addLocalIdToRange=function(t){var e,n=this.editor.getContentState().setAttributes(t,((e={})[M]="true",e),{type:R});this.linkOperations.push(n)},n.removeLocalIdToRange=function(){var t,e=(0,r.f)(this.editor.getContentState().getEntities([[M,"true"]]),1)[0];if(e){var n=this.editor.getContentState().setAttributes(e,((t={})[M]="",t),{type:R});this.linkOperations.push(n)}},Object.defineProperty(n,"selection",{get:function(){return this.currentSelection?this.currentSelection.range:this.editor.selection.getSelection()},enumerable:!1,configurable:!0}),n.handleClickModify=function(t){this.popupType=C.TYPE_MODIFY_ALL;var n=t.entity.attributes,i=this.editor.getContentState().getEntities([[e.KEY,n[e.KEY]]]).find((function(t){return t.attributes===n}));i&&this.addLocalIdToRange(i),this.addLinkBackColor()},n.genHyperLinkAttribFromURL=function(t){var n,i=(0,T.D)(10);return(n={})[e.KEY]=JSON.stringify({href:this.completeURLProtocolWithCustom(t),linkId:i}),n.removeLink="",n},n.doInsertLink=function(t,n){var i,o,s,a,l,u=this,c=this.editor,d=this.selection,h=d.start,p=d.end,v=this.genHyperLinkAttribFromURL(t),g=c.getContentState(),y=g.getZoneState(h.zoneId);if(y){var m=y.getEntities({start:h,end:p},(function(t){return t===e.KEY})),_="";try{for(var b=(0,r.c)(m),E=b.next();!E.done;E=b.next()){var S=E.value;_+=S.text;var w=y.getEntities([[e.KEY,S.attributes[e.KEY]]]);try{for(var C=(s=void 0,(0,r.c)(w)),I=C.next();!I.done;I=C.next()){var T=I.value;this.linkOperations.push(g.setAttributes(T,((l={})[e.KEY]="",l)))}}catch(t){s={error:t}}finally{try{I&&!I.done&&(a=C.return)&&a.call(C)}finally{if(s)throw s.error}}}}catch(t){i={error:t}}finally{try{E&&!E.done&&(o=b.return)&&o.call(b)}finally{if(i)throw i.error}}if(!n&&f.e.isPointEqual(h,p)&&(n=t),n&&n!==_){var x=g.replaceText({start:h,end:p},n,v,{type:R});this.linkOperations.push(x)}else{x=g.setAttributes({start:h,end:p},v,{type:R});this.linkOperations.push(x)}p&&this.editor.once("paint",(function(){var t=u.editor.getScrollContainer(),e=p;if(n){var i=g.getZoneState(h.zoneId);if(!i)return;var r=i.pointToOffset(h);if(null!==r){var o=i.offsetToPoint(r+n.length),s=o.line,a=o.offset;e.line=s,e.offset=a}}var l=t.scrollTop||0;c.scrollTo({top:l}),c.focus(),c.selection.setSelection({start:p,end:p},!0)}))}},n.addLinkBackColor=function(){this.setLinkBackColor(!0)},n.removeLinkBackColor=function(){this.setLinkBackColor(!1)},n.setLinkBackColor=function(t){var e,n=this.editor.getContentState().setAttributes(this.selection,((e={})[k]=t?"true":"",e),{type:R});this.linkOperations.push(n)},n.serialize=function(t){var e,n,i,o,s=t.type,a=t.node,l=t.op,c=null===(i=null==l?void 0:l.attributes)||void 0===i?void 0:i.hyperlink;if(!c&&(null===(o=null==l?void 0:l.attributes)||void 0===o?void 0:o[b.in])&&(c=JSON.stringify({href:l.attributes[b.in]})),s===u.T.LEAF&&c){var d=document.createElement("a"),h=JSON.parse(c);try{for(var f=(0,r.c)(Object.entries(h)),p=f.next();!p.done;p=f.next()){var v=(0,r.f)(p.value,2),g=v[0],y=v[1];d.setAttribute(g,String(y))}}catch(t){e={error:t}}finally{try{p&&!p.done&&(n=f.return)&&n.call(f)}finally{if(e)throw e.error}}return d.setAttribute("target","_blank"),d.setAttribute("rel","noopener noreferrer"),d.appendChild(a),Object.assign(t,{node:d})}return t},n.deserialize=function(t){var e,n=t.node,i=t.deltaSet,r=t.zoneId,o=i;if(!(n instanceof HTMLElement))return o;if("a"!==n.tagName.toLowerCase())return o;var s=n.getAttribute("href")||(null===(e=n.closest(".url"))||void 0===e?void 0:e.getAttribute("data-href"));if(!s)return o;var a=this.genHyperLinkAttribFromURL(s);return o=(0,d.d)(o,r,a)},e.KEY="hyperlink",e.closeDuration=600,(0,r.d)([v.MR],e.prototype,"handleValidLink",null),(0,r.d)([v.MR],e.prototype,"handleSave",null),(0,r.d)([v.MR],e.prototype,"handleClickDelete",null),(0,r.d)([v.MR],e.prototype,"addLocalIdToRange",null),(0,r.d)([v.MR],e.prototype,"removeLocalIdToRange",null),(0,r.d)([v.MR],e.prototype,"handleClickModify",null),e}(l.S)},vsh_21411:function(t,e,n){"use strict";n.d(e,{in:function(){return o},Z7:function(){return s},b2:function(){return a}});var i=n("vsh_34170"),r=n("vsh_49814"),o=(n("vsh_37833"),"auto-url");var s=function(t,e,n){var s=new RegExp("".concat(n.source),"gi");s.lastIndex=0;for(var a,l=null,u=[],c=!1,d=new Map([["(",")"],["[","]"],["{","}"],["<",">"]]),h=null,f=t.hasLineMarker()?1:0,p=t.getModelText(),v=p.slice(f,p.endsWith("\n")?-1:p.length),g=function(){l||(l=[],u=[]);var e=a.index+f,n=a[0];(function(t,e){var n,r=_((n=(0,i.e)([],(0,i.f)(e.keys()),!1)).concat.apply(n,(0,i.e)([],(0,i.f)(e.values()),!1)));return new RegExp("[".concat(r,"]")).test(t)})(n,d)&&(n=function(t,e){for(var n=[],r=t.length,o=t,s=0;s<r;s++){var a=t[s],l=new RegExp("[".concat(_((0,i.e)([],(0,i.f)(e.values()),!1)),"]")).test(a);if(e.has(a))n.push([e.get(a),s]);else if(l){var u=n.pop();if(!u)return o=t.slice(0,s);if(a!==u[0])return o=n[0]?o=t.slice(0,n[0][1]):t.slice(0,u[1])}}n.length&&(o=t.slice(0,n[0][1]));return o}(a[0],d)),h||(h=function(){var e,n,r=0,o=[];try{for(var s=(0,i.c)(t),a=s.next();!a.done;a=s.next()){var l=a.value;if(l.insert&&"string"==typeof l.insert&&"\n"!==l.insert){var u=l.insert.length;r+=u;var c=t.getAttributes(r-u,r).find((function(t){var e=(0,i.f)(t,2),n=e[0];return e[1],n.includes("mention-token")}));c?o.push([r-u,r]):o.push(null)}else o.push(null)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return o.filter(Boolean)}());var r=h.filter((function(t){return null!==t&&(e<t[0]&&e+n.length>=t[0])}));if(r.length){var o=r[0][0];n=n.slice(0,o-e)}if(h.some((function(t){return null!==t&&(e>=t[0]&&e+n.length<=t[1])})))return"continue";l.push([e,n]),u.push(e,e+n.length)};a=s.exec(v);)g();if(l){var y,m=function(t,e){var n=0,i=0;if(e)for(;n<e.length&&0===e[n];)n++;return function r(o,s){if(!e||n>=e.length)t(o,s),i+=o.length;else{var a=e[n]-i,l=o.length;if(a>=l)t(o,s),i+=o.length,a===l&&n++;else{var u=o;if(a>0){var c=u.substring(0,a);t(c,s),i+=a}n++,r(u.substring(a),s)}}}}((y=0,function(t,n){var i;void 0===n&&(n={}),n.list&&/code/.test(n.list)&&(c=!0);var a=t.length,u=Object.keys(n),d=u.find((function(t){return"hyperlink"===t||"auto-url"===t})),h=u.find((function(t){return"removeLink"===t})),f=function(t,e,n,i){if(!l)return!1;for(var r=0;r<l.length;r++){var o=l[r];if(t>=o[0]&&t<o[0]+o[1].length){if(!n){if(i){s.lastIndex=0;var a=s.exec(o[1].substring(e.length));return a?l.splice(r,1,[o[0]+e.length,a[0]]):l.splice(r,1),o[1]}return o[1]}l.splice(r,1),r--}}return!1}(y,t,d,n.removeLink),p=u.find((function(t){return"dataMetaBlockProps"===t||t.startsWith("mention")||"mention"===t}));if(!f||c||h||p)e.retain(a);else{var v=o;e.retain(a,((i={})[v]=r.Z.completeURLProtocol(f),i))}y+=a}),u);t.getOps().forEach((function(t){return m(t.insert,t.attributes||{})}))}function _(t){return t.map((function(t){return"\\"+t})).join("")}},a=function(t){return void 0===t&&(t=""),/^data:/.test(t)}},vsh_12738:function(t,e,n){"use strict";n.d(e,{W:function(){return v}});var i=n("vsh_34170"),r=(n("vsh_72862"),n("vsh_40229")),o=(n("vsh_98125"),n("vsh_1828")),s=window.sessionStorage.getItem("__ENTER_FROM__"),a=window.User&&window.User.userAgent||navigator.userAgent||"",l=o.Z.getParser(a),u={isFeishu:!1,isLark:!1,isLarkPcTab:!1,isLarkWindow:!1,isDocs:!1,isDocsSDK:!1,isAndroidSDK:!1,isIOSSDK:!1,isMobileSDK:!1,isFeed:!1,isIphoneX:!1,isIPad:!1,isMobile:!1,isMac:!1,isWindows:!1,isLinux:!1,isSafari:!1,isIE:!1,isSougou:!1,isIOS:!1,isAndroid:!1,isQQ:!1,isX5:!1,is360:!1,is360Fast:!1,isUc:!1,isBaiDu:!1,isLB:!1,oldIE:!1,modernIE:!1,kernel:"",isLarkTab:!1,isOldLarkTab:!1,isEdge:!1,isFF:!1,isChrome:!1,isWebKit:!1,isBytedanceApp:!1,isOpendoc:!1,isIPhoneSeries:function(){return!1},isIOSBelow12:function(){return!1},getChromeVersion:function(){return null},isPrimaryChrome:!1,isOpera:!1,is2345:!1,isMaxthon:!1,isTheWorld:!1,isH5:!1};if(u.isFeishu=/feishu/i.test(a),u.isLark=u.isFeishu||/lark/i.test(a),u.isLarkPcTab=u.isLark&&/TYPE\/PC_TAB/i.test(a),u.isLarkWindow=u.isLark&&"lark.window"===s,u.isDocs=/Docs/i.test(a),u.isDocsSDK=u.isLark&&u.isDocs,u.isAndroidSDK=/DocEditorSDk/i.test(a),u.isIOSSDK=/DocsSDK/i.test(a),u.isMobileSDK=u.isAndroidSDK||u.isIOSSDK,u.isFeed=/Feed/i.test(a)||/lark=1/.test(location.search)||/sourceType=feed/.test(location.search),u.isIphoneX=h("X")||!1,u.isIPad=/iPad/i.test(a),u.isMobile=l.getPlatformType(!0).includes("mobile"),u.isMac=l.getOSName(!0).includes("macos"),u.isWindows=l.getOSName(!0).includes("windows"),u.isLinux=l.getOSName(!0).includes("linux"),u.isSafari=l.getBrowserName(!0).includes("safari"),u.isIE=l.getBrowserName(!0).includes("internet explorer"),u.isIOS=!!a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),u.isAndroid=a.indexOf("Android")>-1||a.indexOf("Adr")>-1,u.isQQ=/QQBrowser/i.test(a),u.isX5=/MQQBrowser/i.test(a),u.is360=/360SE/i.test(a),u.is360Fast=/360EE/i.test(a),u.isUc=/UBrowser/i.test(a),u.isBaiDu=/BIDUBrowser/i.test(a),u.is2345=/2345Explorer/i.test(a),u.isMaxthon=/Maxthon/i.test(a),u.isTheWorld=/TheWorld/i.test(a),u.isLB=/LBBROWSER/i.test(a),u.isEdge=/Edge/i.test(a),u.isFF=/Firefox/i.test(a),u.isOpera=/OPR/i.test(a),u.isWebKit=/AppleWebKit/i.test(a),u.isChrome=l.getBrowserName(!0).includes("chrome"),u.isPrimaryChrome=u.isChrome&&!u.isOpera&&!u.isLB&&!u.isUc&&!u.isBaiDu&&!u.is360&&!u.is360Fast&&!u.isQQ&&!u.isSougou&&!u.isEdge&&!u.is2345&&!u.isTheWorld&&!u.isMaxthon,u.isOpendoc=/opendoc=(true|1)/.test((location.search||"").toLowerCase())||/^\/component\//.test(location.pathname||""),u.isIE){var c=parseInt(String(l.getBrowserVersion()),10);u.oldIE=c<11,u.modernIE=c>=11}u.kernel=["msie","webkit","blink","gecko","msedge","tablet","mobile"].find((function(t){return l.getEngineName().toLowerCase().includes(t)})),u.isLarkTab=/from\/(old_)?lark_tab/i.test(a),u.isOldLarkTab=/from\/old_lark_tab/i.test(a);var d=u.isLark||u.isDocs;function h(t){var e=new RegExp("(iPhone\\s".concat(t,")"));return!!navigator.userAgent.match(e)}u.isBytedanceApp=d,u.isIPhoneSeries=h,u.isIOSBelow12=function(){var t=function(){if(function(){var t=navigator.userAgent;return t.indexOf("iPhone")>0||t.indexOf("iPad")>0||t.indexOf("iPhone")>0}()){var t=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/);return t?{major:+t[1],minor:+t[2]}:null}return null}();return!!t&&t.major<12},u.getChromeVersion=function(){var t=navigator.userAgent.match(/Chrome\/([\d.]+)/i);return t&&t[1]?t[1]:null},u.isH5=u.isMobile&&!u.isBytedanceApp||u.isOpendoc&&u.isMobile;var f=u,p=(n("vsh_37833"),"");f.isMac||f.isIPad?p="mac":f.isWindows?p="windows":f.isLinux&&(p="linux");var v=function(t){function e(e){var n=e.editor,i=e.shortcutsMap,r=t.call(this)||this;return r.name="KeyboardShortcuts",r.handleKeydown=function(t){var e=t.evt,n=r.getHotKeyName(e);if(n){var i=n.key,o=n.value;return r.editor.execCommand(i,o?{value:o}:void 0),e.preventDefault(),!0}return!1},r.editor=n,r.shortcutToCommandMap=r.normalizeShortCutsMap(i),r.editor.on("keydown",r.handleKeydown),r}(0,i.b)(e,t);var n=e.prototype;return n.getShortCutID=function(t){var e=t.metaKey,n=t.altKey,i=t.shiftKey,r=t.ctrlKey,o=t.keyCode;return[e?"meta":"",n?"alt":"",i?"shift":"",r?"ctrl":"",null!=o?o:""].filter(Boolean).join("-")},n.normalizeShortCutsMap=function(t){var e,n,r,o,s={};try{for(var a=(0,i.c)(t),l=a.next();!l.done;l=a.next()){var u=l.value,c=u.key,d=u.value,h=u.shortcut,f=void 0;f=Array.isArray(h)?h:[h];try{for(var v=(r=void 0,(0,i.c)(f)),g=v.next();!g.done;g=v.next()){var y=g.value[p];if(y)s[this.getShortCutID(y)]={key:c,value:d}}}catch(t){r={error:t}}finally{try{g&&!g.done&&(o=v.return)&&o.call(v)}finally{if(r)throw r.error}}}}catch(t){e={error:t}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return s},n.getHotKeyName=function(t){var e=this.getShortCutID(t);return this.shortcutToCommandMap[e]},e}(r.S)},vsh_22201:function(t,e,n){"use strict";var i;n.d(e,{Ri:function(){return o},Q2:function(){return r},wy:function(){return i},oT:function(){return s},eH:function(){return a}}),function(t){t[t.USER=0]="USER",t[t.DOC=1]="DOC",t[t.SHEET=3]="SHEET",t[t.BITABLE=8]="BITABLE",t[t.MINDNOTE=11]="MINDNOTE",t[t.BOX=12]="BOX",t[t.WIKI=16]="WIKI",t[t.DOCX=22]="DOCX"}(i||(i={}));var r="AT_USER_BLOCK",o="mentionBlock",s=["@","＠"],a=["Escape","ArrowLeft","ArrowRight"]},vsh_16470:function(t,e,n){"use strict";n.d(e,{p:function(){return c}});var i=n("vsh_34170"),r=(n("vsh_72862"),n("vsh_34482")),o=(n("vsh_98125"),n("vsh_57916")),s=n("vsh_31834");function a(t,e,n){var i=n.value;n.value=function(t){var e=t.children;return t.attributes.lmkr?e:i.apply(this,[t])}}n("vsh_37833");var l=n("vsh_22201"),u=n("vsh_33378"),c=function(){function t(t){var e=this;this.name="Mention",this.offset=-1,this.current=null,this.popupMountNode=null,this.attributesAllowList=[],this.handleContentChange=function(t){var n,r,o,s;if(e.mentionKeyboard.maybeIsAt&&!e.mentionSuggest.suggest){e.mentionKeyboard.maybeIsAt=!1;var a=t.deltaSet;if(!(Object.keys(a.deltas).length>1)){var u=!1;try{for(var c=(0,i.c)(Object.values(a.deltas)),d=c.next();!d.done;d=c.next()){var h=d.value;try{for(var f=(o=void 0,(0,i.c)(h.ops)),p=f.next();!p.done;p=f.next()){var v=p.value;if(!v.retain&&!v.delete){if("string"!=typeof v.insert)return;1===v.insert.length&&l.oT.includes(v.insert)&&(u=!0)}}}catch(t){o={error:t}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}}}catch(t){n={error:t}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}u&&e.mentionSuggest.openSuggest()}}},this.props=t;var n=t.editor,r=t.getPopupContainer,o=t.MentionSuggest,s=t.MentionKeyboard,a=t.attributesAllowList;a&&a.length&&(this.attributesAllowList=a),this.getPopupContainer=r,n.on("contentchange",this.handleContentChange),this.mentionSuggest=new o({editor:n,mentionPlugin:this,onSuggest:t.onSuggest}),this.mentionKeyboard=new s({editor:n,mentionPlugin:this})}var e=t.prototype;return e.render=function(t){var e=t.lineState,n=t.children,i=t.attributes,r=t.op,o=this.formatAttributesFromEditor(i,r.insert||"");if(o)switch(o.blockId&&(t.key=o.blockId),o.blockType){case l.Q2:var s=o.props.data.user;return this.renderAt(e.getZoneId(),i,{title:s["".concat(this.props.lang,"_name")]||s.name||s.cn_name||s.en_name,enName:s.en_name,type:l.wy.USER,token:s.id,url:"",isReply:s.isReply,avatarUrl:s.avatar_url},s);case l.Ri:var a=o.props,u=a.title,c=a.token,d=a.link,h=a.type,f=a.iconInfo;return this.renderAt(e.getZoneId(),i,{title:u,token:c,url:d,type:h,iconInfo:f},o.props)}return n},e.handleOpenSuggest=function(){var t=this.props.editor,e=t.selection.getSelection(),n=e.toPosition(),i=n.start,o=n.len,s=new r.I({zoneId:e.start.zoneId}).retain(i).delete(o).insert("@");t.getContentState().apply(s),this.mentionSuggest.openSuggest(),this.mentionKeyboard.atKeyPressed=!1,this.offset=e.start.offset+1},e.getExtendedAttribs=function(){var t=this.props,e=t.editor,n=t.attributesAllowList;if(!n||!n.length)return{};var i=(0,s.cB)(e),r={};for(var o in i)n.includes(o)&&(r[o]=i[o]);return r},e.applyMention=function(t,e){var n,o,s,a=this.props.editor,u=a.selection.getSelection(),c=u.start,d=c.zoneId,h=a.getContentState(),f=null===(s=h.getZoneState(d))||void 0===s?void 0:s.getLine(c.line);if(f){var p=f.getModelText().slice(0,c.offset),v=f.getOffset().start,g=-1;try{for(var y=(0,i.c)(l.oT),m=y.next();!m.done;m=y.next()){var _=m.value;g=Math.max(g,p.lastIndexOf(_))}}catch(t){n={error:t}}finally{try{m&&!m.done&&(o=y.return)&&o.call(y)}finally{if(n)throw n.error}}var b=this.formatAttributesToEditor(t);if(g>-1){var E=v+g,S=this.getExtendedAttribs(),w=new r.I({zoneId:d}).retain(E).delete(u.toPosition().start-E).insert(null!=e?e:" ",(0,i.g)((0,i.g)({},b),S));h.apply(w)}}},e.destroy=function(){var t=this.props.editor;this.mentionSuggest.popupMountNode=null,this.mentionSuggest.destroy(),t.off("contentchange",this.handleContentChange),this.mentionKeyboard.destroy()},(0,i.d)([(0,o.gv)(500),a],t.prototype,"render",null),(0,i.d)([u.W],t.prototype,"handleOpenSuggest",null),t}()},vsh_78213:function(t,e,n){"use strict";n.d(e,{m:function(){return a}});n("vsh_72862");var i=n("vsh_93919"),r=n("vsh_78224"),o=n("vsh_51404"),s=(n("vsh_98125"),n("vsh_22201")),a=function(){function t(t){var e=this;this.props=t,this.atKeyPressed=!1,this.maybeIsAt=!1,this.handleKeyDown=function(t){var n=e.props,i=n.editor,r=n.mentionPlugin.mentionSuggest;e.isInIME(t)&&(e.maybeIsAt=!0),r.suggest&&("Escape"===t.key&&(t.stopPropagation(),t.preventEvent(),t.preventDefault(),t.stopEvent()),s.eH.includes(t.key)&&(r.closeSuggest(),i.selection.focus()))},this.handleInput=function(t){var n=e.props.mentionPlugin.mentionSuggest,r=t.data||"";s.oT.includes(r)&&!n.suggest?i.Xh.safari?setTimeout((function(){n.openSuggest()})):n.openSuggest():e.props.mentionPlugin.mentionSuggest.updateSuggest()},this.handleSelectionChange=function(){var t=e.props.mentionPlugin;if(t.mentionSuggest.suggest){var n=e.props.editor,i=n.selection.getSelection().start;if(i.offset<t.offset)return t.mentionSuggest.closeSuggest();var r=n.getContentState().getActiveZone().getLine(i.line);t.current.compare(r)===o.V.UNEQUAL&&t.mentionSuggest.closeSuggest()}};var n=t.editor,a=t.mentionPlugin;n.on(r.r.KEYDOWN,this.handleKeyDown),n.on(r.r.KEYUP,a.mentionSuggest.updateSuggest),n.on(r.r.INPUT,this.handleInput),n.on(r.r.SELECTION_CHANGE,this.handleSelectionChange)}var e=t.prototype;return e.isInIME=function(t){return 229===t.keyCode},e.destroy=function(){var t=this.props,e=t.editor,n=t.mentionPlugin.mentionSuggest;n.closeSuggest(),e.off(r.r.KEYDOWN,this.handleKeyDown),e.off(r.r.SELECTION_CHANGE,this.handleSelectionChange),e.off(r.r.KEYUP,n.updateSuggest),e.off(r.r.INPUT,this.handleInput)},t}()},vsh_98432:function(t,e,n){"use strict";n.d(e,{n:function(){return o}});var i=n("vsh_34170"),r=n("vsh_33378"),o=function(){function t(t){var e=this;this.props=t,this.leaveDuration=600,this.suggest=null,this.popupMountNode=null,this.updateSuggest=function(){var t=e.props,n=t.editor,i=t.mentionPlugin;if(e.suggest){var r=n.selection.getSelection().start;if(r.offset<i.offset||-1===i.offset)return e.closeSuggest();e.suggest=e.props.onSuggest({query:e.getQuery(),onConfirm:e.handleConfirm,anchorRect:n.rectModule.getCaretRect(r),mountNode:e.popupMountNode})}},this.popupMountNode=document.createElement("div"),this.popupMountNode.setAttribute("id","@editor-kit-mention-container"),this.popupMountNode.style.position="absolute",this.popupMountNode.style.top="0px",this.popupMountNode.style.left="0px";var n,i=this.props.mentionPlugin;(null==(n=i.getPopupContainer?i.getPopupContainer():document.body)?void 0:n.firstChild)?n.insertBefore(this.popupMountNode,n.firstChild):n.append(this.popupMountNode)}var e=t.prototype;return e.openSuggest=function(){var t=this.props,e=t.editor,n=t.mentionPlugin;n.mentionKeyboard.atKeyPressed=!0,e.flushInput();var i=e.selection.getSelection().start,r=e.rectModule.getCaretRect(i);this.suggest=this.props.onSuggest({query:"",onConfirm:this.handleConfirm,anchorRect:this.relativeRectToScreen(r),mountNode:this.popupMountNode}),n.mentionKeyboard.atKeyPressed=!1,n.offset=i.offset,n.current=e.getContentState().getActiveZone().getLine(i.line)},e.closeSuggest=function(){var t,e=this.props.mentionPlugin;null===(t=this.suggest)||void 0===t||t.close(this.popupMountNode),this.suggest=null,e.offset=-1},e.getQuery=function(){var t,e=this.props,n=e.editor,i=e.mentionPlugin,r=n.selection.getSelection(),o=r.start,s=r.end,a=((null===(t=n.getContentState().getActiveZone().getLine(o.line))||void 0===t?void 0:t.getModelText())||"").slice(i.offset,s.offset);return n.getStatus("isComposing")&&(a=a.replace(/'/g,"")),a},e.relativeRectToScreen=function(t){var e=this.props.editor.getScrollContainer(),n=e.getBoundingClientRect(),i=e.scrollTop,r=e.scrollLeft,o=t.left,s=t.top,a=t.bottom,l=t.right,u=t.width,c=t.height;return{left:n.left+o-r,top:n.top+s-i,right:n.left+l-r,bottom:n.top+a-i,width:u,height:c}},e.handleConfirm=function(t,e){var n=this.props.mentionPlugin,i=n.generateData(t);n.applyMention(i,e),this.closeSuggest()},e.destroy=function(){var t;this.closeSuggest(),null===(t=this.popupMountNode)||void 0===t||t.remove()},(0,i.d)([r.W],t.prototype,"handleConfirm",null),t}()},vsh_18403:function(t,e,n){"use strict";n.d(e,{i:function(){return L}});var i=n("vsh_34170"),r=n("vsh_98125"),o=n.n(r),s=(n("vsh_72862"),n("vsh_40229")),a=n("vsh_97754"),l=n.n(a),u=n("vsh_78898"),c=n.n(u),d=function(){function t(){var t=this;this.pluginMap={},this.destroy=function(){for(var e in t.pluginMap)t.pluginMap[e].destroy();t.pluginMap={}}}var e=t.prototype;return e.registry=function(t){this.pluginMap[t.name]=t},e.unregistered=function(t){delete this.pluginMap[t]},Object.defineProperty(e,"buttons",{get:function(){var t=[];for(var e in this.pluginMap)t=t.concat(this.pluginMap[e].buttons);return t},enumerable:!1,configurable:!0}),t}(),h=function(t,e){var n=function(t,e){var n=e||t.selection.getSelection(),i=t.rectModule.getRangeRect(n),r=t.getRect();return Object.assign({},i,{left:r.left+i.left,top:r.top+i.top,bottom:r.top+i.bottom,right:r.left+i.right})}(t,e),i=function(t){var e,n=null===(e=t.scrollModule)||void 0===e?void 0:e.getScroller();return n instanceof Element?{x:n.scrollLeft,y:n.scrollTop}:{x:(null==n?void 0:n.scrollX)||0,y:(null==n?void 0:n.scrollY)||0}}(t),r=i.x,o=i.y;return Object.assign({},n,{left:n.left-r,top:n.top-o})},f={position:"fixed",borderRadius:"6px",overflow:"visible",boxShadow:"1px 1px #333",opacity:0,zIndex:20,transform:"translate3d(0px, 0px, 0px)",WebkitTransform:"translate3d(0px, 0px, 0px)",transition:"opacity 0.3s 0.5s ease-in, transform 0.3s 0.5s ease-in-out",WebkitTransition:"opacity 0.3s 0.5s ease-in, transform 0.3s 0.5s ease-in-out"},p={opacity:1},v={transform:"translate3d(0px, -5px, 0px)",WebkitTransform:"translate3d(0px, -5px, 0px)"},g={transform:"translate3d(0px, 5px, 0px)",WebkitTransform:"translate3d(0px, 5px, 0px)"},y={display:"flex",position:"relative",zIndex:2},m={padding:"6px 20px",lineHeight:"24px",fontSize:"14px",background:"#000",color:"#fff",textShadow:"0 0 1px #333",borderRight:"1px solid #666"},_={paddingLeft:"24px",borderRadius:"6px 0 0 6px"},b={paddingRight:"24px",borderRight:0,borderRadius:"0 6px 6px 0"},E={color:"#999"},S={position:"absolute",width:"10px",height:"10px",left:"40%",transform:"rotate(45deg)",WebkitTransform:"rotate(45deg)",background:"#000",boxShadow:"1px 1px #333"},w={bottom:"-5px"},C={top:"-5px"};function I(t){var e,n,r=t.split(" "),o={};try{for(var s=(0,i.c)(r),a=s.next();!a.done;a=s.next()){switch(a.value){case"container":o=Object.assign(o,f);break;case"visible":o=Object.assign(o,p);break;case"buttons":o=Object.assign(o,y);break;case"button":o=Object.assign(o,m);break;case"arrow":o=Object.assign(o,S);break;case"top":r.includes("container")&&r.includes("visible")&&(o=Object.assign(o,v)),r.includes("arrow")&&(o=Object.assign(o,w));break;case"bottom":r.includes("container")&&r.includes("visible")&&(o=Object.assign(o,g)),r.includes("arrow")&&(o=Object.assign(o,C));break;case"first":r.includes("button")&&(o=Object.assign(o,_));break;case"last":r.includes("button")&&(o=Object.assign(o,b));break;case"disabled":r.includes("button")&&(o=Object.assign(o,E))}}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return o}var T=function(t){var e=t.id,n=t.title,i=t.onTap,s=t.disabled,a=t.idx,u=void 0===a?0:a,c=t.length,d=void 0===c?0:c,h=(0,r.useRef)(null),f=function(t){s||(t.preventDefault(),t.stopPropagation(),i())},p=function(t){t.stopPropagation()};return(0,r.useEffect)((function(){return h.current?(h.current.addEventListener("pointerdown",p),h.current.addEventListener("mousedown",f),h.current.addEventListener("touchstart",p),function(){var t,e,n;null===(t=h.current)||void 0===t||t.removeEventListener("pointerdown",p),null===(e=h.current)||void 0===e||e.removeEventListener("mousedown",f),null===(n=h.current)||void 0===n||n.removeEventListener("touchstart",p)}):function(){}}),[]),o().createElement("div",{key:e,ref:h,className:l()("button",{disabled:s}),style:I(l()("button",{disabled:s,first:0===u,last:u===d-1}))},n)},x=function(t){var e,n,s,a={type:"top",left:t.minMargin,top:t.minMargin,maxWidth:"unset",arrowLeft:"calc(50% - 5px)"},u=(0,i.f)((0,r.useState)(a),2),c=u[0],d=u[1],f=(0,i.f)((0,r.useState)(!1),2),p=f[0],v=f[1],g=(0,r.useRef)(null);return(0,r.useEffect)((function(){if(t.pattern)d(t.pattern),v(!0);else if(g.current){var e=h(t.editor),n=function(){if(t.viewport){var e=t.viewport.getBoundingClientRect();return Object.assign({},e,{left:0,top:0,right:e.right-e.left,bottom:e.bottom-e.top})}return{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight,width:window.innerWidth,height:window.innerHeight}}(),r=g.current.getBoundingClientRect(),o=(0,i.g)({},a);o.maxWidth=n.width-2*t.minMargin;var s=e.width/2+e.left,l=r.width/2,u=s-l,c=s+l;c>n.right-t.minMargin?(o.left=n.right-t.minMargin-r.width,o.arrowLeft=l-5+Math.abs(n.right-t.minMargin-c)):u<n.left+t.minMargin?(o.left=t.minMargin,o.arrowLeft=l-5-Math.abs(n.left+t.minMargin-u)):(o.left=u,o.arrowLeft=l-5);var f=r.height+10;e.top-n.top<f+5?n.bottom-e.bottom>f+5?(o.type="bottom",o.top=e.bottom+10):(o.type="top",o.top=10):(o.type="top",o.top=e.top-f),d(o),v(!0)}}),[t.buttons,t.editor,t.viewport]),o().createElement("div",{ref:g,className:l()("container",(e={},e[c.type]=!0,e.visible=p,e)),style:Object.assign({},I(l()("container",(n={},n[c.type]=!0,n.visible=p,n))),{maxWidth:c.maxWidth,left:c.left,top:c.top})},o().createElement("div",{className:"arrow",style:Object.assign({},I(l()("arrow",(s={},s[c.type]=!0,s))),{left:c.arrowLeft})}),o().createElement("div",{className:"buttons",style:I("buttons")},t.buttons.map((function(e,n){var i=e.id,r=e.title,s=e.disabled,a=e.onTap;return o().createElement(T,{idx:n,length:t.buttons.length,key:i,id:i,title:r,disabled:s,onTap:a})}))))},k=function(){function t(t){var e=this;this.show=function(t){e.node&&!e.isVisible&&c().render(o().createElement(x,{editor:e.editor,buttons:e.buttons,viewport:e.viewportNode,minMargin:e.minMargin,pattern:t}),e.node)},this.hide=function(){e.node&&e.isVisible&&c().unmountComponentAtNode(e.node)},this.destroy=function(){e.node&&e.containerNode.removeChild(e.node)},this.initial=function(t){e.node=document.createElement("div"),e.node.style.position="fixed",e.node.style.left="0",e.node.style.top="0",e.node.style.width="0",e.node.style.height="0",e.node.style.userSelect="none",e.node.style.zIndex=String(t),e.containerNode.appendChild(e.node)},this.editor=t.editor,this.buttons=t.buttons,this.containerNode=t.containerNode,this.viewportNode=t.viewportNode,this.minMargin=t.minMargin,this.initial(t.zIndex)}var e=t.prototype;return Object.defineProperty(e,"isVisible",{get:function(){var t;return!!(null===(t=this.node)||void 0===t?void 0:t.innerHTML)},enumerable:!1,configurable:!0}),t}(),M=function(t){var e=this;this.destroy=function(){e.unbindEvents(),e.destroyDelayShowTimer(),e.isSelectionChanged=!1,e.selectionChangedTime=0,e.isTouchActive=!1},this.selectionChangedTime=0,this.delayShowTimer=0,this.bindEvents=function(){e.editor.on("selectionchange",e.handleSelectionChange),e.editor.on("click",e.handleEditorClick),e.editor.on("touchstart",e.handleTouchStart),e.editor.on("touchend",e.handleTouchEnd),e.editor.on("contextmenu",e.handleContextMenu),e.editor.on("keydown",e.handleKeydown),e.body.addEventListener("click",e.handleBodyClick),e.body.addEventListener("touchend",e.handleBodyTouchEnd),window.addEventListener("blur",e.hanldeWindowBlur)},this.unbindEvents=function(){e.editor.off("selectionchange",e.handleSelectionChange),e.editor.off("click",e.handleEditorClick),e.editor.off("touchstart",e.handleTouchStart),e.editor.off("touchend",e.handleTouchEnd),e.editor.off("contextmenu",e.handleContextMenu),e.editor.off("keydown",e.handleKeydown),e.body.removeEventListener("click",e.handleBodyClick),e.body.removeEventListener("touchend",e.handleBodyTouchEnd),window.removeEventListener("blur",e.hanldeWindowBlur)},this.hanldeWindowBlur=function(){e.hide(),e.destroyDelayShowTimer()},this.handleEditorClick=function(t){var e=function(t){for(var e=t;e.nativeEvent;)e=e.nativeEvent;return e}(t);e.stopPropagation()},this.handleSelectionChange=function(){e.selectionChangedTime=Date.now(),e.isSelectionChanged=!0,e.destroyDelayShowTimer()},this.handleTouchStart=function(){e.isTouchActive=!0,e.hide(),e.isSelectionChanged=!1;var t=Date.now();t>e.selectionChangedTime&&t-e.selectionChangedTime<100&&(e.isSelectionChanged=!0)},this.handleTouchEnd=function(){var t=e.editor.selection.getSelection().isCollapsed();!t&&e.isSelectionChanged?e.show():t&&!e.isSelectionChanged?e.createDelayShowTimer():e.hide(),e.selectionChangedTime=0,e.isSelectionChanged=!1,e.isTouchActive=!1},this.handleContextMenu=function(){e.show()},this.handleKeydown=function(){e.hide()},this.handleBodyClick=function(){e.isTouchActive||e.hide()},this.handleBodyTouchEnd=function(){e.isTouchActive&&e.handleTouchEnd()},this.createDelayShowTimer=function(){e.delayShowTimer=window.setTimeout(e.show,100)},this.destroyDelayShowTimer=function(){clearTimeout(e.delayShowTimer),e.delayShowTimer=0},this.show=function(){e.context.onShow()},this.hide=function(){e.context.onHide()},this.editor=t.editor,this.context=t.context,this.body=t.bodyNode,this.bindEvents()},R=n("vsh_34482"),P=function(){function t(t){this._id=t.id,this._title=t.title,this._onTap=t.onTap,this.disabled=t.disabled}var e=t.prototype;return Object.defineProperty(e,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e,"title",{get:function(){return this._title},enumerable:!1,configurable:!0}),Object.defineProperty(e,"onTap",{get:function(){return this._onTap},enumerable:!1,configurable:!0}),t}(),O=function(){function t(t){var e,n,r,o=this;this.name="clipboard",this.destroy=function(){o.editor.off("copy",o.handleCopyEvent),o.editor.off("cut",o.handleCutEvent)},this.readClipboard=function(){return(0,i._)(o,void 0,void 0,(function(){var t,e,n,r,o,s,a,l,u,c,d,h,f,p,v,g;return(0,i.a)(this,(function(y){switch(y.label){case 0:t=new DataTransfer,y.label=1;case 1:return y.trys.push([1,18,,19]),[4,navigator.clipboard.read()];case 2:e=y.sent(),y.label=3;case 3:y.trys.push([3,15,16,17]),n=(0,i.c)(e),r=n.next(),y.label=4;case 4:if(r.done)return[3,14];o=r.value,y.label=5;case 5:y.trys.push([5,11,12,13]),v=void 0,s=(0,i.c)(o.types),a=s.next(),y.label=6;case 6:return a.done?[3,10]:(l=a.value,[4,o.getType(l)]);case 7:return u=y.sent(),["text/html","text/plain"].includes(l)?[4,u.text()]:[3,9];case 8:c=y.sent(),t.setData(l,c),y.label=9;case 9:return a=s.next(),[3,6];case 10:return[3,13];case 11:return d=y.sent(),v={error:d},[3,13];case 12:try{a&&!a.done&&(g=s.return)&&g.call(s)}finally{if(v)throw v.error}return[7];case 13:return r=n.next(),[3,4];case 14:return[3,17];case 15:return h=y.sent(),f={error:h},[3,17];case 16:try{r&&!r.done&&(p=n.return)&&p.call(n)}finally{if(f)throw f.error}return[7];case 17:return[3,19];case 18:return y.sent(),[3,19];case 19:return[2,t]}}))}))},this.onCopyButtonTap=function(){return(0,i._)(o,void 0,void 0,(function(){var t;return(0,i.a)(this,(function(e){return t=this.editor.selection.getSelection(),this.editor.clipboard.copyRange(t),this.hide(),[2]}))}))},this.onCutButtonTap=function(){return(0,i._)(o,void 0,void 0,(function(){var t;return(0,i.a)(this,(function(e){return t=this.editor.selection.getSelection(),this.editor.clipboard.cutRange(t),this.hide(),[2]}))}))},this.onPasteButtonTap=function(){return(0,i._)(o,void 0,void 0,(function(){var t,e,n,r,o,s,a,l,u,c,d,h;return(0,i.a)(this,(function(i){switch(i.label){case 0:return[4,this.readClipboard()];case 1:return(t=i.sent()).items.length?(e=new ClipboardEvent("paste",{clipboardData:t}),this.editor.clipboard.onPaste(e)):this.data&&(n=this.editor.selection.getSelection(),r=n.toPosition(),o=r.start,s=r.len,a=new R.I({zoneId:r.zoneId}),l=this.editor.getContentState(),u=null===(h=l.getZoneState(r.zoneId))||void 0===h?void 0:h.getLine(n.start.line),c=u?{zoneId:r.zoneId,deltaSet:this.data,lineState:u,isInternalPaste:!0,event:new ClipboardEvent("paste"),preventDefault:function(){}}:void 0,this.editor.callAll("editorWillPaste",c),(d=null==c?void 0:c.deltaSet.get(r.zoneId))&&c&&this.editor.getContentState().apply(a.retain(o).delete(s).concat(d),{type:"paste"})),this.hide(),[2]}}))}))},this.handleCopyEvent=function(){var t=o.editor.selection.getSelection();o.data=o.editor.clipboard.slice(t)},this.handleCutEvent=function(){var t=o.editor.selection.getSelection();o.data=o.editor.clipboard.slice(t),o.editor.selection.setSelection({start:t.start,end:t.start}),o.editor.focus()},this.hide=t.hide,this.editor=t.editor,this.globalDataKey=t.globalDataKey,this.cutButton=new P({id:"cut",title:(null===(e=t.buttonsTitle)||void 0===e?void 0:e.cut)||"剪切",onTap:this.onCutButtonTap}),this.copyButton=new P({id:"copy",title:(null===(n=t.buttonsTitle)||void 0===n?void 0:n.copy)||"复制",onTap:this.onCopyButtonTap}),this.pasteButton=new P({id:"paste",title:(null===(r=t.buttonsTitle)||void 0===r?void 0:r.paste)||"粘贴",onTap:this.onPasteButtonTap}),this.editor.on("copy",this.handleCopyEvent),this.editor.on("cut",this.handleCutEvent)}var e=t.prototype;return Object.defineProperty(e,"buttons",{get:function(){return[this.cutButton,this.copyButton,this.pasteButton]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"data",{get:function(){return this.globalDataKey?window[this.globalDataKey]:this._data},set:function(t){this.globalDataKey&&(window[this.globalDataKey]=t),this._data=t},enumerable:!1,configurable:!0}),t}(),L=function(t){function e(e){var n,r,o,s=t.call(this)||this;if(s.name="TooltipMenu",s.destroy=function(){s.pluginManager.destroy(),s.container.destroy(),s.monitor.destroy()},s.show=function(t){s.container.show(t)},s.hide=function(){s.container.hide()},s.editor=e.editor,s.pluginManager=new d,null===(o=e.plugins)||void 0===o?void 0:o.length)try{for(var a=(0,i.c)(e.plugins),l=a.next();!l.done;l=a.next()){var u=l.value;s.pluginManager.registry(u)}}catch(t){n={error:t}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}else{var c=new O({editor:s.editor,hide:s.hide,globalDataKey:e.globalClipboardDataKey,buttonsTitle:e.clipboardButtonsTitle});s.pluginManager.registry(c)}return s.container=new k({editor:s.editor,buttons:s.pluginManager.buttons,viewportNode:e.viewport,containerNode:e.container||document.body,minMargin:e.minMargin||10,zIndex:e.zIndex||220}),s.monitor=new M({editor:s.editor,bodyNode:e.body||document.body,context:{onShow:s.show,onHide:s.hide}}),s}return(0,i.b)(e,t),e}(s.S)},vsh_34170:function(t,e,n){"use strict";n.d(e,{_:function(){return l},a:function(){return u},b:function(){return o},c:function(){return c},d:function(){return a},e:function(){return h},f:function(){return d},g:function(){return s}});var i=n("vsh_65498"),r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return s=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},s.apply(this,arguments)};function a(t,e,n,r){var o,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":(0,i.Z)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(a=(s<3?o(a):s>3?o(e,n,a):o(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a}function l(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))}function u(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function c(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function h(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}},vsh_32852:function(t,e,n){"use strict";n.d(e,{_s:function(){return a}});var i=n("vsh_34170");var r,o,s={};!function(t){t.INLINE="inline",t.CARD="card",t.PREVIEW="preview"}(r||(r={})),function(t){t.BLOCK="block",t.INLINE="inline"}(o||(o={}));var a=function(t){var e=t.blockType,n=t.initData,a=t.props,l=t.depLoading;if(s[e]&&a&&!a.viewType){var u=s[e];a.viewType=u,u===r.INLINE?a.displayMode=o.INLINE:a.displayMode=o.BLOCK}var c=n||{},d=l?{depLoading:l}:{};return(0,i.g)({blockId:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})),blockType:e,props:a||{},initData:escape(JSON.stringify(c))},d)}},vsh_49814:function(t,e,n){"use strict";n.d(e,{Z:function(){return c}});var i=n("vsh_34170"),r="\\b([/#?][\\-A-Z0-9@:%_+.~#?&/=;$,!\\*\\[\\]\\(\\){}^|<>]*[-A-Z0-9&@#/%=~\\(\\)_|]?)?",o=/localhost(:[0-9]{2,5})?/,s=/(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}(2[0-4][0-9]|25[0-5]|1[0-9]{2}|[1-9][0-9]|[0-9])(:[0-9]{2,5})?/,a="([\\-A-Z:0-9%_+~#@]{1,256}\\.){1,50}",l="[a-z\\-]{2,15}",u="[\\w.!#$%&'*+-/=?^_\\`{|}~]{1,2000}@[A-Za-z0-9_.-]+\\.",c=new(function(){function t(){this.PROTOCOL="https?|s?ftp|ftps|nfs|ssh",this.TOP_DOMAIN="com|org|net|int|edu|gov|mil|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gh|gi|gl|gm|gn|gp|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mf|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|site|top|wtf|xxx|xyz|cloud|engineering|help|one",this.TOP_DOMAIN_LITE="com|cn|tk|de|net|org|uk|info|nl|ru|hk",this.LENGTH_LIMITED_EMAIL_REG=new RegExp("^(?!data:)((mailto:".concat(u).concat(l,")|(").concat(u,"(").concat(this.TOP_DOMAIN,")))\\b"),"gi"),this.IP_REG=this.getIpReg(),this.URL_REG=this.getUrlReg(),this.LINK_REG=this.getLinkReg()}var e=t.prototype;return e.getIpReg=function(){return new RegExp("((((".concat(this.PROTOCOL,")://)?(").concat(o.source,"))|(((").concat(this.PROTOCOL,")://)(").concat(s.source,")))").concat(r),"gi")},e.getUrlReg=function(){return new RegExp("(((".concat(this.PROTOCOL,"):\\/\\/").concat(a).concat(l,")|(").concat(a,"(").concat(this.TOP_DOMAIN_LITE,")))(:[0-9]{2,5})?").concat(r),"gi")},e.getLinkReg=function(){return new RegExp("(".concat(this.IP_REG.source,")|(").concat(this.URL_REG.source,")|(").concat(this.LENGTH_LIMITED_EMAIL_REG.source,")"),"gi")},e.addExtraProtocols=function(t){var e=t.length>0?"|":"";this.PROTOCOL=this.PROTOCOL+e+t.join("|"),this.IP_REG=this.getIpReg(),this.URL_REG=this.getUrlReg(),this.LINK_REG=this.getLinkReg()},e.isValidLink=function(t,e){var n=null!=e?e:this.LINK_REG,i=new RegExp("".concat(n.source),"gi"),r=new RegExp(i).exec(t);return!(!r||0!==r.index)},e.getRegex=function(t){void 0===t&&(t=[]);var e=(0,i.e)(["","https?","mailto","ftp","file"],(0,i.f)(t),!1),n="^(#|(".concat(e.join("|"),"):)");return new RegExp(n)},e.completeURLProtocol=function(t,e){void 0===t&&(t=""),void 0===e&&(e=[]);var n=new RegExp(this.LENGTH_LIMITED_EMAIL_REG).test(t);return this.getRegex(e).test(t)?t:n?"mailto:"+t:(t.startsWith("http")||(t="http://"+t),t)},t}())},vsh_34006:function(t,e,n){"use strict";n.d(e,{H:function(){return u}});var i=n("vsh_44793"),r=n("vsh_23856"),o=n("vsh_48260"),s=n("vsh_30109"),a=n("vsh_52798"),l=(n("vsh_72862"),n("vsh_98125"),n("vsh_94647")),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handleMousedown=function(t){t.nativeEvent.preventDefault()},e}return(0,s._)(e,t),e.prototype.render=function(){var t=this.props,e=t.type,n=t.avatar,s=t.wrapperStyle,u=t.avatarWrapperStyle,c=t.avatarStyle,d=t.name,h=t.disableHover,f=t.onMouseEnter,p=t.onMouseLeave,v=t.onClick;return(0,r.azq)(l.c,{lineWrap:!1,dir:o.o.NONE},(0,r.azq)(i.ZC,{on:{pointerenter:f,pointerleave:p,mousedown:this.handleMousedown,click:v}},(0,r.azq)(a.pf,{type:e,avatar:n,wrapperStyle:h?Object.assign(null!=s?s:{},{$hover:{}}):s,avatarWrapperStyle:u,avatarStyle:c},(0,r.azq)(i.xv,{content:d}))))},e}(r.wA2)},vsh_94647:function(t,e,n){"use strict";n.d(e,{c:function(){return y}});var i=n("vsh_44793"),r=n("vsh_23856"),o=n("vsh_30109"),s=n("vsh_52673"),a=(n("vsh_72862"),n("vsh_90166")),l=(n("vsh_98125"),n("vsh_24719")),u=n("vsh_84965"),c=n("vsh_34482"),d=n("vsh_78224"),h=n("vsh_89828"),f=n("vsh_634"),p=n("vsh_33378");function v(t){return(0,r.azq)(i.xv,{content:a.T6,"data-zero-space":!0,ref:t.forwardRef})}!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}(0,u.c)(e,t);var n=e.prototype;n.updateLeafModel=function(t){},n.getSelectionOfCurrentRef=function(){return null},n.getZoneIdByCurrentRef=function(){return""}}(f.jn);var g=["editor","leafModel","length","disableDefaultSelected","forwardRef","onSelect","onDeselect","onKeyDown"],y=function(t){var e,n;function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.tagName=f.Kw.TEXT,t.option={viewportEventEnabled:!0,selectEventEnabled:!0},t.leafModelMap=new WeakMap,t}return e=(0,f.Or)(t),(0,u.c)(i,e),Object.defineProperty(i.prototype,"_length",{get:function(){var t=this.props.length;return"number"==typeof t&&isFinite(t)?Math.max(t,1):1},enumerable:!1,configurable:!0}),i.prototype.handleDeleteKey=function(t){var e=t.e,n=t.stopEvent,i=t.preventEvent,r=t.isBackward,o=this.editor,s=o.selection.getSelection(),a=(v=s.toPosition()).zoneId,l=v.start;if(s.isCollapsed()&&(this.isBlockType()||1!==this._length)){var u=this.getSelectionOfCurrentRef();if(u){var d,h=o.getContentState(),f=(d=s.start).line,p=d.offset,v=(t=r?u.end:u.start,f+-1*(r?1:-1));if(d=h.getZoneState(a)){var g;f=d.getLine(f);if(this.isBlockType()&&t.line===v&&f&&p===(r?f.getLineMarker():f.length()-1)&&t.zoneId===s.start.zoneId)return n(),i(),e.preventDefault(),e.stopPropagation(),f.isTextEmpty()&&(p=f.index===d.length()-1,g=new c.I({zoneId:a}),d=0,p||d++,f.hasLineMarker()&&d++,g.retain(l+(f.hasLineMarker()?-1:0)).delete(d),h.apply(g),r||(u.start.line--,u.end.line--)),void o.selection.setSelection(u,!0);t.line===s.start.line&&t.offset===s.start.offset&&(n(),i(),e.preventDefault(),e.stopPropagation(),(g=new c.I({zoneId:a})).retain(l+(r?-1*this._length:0)).delete(this._length),h.apply(g))}}}},i.prototype.handleKeyDown=function(t){if(this.props.onKeyDown)return this.props.onKeyDown(t);if(this.isBlockType()){var e=t.keyCode,n=!1;switch(!0){case e===a.VD.Enter:n=this.handleEnterKey();break;case[a.VD.Left,a.VD.Right,a.VD.Up,a.VD.Down].includes(e):n=this.handleArrowKey(t)}n&&(t.stopEvent(),t.stopPropagation(),t.preventDefault(),t.preventEvent())}},i.prototype.handleEnterKey=function(){if(!this.isFocusOnMe())return!1;if(!(i=this.getSelectionOfCurrentRef()))return!1;var t,e=this.editor.getContentState(),n=(t=i.start).zoneId,i=t.line;return!!(t=null===(t=e.getZoneState(n))||void 0===t?void 0:t.getLine(i))&&(!!(i=e.rangePointToOffset({line:i,zoneId:n,offset:t.length()-1}))&&(t=new c.I({zoneId:n}).retain(i).insertEnterAndLineMarker(),e.apply(t),this.editor.selection.setSelection({start:i+2,len:0,zoneId:n}),!0))},i.prototype.handleArrowKey=function(t){var e,n=this.getSelectionOfCurrentRef();if(!n)return!1;var i=(d=n.start).zoneId,r=d.line,o=(h=this.editor.selection.getSelection()).start,s=h.end,l=o.line,u=o.offset,c=o.zoneId,d=s.line,h=s.offset;if(i!==c)return!1;var f={start:n.start,end:n.end},p=this.editor.getContentState().getZoneState(c);if(!p)return!1;if(this.isFocusOnMe()){switch(t.keyCode){case a.VD.Left:case a.VD.Up:f.start.line=Math.max(0,r-1),f.start.offset=(null!==(e=null===(e=p.getLine(f.start.line))||void 0===e?void 0:e.length())&&void 0!==e?e:1)-1,f.end=f.start;break;case a.VD.Right:case a.VD.Down:f.start.line=Math.min(p.length()-1,r+1),f.start.offset=null!==(e=null===(e=p.getLine(f.start.line))||void 0===e?void 0:e.getLineMarker())&&void 0!==e?e:0,f.end=f.start;break;default:return!1}return this.editor.selection.setSelection(f,!0),!0}return(l===r+1&&(t.keyCode===a.VD.Up&&this.isFirstLineOfParagraph(o)||t.keyCode===a.VD.Left&&u===(null===(l=p.getLine(l))||void 0===l?void 0:l.getLineMarker()))||!(d!==r-1||!(t.keyCode===a.VD.Down&&this.isLastLineOfParagraph(s)||t.keyCode===a.VD.Right&&h+1===(null===(d=p.getLine(d))||void 0===d?void 0:d.length()))))&&(this.editor.selection.setSelection(f=n,!0),!0)},i.prototype.isFirstLineOfParagraph=function(t){if(!(n=null===(e=this.editor.getContentState().getZoneState(t.zoneId))||void 0===e?void 0:e.getLine(t.line)))return!1;var e=n.getLineMarker(),n=this.editor.rectModule.getCaretRect(t,t.zoneId);t=this.editor.rectModule.getCaretRect({line:t.line,offset:e,zoneId:t.zoneId},t.zoneId);return n.top===t.top},i.prototype.isLastLineOfParagraph=function(t){var e=null===(n=this.editor.getContentState().getZoneState(t.zoneId))||void 0===n?void 0:n.getLine(t.line);if(!e)return!1;var n=this.editor.rectModule.getCaretRect(t,t.zoneId);t=this.editor.rectModule.getCaretRect({line:t.line,offset:e.length()-1,zoneId:t.zoneId},t.zoneId);return n.bottom===t.bottom},i.prototype.isFocusOnMe=function(){var t=null===(e=this.getSelectionOfCurrentRef())||void 0===e?void 0:e.toPosition();if(!t)return!1;var e=this.editor.selection.getSelection().toPosition();return t.start===e.start&&t.len===e.len&&t.zoneId===e.zoneId},i.prototype.componentDidUpdate=function(t){e.prototype.componentDidUpdate.call(this,t),this._ref.current&&(this.handleRef(this._ref.current),this.updateLeafModel()),t=this.getZoneIdByCurrentRef(),this.editor.once(d.r.PAINT,this.updateLeafModel,{zoneId:t})},i.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this);var t=this.getZoneIdByCurrentRef();this.editor.on(d.r.DELETE_KEY,this.handleDeleteKey,{zoneId:t,priority:900}),this.editor.on(d.r.KEYDOWN,this.handleKeyDown,{zoneId:t,priority:900}),this.updateLeafModel(),this.editor.once(d.r.PAINT,this.updateLeafModel,{zoneId:t})},i.prototype.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this),this.editor.off(d.r.DELETE_KEY,this.handleDeleteKey),this.editor.off(d.r.KEYDOWN,this.handleKeyDown),this._ref&&this._ref.current&&this.editor._getViewModel()._deleteLeaf(this._ref.current)},i.prototype.isBlockType=function(){var t=(this._ref.current&&this.leafModelMap.get(this._ref.current)||{}).op,e=null==t?void 0:t.attributes;return!!e&&(t=this.editor.getContentState().schema,(0,h.ky)(e,t))},i.prototype.handleMouseDown=function(t){var e;!1===this.props.autoSelectOnClick||(e=this.getSelectionOfCurrentRef())&&(this.editor.selection.setSelection(e,!0),this.props.editor.selection.updateViewSelection(!0))},i.prototype._handleMouseDown=function(t){this.handleMouseDown(t)},i.prototype.handleRef=function(t){t&&(this._ref.current=t)},i.prototype.updateLeafModel=function(){var t,n=this._ref.current;!n||(t=null==(t=this.editor.editorUtils.closest(n,"[".concat(a.MB,"]")))?void 0:t.__leafModel)&&(this.editor._getViewModel()._setLeaf(n,t),this.leafModelMap.set(n,t),e.prototype.updateLeafModel.call(this,t))},(0,u.a)([p.W],i.prototype,"handleDeleteKey",null),(0,u.a)([p.W],i.prototype,"handleKeyDown",null),(0,u.a)([p.W],i.prototype,"_handleMouseDown",null),(0,u.a)([p.W],i.prototype,"handleRef",null),(0,u.a)([p.W],i.prototype,"updateLeafModel",null),n=t=i,(0,u.c)(r,n),r;function r(){return null!==n&&n.apply(this,arguments)||this}}(function(t){function e(e){var n=t.call(this,e)||this;return n._ref=(0,i.Vf)(),n._rightZeroSpaceRef=(0,i.Vf)(),n.editor=e.provides.editor,n}(0,o._)(e,t);var n=e.prototype;return n.getLeafModel=function(t){return void 0===t&&(t=this.props),t.provides.leafModel},n.updateLeafModel=function(){},n.getSelectionOfCurrentRef=function(){var t;if(!this._rightZeroSpaceRef.current&&!this._ref.current)return null;var e=null!==(t=this._rightZeroSpaceRef.current)&&void 0!==t?t:this._ref.current,n=this.editor.selection.getElementRange(e);return n||null},n.handleZeroSpaceRef=function(t){t&&(this.props.forwardRef&&(this.props.forwardRef.current=t),this._rightZeroSpaceRef.current=t)},n.getZoneIdByCurrentRef=function(){var t,e,n=null!==(t=this._rightZeroSpaceRef.current)&&void 0!==t?t:this._ref.current;return(null===(e=this.editor.editorUtils.closest(n,"[".concat(a.P9,"]")))||void 0===e?void 0:e.props["data-zone-id"])||""},n.render=function(){var t,e,n,u=this,c=Object.keys(this.props).reduce((function(t,e){return g.includes(e)||(e.startsWith("on")?t[e]=l.eb.includes((0,l.Le)(e))?void 0:u._handleSynthesisEvents:t[e]=u.props[e]),t}),{}),d=this.isBlockType()?{position:"absolute",width:0,height:0,display:"inline-block"}:{},h=" ".repeat(this._length),f=(0,o.a)((0,o.a)((0,o.a)({},c),((t={})[a.eu]=h,t)),{provides:(e={},e[a.eu]=h,e)}),p=((n={})[a.Pk]=!0,n.dir=this.props.dir,n.lineWrap=this.props.lineWrap,n);return(0,r.azq)(i.hk,p,(0,r.azq)(v,{style:d}),(0,r.azq)(i.ZC,(0,s._)({ref:this._ref,onMouseDown:this._handleMouseDown},f),this.props.children,this.props.disableDefaultSelected&&(0,r.azq)(v,{forwardRef:this.handleZeroSpaceRef,style:d})),(0,r.azq)(v,{style:d}))},e}(r.wA2))},vsh_61417:function(t,e,n){"use strict";n.d(e,{r:function(){return d}});var i=n("vsh_44793"),r=n("vsh_23856"),o=n("vsh_30109"),s=(n("vsh_72862"),n("vsh_98125"),n("vsh_84965")),a=n("vsh_634");!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}(0,s.c)(e,t),e.prototype.render=function(){return null}}(a.jn);var l=function(t){var e=this;this.eventStartTimeStamp=0,this.recordTime=function(t){e.eventStartTimeStamp=t.nativeEvent.timeStamp},this.triggerClick=function(t){t.nativeEvent.timeStamp-e.eventStartTimeStamp<200&&(e.onClick(t),e.eventStartTimeStamp=0)},this.handleMouseDown=function(t){t.nativeEvent.preventDefault(),e.recordTime(t)},this.handleTouchStart=function(t){t.nativeEvent.preventDefault(),e.recordTime(t)},this.handleMouseUp=function(t){e.triggerClick(t)},this.handleTouchEnd=function(t){e.triggerClick(t)},this.onClick=t},u=n("vsh_33378"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clickGen=new l(e.handleClick),e}(0,o._)(e,t);var n=e.prototype;return n.handleClick=function(t){var e,n;null===(n=(e=this.props).onClick)||void 0===n||n.call(e,t)},n.handleMouseEnter=function(t){var e,n;null===(n=(e=this.props).onMouseEnter)||void 0===n||n.call(e,t)},n.handleMouseLeave=function(t){var e,n;null===(n=(e=this.props).onMouseLeave)||void 0===n||n.call(e,t)},n.render=function(){var t={mousedown:this.clickGen.handleMouseDown,mouseup:this.clickGen.handleMouseUp,touchstart:this.clickGen.handleTouchStart,touchend:this.clickGen.handleTouchEnd,pointerenter:this.handleMouseEnter,pointerleave:this.handleMouseLeave},e={fontColor:this.props.linkColor||"rgb(51,112,255)",cursor:"pointer"};return this.props.alwayHasUnderline?Object.assign(e,{underline:!0}):Object.assign(e,{$hover:{underline:!0}}),(0,r.azq)(i.ZC,{style:e,on:t},this.props.children)},(0,o.b)([u.W],e.prototype,"handleClick",null),(0,o.b)([u.W],e.prototype,"handleMouseEnter",null),(0,o.b)([u.W],e.prototype,"handleMouseLeave",null),e}(i.ZC),d=function(t){var e,n;function i(){return null!==e&&e.apply(this,arguments)||this}return e=(0,a.Or)(t),(0,s.c)(i,e),n=t=i,(0,s.c)(r,n),r;function r(){return null!==n&&n.apply(this,arguments)||this}}(c)},vsh_44442:function(t,e,n){"use strict";n.d(e,{x:function(){return h}});var i=n("vsh_44793"),r=n("vsh_23856"),o=n("vsh_30109"),s=n("vsh_52673"),a=(n("vsh_72862"),n("vsh_98125"),n("vsh_24719")),l=n("vsh_84965"),u=n("vsh_634");!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tagName=u.Kw.TEXT,e}(0,l.c)(e,t)}(u.cc);var c,d=function(t){function e(e){var n=t.call(this,e)||this;return n.editor=e.provides.editor,n}return(0,o._)(e,t),e.prototype.render=function(){var t=this,e=Object.keys(this.props).reduce((function(e,n){return n.startsWith("on")?e[n]=a.eb.includes((0,a.Le)(n))?void 0:t._handleSynthesisEvents:e[n]=t.props[n],e}),{});return"string"==typeof this.props.children?(0,r.azq)(i.xv,(0,s._)({content:this.props.children,ref:this._ref},e)):(0,r.azq)(i.hk,(0,s._)({ref:this._ref},e),this.props.children)},e}(i.ZC),h=(c=d,(0,u.Or)(c))},vsh_51414:function(t,e,n){"use strict";n.d(e,{G:function(){return h}});var i=n("vsh_44793"),r=n("vsh_23856"),o=n("vsh_30109"),s=n("vsh_52673"),a=(n("vsh_72862"),n("vsh_98125"),n("vsh_24719")),l=n("vsh_84965"),u=n("vsh_634");!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tagName=u.Kw.VIEW,e.option={viewportEventEnabled:!0,selectEventEnabled:!0},e}(0,l.c)(e,t)}(u.cc);var c,d=function(t){function e(e){var n=t.call(this,e)||this;return n.editor=e.provides.editor,n}return(0,o._)(e,t),e.prototype.render=function(){var t=this,e=Object.keys(this.props).reduce((function(e,n){return n.startsWith("on")?e[n]=a.eb.includes((0,a.Le)(n))?void 0:t._handleSynthesisEvents:e[n]=t.props[n],e}),{});return(0,r.azq)(i.ZC,(0,s._)({ref:this._ref},e),this.props.children)},e}(i.ZC),h=(c=d,(0,u.Or)(c))},vsh_52673:function(t,e,n){"use strict";n.d(e,{_:function(){return a}});var i,r,o,s=(i=function(t){function e(){return t.exports=e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(this,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},i(r={exports:{}},r.exports),r.exports),a=(o=s)&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o},vsh_30109:function(t,e,n){"use strict";n.d(e,{_:function(){return o},a:function(){return s},b:function(){return a},c:function(){return l},d:function(){return c},e:function(){return u}});var i=n("vsh_65498"),r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return s=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},s.apply(this,arguments)};function a(t,e,n,r){var o,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":(0,i.Z)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(a=(s<3?o(a):s>3?o(e,n,a):o(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a}function l(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function c(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}},vsh_77399:function(t,e,n){"use strict";n.d(e,{MO:function(){return r},W9:function(){return o},ei:function(){return s}});var i={color:"fontColor",textAlign:"alignHorizontal",textDecoration:"textDecoration"};function r(t){Object.keys(i).forEach((function(e){if(t[e]){var n=t[e],r=i[e];if(delete t[e],"textDecoration"===e){var o=n.includes("underline"),s=n.includes("line-through");o&&(t.underline=!0),s&&(t.lineThrough=!0)}else t[r]=n}}))}function o(t,e){if(!t)return function(){};if(window.ResizeObserver){var n=new window.ResizeObserver(e);return n.observe(t),function(){n.disconnect()}}var i=document.createElement("iframe");i.setAttribute("style","\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      top: -1000%;\n      left: -1000%;\n      user-select: none;\n      visibility: hidden;\n    "),i.addEventListener("resize",e);var r=t.parentElement;return r.appendChild(i),function(){r.removeChild(i),i.removeEventListener("resize",e)}}function s(t,e){for(var n={},i=0;i<e.length;i++){var r=e[i],o=t[r];o&&(n[r]=o)}return n}},vsh_44108:function(t,e,n){"use strict";n.d(e,{C:function(){return O}});var i,r,o=n("vsh_23856"),s=(n("vsh_94596"),n("vsh_30109")),a=n("vsh_52673"),l=(n("vsh_72862"),n("vsh_98125"),n("vsh_84965")),u=n("vsh_90166"),c=n("vsh_23654"),d=n("vsh_51404"),h=function(){function t(t){var e=t.wrappers,n=t.content;t=t.key;this.key=t||this.hashKey(n),this.wrappers=e,this.content=n}var e=t.prototype;return e.hashKey=function(t){var e="",n=t.length;return t.forEach((function(t){var i=t.getKey();t=i.length;e+=i.slice(0,Math.max(Math.ceil(8/n),1))+i[Math.floor(t/2)-1]+i.slice(Math.min(Math.ceil(-12/n),-1))})),e},e._refreshKey=function(){this.key=this.hashKey(this.content)},e.compare=function(e){if(!e||this.key!==e.getKey())return t.UNEQUAL;var n=this.content.length===e.content.length;if(n)for(var i=0,r=this.content.length;i<r;i++)if(this.content[i]!==e.content[i]){n=!1;break}return n?t.EQUAL:t.UDPATE},e.isEmpty=function(){return 0===this.content.length},e.getKey=function(){return this.key},e.isInvisible=function(){return this.content.every((function(t){return t._invisible}))},t.EQUAL=c.A.EQUAL,t.UNEQUAL=c.A.UNEQUAL,t.UDPATE=c.A.UPDATE,t}();function f(t){for(var e=new Map,n=0,i=t.length;n<i;n++){var r=t[n];e.set(r.getKey(),{data:r,index:n})}return e}function p(t,e,n,r){return e?e.index<t?{op:i.MOVE,oldIndex:t,newIndex:n}:e.data.compare(r)===c.A.EQUAL?{op:null,oldIndex:e.index+1}:{op:i.UPDATE,oldIndex:e.index,newIndex:n}:{op:i.INSERT,oldIndex:t,newIndex:n}}function v(t,e){var n,i;try{for(var r=(0,l.e)(t),o=r.next();!o.done;o=r.next()){var s=o.value;if(s._wrapperState){var a=s._wrapperState.getKey();return e.has(a)?void 0:(e.set(a,!0),a)}}}catch(t){n={error:t}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}}(r=i=i||{})[r.DELETE=-1]="DELETE",r[r.DONE=0]="DONE",r[r.INSERT=1]="INSERT",r[r.UPDATE=2]="UPDATE",r[r.MOVE=3]="MOVE";var g=n("vsh_78224"),y=n("vsh_33378");!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}(0,l.c)(e,t)}((function(){}));var m=n("vsh_44793");var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}(0,s._)(e,t);var n=e.prototype;return n.shouldComponentUpdate=function(t){var e,n;return t.offset!==this.props.offset||(null===(e=t.op.attributes)||void 0===e?void 0:e.enter)!==(null===(n=this.props.op.attributes)||void 0===n?void 0:n.enter)||!(!this._ref||!this._ref.props[u.nV]||t.op.insert===this._ref.props.content)},n.render=function(){var t,e,n=this,i=this.props,r=i.op,s=i.lineState,a=i.offset,l=((t={content:this.props.op.insert})[u.nV]=!0,t.ref=function(t){t&&n.handleTextViewRef(t,{op:r,start:a,lineState:s})},t);return(null===(e=r.attributes)||void 0===e?void 0:e.enter)&&(l[u.q7]=!0,!s.isTextEmpty()&&this.props.provides.weakWidth&&(l.style={fontSize:"0"})),(0,o.azq)(m.xv,l)},e}(o.wA2),b=function(t){var e,n;function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleTextViewRef=function(e,n){e&&(t._ref=e,t.props.editor._getViewModel()._setLeaf(e,n))},t.componentWillUnmount=function(){t._ref&&t.props.editor._getViewModel()._deleteLeaf(t._ref)},t}return e=t,(0,l.c)(i,e),n=t=i,(0,l.c)(r,n),r;function r(){return null!==n&&n.apply(this,arguments)||this}}(_),E=n("vsh_77399"),S=n("vsh_57916");var w=n("vsh_40289"),C=n("vsh_52531"),I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}(0,s._)(e,t);var n=e.prototype;return n.componentDidMount=function(){},n.componentWillUnmount=function(){},n.handleFocusEditor=function(){},n.handleBlurEditor=function(){},n.shouldComponentUpdate=function(t,e){var n=t.lineState,i=t.style;if(e.isFocus!==this.state.isFocus)return!0;var r=this.props.style;return!(0,C.X)(r,i)||!(!n||n===this.state.lineState)&&(this.setState({lineState:n}),!0)},n.isValidElement=function(t){return!0},n.addParentWrapper=function(t){return t||[]},n.renderTextView=function(t){return(0,o.azq)(b,t)},n.renderFinalView=function(t,e){var n,i,r=Object.assign(this.props.isInline?{}:{width:"100%"},t.style||{},(null===(n=this.props)||void 0===n?void 0:n.style)?null===(i=this.props)||void 0===i?void 0:i.style:{});return(0,E.MO)(r),(0,o.azq)(m.hk,(0,a._)({},t,{style:r}),e)},n.getPocketJSX=function(t){var e=t.isPocketWithoutFakeText,n=(0,o.azq)(m.xv,{"data-ignore-mutation":!0,"date-fake-text":"","data-ignore-selection":"",content:""}),i=(0,o.azq)(m.xv,{"data-ignore-mutation":!0,"date-fake-text":"","data-ignore-selection":"",content:""});return e?n:(0,o.azq)(m.ZC,null,n,i)},n.updateRef=function(t){},n.renderChildView=function(t){var e,n=this,i=t.key,r=t.value,l=t.styleProps,c=t.customView,d=r.op,h=r.start,f=r.index,p=r.lineState;l.style&&(0,E.MO)(l.style);var v=(0,s.a)((0,s.a)({},l),((e={})[u.MB]=!0,e));return(0,o.azq)(m.ZC,(0,a._)({key:i,provides:{editor:this.props.editor,leafModel:r}},v,{ref:function(e){if(e){var i={op:d,start:h,index:f,lineState:p};e.__leafModel=i,n.props.editor._getViewModel()._setLeaf(e,i),t.renderContext=null,n._opToLeaf.set(d,e)}else{var r=n._opToLeaf.get(d);r&&(n.props.editor._getViewModel()._deleteLeaf(r),n._opToLeaf.delete(d))}}}),c)},n.renderInlineWrapperView=function(t,e,n){return(0,o.azq)(t.type,(0,a._)({key:e},t.props),n)},n.renderPlaceHolderView=function(t){var e,n=t.lineState,i=((e={selectable:!1})[u.nV]=!0,e.content=this.props.placeholder||"",e.style={fontColor:"#8f959e"},e.lineState=n,e);return(0,o.azq)(m.hk,null,(0,o.azq)(m.xv,i))},n.handleRef=function(t){if(t){var e=t.parent?this.$context.getElementByEid(t.parent):null;this.updateRef(e)}},n.render=function(){if(!this.state)return null;var t=this.renderView(),e=this.props.isInline?{}:{width:"100%"};return(0,o.azq)(m.ZC,{ref:this.handleRef,className:["ace-line"],style:e},t)},(0,s.b)([w.MR],e.prototype,"handleRef",null),e}(m.ZC),T=function(t){var e,n;function i(t){var n=e.call(this,t)||this;return n.mounted=!1,n._opToView=new Map,n._opToLeaf=new WeakMap,n._opViewKeyMap=new Map,n._opSum=0,n.renderView=function(){var t=n.props.editor,e=n.state.lineState,i=e.index,r=n.getFilterStack(i).lineState,o=r._getDelta(),s=[];return e.hasLineMarker()?((e=[]).push.apply(e,(0,l.d)([],(0,l._)(n.renderChildren(r,o.ops.slice(1))),!1)),e=n.renderParent(r,o.ops[0],e),Array.isArray(e)?s.push.apply(s,(0,l.d)([],(0,l._)(e),!1)):s.push(e)):s=n.renderChildren(r,o.ops),o=n.renderCustomLineView(r,s),r={isPocket:!1,isPocketWithoutFakeText:!1,index:i,info:{lineMarker:r.hasLineMarker()?1:0,zone:r.getZoneId()}},t.callAll("acePreWriteDomLineHTML",r),r.isPocket&&s.unshift(n.getPocketJSX({isPocketWithoutFakeText:r.isPocketWithoutFakeText})),n.reset(),o},n.renderChild=function(t,e,i,r){var o,s,a,u=n._opSum,c=n.renderTextView({op:e,lineState:t,editor:n.props.editor,offset:u}),d=(c=(a=n.renderCustomView(t,e,c,i)).view,{renderContext:a=a.renderContext,styleProps:{className:"",style:a.style},key:a.key,value:{op:e,start:u,index:r,lineState:t},customView:c}),h=(t=a.style,c=a.class,a.domAttributes);t&&(d.styleProps.style=t),c&&(d.styleProps.className=c),null!==(c=e.attributes)&&void 0!==c&&c.displayEnter&&(d.styleProps.className+=" not-display-enter"),c=Object.keys(h);try{for(var f=(0,l.e)(c),p=f.next();!p.done;p=f.next()){var v=p.value;d.styleProps[v]=h[v]}}catch(t){o={error:t}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}return n._opSum+=e.insert.length,i.class="",(i=d.key)||(i=JSON.stringify(e.attributes)||"",e=n._opViewKeyMap.has(i)?n._opViewKeyMap.get(i)+1:0,n._opViewKeyMap.set(i,e),d.key=i+=e),n.renderChildView(d)},t=n.props.lineState,n.state={lineState:t,isFocus:n.props.editor.isFocus()},n}return e=t,(0,l.c)(i,e),i.prototype.updateState=function(t,e){this._node?this.setState({lineState:t},e):this.props.editor.error({message:"this._node undefined, zoneId: ".concat(this.state.lineState.getZoneId()),level:u.WV.ERROR})},i.prototype.componentDidMount=function(){var t;null!==(t=e.prototype.componentDidMount)&&void 0!==t&&t.call(this),this.mounted=!0,this.props.editor.callAll("lineDidMount",{lineState:this.state.lineState})},i.prototype.componentDidUpdate=function(t,e){var n=this;this._node&&(this.updateRef(this._node),Promise.resolve().then((function(){!1!==n.props.editor.mounted&&n.props.editor.callAll("lineDidUpdate",{data:{prev:e.lineState,curr:n.state.lineState},isUpdate:!0})})))},i.prototype.componentWillUnmount=function(){var t,e;this.mounted=!1;var n=this.props.editor,i=this.state.lineState,r=i.getZoneId(),o=n.getContentState().getZoneState(r);(r=n._getViewModel())._resetNode(i),r._deleteNode(i);var s=!1;if(o)try{for(var a=(0,l.e)(o),u=a.next();!u.done;u=a.next())if(u.value===i){s=!0;break}}catch(e){t={error:e}}finally{try{u&&!u.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}s||(n.callAll("lineWillUnmount",{lineState:this.state.lineState}),this.clear())},i.prototype.clear=function(){var t=this.props.editor,e=this.state.lineState,n=t._getViewModel(),i=e.getZoneId();(i=t.getContentState().getZoneState(i))&&i.getLineByKey(e.getKey())===e||n._deleteNode(this.state.lineState),this._opToView.clear(),this._opViewKeyMap.clear()},i.prototype.updateRef=function(t){e.prototype.updateRef.call(this,t);var n,i=this.props.editor._getViewModel();t&&(this._node=t,n=this.state.lineState,i._setNode(n,t))},i.prototype.getFilterStack=function(t){var e=this.props.editor,n=(t={lineState:n=this.state.lineState,index:t,callHookFrom:"render"},n.getKey());return e.callAll("_editorLineStateWillRender",t),t.lineState._setKey(n),t},i.prototype.processLocalAttributesAndGetMatchedPlugins=function(t){var e=this,n=new Set;return Object.keys(t).forEach((function(i){""===t[i]||(i=e.props.editor.pluginManager._matchPlugin({attributeKey:i,value:t[i],zoneId:e.state.lineState.getZoneId(),attributes:t}))&&n.add(i)})),(0,S.iI)(Array.from(n),"render")},i.prototype.renderCustomView=function(t,e,n,i){var r,o=this,s=(0,l.b)({},e.attributes||{}),a=this.state.lineState,c={op:e,lineState:t,attributes:s,insert:e.insert,domAttributes:{},children:n,class:i.class||"",style:i.style||{},key:"",index:a.index,zoneId:a.getZoneId()};return e.insert===u.Ed&&null!==(r=e.attributes)&&void 0!==r&&r.enter||this.processLocalAttributesAndGetMatchedPlugins(s).forEach((function(t){if(t.render){try{n=t.render(c)}catch(e){o.props.editor.error({message:"".concat(t.name," plugin render failed! Index: ").concat(a.index),level:u.WV.ERROR,e:e})}c=(0,l.b)((0,l.b)({},c),{children:n})}})),{view:n,renderContext:c}},i.prototype.renderParent=function(t,e,n){return n=this.renderCustomView(t,e,n,{tokenClass:""}).view,this.addParentWrapper(n)},i.prototype.reset=function(){this._opSum=0},i.prototype.shouldRenderPlaceHolder=function(){var t=(n=this.state).lineState,e=n.isFocus,n=this.props.editor.getContentState().getZoneState(t.getZoneId());return e&&0===t.index&&(null==n?void 0:n.isEmpty())&&this.props.editor.isEditable()},i.prototype.renderCustomLineView=function(t,e){var n=this,i=this.props.editor.pluginManager.getPlugins(),r=this.state.lineState,o={};e=i.reduce((function(e,i){if(i.renderLine){var s={lineState:t,children:e,style:o,index:r.index,editable:!0};try{var a=i.renderLine(s);if(a)return a}catch(s){return n.props.editor.error({message:"".concat(i.name," plugin renderLine failed! Index: ").concat(r.index),level:u.WV.ERROR,e:s}),e}}return e}),e);return this.renderFinalView({style:o},e)},i.prototype.normalizeOps=function(t){return t.reduce((function(t,e){var n,i=e.insert;return"string"==typeof i&&i.includes("\n")&&1<i.length?(n=i.split("\n")).forEach((function(i,r){i&&(t.push((0,l.b)((0,l.b)({},e),{insert:i})),r!==n.length-1&&t.push({attributes:(0,l.b)((0,l.b)({},null==e?void 0:e.attributes),{enter:"true"}),insert:u.Ed}))})):"\n"===i?t.push({attributes:(0,l.b)((0,l.b)({},null==e?void 0:e.attributes),{enter:"true"}),insert:u.Ed}):t.push(e),t}),[])},i.prototype.handleDisplayEnter=function(t){var e=this.props.editor.getContentState().schema;!t.some((function(t){return!function(t,e){var n,i,r;void 0===t&&(t={});try{for(var o=(0,l.e)(Object.keys(t)),s=o.next();!s.done;s=o.next()){var a=s.value,u=null===(r=e.get(a))||void 0===r?void 0:r.displayEnter;if("boolean"==typeof u)return u;if("function"==typeof u)return u(t[a])}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return!0}(t.attributes,e)}))||(t=t[t.length-1]).insert===u.Ed&&(t.attributes=(0,l.b)((0,l.b)({},null!==(t=t.attributes)&&void 0!==t?t:{}),{displayEnter:"false"}))},i.prototype.renderChildren=function(t,e){var n=this;e=this.normalizeOps(e),this.handleDisplayEnter(e);var i=[];return this._opToView.clear(),e.forEach((function(e,r){r=n.renderChild(t,e,{class:"",text:""},t.getLineMarker()?r+1:r),n._opToView.set(e,r),i.push(r)})),this._opViewKeyMap.clear(),this.renderInlineWrapper(i,e,t)},i.prototype.renderInlineWrapper=function(t,e,n){for(var i=this,r=e.reduce((function(e,r,o){var s=n.getOps().indexOf(r),a=(0,l.b)({},r.attributes||{}),u=e.length?e[e.length-1]:null,c=i._opToView.get(r);-1!==(c=t.indexOf(c))&&(o=c);c=i.processLocalAttributesAndGetMatchedPlugins(a);var d=[];return c.forEach((function(t){!t.renderInlineWrapper||(t=t.renderInlineWrapper({index:s,attributes:a,lineState:n}))&&i.isValidElement(t)&&d.push(t)})),0===d.length||(r=String(r.insert+JSON.stringify(r.attributes)+o),u&&function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(u.opWrappers,d)&&u.range[1]+1===o?(u.key+=r,u.range[1]=o):e.push({opWrappers:d,key:r,range:[o,o]})),e}),[]),o=r.length;0<=--o;)!function(){var e=(a=r[o]).opWrappers,n=a.key,s=a.range,a=(c=(0,l._)(s,2))[0],c=(s=c[1],t.slice(a,s+1));c=e.reduce((function(t,e){var r;return e.props=Object.assign({},e.props,((r={})[u.lE]="true",r)),i.renderInlineWrapperView(e,n,t)}),c);t.splice(a,s-a+1,c)}();return t},(0,l.a)([y.W],i.prototype,"updateRef",null),n=t=i,(0,l.c)(r,n),r;function r(){return null!==n&&n.apply(this,arguments)||this}}(I);var x=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderLineView=function(t){var n,i=t.getKey(),r={};return t instanceof h&&(r={id:i,ref:function(e){return e&&(t._node=e)}}),e.props.renderItem(t,(0,s.a)((0,s.a)({key:i},r),((n={})[u.PI]=!0,n)))},e}return(0,s._)(e,t),e.prototype.render=function(){var t=this,e=this.props.dataSource.map((function(e){return t.renderLineView(e)}));return this.props.editableInline?(0,o.azq)(m.ZC,{style:this.props.style},e):(0,o.azq)(m.MG,{style:this.props.style},e)},e}(o.wA2),k=function(t){var e,n;function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._isMounted=!1,t.keyToNode=new Map,t.keyToData=new Map,t}return e=t,(0,l.c)(i,e),i.prototype.componentDidMount=function(){var t=this;this._isMounted=!0,this.dispatchPaintEvent(),this.props.dataSource.forEach((function(e){var n=e.getKey();t.keyToNode.set(n,e._node),t.keyToData.set(n,e)}))},i.prototype.componentDidUpdate=function(){var t=this,e=this.props.editor;e.getStatus("isPainting")&&(e.setStatus("isPainting",!1),this.dispatchPaintEvent(),this.keyToNode.clear(),this.keyToData.clear(),this.props.dataSource.forEach((function(e){var n=e.getKey();t.keyToNode.set(n,e._node),t.keyToData.set(n,e)})))},i.prototype.componentWillUnmount=function(){this._isMounted=!1,this.keyToNode.clear(),this.keyToData.clear()},i.prototype.dispatchPaintEvent=function(){var t=this;Promise.resolve().then((function(){t._isMounted&&t.props.onDidPaint(t.props.dataSource.map((function(t,e){return{data:t,originIndex:e}})))}))},n=t=i,(0,l.c)(r,n),r;function r(){return null!==n&&n.apply(this,arguments)||this}}(x);var M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}(0,s._)(e,t);var n=e.prototype;return n.shouldComponentUpdate=function(t){return this.updateStateIfNeed(t),!0},n.render=function(){var t=this.props,e=t.renderContent,n=t.extraProps,i=t.style,r=this.state.data.content,a=this.calcAddLines();return r.map((function(t,r){return(0,o.azq)(m.ZC,{style:i},(0,o.azq)(m.MG,null,e(t,a[r]?(0,s.a)({},n):n)))}))},e}(o.wA2),R=function(t){var e,n;function r(t){var n=e.call(this,t)||this;return n.prevContent=[],n._node=null,n.updateStateIfNeed=function(t){n.state.data.compare(t.data)!==c.A.EQUAL&&n.setState({data:t.data})},n.calcAddLines=function(){var t=n.state.data.content,e={};return n.prevContent.length&&function(t,e){for(var n=f(t),r=[],o=0,s=0,a=e.length;s<a;s++){var l=e[s],u=n.get(l.getKey());o=(l=p(o,u,s,l)).oldIndex,l.op&&r.push(l),u&&n.delete(u.data.getKey())}return n.forEach((function(t){r.push({op:i.DELETE,oldIndex:t.index,newIndex:t.index})})),r}(n.prevContent,t).forEach((function(t){t.op===i.INSERT&&(e[t.newIndex]=!0)})),e},n.state={data:t.data},n}return e=t,(0,l.c)(r,e),r.prototype.updateState=function(t,e){this.prevContent=this.state.data.content,this.setState({data:t},e)},n=t=r,(0,l.c)(o,n),o;function o(){return null!==n&&n.apply(this,arguments)||this}}(M),P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}(0,s._)(e,t);var n=e.prototype;return n.renderLineView=function(t){var e=Object.assign(this.props.isInline?{}:{width:"100%"},t.style||{},(0,E.ei)(this.props.style||{},["alignHorizontal","weakWidth","minWidth"]));return(0,o.azq)(T,(0,a._)({provides:{weakWidth:e.weakWidth}},t,{isInline:this.props.isInline,style:e}))},n.renderWrapperView=function(t){return(0,o.azq)(R,t)},n.renderListView=function(t){var e=Object.assign({},t.style||{},{width:"auto"},(0,E.ei)(this.props.style||{},["alignHorizontal"]));return(0,o.azq)(k,(0,a._)({},t,{editableInline:this.props.editableInline,style:e}))},n.renderTextView=function(t){return(0,o.azq)(b,t)},e}(o.wA2),O=function(t){var e;function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderWrapper=function(e,n){var i=t.editor,r={},o=Object.keys(e.wrappers).sort((function(t,n){return t=e.wrappers[t].plugin,n=e.wrappers[n].plugin,i.pluginManager._indexOf(t)-i.pluginManager._indexOf(n)})).map((function(t){t=(n=e.wrappers[t]).style;var n=n.element;return Object.assign(r,t),n})),s=e.getKey();return t.renderWrapperView({ref:function(e){return t.initRefs(s,e)},data:e,elements:o,style:r,extraProps:n,renderContent:t.renderWrapperContent})},t.renderWrapperContent=function(e,n){return t.renderLineChildren(e,n)},t.renderLineOrWrapper=function(e,n){return e instanceof d.V||e instanceof h||(t.editor.log("[BaseZoneView][renderLineOrWrapper] error instance",e),t.editor.error({message:"[BaseZoneView][renderLineOrWrapper] BaseZoneView.renderLineOrWrapper error",level:u.WV.FATAL})),e instanceof d.V?t.renderLineChildren(e,n):t.renderWrapper(e,n)},t.renderLineChildren=function(e,n){return void 0===n&&(n={}),t.renderLineView((0,l.b)((0,l.b)({key:e.getKey(),ref:function(n){return t.initRefs(e.getKey(),n)},editor:t.editor,lineState:e},n),{placeholder:t.props.placeholder||""}))},t.updateItem=function(e,n,i){var r=e.getKey();(r=t.viewRefs[r])&&r.updateState(e,i)},t}return e=t,(0,l.c)(n,e),n.prototype.getWrappers=function(t,e){var n,i;if(!t)return null;var r={};try{for(var o=(0,l.e)(t),s=o.next();!s.done;s=o.next()){var a,u,c,d=(0,l._)(s.value,2),h=d[0],f=d[1],p=h+f,v=this.wrapperCache[p],g=void 0;v?g=v:null===v||(a=this.props.editor.pluginManager._matchPlugin({attributeKey:h,value:f,attributes:t.toMap()}))&&a.renderWrapper&&(g=a),g&&(u={},c=g.renderWrapper({lineState:e,style:u}),r[p]={element:c,style:u,plugin:g},this.wrapperCache[p]=g)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return Object.keys(r).length?r:null},n.prototype.formatRenderContent=function(){for(var t,e=[],n=new Map,i=this,r=0,o=this.content.length();r<o;r++)!function(r,o){var s=i.content.getLine(r),a=i._getLineWrappers(s),l=[];if(a){for(l.push(s);r<o-1;){r++;var u=i.content.getLine(r),c=i._getLineWrappers(u);if(!i.isEqual(a,c)){r--;break}l.push(u)}var d=v(l,n),f=new h({wrappers:a,content:l,key:d});l.forEach((function(t){t._wrapperState=f})),f._node=document.createElement("div"),e.push(f)}else e.push(s);t=r}(r,o),r=t;var s=[],a=new Map;return e.forEach((function(t){var e,n=t.getKey();a.has(n)?((e=a.get(n))&&s.push(e),s.push(t),a.set(n,null)):a.set(n,t)})),s.forEach((function(t){t._refreshKey()})),e},n.prototype._getLineWrappers=function(t){var e;return void 0===t.__wrapper&&(e=t.getLineAttributes(),t.__wrapper=this.getWrappers(e,t)),t.__wrapper},n.prototype.isEqual=function(t,e){var n,i,r,o;if(!t||!e)return!1;var s=Object.keys(t);try{for(var a=(0,l.e)(s),u=a.next();!u.done;u=a.next()){var c=u.value;if((null===(r=t[c])||void 0===r?void 0:r.element)!==(null===(o=e[c])||void 0===o?void 0:o.element))return!1}}catch(t){n={error:t}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return s.length===Object.keys(e).length},n.prototype.fixRenderContent=function(t,e){var n=f(e);return t.map((function(t){if(t instanceof h){var e=n.get(t.getKey());if(!e)return t;if(t.compare(e.data)===c.A.EQUAL)return e.data;t.compare(e.data)===c.A.UPDATE&&(e.data._node||console.warn("old.data._node undefined",e.data.getKey()),t._node=e.data._node)}return t}))},n.prototype.componentDidUpdate=function(){var t,e,n,i,r=this.state.dataSource,o={};try{for(var s=(0,l.e)(r),a=s.next();!a.done;a=s.next())o[a.value.getKey()]=!0}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}try{for(var u=(0,l.e)(Object.keys(this.viewRefs)),c=u.next();!c.done;c=u.next()){var d=c.value;o[d]||delete this.viewRefs[d]}}catch(e){n={error:e}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}},n.prototype.render=function(){var t=this.state.dataSource;return this.renderListView({editor:this.editor,dataSource:t,renderItem:this.renderLineOrWrapper,onDidPaint:this.handleDidPaint,updateItem:this.updateItem})},n.defaultProps={onDidPaint:function(){return null},height:1/0,onMount:function(){return null}},n}(function(t){var e;function n(t){var n=e.call(this,t)||this;n.wrapperCache={},n.viewRefs={},n.handleContentChange=function(t){var e,i,r,o=t.deltaSet,s=t.previous,a=n.editor;t=n.content.getZoneId();o.deltas[t]&&((a=a.getContentState().getZoneState(t))&&(n.content=a),e=n.formatRenderContent(),i=n.state.dataSource,(t=s.getZoneState(t))&&n.updateZoneViewModel(t),n.task&&(n.task.canceled=!0),r=Promise.resolve().then((function(){r.canceled||(n.editor.setStatus("isPainting",!0),n.setState({dataSource:n.fixRenderContent(e,i)}))})),n.task=r)},n.initRefs=function(t,e){},n.updateItem=function(t,e,i){var r=t.getKey();(r=n.viewRefs[r])&&r.updateState(t,i)},n.handleDidPaint=function(t,e){var i,r,o;void 0===e&&(e={}),!1!==n.editor.mounted&&(i=(o=n.props).editor,r=o.onDidPaint,o=o.zoneId,r&&r(t,e),i.call(g.r.PAINT,{data:t,zoneId:o}),i.selection.getSelection().start.zoneId!==o||i.getStatus("isPerforming")||i.getStatus("preventUpdateDomSelection")||!i.isFocus()||i.selection.updateViewSelection(),n.editor.setStatus("contentChanged",!1),i.call(u.ip))},n.updateZoneViewModel=function(t){var e=n.editor._getViewModel(),i=e.getView(t);e._deleteNode(t),i&&e._setNode(n.content,i)};t=(i=n.props).editor;var i=i.zoneId;return(i=t.getContentState().getZoneState(i))&&(n.content=i),n.editor=t,n.state={dataSource:n.formatRenderContent()},t.on(g.r.CONTENT_CHANGE,n.handleContentChange,{priority:100,zoneId:n.content.getZoneId()}),t.on("_forceRefresh",n.handleRefresh),n}return e=t,(0,l.c)(n,e),n.prototype.handleRefresh=function(t){var e=t.zoneId,n=this.editor;(t=this.content.getZoneId())===e&&((t=n.getContentState().getZoneState(t))&&(this.content=t),this.editor.setStatus("isPainting",!0),this.setState({dataSource:this.formatRenderContent()}))},n.prototype.componentDidUpdate=function(){var t,e,n,i,r=this.state.dataSource,o={};try{for(var s=(0,l.e)(r),a=s.next();!a.done;a=s.next())o[a.value.getKey()]=!0}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}try{for(var u=(0,l.e)(Object.keys(this.viewRefs)),c=u.next();!c.done;c=u.next()){var d=c.value;o[d]||delete this.viewRefs[d]}}catch(e){n={error:e}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}},n.prototype.componentWillUnmount=function(){this.editor.off("_forceRefresh",this.handleRefresh),this.editor.off(g.r.CONTENT_CHANGE,this.handleContentChange),this.task&&(this.task.canceled=!0)},n.defaultProps={onDidPaint:function(){return null},height:1/0,onMount:function(){return null}},(0,l.a)([y.W],n.prototype,"handleRefresh",null),n}(P))},vsh_31152:function(t,e,n){"use strict";n.d(e,{C:function(){return c}});var i=n("vsh_23856"),r=(n("vsh_94596"),n("vsh_30109")),o=(n("vsh_72862"),n("vsh_98125"),n("vsh_84965")),s=n("vsh_33378");var a=n("vsh_45377"),l=n("vsh_44108"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r._)(e,t),e.prototype.render=function(){var t=this.props,e=t.zoneId,n=t.editor,r=t.style,o=t.editable,s=t.copyable,u=t.placeholder,c=t.scrollFollowCaret,d=t.isInline,h=t.editableInline,f=t.scroller,p=t.scrollerOptions;return(0,i.azq)(a.L,{zoneId:e,editor:n,style:r||{},editable:o,copyable:s,placeholder:u,scrollFollowCaret:c,onMount:this.handleMount,provides:{editor:n,zoneId:e},scroller:null!=f&&f,scrollerOptions:p},(0,i.azq)(l.C,{editableInline:h,isInline:d,zoneId:e,editor:n}))},e}(i.wA2),c=function(t){var e,n;function i(){return null!==e&&e.apply(this,arguments)||this}return e=t,(0,o.c)(i,e),i.prototype.componentWillMount=function(){var t,e,n,i=(n=this.props).editor,r=n.zoneId;if(n=n.register){i.pluginManager.resetPluginToZoneMap(r);try{for(var s=(0,o.e)(n(i)),a=s.next();!a.done;a=s.next()){var l=a.value;i.pluginManager.register(l,r)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}}},i.prototype.handleMount=function(t){var e=(n=this.props).editor,n=n.zoneId;e.pluginManager.call("zoneDidMount",{zoneId:n},void 0,n),null!==(n=(e=this.props).onMount)&&void 0!==n&&n.call(e,t)},(0,o.a)([s.W],i.prototype,"handleMount",null),n=t=i,(0,o.c)(r,n),r;function r(){return null!==n&&n.apply(this,arguments)||this}}(u)},vsh_45377:function(t,e,n){"use strict";n.d(e,{L:function(){return I}});var i,r=n("vsh_44793"),o=n("vsh_23856"),s=n("vsh_30109"),a=(n("vsh_72862"),n("vsh_98125")),l=n.n(a),u=n("vsh_84965"),c=n("vsh_90166"),d=n("vsh_78224"),h=n("vsh_24719"),f=n("vsh_634"),p=n("vsh_31834"),v={left:void 0,top:void 0},g=((i={})[d.r.SELECTION_CHANGE]={onlyScrollWhenCollapsed:!0},i);function y(t){return t instanceof Window?{clientWidth:window.innerWidth,clientHeight:window.innerHeight,scrollTop:t.scrollY,scrollLeft:t.scrollX}:t instanceof Element?{clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}:(console.error("not a valid scroller"),{clientHeight:0,clientWidth:0,scrollLeft:0,scrollTop:0})}function m(t){return"number"==typeof t?{paddingBottom:t,paddingLeft:t,paddingRight:t,paddingTop:t}:{paddingBottom:t.bottom||0,paddingTop:t.top||0,paddingLeft:t.left||0,paddingRight:t.right||0}}function _(t){return 0!==t.height||0!==t.top||0!==t.left||0!==t.right||0!==t.left}function b(t){return t.left||t.top}var E=n("vsh_93928"),S=n("vsh_33378");var w=function(){function t(t,e,n,i,r){void 0===n&&(n={}),void 0===r&&(r=[]),this.editor=t,this.scroller=e,this.scrollerOptions=n,this.zoneId=i,this.autoScrollEvents=r,this._listeners=[],this._timers={},this.init()}var e=t.prototype;return e.listenEditorEvents=function(){var t=this;this.autoScrollEvents.forEach((function(e){var n,i="string"==typeof e?g[n=e]||{}:(n=e.type,Object.assign({},g[n],e.overideConfig)),r=function(){return t.scrollIntoViewport(void 0,(0,u.b)({_event:n},i))};n===d.r.SELECTION_CHANGE&&(r=function(){var e=t.editor.selection.getSelection(t.zoneId);e&&t.scrollIntoViewport(e.start,(0,u.b)({_event:n},i))}),e=i.triggerAfterPaint?function(){return t.editor.once("paint",r)}:r,t.editor.on(n,e,t.zoneId===E.S?void 0:{zoneId:t.zoneId}),t._listeners.push(e)}))},e.getScroller=function(){return this.scroller},e.emitScroll=function(t){this.editor.call(d.r.SCROLL,t)},e.destroy=function(){for(var t,e=0;e<this.autoScrollEvents.length;e++){var n=this.autoScrollEvents[e],i="string"==typeof n?n:n.type;this.editor.off(i,this._listeners[e])}Object.values(this._timers).forEach((function(t){return window.clearTimeout(t)}));var r=null===(t=null===(r=this.editor.getContentState())||void 0===r?void 0:r.getZoneManager)||void 0===t?void 0:t.call(r);null!=r&&r.removeScrollModule(this.zoneId),this.scroller.removeEventListener("scroll",this.emitScroll)},e.init=function(t){void 0===t&&(t=!0);var e,n=null===(n=null===(e=this.editor.getContentState())||void 0===e?void 0:e.getZoneManager)||void 0===n?void 0:n.call(e);this.scroller.style.position="relative",null!=n&&n.registerScrollModule(this.zoneId,this),t&&this.scroller.addEventListener("scroll",this.emitScroll),this.listenEditorEvents()},e.scrollTo=function(t){this.scroller.scrollTo(t)},e.scrollBy=function(t){this.scroller.scrollBy(t)},e.scrollPointIntoScrollerView=function(t,e,n,i){var r=this.editor,o=this.zoneId;if(!r||!o)return v;var s,a={};if(!_(i))return v;try{s=y(e)}catch(t){return console.error(t),v}return e=r.rectModule.getCaretRect(t,o),t=(r=m(n)).paddingBottom,o=r.paddingLeft,n=r.paddingRight,r=r.paddingTop,r=-e.top+r+s.scrollTop,t=e.bottom-s.clientHeight+t-s.scrollTop,r>1?a.top=s.scrollTop-r:t>1&&(a.top=s.scrollTop+t),o=-e.left+o+s.scrollLeft,n=e.right-s.clientWidth+n-s.scrollLeft,o>1?a.left=s.scrollLeft-o:n>1&&(a.left=s.scrollLeft+n),a},e.scrollPointIntoWindowView=function(t,e,n,i){if(!this.editor)return v;var r,o={};if(!_(i))return v;try{r=y(e),window.visualViewport&&(r.clientHeight=window.visualViewport.height,r.clientWidth=window.visualViewport.width)}catch(t){return console.error(t),v}var s=(l=m(n)).paddingBottom,a=l.paddingLeft,l=(n=l.paddingRight,l.paddingTop);l=-i.top+l,s=i.bottom-r.clientHeight+s;return e===document.documentElement&&(l+=r.scrollTop,s-=r.scrollTop),l>1?o.top=r.scrollTop-l:s>1&&(o.top=r.scrollTop+s),a=-i.left+a,n=i.right-r.clientWidth+n,a>1?o.left=r.scrollLeft-a:n>1&&(o.left=r.scrollLeft+n),o},e._scrollIntoViewport=function(t,e){var n,i=this.editor,r=this.scroller,o=this.zoneId,s=this.scrollerOptions,a=(e=void 0===e?{}:e).onlyScrollWhenCollapsed;e=i.selection.getSelection();a&&!e.isCollapsed()||!t||t.zoneId!==o&&o!==E.S||(!i.getStatus("preventScrolling")&&i.isEditable()?(e=i.rectModule.getRawCaretRect(t),o=v,r!==document.scrollingElement&&(o=this.scrollPointIntoScrollerView(t,r,(null===(n=s.getScrollerPadding)||void 0===n?void 0:n.call(s))||0,e),r.scrollTo(o)),n=document.scrollingElement||window,r=v,s.disableBodyScroll||(r=this.scrollPointIntoWindowView(t,n,(null===(t=s.getViewPortPadding)||void 0===t?void 0:t.call(s))||0,e),n.scrollTo(r)),(b(o)||b(r))&&this.emitScroll()):i.setStatus("preventScrolling",!1))},e.scrollIntoViewport=function(){for(var t,e,n=this,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];this.editor.isFocus()&&(e=(null===(t=i[1])||void 0===t?void 0:t._event)||"DEFAULT",void 0===this._timers[e]&&(this._scrollIntoViewport.apply(this,(0,u.d)([],(0,u._)(i),!1)),this._timers[e]=window.setTimeout((function(){n._timers[e]=void 0}),66)))},(0,u.a)([S.W],t.prototype,"getScroller",null),(0,u.a)([S.W],t.prototype,"emitScroll",null),(0,u.a)([S.W],t.prototype,"destroy",null),(0,u.a)([S.W],t.prototype,"init",null),(0,u.a)([S.W],t.prototype,"scrollTo",null),(0,u.a)([S.W],t.prototype,"scrollBy",null),(0,u.a)([S.W],t.prototype,"scrollPointIntoScrollerView",null),(0,u.a)([S.W],t.prototype,"scrollPointIntoWindowView",null),(0,u.a)([S.W],t.prototype,"_scrollIntoViewport",null),(0,u.a)([S.W],t.prototype,"scrollIntoViewport",null),t}();!function(t){function e(e){var n=t.call(this,e)||this;return n.tagName=f.Kw.TEXT,n._ref=l().createRef(),n._changes={},n.leafModelMap=new WeakMap,(e=n.props.editor).on(d.r.KEYDOWN,n.handleKeyDown,900),e.on(d.r.CONTENT_CHANGE,n.handleContentChange),n}(0,u.c)(e,t);var n=e.prototype;n.handleContentChange=function(t){this._changes=t.changes,this.editor.once(d.r.PAINT,this.handlePaint)},n.handlePaint=function(){var t,e,n,i=(0,h.Ve)(this._ref.current,this.props.editor);i&&this._ref.current&&(e=i.start.zoneId,(n=this._changes[e])&&(t=i.start.line,e=null===(e=this.props.editor.getContentState().getZoneState(e))||void 0===e?void 0:e.getLine(t),n=n.some((function(e){return e.start===t})),e&&n&&this.updateViewModel(this._ref.current,e)))},n.handleKeyDown=function(t){var e,n,i,r,o,s;(0,p.Wl)(t.nativeEvent)&&this._ref&&(!(i=(n=(e=this.props.editor.selection).getSelection()).toPosition()).isCollapsed()||t.shiftKey||(r=(0,h.Ve)(this._ref.current,this.props.editor))&&(o=r.toPosition(),s=null,i.start===o.start&&n.start.zoneId===r.start.zoneId&&t.keyCode===c.VD.Right&&(s=(0,u.b)((0,u.b)({},i),{start:i.start+1})),(s=i.start===o.start+1&&n.start.zoneId===r.start.zoneId&&t.keyCode===c.VD.Left?(0,u.b)((0,u.b)({},i),{start:i.start-1}):s)&&(t.preventDefault(),t.stopPropagation(),t.preventEvent(),t.stopEvent(),e.setSelection(s,!0))))},n.handleRef=function(t){var e;t&&((e=null==(e=null===(e=this._ref.current)||void 0===e?void 0:e.closest("[".concat(c.MB,"]")))?void 0:e.__leafModel)&&(this.props.editor._getViewModel()._setLeaf(t,e),this.leafModelMap.set(t,e)),this._ref.current=t)},n.updateViewModel=function(t,e){var n=null==(i=null===(r=this._ref.current)||void 0===r?void 0:r.closest("[".concat(c.MB,"]")))?void 0:i.__leafModel,i=(r=n||{}).start,r=r.op;e=null!=e?e:n.lineState,e=i&&r?i+r.insert.length:e.length();this.props.editor._getViewModel()._setLeaf(t,(0,u.b)((0,u.b)({},n),{start:e}))},n.handleMouseDown=function(){var t;!this._ref||(t=(0,h.Ve)(this._ref.current,this.props.editor))&&this.props.editor.selection.setSelection(t,!0)},n.componentWillUnmount=function(){this.editor.off(d.r.KEYDOWN,this.handleKeyDown),this.editor.off(d.r.CONTENT_CHANGE,this.handleContentChange),this.editor.off(d.r.PAINT,this.handlePaint),this._ref&&this._ref.current&&this.props.editor._getViewModel()._deleteLeaf(this._ref.current)},n.render=function(){var t=f.Kw.TEXT;return l().createElement(t,(0,u.b)({},((t={})[c.sq]=!0,t),{contentEditable:!1,ref:this.handleRef,onMouseDown:this.handleMouseDown,style:Object.assign({userSelect:"none"},null!==(t=this.props.style)&&void 0!==t?t:{})}),this.props.children)},(0,u.a)([S.W],e.prototype,"handleContentChange",null),(0,u.a)([S.W],e.prototype,"handlePaint",null),(0,u.a)([S.W],e.prototype,"handleKeyDown",null),(0,u.a)([S.W],e.prototype,"handleRef",null),(0,u.a)([S.W],e.prototype,"handleMouseDown",null)}(f.cc);var C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}(0,s._)(e,t);var n=e.prototype;return n.componentDidCreate=function(){var t,e;null===(e=(t=this.props).onCreate)||void 0===e||e.call(t)},n.handleRef=function(t){var e,n;null===(n=(e=this.props).onRef)||void 0===n||n.call(e,t),this.setRef(t)},n.render=function(){var t=this.props,e=t.style,n=t.children,i=this.zoneId,s={provides:{zoneId:i},key:i,ref:this.handleRef,style:Object.assign({},e||{outline:"none"},{cursor:this.props.editable?"text":"default"}),"data-zone-id":i,"data-zone-container":"*",className:["data-zone-id-"+i]};return(0,o.azq)(r.ZC,s,n)},(0,s.b)([S.W],e.prototype,"handleRef",null),e}(o.wA2),I=function(t){var e,n;function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.setRef=function(e){var n,i;e&&(t.view=e,i=t.zoneId,(i=(n=t.props.editor).getContentState().getZoneState(i))&&n._getViewModel()._setNode(i,e))},t}return e=t,(0,u.c)(i,e),i.prototype.componentWillMount=function(){this.setScrollModule(null)},i.prototype.componentDidMount=function(){var t,e;null!==(t=(e=this.props).onMount)&&void 0!==t&&t.call(e,this.view),null!==(e=this.props.editor.getContentState().getZoneState(this.zoneId))&&void 0!==e&&e.setPlaceholder(this.props.placeholder||""),this.props.defaultContent&&console.log("[ZoneView]: defaultContent 已经废弃，请传入zoneId")},i.prototype.componentDidUpdate=function(t){this.setScrollModule({editor:t.editor,zoneId:t.zoneId,scroller:t.scroller})},i.prototype.setScrollModule=function(t){!function(t,e,n,i){var r;void 0===n&&(n=!0),void 0===i&&(i={});var o=e.editor,s=e.scroller,a=e.zoneId,l=null===(l=null===(r=null===(l=o.getContentState())||void 0===l?void 0:l.getZoneManager)||void 0===r?void 0:r.call(l))||void 0===l?void 0:l.getScrollModuleByZoneId(a);(!t||t.editor!==e.editor||!l||t.scroller!==s||t.zoneId!==a)&&(t=null,void 0===s||!0===s?t=document.scrollingElement||document.body:!1===s?t=null:(s instanceof Element||s instanceof Window)&&(t=s),null!==t?l=new w(o,t,(0,u.b)((0,u.b)({},i),{getViewPortPadding:o.getViewPortPadding}),a,!1===n?[]:[{type:d.r.SELECTION_CHANGE,overideConfig:{triggerAfterPaint:!0}}]):null!=l&&l.destroy())}(t,{editor:this.props.editor,zoneId:this.props.zoneId,scroller:this.props.scroller},this.props.autoScroll,this.props.scrollerOptions)},i.prototype.componentWillUnmount=function(){var t=this.props.editor,e=t.getContentState().getZoneState(this.zoneId);e&&t._getViewModel()._resetNode(e),this.view&&t._getViewModel()._deleteNode(this.view)},Object.defineProperty(i.prototype,"zoneId",{get:function(){return this.props.zoneId},enumerable:!1,configurable:!0}),n=t=i,(0,u.c)(r,n),r;function r(){return null!==n&&n.apply(this,arguments)||this}}(C)},vsh_6252:function(t,e,n){"use strict";n.d(e,{P:function(){return Jt}});var i=n("vsh_44793"),r=n("vsh_23856"),o=n("vsh_31927"),s=n("vsh_30109"),a=(n("vsh_72862"),n("vsh_90166")),l=n("vsh_78224"),u=n("vsh_41013"),c=(n("vsh_98125"),n("vsh_63387")),d=n("vsh_21259"),h=n("vsh_65498"),f=n("vsh_84965"),p=n("vsh_93919"),v="selectionchange",g=function(){function t(){var t=this;this.fastListener=new WeakMap,this.hasBindMap=new WeakMap,this.dispatchNativeEvent=function(e){var n=e.type,i=null;if(e.type===v){var r=window.getSelection();if(!r||!r.rangeCount)return;i=r.getRangeAt(0).startContainer.parentElement}for(var o=t.getListenersByNode(n,i||e.target),s=0,a=o.length;s<a;s++){var l=(u=o[s]).dom,u=u.handle;t.shouldDispatchEvent(e,l,i)&&u(e)}},this.on=function(e,n,i,r){var o=void 0===(r=(s=void 0===r?{}:r).priority)?0:r,s=s.customizedDelegateDom;t.bindNativeEvent(e,n,s||null);var a={dom:n,handle:i,priority:o},l=t.fastListener.get(n);l||t.fastListener.set(n,l={}),l[e]||(l[e]=[]);for(var u=0;u<l[e].length;u++)if(l[e][u].priority>o)return void l[e].splice(u,0,a);l[e].push(a)},this.off=function(e,n,i){var r=t.fastListener.get(n);r&&r[e]&&(0,f.d)([],(0,f._)(r[e]),!1).forEach((function(t,n){t.handle===i&&r[e].splice(n,1)}))}}var e=t.prototype;return e.bindNativeEvent=function(t,e,n){var i;switch(t){case"resize":i=n||window;break;case"focus":case"blur":i=n||e instanceof HTMLElement&&e.closest("[contenteditable]")||document;break;default:i=n||document}var r=this.hasBindMap.get(i);r||(r=new Map,this.hasBindMap.set(i,r)),r.has(t)||(i.addEventListener(t,this.dispatchNativeEvent),r.set(t,!0))},e.getListenersByNode=function(t,e){for(var n=[];e;){var i=this.fastListener.get(e);i&&i[t]&&n.push.apply(n,(0,f.d)([],(0,f._)(i[t]),!1)),e=e.parentNode}return n.sort((function(t,e){return t.priority-e.priority}))},e.shouldDispatchEvent=function(t,e,n){if(t.defaultPrevented)return!1;if(t.type===v){if(e instanceof HTMLElement)return e.hasAttribute("contenteditable")?e.contains(n):!(!(n=window.getSelection())||!n.rangeCount)&&e.contains(n.getRangeAt(0).startContainer);if(e instanceof Document)return e===t.target}return!(!t.target||!t.target.contains)&&(e===t.target||e.contains(t.target))},t}(),y=new g,m=n("vsh_15516"),_=n("vsh_34482"),b=n("vsh_37621"),E=n("vsh_70988"),S=n("vsh_32275"),w=n("vsh_30778"),C=n("vsh_43110"),I=n("vsh_46266"),T=n("vsh_31138"),x=n("vsh_10907"),k=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.dataTransfer=null,i.evtTargetSelection=null,(0,T.u)(i,x.Y,e,n),i}return(0,f.c)(e,t),e}(I.U),M=n("vsh_9829"),R=n("vsh_89828"),P=function(){function t(){this.modules=new Map}var e=t.prototype;return e.get=function(t){var e=this.modules.get(t);if(!e)throw Error("modules undefined, type is ".concat(t));return e},e.set=function(t,e){var n,i,r=this;"object"==(0,h.Z)(t)?(n=t,Object.keys(n).forEach((function(t){u.h[t]||console.warn("modules not in ".concat(u.h,", type is ").concat(t)),r.set(t,n[t])}))):"string"==typeof t&&e?(this.modules.get(i=t)&&console.warn("modules repeat, type is ".concat(i)),this.modules.set(i,e)):console.error("set modules param error",t,e)},e.getInstance=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=this.get(t);return new(i.bind.apply(i,(0,f.d)([void 0],(0,f._)(e),!1)))},t}(),O=n("vsh_57916"),L=function(){function t(){this.NODE_TO_DOM=new WeakMap,this.DOM_TO_NODE=new WeakMap,this.DOM_TO_LEAF=new WeakMap}var e=t.prototype;return e._setNode=function(t,e){t._node=e,this._deleteNode(t),this._deleteNode(e),this.NODE_TO_DOM.set(t,e),this.DOM_TO_NODE.set(e,t)},e._resetNode=function(t){t._node=null},e._deleteNode=function(t){var e;this.DOM_TO_NODE.has(t)?((e=this.DOM_TO_NODE.get(t))&&this.NODE_TO_DOM.delete(e),this.DOM_TO_NODE.delete(t)):((e=this.NODE_TO_DOM.get(t))&&this.DOM_TO_NODE.delete(e),this.NODE_TO_DOM.delete(t))},e.getModel=function(t){return this.DOM_TO_NODE.get(t)},e.getView=function(t){return this.NODE_TO_DOM.get(t)},e._setLeaf=function(t,e){this.DOM_TO_LEAF.set(t,e)},e._deleteLeaf=function(t){},e.getLeafModel=function(t){return this.DOM_TO_LEAF.get(t)},e.destroy=function(){this.NODE_TO_DOM=new WeakMap,this.DOM_TO_NODE=new WeakMap,this.DOM_TO_LEAF=new WeakMap},t}();function D(t,e){var n;if(document.caretPositionFromPoint){if(n=document.caretPositionFromPoint(t,e))return{textNode:n.offsetNode,offset:n.offset}}else if(document.caretRangeFromPoint&&(n=document.caretRangeFromPoint(t,e)))return{textNode:n.startContainer,offset:n.startOffset};return null}var A=n("vsh_51240"),z=n("vsh_22432"),N=n("vsh_93928"),W=n("vsh_1707"),B=n("vsh_33378"),K=n("vsh_18776"),Z=n("vsh_52016"),j=n("vsh_52531");var U,V,F=(U=function(t){function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==(0,h.Z)(Symbol.iterator)?function(t){return(0,h.Z)(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":(0,h.Z)(t)},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},U(V={exports:{}},V.exports),V.exports),H=function(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}(F),X=(0,z.K)((function(t){this.error(t)}))(z.W.ERROR),Y=["input","beforeinput","keyup","keydown","keypress","compositionstart","compositionupdate","compositionend"],G=function(){function t(t){var e,n=this;this.props=t,this.version=a.cH+"@4.110.0-alpha-feat-roadster.7 - December 13, 2023 04:04:02",this.log=null!==(e=this.props.onLog)&&void 0!==e?e:console.log.bind(console)||console.log,this.copyable=null===(i=this.props.copyable)||void 0===i||i,this.businessKey=this.props.businessKey,this.mounted=!1,this.editorUniqueId=(0,K.D)(6),this._hydrateMap=new Map,this._dir=this.props.dir,this._listenEvents=A.C,this.isError=!1,this.rootContainer=this.props.container,this.contentEditableTemp=Boolean(this.props.editable),this.rect={height:0,left:0,top:0,width:0},this.editable=null===(e=this.props.editable)||void 0===e||e,this.contentEditableLock=!1,this._listenerToZone=new WeakMap,this.setEditable=function(t,e){t||n.blur(),n.setPluginMode(t,e)},this._handleShortcuts=function(t){n._maybeSelectAll(t)},this._handleDragOver=function(t){t.preventDefault()},this._handleContainerResize=(0,Z.P)((function(){n.rectModule.clearCache();var t=n.getRect();n.setRect();var e=n.getRect();(0,j.X)(t,e)||n.call("editorRectChange",{prev:t,next:e})})),this.delegator=this.props.eventDelegator,this.eventEmitter=new b.Z,this.modulesContainer=new P,this.modulesContainer.set(t.modules);var i=this.modulesContainer.get(u.h.UndoModule);this.undoModule=new i(this),this._viewModel=new L,this.clipboard=new M.a(this,t.proxyClipboard),this._contentState=t.contentState||this.initContentState(this.props.initData,this.props.schema),this.bindContentStateEvents(),this._status={isPerforming:!1,contentChanged:!1,preventScrolling:!1,stopUpdateSelection:!1,preventUpdateDomSelection:!1,isComposing:!1,isPainting:!1},this.initPluginManager(this.props.register),null!==(i=(e=this._contentState).init)&&void 0!==i&&i.call(e),this.delegator=null!==(e=t.eventDelegator)&&void 0!==e?e:y,this._listenEvents=null!==(t=t.listenEvents)&&void 0!==t?t:A.C}var e=t.prototype;return Object.defineProperty(e,"scrollModule",{get:function(){var t,e;return null===(e=null===(t=null===(e=this.getContentState())||void 0===e?void 0:e.getZoneManager)||void 0===t?void 0:t.call(e))||void 0===e?void 0:e.getScrollModuleByZoneId(N.S)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"getViewPortPadding",{get:function(){return this.props.getViewPortPadding},enumerable:!1,configurable:!0}),Object.defineProperty(e,"placeholder",{get:function(){return this.props.placeholder},enumerable:!1,configurable:!0}),e.init=function(t){t=t.element,(this.rootContainer=t)instanceof HTMLElement&&(this.rootContainer.zoneId={value:"0"}),this.initBrowserEnv()},e.initContentState=function(t,e){var n,i=t instanceof _.I?(new m.D).add(N.S,t):t;return i.get(N.S)||(n="[Editor][constructor] invalid initDeltaSet: ".concat(i,', initDeltaSet must has zone "0"'),t=new Error(n),this.error({e:t,message:n,level:z.W.FATAL})),new(this.modulesContainer.get(u.h.ContentState))({deltaSet:i,schema:e,modulesContainer:this.modulesContainer})},e.bindContentStateEvents=function(){var t=this,e=this._contentState;e._onWillApply(this._handleContentWillApply),e.onWillChange(this._handleContentWillChange),e.onChange(this._handleContentChange),e._onRefresh((function(e){t.call("_forceRefresh",e)})),e._onError((function(e){var n=e.e,i=e.message;e=e.level;t.error({e:n,message:i,level:e})}))},e.initPluginManager=function(t){this.pluginManager&&this.pluginManager.destroy(),this.pluginManager=new O.Q$(this,t),this.pluginManager._init()},e.call=function(t,e){var n,i=this;"error"!==t||this.isError||(this.isError=!0,n=null===(n=null==e?void 0:e.e)||void 0===n?void 0:n.stack,e=(0,f.b)((0,f.b)({},e),{errorStack:new Error("editor oops").stack,originErrorStack:n})),this.eventEmitter.getListeners(t).slice(0).forEach((function(n){if(n)for(var r=0;r<n.length;r++)!function(r){if(r=n[r]){var o,s=r.listener,a=r.isOnce;if(a&&i.eventEmitter.removeEventListener(t,s),!s.plugin)return i._listenerToZone.has(s)?(r=i._listenerToZone.get(s),t===l.r.CONTENT_WILL_CHANGE?e.deltaSet.get(r)&&(s.call(s,e),a&&i.off(t,s)):t===l.r.CONTENT_CHANGE?r in e.changes&&(s.call(s,e),a&&i.off(t,s)):t===l.r.PAINT?r===(null==e?void 0:e.zoneId)&&(s.call(s,e),a&&i.off(t,s)):i.selection.isZoneInSelection(r)&&(s.call(s,e),a&&i.off(t,s))):(s.call(s,e),a&&i.eventEmitter.removeEventListener(t,s));null!=e&&e.changes?(o=Object.assign((0,f.b)({},e),{changes:{},deltaSet:new m.D}),Object.keys(null==e?void 0:e.changes).forEach((function(t){o.changes[t]=e.changes[t],o.deltaSet.add(t,e.deltaSet.get(t))})),s.call(s,o),a&&i.off(t,s)):i.selection.getMultipleSelection().forEach((function(n){n=n.start.zoneId,s.plugin&&i.pluginManager.isPluginInZone(s.plugin,n)&&(s.call(s,e),a&&i.off(t,s))}))}}(r)}))},e.getRect=function(t){return(t=void 0===t?N.S:t)===N.S?this.rect:this.rectModule.getZoneRect(t)},e.setRect=function(){this.rootContainer&&(this.rect=this.rectModule.getEditorRect())},e.getRootContainer=function(){var t=this.rootContainer||null;return t||console.warn("editor root container is not exist"),t},e.getContainer=function(){return this.rootContainer},e.setMounted=function(t){this.mounted=t},e.getStatus=function(t){return this._status[t]},e.getDelegator=function(){return this.delegator},e._getInlineAttributesOfPreviousPosition=function(){var t=(o=this._contentState.getActiveZone()).getZoneId(),e=this.selection.getSelection(t),n=o.getLine(e.start.line),i=n.getLineMarker(),r=e.start,o=e.start;return i===e.start.offset&&n.length()>i?o=new c.L({start:e.toPosition().start+1,editor:this,len:0,zoneId:t}).toRange().start:e.start.offset>i&&(r=new c.L({start:e.toPosition().start-1,editor:this,len:0,zoneId:t}).toRange().start),this._contentState.getAttributes(r,o)},e._getInlineAttributesOfNextPosition=function(){var t=this._contentState.getActiveZone().getZoneId(),e=this.selection.getSelection(t),n=null===(i=this._contentState.getZoneState(t))||void 0===i?void 0:i.getLine(e.start.line);if(!n)return(0,R.vA)();var i=e.start;return e.start.offset<n.length()&&(i=new c.L({start:e.toPosition().start+1,editor:this,len:0,zoneId:t}).toRange().start),this._contentState.getAttributes(e.start,i)},e.toggleAttribute=function(t,e,n){var i,r,o,s;void 0===e&&(e="true");var a=(n=n||this.selection.getSelection()).start,l=a.line,u=a.zoneId,c=n.end.line,d=this.getContentState(),h=d.schema;if(null===(a=h.get(t))||void 0===a?void 0:a.lmkr){for(var p=Math.min(l,c),v=Math.max(l,c),g="",y=p;y<=v;y++)d.getLineAttributes(u,y).toMap()[t]!==e&&(g=e);for(y=p;y<=v;y++)this.getContentState().setLineAttributes(u,y,((i={})[t]=g,i))}else if(n.isCollapsed()){var m=n.toPosition();c=this._getInlineAttributesOfPreviousPosition().toMap();(g=null!==(p=this._contentState.getInlineStyleOverride(m,t))&&void 0!==p?p:c[t])===e?this._contentState._setInlineStyleOverride(m,t,""):this._contentState._setInlineStyleOverride(m,t,e)}else{if(g="",m=this._contentState.getEntities(n))try{for(var _=(0,f.e)(m),b=_.next();!b.done;b=_.next()){var E=b.value,S=!0,w=(0,R.qF)(h,E.attributes),C=w&&(null===(s=h.get(w))||void 0===s?void 0:s.attributes);if(w&&C&&(S=C instanceof RegExp?C.test(t):C(t,e,w)),"\n"!==E.text&&!("lmkr"in E.attributes)&&S&&E.attributes[t]!==e){g=e;break}}}catch(t){r={error:t}}finally{try{b&&!b.done&&(o=_.return)&&o.call(_)}finally{if(r)throw r.error}}this._contentState.setAttributes(n,((n={})[t]=g,n))}},e.on=function(t,e,n){var i,r;"object"===H(n)?(r=n.priority,(i=n.zoneId)&&this._listenerToZone.set(e,i),this.eventEmitter.on(t,e,r)):this.eventEmitter.on(t,e,r=n)},e.once=function(t,e,n){var i,r;"object"===H(n)?(r=n.priority,(i=n.zoneId)&&this._listenerToZone.set(e,i),this.eventEmitter.once(t,e,r)):this.eventEmitter.once(t,e,r=n)},e.off=function(t,e){this._listenerToZone.has(e)&&this._listenerToZone.delete(e),this.eventEmitter.off(t,e)},e.registerCommand=function(t,e){var n=this;this.on(t,(function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];n.undoModule.batchedUndo((function(){e.apply(n,t)}))}))},e.execCommand=function(t,e){var n=!1,i={name:t,data:e=void 0===e?{}:e,preventEvent:function(){n=!0}};this.call(l.r.EXEC_COMMAND,i),n||this.eventEmitter.trigger(t,[e])},e.getContentState=function(){return this._contentState},e.getContent=function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),this.getContentState().toDeltaSet(t,e)},e.setContent=function(t,e){void 0===e&&(e={}),this.getContentState().setContent(t,Object.assign({},{type:"setContent"},e))},e.getHTML=function(){var t=this.getContent(),e={zoneId:N.S,deltaSet:t,node:this.getContainer(),customCopyDatas:[]};t=this.clipboard.serialize(e);return(e=document.createElement("div")).appendChild(t.node),e.innerHTML},e.setHTML=function(t){t=this.clipboard.deserialize({html:t},!0),this.setContent(t)},e.getText=function(){var t,e,n=this,i=[],r=this.getContentState().getZoneState(N.S);if(!r)return"";try{for(var o=(0,f.e)(r),s=o.next();!s.done;s=o.next()){var a=s.value;(a.hasLineMarker()?a.getOps().slice(1):a.getOps()).forEach((function(t){t={text:t.insert,attributes:(0,f.b)({},t.attributes)},n.pluginManager.call("editorCollectText",t),i.push(t.text)}))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return i.join("")},e.setText=function(t){t.endsWith("\n")||(console.warn("text should end with \\n"),t+="\n"),this.setContent(new _.I({zoneId:N.S}).insert((0,W.$)(t)))},e.isSelectionInEditor=function(t){return this.selection.isSelectionInEditor(t)},e.isFocus=function(t){var e;return(null===(e=this.inputModel)||void 0===e?void 0:e.hasFocus())||!1},e.isEmpty=function(){return!this.getStatus("isComposing")&&this.getContentState().isEmpty()},e.focusAtEnd=function(){var t,e=this.getContentState().getZoneState(N.S);e&&(this.focus(),t=e.getModelText().length-1,this.selection.setSelection({start:(0,f.b)((0,f.b)({zoneId:N.S},e.offsetToPoint(t)),{isEdge:!0}),end:(0,f.b)((0,f.b)({zoneId:N.S},e.offsetToPoint(t)),{isEdge:!0})},!0))},e.focus=function(t,e){var n=this.editable,i=this.copyable;(n||i)&&(!n&&p.Xh.mobile&&this.inputModel.setContentEditable(!1),this.inputModel.focus(),this.selection.updateViewSelection(),!n&&p.Xh.mobile&&this.inputModel.setContentEditable(!0))},e.blur=function(){this.editable&&(this.inputModel.blur(),this.selection.setCursorActive(!1),this.call(l.r.BLUR))},e.flushInput=function(){},e.isInEmbed=function(){return!1},e.setContentEditable=function(t){var e;this.contentEditableLock?this.contentEditableTemp=t:((e=this.isEditable())!==t&&this.call(l.r.EDITABLE_CHANGE,{previous:e,current:t}),this.callAll("aceChangeContentediable"))},e.scrollToSelection=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0,f.f)(this,void 0,void 0,(function(){return(0,f.g)(this,(function(n){return[2,null===(t=this.scrollModule)||void 0===t?void 0:t.scrollIntoViewport.apply(t,(0,f.d)([],(0,f._)(e),!1))]}))}))},e.scrollTo=function(t){var e;return(0,f.f)(this,void 0,void 0,(function(){return(0,f.g)(this,(function(n){return[2,null===(e=this.scrollModule)||void 0===e?void 0:e.scrollTo(t)]}))}))},e.scrollBy=function(t){var e;return(0,f.f)(this,void 0,void 0,(function(){return(0,f.g)(this,(function(n){return[2,null===(e=this.scrollModule)||void 0===e?void 0:e.scrollBy(t)]}))}))},e.callAll=function(t,e){var n=[];return this.pluginManager.call(t,e||{},(function(t,e){return n.push(e),t})),n},e.destroy=function(){try{this.selection.destroy(),this.inputModel.destroy(),this.undoModule.destroy(),this.rectModule.clearCache(),this.eventEmitter.reset(),this._contentState._clearListener(),this.destroyPlugins()}catch(t){this.log("[Editor][destroy]".concat(t))}},e.reset=function(){this.getContentState().clear(),this.callAll("reset"),this.setText(""),this.clearStatus(),this.rectModule.clearCache(),this.undoModule.clear()},e.getScrollContainer=function(){var t;return null===(t=this.scrollModule)||void 0===t?void 0:t.getScroller()},e.isEditable=function(){return!!this.editable},e.isFocusOnBlock=function(t){return!1},e.getOuterContainer=function(){var t=this.getContainer();return t?t instanceof HTMLElement?t.parentNode:t.parent:null},e._maybeSelectAll=function(t){var e=t.keyCode,n=t.shiftKey,i=t.metaKey,r=t.altKey,o=t.ctrlKey;n||r||(p.Xh.isMac||p.Xh.isIPad?i:o)&&e===a.VD.A&&(e=this.selection.getSelection().start.zoneId,this.selection.selectAll(e),t.preventDefault())},e.assignCaretSelection=function(t){var e=t.clientX,n=t.clientY;(e=D(e=e-window.pageXOffset,n=n-window.pageYOffset))&&(n=e.textNode,e=e.offset,n&&(t.evtTargetSelection=this.selection.getElementRange(n,{start:e||0,end:e||0})))},e.initBrowserEnv=function(){var t,e,n=this.rootContainer;n instanceof HTMLElement&&(t=[],p.Xh.chrome&&t.push("chrome"),p.Xh.isFF&&t.push("mozilla"),p.Xh.safari&&t.push("safari"),p.Xh.msie&&t.push("msie"),p.Xh.windows&&t.push("window"),(e=(0,p.vu)())&&88<=parseInt(e)&&t.push("chrome88"),(n=n.classList).add.apply(n,(0,f.d)([],(0,f._)(t),!1)))},e.destroyPlugins=function(){try{this.pluginManager.destroy()}catch(t){console.error("destroy plugin fail",t)}},e.clearStatus=function(){var t,e,n=this._status;try{for(var i=(0,f.e)(Object.keys(n)),r=i.next();!r.done;r=i.next()){var o=r.value;this.setStatus(o,!1)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},e._toggleZonePlaceHolder=function(t,e){},e.setStatus=function(t,e){this._status[t]=e},e.transformPosition=function(t,e){var n=e.zoneId;if(t.zoneId!==n)return e;var i=e.start,r=e.len,o=e.isBackward,s=e.isEdge;e=t.transform(i),r=t.transform(i+r);return new c.L({start:e,len:r-e,zoneId:n,editor:this,isBackward:o,isEdge:s})},e._getViewModel=function(){return this._viewModel},e._correctCompositionIfNecessary=function(t){var e,n,i=this;!0===this.getStatus("isComposing")&&(e=t.type,t=t.sourceEvent||t.nativeEvent||t,n=new S.h(new CompositionEvent("compositionend"),this.getContainer()),Y.includes(e)?t instanceof KeyboardEvent&&!1===t.isComposing&&(this.triggerEditorEvent("compositionend",n),this.log("[Editor][_correctCompositionIfNecessary]\n                   dispatchCompositionEvent because eventType is ".concat(e," and isComposing is false"))):(p.Xh.windows&&"blur"===e?setTimeout((function(){i.triggerEditorEvent("compositionend",n)})):this.triggerEditorEvent("compositionend",n),this.log("[Editor][_correctCompositionIfNecessary] dispatchCompositionEvent because eventType is ".concat(e))))},e._setPlaceholder=function(t){this.props.placeholder=t},e._handleMouseDown=function(t){this.triggerMouseEvent(t)},e._handleContentWillApply=function(){},e._handleContentWillChange=function(t){return this.pluginManager.call("editorWillApplyChange",t,(function(e,n){return t.deltaSet=n,t})),this.call(l.r.CONTENT_WILL_CHANGE,t),t.deltaSet},e._handleContentChange=function(t){var e,n,i,r,o,s,a=this,u=t.previous,c=t.current,d=t.options;(p=this._contentState.getZoneState(N.S))&&this._getViewModel()._setNode(p,this.getContainer());var h=Object.keys(t.changes).map((function(t){return null===(t=a.selection.getSelection(t,u))||void 0===t?void 0:t.toPosition(u)})).filter(Boolean),p=h.map((function(e){return t.deltaSet.get(e.zoneId)}));t.deltaSet.forEach((function(t){a.rectModule.clearZoneRect(t.zoneId)}));try{for(var v=(0,f.e)(Object.values(t.changes)),g=v.next();!g.done;g=v.next()){var y=g.value;try{for(var _=(i=void 0,(0,f.e)(y)),b=_.next();!b.done;b=_.next()){var E=b.value;try{for(var S=(o=void 0,(0,f.e)(E.deletes)),w=S.next();!w.done;w=S.next()){var C=w.value;E.inserts.includes(C)||this._getViewModel()._deleteNode(C)}}catch(n){o={error:n}}finally{try{w&&!w.done&&(s=S.return)&&s.call(S)}finally{if(o)throw o.error}}}}catch(n){i={error:n}}finally{try{b&&!b.done&&(r=_.return)&&r.call(_)}finally{if(i)throw i.error}}}}catch(n){e={error:n}}finally{try{g&&!g.done&&(n=v.return)&&n.call(v)}finally{if(e)throw e.error}}p.forEach((function(t,e){e=h[e];var n=t&&(0,m.p)(null===(n=c.getZoneState(t.zoneId))||void 0===n?void 0:n.getContent());t&&e&&!n&&(e=a.transformPosition(t,e),a.selection._replaceSingleRangeModel(e))})),this.setStatus("contentChanged",!0),d.preventScrolling&&this.setStatus("preventScrolling",!0),this.call(l.r.CONTENT_CHANGE,t),this.setStatus("preventScrolling",!1),this.selection._dispatchEvent(!1)},e._handleMouseUp=function(t){this.triggerMouseEvent(t)},e.triggerMouseEvent=function(t){var e=new I.U(t,t.target);this.triggerEditorEvent(t.type,e)},e.triggerTouchEvent=function(t){var e=new E.R(t,t.target);this.triggerEditorEvent(t.type,e)},e._handleClickEvent=function(t){var e,n;this.contains(t.target)&&(e=this.selection.getElementRange(t.target),n=new I.U(t,t.target),this.triggerEditorEvent(t.type,(0,f.b)((0,f.b)({},n),{selection:e})))},e._handleTouchStart=function(t){this.triggerTouchEvent(t)},e._handleTouchEnd=function(t){this.contains(t.target)&&(this.focus(),this.triggerTouchEvent(t))},e._handleKeyEvent=function(t){var e;!this.isInEmbed()&&this.isEditable()&&(e=new w.$(t,t.target),this.triggerEditorEvent(t.type,e).shouldPrevent||this._handleShortcuts(e.nativeEvent))},e._handleCopy=function(t){var e=this;this.undoModule.batchedUndo((function(){e.clipboard.onCopy(t)}))},e._handleCut=function(t){var e=this;this.undoModule.batchedUndo((function(){e.clipboard.onCut(t)}))},e._handlePaste=function(t){var e=this;!this.isFocusOnBlock()&&this.isEditable()&&this.undoModule.batchedUndo((function(){e.clipboard.onPaste(t)}))},e._handleDrag=function(t){var e=new k(t,t.target);this.assignCaretSelection(e),this.triggerEditorEvent(t.type,e)},e._handleFocusEvent=function(t){"focus"===t.type&&!this.getStatus("isPerforming")&&!this.getStatus("preventUpdateDomSelection")&&this.isFocus()&&t.target&&this.selection.updateViewSelection();var e=new C.Y(t,t.target);this.triggerEditorEvent(t.type,e)},e._handleResizeEvent=function(t){var e,n,i;i=t instanceof Event?function(t){if(!(t instanceof Element))return{width:0,height:0,left:0,right:0,top:0,bottom:0};var e=window.getComputedStyle(t),n=(parseFloat(e.paddingLeft)||0)+(parseFloat(e.paddingRight)||0),i=(parseFloat(e.paddingTop)||0)+(parseFloat(e.paddingBottom)||0);return e=t.getBoundingClientRect(),{width:t.clientWidth-n,height:t.clientHeight-i,left:e.left,right:e.right,top:e.top,bottom:e.bottom}}(this.getContainer()):{width:(t=t[0].contentRect).width,height:t.height,top:t.top,bottom:t.bottom,left:t.left,right:t.right};var r=this.getRect();r.width===i.width&&r.height===i.height||this.call(l.r.RESIZE,{previous:r,current:i});try{for(var o=(0,f.e)(Object.entries(i)),s=o.next();!s.done;s=o.next()){var a=(0,f._)(s.value,2),u=a[0],c=a[1];if(r[u]!==c){this.call(l.r.RECT_CHANGE,{previous:r,current:i});break}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}},e.triggerEditorEvent=function(t,e){function n(){r=!0}var i=this,r=(t=this.eventEmitter.getListeners(t),!1),o=!1;function s(){o=!0}return e=e||{},t.forEach((function(t){if(t)for(var o=0;o<t.length&&"break"!==function(o){if(r)return"break";if(!t[o])return"continue";var a,l=(o=t[o]).listener;o=o.isOnce;e&&(e.stopEvent=n,e.preventEvent=s,e.evt=e);try{l.plugin?i.selection.getMultipleSelection().forEach((function(t){t=t.start.zoneId,l.plugin&&i.pluginManager.isPluginInZone(l.plugin,t)&&l.call(l,e)})):i._listenerToZone.has(l)?(a=i._listenerToZone.get(l))&&i.selection.isZoneInSelection(a)&&(l.call(l,e),o&&i._listenerToZone.delete(l)):l.call(l,e)}catch(o){i.error({e:o,message:o.message,level:z.W.ERROR})}}(o);o++);})),{shouldStop:r,shouldPrevent:o}},e.setStopUpdateSelection=function(t){this.setStatus("stopUpdateSelection",t)},e.setPreventUpdateDomSelection=function(t){this.setStatus("preventUpdateDomSelection",t)},e._getAttributesOfPreviousPosition=function(){var t=this._contentState.getActiveZone().getZoneId(),e=this.selection.getSelection(t),n=e.start;return 0<e.start.offset&&(n=new c.L({start:e.toPosition().start-1,editor:this,len:0,zoneId:t}).toRange().start),this._contentState.getAttributes(n,e.start)},e._getAttributesOfNextPosition=function(){var t=this._contentState.getActiveZone().getZoneId(),e=this.selection.getSelection(t),n=null===(i=this._contentState.getZoneState(t))||void 0===i?void 0:i.getLine(e.start.line);if(!n)return(0,R.vA)();var i=e.start;return e.start.offset<n.length()&&(i=new c.L({start:e.toPosition().start+1,editor:this,len:0,zoneId:t}).toRange().start),this._contentState.getAttributes(e.start,i)},e.setPluginMode=function(t,e){if(this.editorStatusLocked)this.editableArgTemp={designMode:t,args:e};else{this.editable=t;try{this.editable?this.callAll("pluginReadWrite",e):this.callAll("pluginReadOnly",e)}catch(t){this.log("[Editor][setPluginMode] ".concat(t))}}},e.setEditStatusLock=function(t,e){var n;!(this.editorStatusLocked=t)&&e&&this.editableArgTemp&&(e=(n=this.editableArgTemp).designMode,n=n.args,this.setEditable(e,n)),t&&(this.editableArgTemp={designMode:this.editable,args:{}})},e.setContentEditableLock=function(t){(this.contentEditableLock=t=void 0!==t&&t)||this.setContentEditable(this.contentEditableTemp)},e.setContainerContentEditableLock=function(t){},e.unstable_hydrate=function(t,e){this._hydrateMap.set(t,e),this._getViewModel()._setNode(t,e),e[a.e0]=!0},e._deleteHydrateTask=function(t){this._hydrateMap.delete(t),t._node&&(t._node[a.e0]=!1)},e.error=function(t){t.e||(t.e=new Error(t.message)),this.call("error",t)},e.contains=function(t){if(!t)return!1;var e=this.getContainer();return e instanceof HTMLElement?t instanceof Node&&e.contains(t):this.selection.contains(e,t)},e.changeHiddentInputStyle=function(t){this.inputModel.changeHiddentInputStyle(t)},(0,f.a)([B.W],t.prototype,"setRect",null),(0,f.a)([X],t.prototype,"toggleAttribute",null),(0,f.a)([X],t.prototype,"setContent",null),(0,f.a)([X],t.prototype,"setHTML",null),(0,f.a)([X],t.prototype,"setText",null),(0,f.a)([B.W],t.prototype,"scrollToSelection",null),(0,f.a)([B.W],t.prototype,"scrollTo",null),(0,f.a)([B.W],t.prototype,"_handleMouseDown",null),(0,f.a)([B.W],t.prototype,"_handleContentWillApply",null),(0,f.a)([B.W],t.prototype,"_handleContentWillChange",null),(0,f.a)([B.W],t.prototype,"_handleContentChange",null),(0,f.a)([B.W],t.prototype,"_handleMouseUp",null),(0,f.a)([B.W],t.prototype,"_handleClickEvent",null),(0,f.a)([B.W],t.prototype,"_handleTouchStart",null),(0,f.a)([B.W],t.prototype,"_handleTouchEnd",null),(0,f.a)([X],t.prototype,"_handleKeyEvent",null),(0,f.a)([X],t.prototype,"_handleCopy",null),(0,f.a)([X],t.prototype,"_handleCut",null),(0,f.a)([X],t.prototype,"_handlePaste",null),(0,f.a)([B.W],t.prototype,"_handleDrag",null),(0,f.a)([B.W],t.prototype,"_handleFocusEvent",null),(0,f.a)([B.W],t.prototype,"_handleResizeEvent",null),(0,f.a)([X],t.prototype,"triggerEditorEvent",null),t}(),q=function(){function t(){this.scroller=document.body,this.isActive=!1;var t=document.createElement("div");t.className="selection-cursor",this.cursor=t,document.body.appendChild(t)}var e=t.prototype;return e.setScroller=function(t){this.scroller=t,this.scroller.insertBefore(this.cursor,t.children[t.childElementCount-1])},e.getScroller=function(){return this.scroller},e.applyColor=function(t){null!=t&&t.startsWith("--")&&(t="var(".concat(t,")")),this.cursor.style.borderLeftColor=t||this.defaultColor},e.setDefaultColor=function(t){this.defaultColor=t},e.setActive=function(t,e){var n=this;void 0===e&&(e=!0),(this.isActive=t)?(this.cursor.classList.remove("animation-active"),this.cursor.classList.add("display-cursor"),e?setTimeout((function(){n.isActive&&n.cursor.classList.add("animation-active")}),100):this.cursor.classList.add("animation-active")):(this.cursor.classList.remove("display-cursor"),this.cursor.classList.remove("animation-active"))},e.setPosition=function(t){var e=t.top,n=t.left,i=t.height;t=this.cursor;this.isEqualRect({top:e,left:n,height:i},this.rect)||(t.style.top=e+"px",t.style.left=n+"px",t.style.height=i+"px")},e.isEqualRect=function(t,e){return!(!t||!e)&&t.top===e.top&&t.left===e.left&&t.height===e.height},t}(),Q=new q;var J,$=["resize","dragenter","dragover","dragleave","drop"],tt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}(0,s._)(e,t);var n=e.prototype;return n.hasAttribute=function(t,e){return!!this.getAttribute(t,e)},n.closest=function(t,e,n){var r=this;if(!t||!t.parent)return null;for(var o=[e.trim().slice(1,-1)],s=(0,i.ST)(t),a=t;a;){if(o.every((function(t){return r.hasAttribute(a,t)})))return a;if(null==n?void 0:n.every((function(t){return r.hasAttribute(a,t)})))break;if(!a.parent)break;a=s.getElementByEid(a.parent)}return null},n.contains=function(t,e){var n,r,o;if(!t||!e)return!1;if((null===(n=t.props.provides)||void 0===n?void 0:n.editor)&&(null===(r=t.props.provides)||void 0===r?void 0:r.editor)===(null===(o=e.props.provides)||void 0===o?void 0:o.editor))return!0;if(!e.parent)return!1;for(var s=(0,i.ST)(e),a=s.getElementByEid(e.parent);a;){if(a.eid===t.eid)return!0;if(!a.parent)return!1;a=s.getElementByEid(a.parent)}return!1},n.getAttribute=function(t,e){return Object.prototype.hasOwnProperty.call(t.props,e)&&t.props[e]},e}((function(){})),et=n("vsh_45377"),nt=n("vsh_77399"),it=n("vsh_44108"),rt=n("vsh_96752"),ot=n("vsh_68996");!function(t){t[t.FRONT=0]="FRONT",t[t.BEHIND=1]="BEHIND"}(J=J||{});var st,at=n("vsh_97731"),lt=n("vsh_66495"),ut=function(){function t(){var t=this;this.scrollThresholdOfBoundary=10,this.scrollSpeedDivider=20,this.scrollSpeed={x:null,y:null},this.scrollSmooth=function(){var e,n=t.scrollSpeed,i=t.scrollSpeedDivider,r=t.scrollContainer;null===n.y&&null===n.x||(null!==n.y&&0!==n.y&&(e=n.y/i,r.scrollTop+=Math.ceil(Math.abs(e))*(e/Math.abs(e))),null!==n.x&&0!==n.x&&(e=n.x/i,r.scrollLeft+=Math.ceil(Math.abs(e))*(e/Math.abs(e))),window.requestAnimationFrame(t.scrollSmooth))}}var e=t.prototype;return t.getInstance=function(e){var n=t.instance=t.instance?t.instance:new t;e=(n.scrollContainer=e).getBoundingClientRect();return n.containerRect={top:Math.max(0,e.top),bottom:Math.min(window.innerHeight,e.bottom),left:Math.max(0,e.left),right:Math.min(window.innerWidth,e.right)},t.instance},e.scrollIfNecessary=function(t){var e=(i=this).containerRect,n=i.scrollThresholdOfBoundary,i=i.scrollContainer;t.clientY<e.top+n?this.scrollSpeed.y=i.scrollTop?-Math.abs(e.top-t.clientY):null:t.clientY>e.bottom-n&&(this.scrollSpeed.y=i.scrollHeight-i.scrollTop-i.clientHeight?Math.abs(e.bottom-t.clientY):null),t.clientX<e.left+n?this.scrollSpeed.x=i.scrollLeft?-Math.abs(e.left-t.clientX):null:t.clientX>e.right-n&&(this.scrollSpeed.x=i.scrollWidth-i.scrollLeft-i.clientWidth?Math.abs(e.right-t.clientX):null),window.requestAnimationFrame(this.scrollSmooth)},e.cancelScroll=function(){this.scrollSpeed={x:null,y:null}},t}(),ct=function(){function t(t){var e=this;this.editor=t,this.hiddenInput=lt.f,this.startModelRange=null,this.handleMousemove=function(t){var n,i,r,o;e.startModelRange&&(e.scrollHelper.scrollIfNecessary(t),n=e.editor,(r=e.calcRangePointWhenMouseEvent(t,"mousemove"))&&((i=e.startModelRange.start).zoneId===(o=r).zoneId?(2===e.mouseEventDetail?(t=e.selectCurrWord(r),o=e.startModelRange.start<=t.start?t.end:(i=e.startModelRange.end,t.start)):3===e.mouseEventDetail&&(r=e.selectCurrParagraph(r),o=e.startModelRange.start<=r.start?r.end:(i=e.startModelRange.end,r.start)),o=new(e.editor.modulesContainer.get(u.h.Range))({start:i,end:o,editor:n}),n.selection.setSelection(o,!0)):e.editor.selection.updateViewSelection()))},this.handleMouseup=function(){e.scrollHelper.cancelScroll(),e.editor.inputModel.focus(),e.resetStatus(),document.removeEventListener("mousemove",e.handleMousemove),document.removeEventListener("mouseup",e.handleMouseup)},this.handleContextmenu=function(){window.setTimeout((function(){lt.f.setToBack()}))},this.handleSelectionChange=function(t){(t=t.current).isCollapsed()&&(e.startModelRange=t)},lt.f.on(d.Ly.CONTEXT_MENU,this.handleContextmenu),this.editor.on(l.r.SELECTION_CHANGE,this.handleSelectionChange),t=this.editor.getScrollContainer(),this.scrollHelper=ut.getInstance(t)}var e=t.prototype;return e.destroy=function(){lt.f.off(d.Ly.CONTEXT_MENU,this.handleContextmenu),this.editor.off(l.r.SELECTION_CHANGE,this.handleSelectionChange)},e.handleMousedown=function(t){var e,n,i,r,o=t.clientX,s=t.detail,a=t.button,l=t.shiftKey;1!==a&&(e=this.editor,(n=this.calcRangePointWhenMouseEvent(t,"mousedown"))&&(2!==a?(r=null,1===s?r=l&&this.startModelRange?new(this.editor.modulesContainer.get(u.h.Range))({start:this.startModelRange.isBackward?this.startModelRange.end:this.startModelRange.start,end:n,editor:e}):(i=(0,f.b)((0,f.b)({},n),{side:J.BEHIND}),a=e.rectModule.getRawCaretRect(n),l=e.rectModule.getRawCaretRect(i),i=Math.abs(a.left-o)<=Math.abs(l.left-o)?n:i,new(this.editor.modulesContainer.get(u.h.Range))({start:i,end:i,editor:e})):2===s?r=this.selectCurrWord(n):3===s&&(r=this.selectCurrParagraph(n)),r&&(e.selection.setSelection(r,!0),this.startModelRange=r,this.mouseEventDetail=s),document.addEventListener("mousemove",this.handleMousemove),document.addEventListener("mouseup",this.handleMouseup),t.preventDefault()):this.handleRightClick(t,n)))},e.handleRightClick=function(t,e){var n=t.clientX,i=t.clientY;t=(r=this.editor).selection.getSelection();(0,at.cA)(t,e)||(e=this.selectCurrWord(e),r.selection.setSelection(e,!0));var r=r.selection.getSelection(),o=this.editor.getContentState().getZoneState(r.start.zoneId);if(o){for(var s="",a=r.start,l=r.end,u=a.line;u<=l.line;u++){var c=(h=o.getLine(u)).getModelText(),d=u===a.line?a.offset:h.getLineMarker(),h=u===l.line?l.offset:h.length();s+=c.substring(d,h)}lt.f.updatePosition({top:i-5,left:n-5}),lt.f.setToFront(),lt.f.setTextAndSelectAll(s||" ")}},e.calcRangePointWhenMouseEvent=function(t,e){var n=t.clientX,i=t.clientY,r=D(n,i);return r?(t=r.textNode,n=r.offset,i=this.editor,(r=new Range).setStart(t,n),r.setEnd(t,n),(r=i.selection.toModelRange(r,{side:J.FRONT}))?r.start:(console.error("[selection] ".concat(e," return because can not convert view selection to model selection")),null)):(console.error("[selection] ".concat(e," return because can not convert coord to view selection")),null)},e.resetStatus=function(){this.mouseEventDetail=0},e.selectCurrWord=function(t){var e,n,i=(n=this.editor.getContentState().getZoneState(t.zoneId).getLine(t.line)).getModelText(),r=n.getLineMarker(),o=this.hiddenInput.expandWordRange({text:i,offset:t.offset,direction:"right"});return n=(n=Math.max(this.hiddenInput.expandWordRange({text:i,offset:o,direction:"left"}),r))<=t.offset?(e=n,o):(r=Math.max(this.hiddenInput.expandWordRange({text:i,offset:t.offset,direction:"left"}),r),r=this.hiddenInput.expandWordRange({text:i,offset:r,direction:"right"}),e=Math.min(r,t.offset),Math.max(n,t.offset+1)),new(this.editor.modulesContainer.get(u.h.Range))({start:(0,f.b)((0,f.b)({},t),{offset:e}),end:(0,f.b)((0,f.b)({},t),{offset:n}),editor:this.editor})},e.selectCurrParagraph=function(t){var e=(n=this.editor.getContentState().getZoneState(t.zoneId).getLine(t.line)).getLineMarker(),n=n.length()-1;return new(this.editor.modulesContainer.get(u.h.Range))({start:(0,f.b)((0,f.b)({},t),{offset:e}),end:(0,f.b)((0,f.b)({},t),{offset:n}),editor:this.editor})},t}(),dt=function(){function t(t){var e=t.editor;t=t.range;this.ranges=[],this.prevRanges=[],this.updateViewSelectionTimes=0,this.preViewSelection=null,this.editor=e,t&&(this.ranges.push(t),this.prevRanges.push(t)),this._mouseHandler=new ct(e),e.on(l.r.FOCUS,this.handleFocus),e.on(l.r.BLUR,this.handleBlur)}var e=t.prototype;return Object.defineProperty(e,"range",{get:function(){return this.ranges[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"prevRange",{get:function(){return this.prevRanges[0]},enumerable:!1,configurable:!0}),e.handleFocus=function(t){this.updateViewSelection()},e.handleBlur=function(t){},e.getRootNodeOfZone=function(t){return t&&(null===(t=this.editor.getContentState().getZoneState(t))||void 0===t?void 0:t.getContainer())||null},e.focus=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var i=null===(i=this.range)||void 0===i?void 0:i.start.zoneId;"boolean"==typeof(t=void 0!==t&&t)?n=e:i=t,!i||!n&&this.hasFocus(i)||this.getRootNodeOfZone(i)&&(this.editor.focus(),this.setSelection(this.ranges,!0))},e.hasFocus=function(t){var e=null!=t?t:null===(e=this.range)||void 0===e?void 0:e.start.zoneId;return!!e&&this.editor.isFocus(e)},e.getSelection=function(t,e){var n=this.range;return"string"==typeof t?n=this.ranges.find((function(e){return e.start.zoneId===t}))||null:e=t,e=e||this.editor.getContentState(),n&&e.getZoneState(n.start.zoneId)?n.clone(e):n},e.getMultipleSelection=function(){var t=this;return this.ranges.map((function(e){return t.editor.getContentState().getZoneState(e.start.zoneId)?e.clone():e}))},e.isZoneInSelection=function(t){for(var e=!1,n=0,i=this.ranges.length;n<i;++n)if(this.ranges[n].start.zoneId===t){e=!0;break}return e},e._calcCompleteModelRange=function(t){var e=this.editor,n=this.editor.modulesContainer.get(u.h.Range),i=null;switch((0,h.Z)(t.start)){case"number":i=new c.L((0,f.b)((0,f.b)({},t),{editor:e})).toRange();break;case"object":i=new n((0,f.b)((0,f.b)({},t),{editor:e}))}return i},e._correctModelRange=function(t){return new(this.editor.modulesContainer.get(u.h.Range))({editor:this.editor,start:this.fixRangePoint(t.start),end:this.fixRangePoint(t.end),isBackward:t.isBackward})},e.fixRangePoint=function(t){var e=this.editor,n=t.zoneId;return(e=e.getContentState().getZoneState(n))?(n=e.length()-1,t.line=Math.max(0,t.line),t.line>n&&(t.line=n,t.offset=e.getLine(n).getModelText().length-1),e=e.getLine(t.line),t.offset=Math.min(e.getModelText().length-1,t.offset),t.offset<=0&&(t.offset=e.hasLineMarker()?1:0),t):t},e._replaceSingleRangeModel=function(t,e){void 0===e&&(e=!1);var n,i=this._calcCompleteModelRange(t);!i||(t=-1===(n=this.ranges.findIndex((function(t){return t.start.zoneId===(null==i?void 0:i.start.zoneId)})))?null:this.ranges[n])&&(this.prevRanges=this.ranges,!e&&ot.W.isRangeEqual(t,i)||(i=this._correctModelRange(i),(t=this.ranges.slice(0))[n]=i,this.ranges=t))},e._setSelectionModel=function(t,e){var n,i,r=this;void 0===e&&(e=!1);t=Array.isArray(t)?t:[t];var o=[];try{for(var s=(0,f.e)(t),a=s.next();!a.done;a=s.next()){var l=a.value,u=this._calcCompleteModelRange(l);u&&o.push(u)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}this.prevRanges=this.ranges,!e&&ot.W.isRangesEqual(this.ranges,o)||(o=o.map((function(t){return r._correctModelRange(t)})),this.ranges=o)},e.setSelection=function(t,e){var n=!1!==e;void 0===e&&(e=!1),this._setSelectionModel(t),this._dispatchEvent(e),n&&this.updateViewSelection(e)},e._dispatchEvent=function(t){var e=this.ranges,n=this.prevRanges;!t&&ot.W.isRangesEqual(n,e)||this.range&&this.editor.call(l.r.SELECTION_CHANGE,{previousRanges:n,currentRanges:e,previous:this.prevRange,current:this.range,attributes:this.editor.getContentState().getAttributes(this.range.start,this.range.end)})},e.setCursorActive=function(t,e){this.cursor.setActive(t,e=void 0===e||e)},e.setCursorPosition=function(t){this._setCursorPosition(t)},e.isInSamePartOfLine=function(t,e){return t=this.editor.rectModule.getCaretRect(t),e=this.editor.rectModule.getCaretRect(e),(0,at.DP)(t,e)},e.isAtLineFirstPart=function(t){var e=this.editor.getContentState().getZoneState(t.zoneId);return!!e&&((e=e.getLine(t.line))?(e={line:t.line,offset:e.getLineMarker(),zoneId:t.zoneId},this.isInSamePartOfLine(t,e)):(console.error("[selection] isAtLineFirstPart error: line illegal"),!1))},e.isAtLineLastPart=function(t){var e=this.editor.getContentState().getZoneState(t.zoneId);return!!e&&((e=e.getLine(t.line))?(e={line:t.line,offset:e.length()-1,zoneId:t.zoneId},this.isInSamePartOfLine(t,e)):(console.error("[selection] isAtLineLastPart error: line illegal"),!1))},e.selectAll=function(t){void 0===t&&(t=N.S);var e,n,i=this.editor.getContentState().getZoneState(t);i&&(e=i.getLine(0),(n=i.getLine(i.length()-1))&&e&&(t=new(this.editor.modulesContainer.get(u.h.Range))({editor:this.editor,start:{line:0,offset:e.hasLineMarker()?1:0,zoneId:t},end:{line:i.length()-1,offset:n.length()-1,zoneId:t}}),this.setSelection(t),this.updateViewSelection()))},e.isSelectingAll=function(t){void 0===t&&(t=N.S);var e=this.getSelection(t);if(!e)return!1;var n=e.start,i=e.end,r=this.editor.getContentState().getZoneState(t);return!!r&&(e=r.length()-1,t=r.getLine(0),!(!(r=r.getLine(e))||!t)&&0===n.line&&n.offset===(t.hasLineMarker()?1:0)&&i.line===e&&i.offset===r.length()-1)},e._fixOffsetOverload=function(t){var e=(0,f.b)({},t),n=t.zoneId,i=t.line,r=t.offset,o=this.editor.getContentState().getZoneState(n);if(!o)return t;var s=o.getLine(i);if(!s)return t;var a=s.hasLineMarker()?1:0;n=s.length()-1;if(r<a)if(0<i){if(--e.line,!(s=o.getLine(e.line)))return t;e.offset=s.length()-1}else e.offset=a;return n<r&&(i<o.length()-1?(e.line+=1,e.offset=null!==(o=o.getLine(e.line))&&void 0!==o&&o.hasLineMarker()?1:0):e.offset=n),e},e.resetDomSelectionFlags=function(){this.preViewSelection=null,this.updateViewSelectionTimes=0},e.checkIsDeadLoop=function(t){var e=this;if(this.preViewSelection!==t||null===t)return this.resetDomSelectionFlags(),!1;if(this.updateViewSelectionTimes++,this.updateViewSelectionTimes>=100){var n="[Selection][_updateDOMSelection] 'update too many times: ".concat(this.updateViewSelectionTimes,"，\n          range:").concat(this.range);return 100===this.updateViewSelectionTimes&&setTimeout((function(){e.resetDomSelectionFlags(),console.warn(n)}),200),!0}return!1},e.destroy=function(){this.editor.off(l.r.FOCUS,this.handleFocus),this.editor.off(l.r.BLUR,this.handleBlur),this._mouseHandler.destroy()},e.toModelRange=function(t,e){return this._toModelRange(t,e)},(0,f.a)([B.W],t.prototype,"handleFocus",null),(0,f.a)([B.W],t.prototype,"handleBlur",null),t}();function ht(t){return"Text"===(null==t?void 0:t.type.key)}function ft(t,e){return Object.prototype.hasOwnProperty.call(t.props,e)&&!!t.props[e]}function pt(t,e,n){if(!t||!t.parent)return null;for(var r=t;r;){if(e.every((function(t){return ft(r,t)})))return r;if(null==n?void 0:n.every((function(t){return ft(r,t)})))break;if(!r.parent)break;r=(0,i.ST)(r).getElementByEid(r.parent)}return null}function vt(t,e){if(!t||!e)return!1;if(!e.parent)return!1;if(t.eid===e.eid)return!0;for(var n=(0,i.ST)(e),r=n.getElementByEid(e.parent);r;){if(r.eid===t.eid)return!0;if(!r.parent)return!1;r=n.getElementByEid(r.parent)}return!1}function gt(t,e,n){if(void 0===n&&(n=1/0),!t)return null;var r=[];return function t(o){var a,l,u;if(r.length!==n){var c=o.children.map((function(t){return(0,i.ST)(o).getElementByEid(t)})),d=function(n){if(!n)return"continue";e.every((function(t){return ft(n,t)}))&&r.push(n),(null===(u=n.children)||void 0===u?void 0:u.length)&&t(n)};try{for(var h=(0,s.c)(c),f=h.next();!f.done;f=h.next()){d(f.value)}}catch(t){a={error:t}}finally{try{f&&!f.done&&(l=h.return)&&l.call(h)}finally{if(a)throw a.error}}}}(t),r.length?r:null}function yt(t){var e;return t?(null===(e=t.children)||void 0===e?void 0:e.length)?yt((0,i.ST)(t).getElementByEid(t.children[0])):t:null}function mt(t){var e;return t?(null===(e=t.children)||void 0===e?void 0:e.length)?mt((0,i.ST)(t).getElementByEid(t.children[t.children.length-1])):t:null}function _t(t){var e,n;return ht(t)?(null===(e=t.props.content)||void 0===e?void 0:e.length)||0:(null===(n=t.children)||void 0===n?void 0:n.length)||0}function bt(t){var e;return void 0!==(null===(e=null==t?void 0:t.props.provides)||void 0===e?void 0:e[a.eu])||!!kt(t)}function Et(t){return!(!t||!ft(t,a.VI))}function St(t){return!(!t||!ft(t,a.q7))}function wt(t){return!(!t||!ft(t,a.nV)||St(t)||bt(t))}function Ct(t){return!!Pt(t)}function It(t){return t?pt(t,[a.PI],[a.PI]):null}function Tt(t,e,n){if(!t)return null;"string"==typeof e&&(e=[e]),"string"==typeof n&&(n=[n]);var i=pt(t,e,n),r=It(t);return i&&r&&vt(r,i)?i:null}function xt(t,e,n){if(!t)return null;var r=It(t);if(!r)return null;"string"==typeof e&&(e=[e]),"string"==typeof n&&(n=[n]);for(var o=t,s=null,a=(0,i.ST)(t);o&&o!==r&&(e.find((function(t){return ft(o,t)}))&&(s=o),!n.find((function(t){return ft(o,t)})));)o=o.parent?a.getElementByEid(o.parent):null;return s}function kt(t){return Tt(t,a.eu,a.MB)}function Mt(t){return Tt(t,a.sq,a.MB)}function Rt(t){var e,n,r,o=[],l=null===(e=t.props.provides)||void 0===e?void 0:e.zoneId,u=(0,i.ST)(t),c=[];for(c.push.apply(c,(0,s.d)([],(0,s.e)(t.children||[]),!1));c.length;){var d=c.pop(),h=u.getElementByEid(d);h&&(l&&(null===(n=h.props.provides)||void 0===n?void 0:n.zoneId)!==l||(ft(h,a.nV)||ft(h,a.eu)||ft(h,a.VI)?o.push(h):!(null===(r=h.children)||void 0===r?void 0:r.length)||ft(h,a.eu)||ft(h,a.Ks)||c.push.apply(c,(0,s.d)([],(0,s.e)(h.children||[]),!1))))}return o.reverse().filter((function(t){var e;return!ft(t,a.eu)||(null===(e=t.props[a.eu])||void 0===e?void 0:e.length)}))}function Pt(t){var e;return t?ft(t,a.VI)?t:(null===(e=gt(t,[a.VI],1))||void 0===e?void 0:e[0])||null:null}function Ot(t){return t&&ft(t,a.eu)?t.props[a.eu]:null}function Lt(t){var e;return(null===(e=t.props[a.eu])||void 0===e?void 0:e.length)||0}function Dt(t){var e=function(t){var e,n=0;ht(t)&&(n=(null===(e=t.props.content)||void 0===e?void 0:e.length)||0);return n}(t);if(e>0)return e;for(var n=0;n<t.children.length;n++){var r=(0,i.ST)(t).getElementByEid(t.children[n]);e+=r?Dt(r):0}return e}function At(t,e,n){if(!e||!t)return!1;if(e&&e===t)return!0;if(!t.parent)return!1;for(var r=(0,i.ST)(t),o=t,s=r.getElementByEid(t.parent);s;){var a="begin"===n?0:"end"===n?s.children.length-1:0;if(s.children.indexOf(o.eid)!==a)return!1;if(!s.parent)return!1;if(o=s,(s=r.getElementByEid(s.parent))===e)return!0}return!1}function zt(t,e){var n,i=It(e);if(i){var r=Rt(i),o=r.indexOf(t),a=r.indexOf(e);return o>a&&(a=(n=(0,s.e)([o,a],2))[0],o=n[1]),r.slice(o,a).every((function(t){return Et(t)}))}return!1}function Nt(t,e){if(!e)return!1;var n=e.startPoint.node.props.provides,i=e.endPoint.node.props.provides,r=null==n?void 0:n.zoneId,o=null==n?void 0:n.editor,s=null==i?void 0:i.zoneId,a=null==i?void 0:i.editor;return!o||!a||(t!==o||t!==a||(o!==a||(r&&s?r!==s:!(!r&&!s)||!r&&!s)))}function Wt(t,e,n){void 0===n&&(n=!1);var i=t._getViewModel(),r=i.getModel(e);if(!r){var o=pt(e,[a.Ks]);if(!o)return null;var s=gt(o,[a.PI]);if(!(null==s?void 0:s.length))return null;var l=i.getModel(o),u=(null==l?void 0:l.getZoneId())||o.props[a.P9];if(!u)return null;if(l||(l=t.getContentState().getZoneState(u)),!l)return null;var c=Array.from(s).indexOf(e),d=l.getLine(c);if(!d)return null;r=d}if(Array.isArray(r)){var h=r[0],f=r[r.length-1];r=n?f:h}return r}function Bt(t,e,n){var r=t.children,o=(0,i.ST)(t),s=o.getElementByEid(r[e]),a=e,l=!1,u=!1;if(!s)return null;for(;!(0!==(null==s?void 0:s.children.length)||l&&u);)a>=r.length?(l=!0,a=e-1,n="backward"):a<0?(u=!0,a=e+1,n="forward"):(s=o.getElementByEid(r[e]),a+="forward"===n?1:-1);return s}(st={})[a.VD.Left]=!1,st[a.VD.Up]=!1,st[a.VD.Right]=!0,st[a.VD.Down]=!0;var Kt,Zt;function jt(t,e){return t.node===e.node&&t.offset===e.offset}function Ut(t,e,n,r){var o,s,l,u,c,d,h,f;if(void 0===r&&(r=!0),wt(e.node))return e;if((f=e.node)&&ft(f,a.sq)||Mt(f)){var p=function(t){return xt(t,a.sq,a.MB)}(e.node);return p?{node:w=null!==(o=mt(p))&&void 0!==o?o:p,offset:S=_t(w)}:e}var v=It(e.node);if(!v)return e;var g=Rt(v),y=g.findIndex((function(t){return vt(t,e.node)}));if(-1===y)return e;var m=g[y+1],_=g[y-1],b=e.node,E=e.offset;if(Et(b)&&!bt(b))return bt(m)?{node:null!==(s=yt(b))&&void 0!==s?s:b,offset:0}:{node:w=null!==(l=mt(b))&&void 0!==l?l:b,offset:S=_t(w)};if(St(b)){if(!_)return e;var S=_t(w=null!==(u=mt(_))&&void 0!==u?u:_);return wt(_)?{node:w,offset:S}:Ut(t,{node:w,offset:S},n)}if(bt(b)){var w,C=null!==(c=function(t){return xt(t,a.eu,a.MB)}(b))&&void 0!==c?c:b;if((n===Zt.LINE||n===Zt.PARA)&&!(0,i.Ft)(t,C))r=E>=Dt(C)/2;if(Et(m)){var I=_t(null!==(d=mt(m))&&void 0!==d?d:m);return{node:(r=zt(t.node,r?m:_)?!r:r)?m:_,offset:r?I:0}}return{node:w=null!==(h=mt(C))&&void 0!==h?h:C,offset:S=_t(w)}}return e}function Vt(t){var e,n=t.node;if(bt(n))return t;var r=t.offset,o=t.atEnd,s=t.isEdge;if(null==n?void 0:n.children.length){var a=(0,i.ST)(t.node),l=(r=Math.min(r,n.children.length))===n.children.length,u=l?"backward":"forward",c=l?r-1:r;for(n=a.getElementByEid(n.children[c]);null==n?void 0:n.children.length;){n=Bt(n,l?n.children.length-1:0,u)}if(!n)return t;if("EmbedDOM"===n.type.key){var d=n.parent&&a.getElementByEid(n.parent);if(d)return{node:d,offset:r,atEnd:o,isEdge:s}}r=l&&((null===(e=n.props.content)||void 0===e?void 0:e.length)||0)}return{node:n,offset:r,atEnd:o,isEdge:s}}function Ft(t,e,n){if(!t.isCollapsed&&!e.isRange&&e.mode===Zt.CHAR){var r=t.isBackward?t.endPoint:t.startPoint;return e.forward&&(r=t.isBackward?t.startPoint:t.endPoint),{startPoint:r,endPoint:r,isBackward:!1,isCollapsed:!1}}var o=n||t,s=(0,i.r6)(t,e);if(!s)return t;if(jt(s.endPoint,t.endPoint))return e.mode!==Zt.LINE?t:(e.mode=Zt.INLINE,Ft(t,e,o));if(wt(s.endPoint.node)){if(Et(o.endPoint.node)||St(o.endPoint.node)){var a=It(s.endPoint.node),l=a&&Rt(a),u=null==l?void 0:l.findIndex((function(t){return vt(t,s.endPoint.node)})),c=void 0!==u&&l&&l[u-1];if(0===s.endPoint.offset&&c&&vt(c,o.endPoint.node))return Ft(s,e,o);var d=void 0!==u&&l&&l[u+1],h=_t(s.endPoint.node);if(s.endPoint.offset===h&&d&&vt(d,o.endPoint.node))return Ft(s,e,o)}return s}var f=Ut(o.endPoint,s.endPoint,e.mode,e.forward);if(e.mode===Zt.CHAR&&Et(f.node)){if(f.node===o.endPoint.node)return Ft(s,e,o);if(!(_t(o.endPoint.node)!==o.endPoint.offset&&0!==o.endPoint.offset||bt(t.endPoint.node)||n))return Ft(s,e,o);if(!jt(f,o.endPoint)&&Et(o.endPoint.node)&&!bt(o.endPoint.node)&&(0,i.Ft)(o.endPoint,f.node)&&zt(o.endPoint.node,f.node))return Ft(s,e,o)}return e.mode===Zt.LINE&&Et(f.node)&&f.node===o.endPoint.node?Ft(s,e,o):Object.assign({},s,{endPoint:f,startPoint:e.isRange?s.startPoint:f})}!function(t){t.LEFT="Left",t.UP="Up",t.RIGHT="Right",t.DOWN="Down",t.PAGE_UP="PageUp",t.PAGE_DOWN="PageDown",t.HOME="Home",t.END="End",t.MAC_CTRL_A="MacCtrlA",t.MAC_CTRL_E="MacCtrlE"}(Kt||(Kt={})),function(t){t.CHAR="char",t.WORD="word",t.LINE="line",t.INLINE="inline",t.PARA="para",t.DOC="doc"}(Zt||(Zt={}));var Ht=function(t){function e(e){var n=e.editor,i=e.range,r=e.context,o=t.call(this,{editor:n,range:i})||this;return o._handleRoadsterSelectionChange=function(){if(!o.editor.getStatus("stopUpdateSelection")){var t=o._getRoadsterRange();if(t&&!o._isUnEditableRange(t))if(Nt(o.editor,t))o._updateCaretAndHiddenInputPosition({currentRange:t});else{var e=o._toModelRange(t);e&&o.setSelection(e)}else o.editor.blur()}},o.context=r,o.cursor=Q,o}(0,s._)(e,t);var n=e.prototype;return n.updateViewSelection=function(t){var e,n,i=this.range;if(i&&!(this.ranges.length>1)){var r=this._toRoadsterRange(i),o=this._getRoadsterRange();o=function(t){if(!t)return null;var e=t.startPoint.node===t.endPoint.node&&t.startPoint.offset===t.endPoint.offset;return e&&!t.isCollapsed&&(t.isCollapsed=!0),e&&t.isBackward&&(t.isBackward=!1),t}(o);var s=function(t){return!t||null!==t.startPoint.node&&null!==t.endPoint.node&&"number"==typeof t.startPoint.offset&&"number"==typeof t.endPoint.offset}(r);if(s){var a=function(t,e){return t===e||!(!t||!e)&&t.startPoint.node===e.startPoint.node&&t.startPoint.offset===e.startPoint.offset&&t.startPoint.atEnd===e.startPoint.atEnd&&t.endPoint.node===e.endPoint.node&&t.endPoint.offset===e.endPoint.offset&&t.endPoint.atEnd===e.endPoint.atEnd&&t.isBackward===e.isBackward&&t.isCollapsed===e.isCollapsed}(r,o);(t||!Nt(this.editor,o)&&!a)&&(null===(n=(e=this.context).setSelection)||void 0===n||n.call(e,r)),this._updateCaretAndHiddenInputPosition({currentRange:r}),this.editor.call(l.r.SELECTION_CHANGE_AND_DOM_UPDATE,{selection:this.range,fromView:!t})}}},n._updateCaretAndHiddenInputPosition=function(t){var e,n,r=t.currentRange;!r&&this.range&&(r=this._toRoadsterRange(this.range));var o=null===(e=this._getRoadsterRange())||void 0===e?void 0:e.isCollapsed;if(this.editor.isFocus()){if(o&&r&&!this._needToHiddenCursor(r)){var s=(0,i.TK)(r),a=t.delayCursorAnimation,l=void 0===a||a;this._setCursorPosition(s,l);var u=null===(n=(0,i.Dx)(r.endPoint.node))||void 0===n?void 0:n.fontColor;this.cursor.applyColor(u)}else this._setCursorPosition(null);this.editor.inputModel.updatePosition()}},n._needToHiddenCursor=function(t){var e=(0,rt.Gi)(t.startPoint.node);if(!e)return!1;for(var n=(0,i.TK)(t),r=n.left,o=n.top,s=n.height;e;){var a=(0,rt.BC)(e),l=a.left,u=a.width,c=a.top,d=a.height;if(r<l||r>l+u||o>c+d||o+s<c)return!0;if(!e.parent)return!1;var h=this.context.getElementByEid(e.parent);if(!h)return!1;e=(0,rt.Gi)(h)}return!1},n.toRoadsterRange=function(t,e){return void 0===e&&(e={ignoreNormalize:!1}),this._toRoadsterRange(t,e)},n._getRoadsterRange=function(){var t,e,n;return null!==(n=null===(e=(t=this.context).getSelection)||void 0===e?void 0:e.call(t))&&void 0!==n?n:null},n._toRoadsterRange=function(t,e){var n;void 0===e&&(e={ignoreNormalize:!1});var i=t.start,r=t.end,o=t.isBackward;t.isCollapsed()&&(o=!1),o&&(i=(n=(0,s.e)([r,i],2))[0],r=n[1]);var a=this._toRoadsterRangePoint(i),l=this._toRoadsterRangePoint(r);if(!a.node||!l.node)return null;if(e.ignoreNormalize)return{startPoint:a,endPoint:l,isBackward:o,isCollapsed:t.isCollapsed()};var u=this._normalizeRoadsterRange(a,l,t);return{startPoint:u.start,endPoint:u.end,isBackward:o,isCollapsed:t.isCollapsed()}},n._toRoadsterRangePoint=function(t){var e,n=t.line,i=t.zoneId,r=t.offset,o=t.side,a=t.isEdge,l=this._getRoadsterLine(i,n);if(!l)return{node:null,offset:0};var u=null===(e=this.editor.getContentState().getZoneState(i))||void 0===e?void 0:e.getLine(n);return u?(0,s.a)((0,s.a)({},this._toRoadsterPoint(l,Math.max(r-((null==u?void 0:u.hasLineMarker())?1:0),0),o)),{atEnd:o===J.FRONT||o!==J.BEHIND&&void 0,isEdge:a}):{node:null,offset:0}},n._toRoadsterPoint=function(t,e,n){var i,r;if(!t)return{node:t,offset:0};for(var o=Rt(t),s=0,l=0;l<o.length;l++){var u=o[l],c=(null===(i=u.props.content)||void 0===i?void 0:i.length)||0;if(!!u.props[a.eu]){var d=u.props[a.eu];c=d?Math.min(d.length,e-s):0}if(!!u.props[a.VI]&&(c=0),!((s+=c)<e))return s===e&&(null===(r=o[l+1])||void 0===r?void 0:r.props[a.VI])&&n!==J.FRONT?{node:o[l+1],offset:0}:{node:u,offset:Math.max(c+e-s,0)}}return{node:t,offset:0}},n._normalizeRoadsterRange=function(t,e,n){var i,r,o,l;t=Vt(t),e=Vt(e);var u=t.node,c=t.offset,d=e.node,h=e.offset,f=n.start,p=n.end;n.isBackward&&(f=(i=(0,s.e)([p,f],2))[0],p=i[1]);var v=bt(u),g=bt(d),y=Et(u);if(!v&&!g&&(u&&u===d&&t.offset===e.offset&&(x=u)&&pt(x,[a.q7],[a.MB]))){var m={node:x,offset:0,isEdge:t.isEdge};return{start:m,end:m}}if(v&&Ct(u)&&u===d&&f<p)return{start:t,end:e};var _=(null===(r=Ot(kt(d)))||void 0===r?void 0:r.length)||0;if(v&&0===c&&Ct(u)&&g&&h===_&&Ct(d))return{start:t,end:e};if(v&&g&&u!==d&&!Ct(u)&&!Ct(d)){var b=this._getRoadsterLine(f.zoneId,f.line),E=this._getRoadsterLine(p.zoneId,p.line);return{start:this._amendRoadsterPoint(t,b,1),end:this._amendRoadsterPoint(e,E,1)}}if(n.isCollapsed()&&Ct(u)&&1===c){var S=It(u),w=S&&Rt(S),C=w?w.indexOf(u):-1;if(w&&C>=0&&bt(w[C+1]))return{start:{node:u,offset:0},end:{node:u,offset:0}};var I=this._getRoadsterLine(f.zoneId,f.line);return{start:M=this._amendRoadsterPoint(t,I,1),end:M}}var T=(null===(o=Ot(kt(u)))||void 0===o?void 0:o.length)||0;if(n.isCollapsed()&&v&&c===T){var x,k=this._getRoadsterLine(f.zoneId,f.line);return(x=(M=this._amendRoadsterPoint(t,k,1)).node)&&pt(x,[a.q7],[a.MB])&&(M.offset=1),{start:M,end:M}}if(n.isCollapsed()&&v&&0===c){k=this._getRoadsterLine(f.zoneId,f.line);return{start:M=this._amendRoadsterPoint(t,k,-1),end:M}}if(v&&g&&u!==d&&n.isBackward){var M;k=this._getRoadsterLine(p.zoneId,p.line);return{start:t,end:M=this._amendRoadsterPoint(e,k,1)}}var R=u&&this.context.getElementByEid(u.parent),P=null==R?void 0:R.children.findIndex((function(t){return t===u.eid}));if(y&&g&&R&&R.children[P+1]===d.eid&&Pt(d))return{start:(0,s.a)((0,s.a)({},e),{offset:0}),end:e};if(v&&0===c){k=this._getRoadsterLine(f.zoneId,f.line);return{start:this._amendRoadsterPoint(t,k,-1),end:e}}if(g&&0===h){k=this._getRoadsterLine(p.zoneId,p.line);return{start:t,end:this._amendRoadsterPoint(e,k,-1)}}if(v&&c===T&&g&&n.toPosition().len<=((null===(l=Ot(kt(d)))||void 0===l?void 0:l.length)||0))return{start:(0,s.a)((0,s.a)({},e),{offset:0}),end:e};if(v&&c===T){k=this._getRoadsterLine(f.zoneId,f.line);return{start:this._amendRoadsterPoint(t,k,1),end:e}}if(g&&h===_){k=this._getRoadsterLine(p.zoneId,p.line);return{start:t,end:this._amendRoadsterPoint(e,k,1)}}return{start:t,end:e}},n._getRoadsterLine=function(t,e){var n,r=this.editor._getViewModel(),o=null===(n=this.editor.getContentState().getZoneState(t))||void 0===n?void 0:n.getLine(e);if(!o)return null;var s=r.getView(o);if(!s){var a=t===N.S?this.editor.getContainer():(0,i.m5)(["data-zone-id-"+t],this.context.elementTree)[0],l=(0,i.m5)(["ace-line"],a).filter((function(e){return(0,i.ah)(e,["data-zone-id-"+t])===a}));s=l[o.index]}return s},n._amendRoadsterPoint=function(t,e,n){var i,r,o=(t=Vt(t)).node,l=t.atEnd;if(!e||!o)return t;ft(o,a.nV)||ft(o,a.eu)||ft(o,a.VI)||(o=kt(o));var u=Rt(e),c=u.indexOf(o),d=u[c+n]||o;if(d.props[a.eu]){var h=Pt(d);return h?{node:h,offset:n>0?0:(null===(i=h.props.content)||void 0===i?void 0:i.length)||0,atEnd:l}:this._amendRoadsterPoint((0,s.a)((0,s.a)({},t),{node:d}),e,1)}return{node:d,offset:n>0?0:(null===(r=d.props.content)||void 0===r?void 0:r.length)||0}},n._calcModelRangeFromRoadster=function(t){var e,n=t.startPoint,i=t.endPoint,r=t.isBackward,o=t.zoneId;if(!n||!i)return this.editor.error({message:"[Selection][_calcModelRangeFromRoadster] startPoint: ".concat(n,", endPoint: ").concat(i),level:z.W.ERROR}),null;if(r&&(n=(e=(0,s.e)([i,n],2))[0],i=e[1]),!o&&n.zoneId!==i.zoneId)return null;if(o&&n.zoneId!==i.zoneId){var a=this.editor.getContentState().getZoneState(o);if(!a)return null;var l=a.length()-1,c=a.getLine(l);if(!c)return null;o===n.zoneId?i={line:l,offset:c.length()-1,zoneId:o,isEdge:i.isEdge}:o===i.zoneId?n={line:0,offset:0,zoneId:o,isEdge:n.isEdge}:(n={line:0,offset:0,zoneId:o,isEdge:n.isEdge},i={line:l,offset:c.length()-1,zoneId:o,isEdge:i.isEdge})}return new(this.editor.modulesContainer.get(u.h.Range))({start:n,end:i,isBackward:r,editor:this.editor})},n._isUnEditableRange=function(t){var e,n,i=t.startPoint.node,r=t.endPoint.node;return void 0===(null===(e=i.props.provides)||void 0===e?void 0:e.zoneId)&&void 0===(null===(n=r.props.provides)||void 0===n?void 0:n.zoneId)},n.toModelRange=function(t,e){return this._toModelRange(t,e)},n._toModelRange=function(t,e){var n;if(void 0===e&&(e={}),!t)return null;var i=t.isCollapsed,r=t.isBackward,o=t.startPoint,s=t.endPoint;if(i&&(null===(n=o.node.props.provides)||void 0===n?void 0:n.editor)!==this.editor)return null;var a=e.curZoneId,l=this._toModelRangePoint(r?s:o,{isBackward:!1,curZoneId:a}),u=this._toModelRangePoint(r?o:s,{isBackward:!0,curZoneId:a});return l&&u?this._calcModelRangeFromRoadster({startPoint:i||r?u:l,endPoint:r?l:u,isBackward:r,zoneId:e.curZoneId}):null},n._toModelRangePoint=function(t,e){var n,i,r,o,l,u=e.isBackward,c=void 0!==u&&u,d=e.curZoneId,h=void 0===d?N.S:d,f=e.shouldJumpFakeText,p=void 0===f||f,v=Vt(t),g=v.node,y=v.offset,m=v.atEnd,_=v.isEdge,b=m?J.FRONT:!1===m?J.BEHIND:void 0,E=It(g);if(!g||!E||!Wt(this.editor,E,c)){if(!h)return null;var S=this.editor.getContentState().getZoneState(h);if(!S)return null;var w=S.length()-1,C=S.getLine(w);return C?c?{line:w,offset:C.length()-1,zoneId:N.S,side:b,isEdge:_}:{line:0,offset:0,zoneId:N.S,side:b,isEdge:_}:null}var I=Wt(this.editor,E,c);if(!I)return null;var T=I.getZoneId(),x=I.index,k=0,M=kt(g);M&&(y=0),(M&&t.offset>0||c)&&(p||(k=(null===(r=null==M?void 0:M.props[a.eu])||void 0===r?void 0:r.length)||0)),!c&&M&&p&&(!At(g,M,"begin")||At(g,M,"begin")&&t.offset>0)&&(k=(null===(o=null==M?void 0:M.props[a.eu])||void 0===o?void 0:o.length)||0);c&&M&&p&&(k=!At(g,M,"end")||At(g,M,"end")&&(ht(t.node)&&!function(t,e){return t.props.content.length===e}(t.node,t.offset)||!ht(t.node)&&0===t.offset)?0:(null===(l=null==M?void 0:M.props[a.eu])||void 0===l?void 0:l.length)||0);var R=Mt(g);if(R&&(y=0,k=0,M=R),M||(M=pt(g,[a.nV],[a.MB])),!M){var P=Rt(E),O=P.indexOf(t.node),L=O>-1?P.slice(0,O):[],D=0;try{for(var A=(0,s.c)(L),z=A.next();!z.done;z=A.next()){var W=z.value;bt(W)?D+=Lt(W):Et(W)||(D+=Dt(W))}}catch(t){n={error:t}}finally{try{z&&!z.done&&(i=A.return)&&i.call(A)}finally{if(n)throw n.error}}var B=D+(I.hasLineMarker()?1:0)+k;return{line:x,offset:Math.max(B,0),zoneId:T,side:b,isEdge:_}}M.props[a.q7]&&(y=0);var K=this.editor._getViewModel().getLeafModel(M);if(!K)return null;var Z=(K.start||0)+y+k+(I.hasLineMarker()?1:0);return{line:x,offset:Math.max(Z,0),zoneId:T,side:b,isEdge:_}},n.handleMovementKey=function(t){var e,n=t.evt;if(n.preventDefault(),"keydown"===n.type){var i=function(t){var e,n,i=t.shiftKey,r=t.metaKey,o=t.altKey,s=t.keyCode,l=t.ctrlKey;return p.Xh.isMac&&l&&!i?{key:((e={})[a.VD.A]=Kt.MAC_CTRL_A,e[a.VD.E]=Kt.MAC_CTRL_E,e[a.VD.F]=Kt.RIGHT,e[a.VD.B]=Kt.LEFT,e[a.VD.P]=Kt.UP,e[a.VD.N]=Kt.DOWN,e)[s]||null,shiftKey:i,metaKey:r,altKey:o,ctrlKey:l}:{key:((n={})[a.VD.Left]=Kt.LEFT,n[a.VD.Up]=Kt.UP,n[a.VD.Right]=Kt.RIGHT,n[a.VD.Down]=Kt.DOWN,n[a.VD.PageUp]=Kt.PAGE_UP,n[a.VD.PageDown]=Kt.PAGE_DOWN,n[a.VD.Home]=Kt.HOME,n[a.VD.End]=Kt.END,n)[s]||null,shiftKey:i,metaKey:r,altKey:o,ctrlKey:l}}(n),r=i.shiftKey,o=i.key,s=Kt.LEFT,l=Kt.UP,u=Kt.RIGHT,c=Kt.DOWN,d=Kt.PAGE_UP,h=Kt.PAGE_DOWN,f=Kt.HOME,v=Kt.END;if(-1!==[s,l,u,c,Kt.MAC_CTRL_A,Kt.MAC_CTRL_E,f,v,d,h].indexOf(o)&&!this.editor.getStatus("stopUpdateSelection")){var g=this._getRoadsterRange(),y=function(t,e){var n=t.metaKey,i=t.altKey,r=t.shiftKey,o=t.ctrlKey,s=t.key,a=Kt.UP,l=Kt.DOWN,u=Kt.LEFT,c=Kt.RIGHT,d=Kt.HOME,h=Kt.END,f=Kt.MAC_CTRL_A,p=Kt.MAC_CTRL_E,v=Kt.PAGE_UP,g=Kt.PAGE_DOWN,y=Zt.CHAR,m=Zt.WORD,_=Zt.LINE,b=Zt.INLINE,E=Zt.PARA,S=Zt.DOC;if([d,h].includes(s))return{mode:b,isRange:e,forward:s===h};if([f,p].includes(s))return{mode:E,isRange:e,forward:s===p};if(n&&[a,l].includes(s)||[v,g].includes(s))return{mode:S,isRange:e,forward:[l,g].includes(s)};var w=[c,l].includes(s);return n||r&&o||![u,c].includes(s)?!n&&[a,l].includes(s)?{mode:_,isRange:e,forward:w}:(n||r&&o)&&[u,c].includes(s)?{mode:b,isRange:e,forward:w}:i&&[u,c].includes(s)?{mode:m,isRange:e,forward:w}:null:{mode:y,isRange:e,forward:w}}(i,r);if(g&&y){var m=Ft(g,y),_=this._toModelRange(m);!_||this.range&&ot.W.isRangeEqual(_,this.range)||(this.setSelection(_,!0),null===(e=this.editor.scrollModule)||void 0===e||e.scrollIntoViewport(_.end),n.preventDefault())}}}},n._setCursorPosition=function(t,e){if(void 0===e&&(e=!0),t&&this.editor.isEditable()){var n=this.context.container;n&&n!==this.cursor.getScroller()&&this.cursor.setScroller(n);var i=this.context.getScrollStatus(),r=i.scrollTop,o=i.scrollLeft;this.cursor.setPosition({top:t.top+r-.1*t.height,left:t.left+o,height:1.2*t.height}),this.cursor.setActive(!0,e)}else this.cursor.setActive(!1)},n.getElementRange=function(t,e){var n,i;if(!t)return null;e||(e={start:0,end:(null===(n=t.props["data-fake-text"])||void 0===n?void 0:n.length)||(null===(i=t.props.content)||void 0===i?void 0:i.length)||t.children.length});var r=e.start,o=e.end;return this._toModelRange({startPoint:{node:t,offset:r},endPoint:{node:t,offset:o},isBackward:!1,isCollapsed:!1})},n.isSelectionInEditor=function(t){var e,n=this.editor.editorUtils,i=this._getRoadsterRange();if(!i)return!1;var r=t?null===(e=this.editor.getContentState().getZoneState(t))||void 0===e?void 0:e._node:this.editor.getContainer(),o=i.startPoint.node,s=i.endPoint.node;return n.contains(r,o)&&n.contains(r,s)},n.contains=function(t,e){return vt(t,e)},n.getNormalizedNextRange=function(t,e){return Ft(t,e)},e}(dt),Xt=n("vsh_27877"),Yt=function(){function t(t){t=t.editor,this.cache=new Map,this.name="rect",this.editor=t}var e=t.prototype;return e.getCaretRect=function(t,e){return void 0===e&&(e=N.S),this.getPositionRect(t,e)},e.getRawCaretRect=function(t){var e=t.line,n=t.offset,i=t.zoneId,r=(t=void 0===(r=t.side)?J.FRONT:r,this.editor.rectModule._getRawRect({start:{line:e,offset:n-1,zoneId:i},end:{line:e,offset:n,zoneId:i}},{ignoreNormalize:!1}));return t===J.FRONT?(0,f.b)((0,f.b)({},r),{left:r.right,width:0}):(i=this.editor.rectModule._getRawRect({start:{line:e,offset:n,zoneId:i},end:{line:e,offset:n+1,zoneId:i}},{ignoreNormalize:!1}),.1<r.right-i.left?(0,f.b)((0,f.b)({},i),{right:i.left,width:0}):(0,f.b)((0,f.b)({},r),{left:r.right,width:0}))},e.getLineRect=function(t,e){return void 0===e&&(e=N.S),this.getPositionRect((0,f.b)((0,f.b)({},t),{offset:void 0}),e)},e.getZoneRect=function(t,e){return void 0===e&&(e=N.S),this.getPositionRect({zoneId:t},e)},e.clearCache=function(){this.cache.clear()},e.clearZoneRect=function(t){var e=this,n=[];this.cache.forEach((function(e,i){i.startsWith(t)&&n.push(i)})),n.forEach((function(t){return e.cache.delete(t)}))},t}();function Gt(t){return{left:t.left,top:t.top,bottom:t.top+t.height,right:t.left+t.width,width:t.width,height:t.height}}var qt=function(t){function e(e){var n=e.editor,i=e.context,r=t.call(this,{editor:n})||this;return r.context=i,r}(0,s._)(e,t);var n=e.prototype;return n.getRangeRect=function(t,e){void 0===e&&(e=N.S);var n=this.editor.getContentState().getZoneState(e),r=this._getRawRect(t,{ignoreNormalize:!1});if(!(null==n?void 0:n._node))return this.editor.error({message:"zoneState._node undefined, zoneId: ".concat(null==n?void 0:n.getZoneId()),level:a.WV.ERROR}),r;var o=Gt((0,i.Dz)(n._node));return(0,s.a)((0,s.a)({},r),(0,Xt.s8)(r,o))},n.getElementRect=function(t){return Gt((0,i.Dz)(t))},n._getRawRect=function(t,e){var n,r=this.editor.modulesContainer.get(u.h.Range);n="zoneId"in t?new r({editor:this.editor,start:t,end:t}):"toPosition"in t?t:new r({editor:this.editor,start:t.start,end:t.end});var o=this.editor.getContentState().getZoneState(n.start.zoneId);if(!o)return console.warn("point zoneId is invalid!"),{left:0,right:0,top:0,bottom:0,width:0,height:0};(0,Xt.xR)(o,n.start),n.start!==n.end&&(0,Xt.xR)(o,n.end);var s=this.editor.selection.toRoadsterRange(n,{ignoreNormalize:e.ignoreNormalize});if(!s)return console.warn("to can find roadster range"),{left:0,right:0,top:0,bottom:0,width:0,height:0};var a,l=s.startPoint,c=s.endPoint,d=this.getRectContainer(l.node,c.node);return 0===(a=d?(0,i.Dz)(d):(0,i.Dz)(s)).height&&0===a.left&&0===a.top&&0===a.width&&s.startPoint.node&&(a=(0,i.Dz)(l.node)),Gt(a)},n.getRawLineRect=function(t){var e,n=this.editor.getContentState().getZoneState(t.zoneId);if(!n)return console.warn("point zoneId is invalid!"),{left:0,right:0,top:0,bottom:0,width:0,height:0};(0,Xt.xR)(n,t);var r=null===(e=n.getLine(t.line))||void 0===e?void 0:e._node;if(!r)return{left:0,right:0,top:0,bottom:0,width:0,height:0};var o=(0,i.Dz)(r);return o?Gt(o):{left:0,right:0,top:0,bottom:0,width:0,height:0}},n.getPositionRect=function(t,e){var n;void 0===e&&(e=N.S);var r=this.editor.getContentState(),o=r.getZoneState(t.zoneId);if(!o)return console.warn("point zoneId is invalid!"),{left:0,right:0,top:0,bottom:0,width:0,height:0};(0,Xt.xR)(o,t);var l=this.cache.get((0,Xt.ah)(t,e));if(l)return l;var u=void 0===t.line,c=void 0!==t.line&&void 0===t.offset,d=void 0!==t.line&&void 0!==t.offset,h={left:0,right:0,top:0,bottom:0,width:0,height:0},f={left:0,right:0,top:0,bottom:0,width:0,height:0},p=null===(n=r.getZoneState(e))||void 0===n?void 0:n._node;if(!p)return this.editor.error({message:"relativeZoneNode undefined, relativeZone: ".concat(e),level:a.WV.ERROR}),h;if(u){if(!o._node)return this.editor.error({message:"zoneState._node undefined, zoneId: ".concat(t.zoneId),level:a.WV.ERROR}),h;h=Gt((0,i.Dz)(o._node)),f=Gt((0,i.Dz)(p))}else c?(h=this.getRawLineRect(t),f=Gt((0,i.Dz)(p))):d&&(h=this.getRawCaretRect(t),f=Gt((0,i.Dz)(p)));if(u&&t.zoneId===e)return h;var v=(0,s.a)((0,s.a)({},h),(0,Xt.s8)(h,f));return this.cache.set((0,Xt.ah)(t,e),v),v},n.getEditorRect=function(){var t=(0,i.Dz)(this.editor.getContainer()),e=this.context.canvas;if(!e)return{left:0,right:0,top:0,bottom:0,width:0,height:0};var n=e.getBoundingClientRect();return(0,s.a)((0,s.a)({},t),{left:t.left+n.left,top:t.top+n.top})},n._getEditorRectRelativeContainer=function(){var t=(0,i.Dz)(this.editor.getContainer()),e=this.context.getScrollStatus(),n=e.scrollTop,r=e.scrollLeft;return(0,s.a)((0,s.a)({},t),{left:t.left+r,top:t.top+n})},n._getSelectionRect=function(){var t=this.editor.selection.getSelection(),e=this.editor.selection.toRoadsterRange(t);if(!e)return null;var n=(0,i.Dz)(e),r=this.context.getScrollStatus(),o=r.scrollTop,a=r.scrollLeft;return(0,s.a)((0,s.a)({},n),{top:n.top+o,left:n.left+a})},n.getRectContainer=function(t,e){return t.parent&&t.parent===e.parent&&pt(t,[a.Pk])},e}(Yt),Qt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.editableElem=null,e.scroller=window,e.removeResizeEvent=function(){},e}(0,s._)(e,t);var n=e.prototype;return n.onMount=function(){var t=this.editor;this.props,t.editorUtils=new tt;var e=t.getContentState().getZoneState(N.S);if(null==e?void 0:e.length()){var n=e.getLine(0).getLineMarker(),i=new c.L({start:n,len:0,zoneId:N.S,editor:t});t.selection=new Ht({editor:t,range:i.toRange(),context:this.$context})}else t.selection=new Ht({editor:t,context:this.$context});t.rectModule=new qt({editor:t,context:this.$context});var r=t.modulesContainer.get(u.h.InputModel);t.inputModel=new r(t,this.$context.container)},n.handleRef=function(t){this.editor.init({element:t})},n.handleRoadsterResize=function(){var t=this;this.$context.once(o.FP.LAYOUT,(function(){t.editor.isFocus()&&t.editor.selection.updateViewSelection()}))},n.handleLayout=function(){this.editor.setRect(),this.editor.selection._updateCaretAndHiddenInputPosition({delayCursorAnimation:!1})},n.bind=function(){this.removeResizeEvent=(0,nt.W9)(this.$context.container||null,this.editor._handleResizeEvent),this.$context.on(o.FP.LAYOUT,this.handleLayout),this.$context.on(o.FP.RESIZE,this.handleRoadsterResize),this.$context.on(o.FP.SELECTION_CHANGE,this.handleRoadsterSelectionChange,{priority:10}),this.$context.on(l.r.PAINT,this.handlePaint)},n.unbind=function(){this.removeResizeEvent(),this.$context.off(o.FP.LAYOUT,this.handleLayout),this.$context.off(o.FP.RESIZE,this.handleRoadsterResize),this.$context.off(o.FP.SELECTION_CHANGE,this.handleRoadsterSelectionChange),this.$context.off(l.r.PAINT,this.handlePaint)},n.handleRoadsterSelectionChange=function(){this.editor.selection._handleRoadsterSelectionChange()},n.handleRoadsterMouseDown=function(t){var e=this.props.isFocusAllArea;t.target&&(e||(0,i.ah)(t.target,[a.r0]))&&this.editor.focus(),this.editor._handleMouseDown(t.nativeEvent)},n.handlePaint=function(){this.editor.call(l.r.PAINT)},n.render=function(){var t,e,n=this.editor,i=this.props,o=i.style,a=i.placeholder,l=i.isInline,u=i.children,c=i.autoScroll,h=i.editable,f=i.copyable,p=N.S,v=this.getScroller(),g={};try{for(var y=(0,s.c)(this.editor._listenEvents),m=y.next();!m.done;m=y.next()){var _=m.value;d.aW.includes(_)||$.includes(_)||(g[_]=this.handleEvent)}}catch(e){t={error:e}}finally{try{m&&!m.done&&(e=y.return)&&e.call(y)}finally{if(t)throw t.error}}return g.mousedown=this.handleRoadsterMouseDown,g.mouseup=this.editor._handleMouseUp,g.touchstart=this.editor._handleTouchStart,g.touchend=this.editor._handleTouchEnd,g.click=this.editor._handleClickEvent,(0,nt.MO)(o||{}),(0,r.azq)(et.L,{provides:{editor:n,zoneId:p},on:g,zoneId:p,style:Object.assign({},o),editor:n,onCreate:this.onMount,onRef:this.handleRef,scroller:v,autoScroll:c,editable:h,copyable:f},null!=u?u:(0,r.azq)(it.C,{isInline:l,placeholder:a,zoneId:p,style:Object.assign({},o),editor:n}))},(0,s.b)([B.W],e.prototype,"handleRoadsterResize",null),(0,s.b)([B.W],e.prototype,"handleLayout",null),(0,s.b)([B.W],e.prototype,"handleRoadsterSelectionChange",null),(0,s.b)([B.W],e.prototype,"handleRoadsterMouseDown",null),(0,s.b)([B.W],e.prototype,"handlePaint",null),e}(r.wA2),Jt=function(t){var e;function n(t){var n,i=e.call(this,t)||this;return i.editableElem=null,i.scroller=document.body,i.handleEvent=function(t){var e=i.editor;e._correctCompositionIfNecessary(t),e[A.P[t.type]](t)},i.handleSelectionChange=function(){var t=i.editor.selection.getSelection();i.editor.getContentState().setActiveZone(t.start.zoneId)},i.setScrollRef=function(t){i.scroller=t},i.handleEditorError=function(t){var e,n;null!==(n=(e=i.props).onError)&&void 0!==n&&n.call(e,t)},i.delegator=null!==(n=t.eventDelegator)&&void 0!==n?n:y,t.editor?(i.editor=t.editor,t.copyable&&(i.editor.copyable=t.copyable),t.editable&&i.editor.setEditable(t.editable)):i.editor=new G((0,f.b)((0,f.b)({},i.props),{initData:t.initData,eventDelegator:i.delegator})),i}return e=t,(0,f.c)(n,e),n.prototype.handleRef=function(t){e.prototype.handleRef.call(this,t),this.editableElem=t},n.prototype.onMount=function(){var t,n=this.editor,i=this.props;e.prototype.onMount.call(this),n.setMounted(!0),n.callAll("editorDidMount"),this.editor.getRootContainer()&&this.editor.setRect(),this.bind(),null!==(t=i.onInit)&&void 0!==t&&t.call(i,n),null!==(t=i._onInitData)&&void 0!==t&&t.call(i,n),i.cursorColor?Q.setDefaultColor(i.cursorColor):Q.setDefaultColor("#000")},n.prototype.bind=function(){e.prototype.bind.call(this);var t=this.editor;t.on(l.r.SELECTION_CHANGE,this.handleSelectionChange),t.on(l.r.ERROR,this.handleEditorError),t.on(l.r.KEYDOWN,this._handleShortcuts),t.on(l.r.RECT_CHANGE,this._handleEditorRectChange),t.on(l.r.SCROLL,this._handleEditorScroll)},n.prototype._handleShortcuts=function(t){this._maybeSelectAll(t)},n.prototype._maybeSelectAll=function(t){var e=t.keyCode,n=t.shiftKey,i=t.metaKey,r=t.altKey,o=t.ctrlKey;n||r||(p.Xh.isMac||p.Xh.isIPad?i:o)&&e===a.VD.A&&(e=this.editor.selection.getSelection().start.zoneId,this.editor.selection.selectAll(e),t.preventDefault())},n.prototype._handleEditorRectChange=function(){this.editor.rectModule.clearCache(),this.editor.setRect()},n.prototype._handleEditorScroll=function(){this.editor.rectModule.clearCache()},n.prototype.getScroller=function(){return("object"==(0,h.Z)(this.props.scroller)?this.props:this).scroller},n.prototype.unbind=function(){var t=this.editor;e.prototype.unbind.call(this),t.off(l.r.SELECTION_CHANGE,this.handleSelectionChange),t.off(l.r.ERROR,this.handleEditorError),t.off(l.r.KEYDOWN,this._handleShortcuts),t.off(l.r.RECT_CHANGE,this._handleEditorRectChange),t.off(l.r.SCROLL,this._handleEditorScroll)},n.prototype.componentDidUpdate=function(t){var e=t.editable,n=void 0===(i=t.copyable)||i,i=void 0===(i=(t=this.props).editable)||i;t=void 0===(t=t.copyable)||t;i!==(void 0===e||e)&&this.editor.setEditable(i),t!==n&&(this.editor.copyable=t)},n.prototype.componentWillUnmount=function(){var t=this.editor;this.unbind(),t._getViewModel().destroy(),t.destroy()},n.prototype._setPlaceHolder=function(t){this.editor._setPlaceholder(t)},n.prototype.componentDidCatch=function(t){this.editor.error({e:t,level:z.W.FATAL,message:t.message})},(0,f.a)([B.W],n.prototype,"handleRef",null),(0,f.a)([B.W],n.prototype,"onMount",null),(0,f.a)([B.W],n.prototype,"_handleShortcuts",null),(0,f.a)([B.W],n.prototype,"_handleEditorRectChange",null),(0,f.a)([B.W],n.prototype,"_handleEditorScroll",null),n}(Qt)},vsh_71265:function(t,e,n){"use strict";n.d(e,{L:function(){return r}});var i=n("vsh_42553");function r(t){var e,n,r=[];try{for(var o=(0,i._)(Object.entries(t)),s=o.next();!s.done;s=o.next()){var a=(0,i.a)(s.value,2),l=a[0],u=a[1];r.push([l,u])}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}},vsh_59280:function(t,e,n){"use strict";n.d(e,{A:function(){return r}});var i=n("vsh_42553");function r(t){var e,n,r={};try{for(var o=(0,i._)(t),s=o.next();!s.done;s=o.next()){var a=s.value;r[a[0]]=a[1]}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}},vsh_33378:function(t,e,n){"use strict";function i(t,e,n){var i=null==n?void 0:n.value;return"function"!=typeof i&&console.error("Only methods can be decorated with @Bind. <".concat(e,"> is not a method!")),{configurable:!0,get:function(){if(this===t.prototype||this.hasOwnProperty(e)||"function"!=typeof i)return i;var n=i.bind(this);return Object.defineProperty(this,e,{value:n,configurable:!0,writable:!0}),n}}}n.d(e,{W:function(){return i}})},vsh_22432:function(t,e,n){"use strict";var i;function r(t){return function(e){return function(n,i,r){var o=r.value;r.value=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var r=this;try{return o.apply(r,n)}catch(n){t?t.call(r,{e:n,level:e,message:n.message}):console.error(n)}}}}}n.d(e,{W:function(){return i},K:function(){return r}}),function(t){t[t.FATAL=0]="FATAL",t[t.ERROR=1]="ERROR"}(i||(i={}))},vsh_93928:function(t,e,n){"use strict";n.d(e,{S:function(){return i}});var i="0"},vsh_18776:function(t,e,n){"use strict";n.d(e,{D:function(){return r}});var i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function r(t){void 0===t&&(t=20);for(var e="",n=0;n<t;n++){var r=Math.floor(Math.random()*i.length);e+=i[r]}return e}},vsh_52531:function(t,e,n){"use strict";n.d(e,{X:function(){return d}});var i=Object.prototype.toString;function r(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":i.call(t)}var o=n("vsh_65498");function s(t){return"object"===(0,o.Z)(t)&&null!==t}var a=Symbol.prototype.valueOf;function l(t,e){return t===e||t!=t&&e!=e}function u(t){return null==t}function c(t,e,n,i){if(t===e)return!0;if(u(t)||u(e)||!s(t)&&!s(e)&&"function"!=typeof t)return l(t,e);var o=r(t),d=r(e);if(o!==d)return!1;var h=n.indexOf(t);if(h===i.indexOf(e)&&h>=0)return!0;if(n.push(t),i.push(e),("[object Array]"===o?t.length:Object.keys(t).length)!==("[object Array]"===d?e.length:Object.keys(e).length))return!1;if("[object Array]"===o){for(var f=0;f<t.length;f++)if(!c(t[f],e[f],n.slice(),i.slice()))return!1;return!0}if("[object Object]"===o){for(var p in t)if(t.hasOwnProperty(p)&&!1===c(t[p],e[p],n.slice(),i.slice()))return!1;return!0}return"[object Function]"===o?t.toString()===e.toString():["[object Number]","[object Boolean]","[object Date]"].includes(o)?l(+t,+e):"[object String]"===o?"".concat(t)==="".concat(e):!("[object Symbol]"!==o||!a)&&a.call(t)===a.call(e)}function d(t,e){return c(t,e,[],[])}},vsh_1707:function(t,e,n){"use strict";function i(t){return t.replace(/\r\n/g,"\n").replace(/\r/g,"\n")}n.d(e,{$:function(){return i}})},vsh_52016:function(t,e,n){"use strict";n.d(e,{P:function(){return o}});var i=n("vsh_65498");function r(t,e,n){var r,o,s,a,l,u,c=0,d=!1,h=!1,f=!0,p=!e&&0!==e&&"function"==typeof window.requestAnimationFrame;if("function"!=typeof t)throw new TypeError("Expected a function");function v(e){var n=r,i=o;return r=o=void 0,c=e,a=t.apply(i,n)}function g(t,e){return p?(window.cancelAnimationFrame(l),window.requestAnimationFrame(t)):setTimeout(t,e)}function y(t){return c=t,l=g(_,e),d?v(t):a}function m(t){var n=t-u;return void 0===u||n>=e||n<0||h&&t-c>=s}function _(){var t=Date.now();if(m(t))return b(t);l=g(_,function(t){var n=t-c,i=e-(t-u);return h?Math.min(i,s-n):i}(t))}function b(t){return l=void 0,f&&r?v(t):(r=o=void 0,a)}function E(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=Date.now(),s=m(i);if(r=t,o=this,u=i,s){if(void 0===l)return y(u);if(h)return l=g(_,e),v(u)}return void 0===l&&(l=g(_,e)),a}return e=+e||0,"object"===(0,i.Z)(n)&&(d=!!n.leading,s=(h="maxWait"in n)?Math.max(+n.maxWait||0,e):s,f="trailing"in n?!!n.trailing:f),E.cancel=function(){void 0!==l&&function(t){if(p)return window.cancelAnimationFrame(t);clearTimeout(t)}(l),c=0,r=u=o=l=void 0},E.flush=function(){return void 0===l?a:b(Date.now())},E.pending=function(){return void 0!==l},E}function o(t,e,n){var o=!0,s=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return"object"===(0,i.Z)(n)&&(o="leading"in n?!!n.leading:o,s="trailing"in n?!!n.trailing:s),r(t,e,{leading:o,trailing:s,maxWait:e})}},vsh_42553:function(t,e,n){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function i(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function r(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}n.d(e,{_:function(){return i},a:function(){return r}})},vsh_93920:function(){}}]);
//# sourceMappingURL=//slardar.bytedance.net/api_v2/browser/jserr/get_sourcemap?bid=docs_pc&js_filename=editor_kit_micro.a555a11a.js